(function(){"use strict";var a={1274:function(a,e,t){a.exports=t.p+"img/icon-sprite.cec624bc.svg"},7162:function(a,e,t){var s={};t.r(s),t.d(s,{W:function(){return bt}});var i={};t.r(i),t.d(i,{NO:function(){return SA},LC:function(){return AA},ph:function(){return TA},TV:function(){return BA}});t(8111),t(2489);var l=t(5130),n=t(6768);function o(a,e){const t=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.Wv)(t)}var r=t(1241);const c={},d=(0,r.A)(c,[["render",o]]);var u=d,m=(t(3579),t(1387)),k=t(4232);const h={key:0,class:"loader-wrapper"},g={id:"goo"},p={key:1},b={class:"page-body-wrapper"},f=["sidebar-layout"];function L(a,e,t,s,i,o){const r=(0,n.g2)("fegaussianblur"),c=(0,n.g2)("fecolormatrix"),d=(0,n.g2)("Header"),u=(0,n.g2)("Sidebar"),m=(0,n.g2)("router-view"),L=(0,n.g2)("Footer"),y=(0,n.g2)("TapTop");return i.loading?((0,n.uX)(),(0,n.CE)("div",h,[e[2]||(e[2]=(0,n.Lk)("div",{class:"loader-index"},[(0,n.Lk)("span")],-1)),((0,n.uX)(),(0,n.CE)("svg",null,[e[1]||(e[1]=(0,n.Lk)("defs",null,null,-1)),(0,n.Lk)("filter",g,[(0,n.bF)(r,{in:"SourceGraphic",stddeviation:"11",result:"blur"}),(0,n.bF)(c,{in:"blur",values:"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 19 -9",result:"goo"})])]))])):((0,n.uX)(),(0,n.CE)("div",p,[(0,n.Lk)("div",{class:(0,k.C4)(["page-wrapper",i.layoutobj]),id:"pageWrapper"},[(0,n.Lk)("div",{class:(0,k.C4)(["page-header",{close_icon:!a.togglesidebar}])},[(0,n.bF)(d,{onClicked:o.sidebar_toggle},null,8,["onClicked"])],2),(0,n.Lk)("div",b,[(0,n.Lk)("div",{class:(0,k.C4)(["sidebar-wrapper",[{close_icon:!a.togglesidebar}]]),"sidebar-layout":"stroke-svg"==a.svg?"stroke-svg":"fill-svg"},[(0,n.bF)(u,{onClicked:o.sidebar_toggle},null,8,["onClicked"])],10,f),(0,n.Lk)("div",{class:"page-body",onClick:e[0]||(e[0]=a=>o.hidesecondmenu())},[(0,n.bF)(l.eB,{name:"fadeIn","enter-active-class":"animated fadeIn"},{default:(0,n.k6)(()=>[(0,n.bF)(m,{class:"view"})]),_:1})]),(0,n.bF)(L)]),(0,n.bF)(y)],2)]))}t(116);var y=t(782);const v=[{horizontal:"horizontal-wrapper"},{Dubai:"compact-wrapper"},{London:"only-body"},{Seoul:"compact-wrapper modern-type"},{LosAngeles:"horizontal-wrapper material-type"},{Paris:"compact-wrapper dark-sidebar"},{Tokyo:"compact-sidebar"},{Madrid:"compact-wrapper color-sidebar"},{Moscow:"compact-sidebar compact-small"},{NewYork:"compact-wrapper box-layout"},{Singapore:"horizontal-wrapper enterprice-type"},{Rome:"compact-sidebar compact-small material-icon"},{Barcelona:"horizontal-wrapper enterprice-type advance-layout"}],C={class:"header-wrapper row m-0"},P={class:"nav-right col-xxl-7 col-xl-6 col-md-7 col-8 pull-right right-header p-0 ms-auto"},E={class:"nav-menus"};function D(a,e,t,s,i,l){const o=(0,n.g2)("SearchBar"),r=(0,n.g2)("Logo"),c=(0,n.g2)("Profile");return(0,n.uX)(),(0,n.CE)("div",C,[(0,n.bF)(o),(0,n.bF)(r),(0,n.Lk)("div",P,[(0,n.Lk)("ul",E,[(0,n.bF)(c)])])])}const M={class:"flip-card"},w={class:"front"},F={class:"droplet-dropdown bookmark-dropdown"},X={class:"custom-scrollbar"},x={class:"row"},T={class:"bookmark-content"},S={class:"bookmark-icon"},B={class:"stroke-icon"},A=["xlink:href"],_={class:"text-center"},j={class:"back"},V={class:"bookmark-dropdown flip-back-content"},I={class:"ProfileCard-avatar header-search"},N={class:"stroke-icon"},U=["xlink:href"],R={class:"ProfileCard-details"},Q={class:"ProfileCard-realName"},W=["onClick"];function K(a,e,s,i,o,r){const c=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("div",{class:(0,k.C4)(["onhover-show-div bookmark-flip",o.bookmarkSearchBox||s.activeclass?"active":""])},[(0,n.Lk)("div",M,[(0,n.Lk)("div",{class:(0,k.C4)(["flip-card-inner",o.bookmarkSearchBox?"flipped":""])},[(0,n.Lk)("div",w,[e[4]||(e[4]=(0,n.Lk)("h6",{class:"f-18 mb-0 dropdown-title"},"Bookmark",-1)),(0,n.Lk)("ul",F,[(0,n.Lk)("li",X,[(0,n.Lk)("div",x,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.bookmarkItems.slice(0,8),(a,e)=>((0,n.uX)(),(0,n.CE)("div",{class:"col-4 text-center",key:e},[(0,n.Lk)("div",T,[(0,n.Lk)("div",S,[((0,n.uX)(),(0,n.CE)("svg",B,[(0,n.Lk)("use",{"xlink:href":t(1274)+`#${a.icon}`},null,8,A)]))]),(0,n.Lk)("span",null,(0,k.v_)(a.title),1)])]))),128))])]),(0,n.Lk)("li",_,[(0,n.Lk)("a",{href:"javascript:void(0)",class:"flip-btn f-w-700",id:"flip-btn",onClick:e[0]||(e[0]=(...a)=>r.openbookmark&&r.openbookmark(...a))}," Add New Bookmark ")])])]),(0,n.Lk)("div",j,[(0,n.Lk)("ul",null,[(0,n.Lk)("li",null,[(0,n.Lk)("div",V,[(0,n.bo)((0,n.Lk)("input",{type:"text",placeholder:"search...","onUpdate:modelValue":e[1]||(e[1]=a=>o.terms=a)},null,512),[[l.Jo,o.terms]]),(0,n.Lk)("div",{class:(0,k.C4)(["bookmark-search custom-scrollbar",a.searchMenuItems.length?"Typeahead-menu is-open":"Typeahead-menu"])},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.searchMenuItems.slice(0,8),(a,s)=>((0,n.uX)(),(0,n.CE)("div",{class:"ProfileCard u-cf",key:s},[(0,n.Lk)("div",I,[((0,n.uX)(),(0,n.CE)("svg",N,[(0,n.Lk)("use",{"xlink:href":t(1274)+`#${a.icon}`},null,8,U)]))]),(0,n.Lk)("div",R,[(0,n.Lk)("div",Q,[(0,n.Lk)("span",{onClick:e[2]||(e[2]=a=>r.removeFix())},[(0,n.bF)(c,{to:"/",class:"realname"},{default:(0,n.k6)(()=>[(0,n.eW)((0,k.v_)(a.title),1)]),_:2},1024)]),(0,n.Lk)("a",{href:"JavaScript:void(0);",onClick:e=>r.addToBookmark(a)},[(0,n.Lk)("span",null,[(0,n.Lk)("i",{class:(0,k.C4)(["fa fa-star-o f-18 bookmark-search f-right",a.bookmark?"text-warning":""])},null,2)])],8,W)])])]))),128))],2),(0,n.Lk)("div",{class:(0,k.C4)(o.bookmarkSearchResultEmpty?"Typeahead-menu is-open":"Typeahead-menu")},e[5]||(e[5]=[(0,n.Lk)("div",{class:"tt-dataset tt-dataset-0"},[(0,n.Lk)("div",{class:"EmptyMessage"}," Your search turned up 0 results. Opps There are no result found. ")],-1)]),2)])]),(0,n.Lk)("li",null,[(0,n.Lk)("a",{href:"javascript:void(0)",class:"d-block flip-back f-w-700",id:"flip-back",onClick:e[3]||(e[3]=(...a)=>r.openbookmark&&r.openbookmark(...a))}," Back ")])])])],2)])],2)}t(4114);var O={props:["activeclass"],data(){return{terms:"",bookmarkSearchBox:!1,bookmarkSearchResult:!1,bookmarkSearchResultEmpty:!1,bookmarkItems:[]}},computed:{...(0,y.aH)({menuItems:a=>a.menu.data,searchMenuItems:a=>a.menu.searchData})},watch:{terms:{handler(a){this.terms?this.addFix():this.removeFix(),this.searchMenuItems.length?this.bookmarkSearchResultEmpty=!1:this.bookmarkSearchResultEmpty=!0,this.addFix(),console.log("teradsdjsahfs;af==s===sa=d=sad",this.searchMenuItems),this.$store.dispatch("menu/searchTerm",a)}}},mounted(){this.menuItems.filter(a=>{a.bookmark&&this.bookmarkItems.push(a)})},methods:{openbookmark(){this.bookmarkSearchBox=!this.bookmarkSearchBox,this.bookmarkSearchBox||this.removeFix()},searchTerm:function(){this.addFix(),this.$store.dispatch("menu/searchTerm",this.terms)},addFix(){this.bookmarkSearchResult=!0},removeFix(){this.bookmarkSearchResult=!1,this.text=""},addToBookmark(a){const e=this.bookmarkItems.indexOf(a);-1!==e||a.bookmark?(this.bookmarkItems.splice(e,1),a.bookmark=!1):(a.bookmark=!0,this.bookmarkItems.push(a),this.text="")}}};const $=(0,r.A)(O,[["render",K]]);var G=$,J=t(1647),q=t(8378),H=t(1274);const Y=H+"#notification",z={class:"onhover-dropdown"},Z={class:"notification-box"};function aa(a,e,t,s,i,l){return(0,n.uX)(),(0,n.CE)("li",z,[(0,n.Lk)("div",Z,[((0,n.uX)(),(0,n.CE)("svg",null,[(0,n.Lk)("use",{href:Y,onClick:e[0]||(e[0]=a=>l.notification_open())})])),e[1]||(e[1]=(0,n.Lk)("span",{class:"badge rounded-pill badge-secondary"},"4 ",-1))]),(0,n.Lk)("div",{class:(0,k.C4)(["onhover-show-div notification-dropdown",{active:i.notification}])},e[2]||(e[2]=[(0,n.Fv)('<h6 class="f-18 mb-0 dropdown-title">Notitications</h6><ul><li class="b-l-primary border-4"><p>Delivery processing <span class="font-danger">10 min.</span></p></li><li class="b-l-success border-4"><p>Order Complete<span class="font-success">1 hr</span></p></li><li class="b-l-info border-4"><p>Tickets Generated<span class="font-info">3 hr</span></p></li><li class="b-l-warning border-4"><p>Delivery Complete<span class="font-warning">6 hr</span></p></li><li><a class="f-w-700" href="#">Check all</a></li></ul>',2)]),2)])}var ea={name:"Notifications",data(){return{notification:!1}},methods:{notification_open(){this.notification=!this.notification}}};const ta=(0,r.A)(ea,[["render",aa]]);var sa=ta;const ia=H+"#moon",la={class:"mode"};function na(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",la,[(0,n.bo)(((0,n.uX)(),(0,n.CE)("svg",{onClick:e[0]||(e[0]=a=>o.customizeMixLayout("dark-only"))},e[2]||(e[2]=[(0,n.Lk)("use",{href:ia},null,-1)]),512)),[[l.aG,"light-only"==i.mixLayout]]),(0,n.bo)(((0,n.uX)(),(0,n.CE)("svg",{onClick:e[1]||(e[1]=a=>o.customizeMixLayout("light-only"))},e[3]||(e[3]=[(0,n.Lk)("use",{href:ia},null,-1)]),512)),[[l.aG,"dark-only"==i.mixLayout]])])}var oa={name:"Mode",data(){return{mixLayout:"light-only"}},methods:{customizeMixLayout(a){this.mixLayout=a,this.$store.dispatch("layout/setLayout",{class:a})}}};const ra=(0,r.A)(oa,[["render",na]]);var ca=ra,da=t.p+"img/cart-img.309a9141.jpg";const ua=H+"#stroke-ecommerce",ma={class:"cart-nav onhover-dropdown"},ka={class:"cart-box"},ha={class:"mt-0"},ga={class:"media"},pa={class:"close-circle"},ba={href:"#",class:"bg-danger"},fa={class:"mt-0"},La={class:"media"},ya={class:"close-circle"},va={href:"#",class:"bg-danger"},Ca={class:"text-center"};function Pa(a,e,t,s,i,l){const o=(0,n.g2)("vue-feather"),r=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("li",ma,[(0,n.Lk)("div",ka,[((0,n.uX)(),(0,n.CE)("svg",null,[(0,n.Lk)("use",{href:ua,onClick:e[0]||(e[0]=a=>l.cart_open())})])),e[1]||(e[1]=(0,n.Lk)("span",{class:"badge rounded-pill badge-success"},"2",-1))]),(0,n.Lk)("div",{class:(0,k.C4)(["cart-dropdown onhover-show-div",{active:i.cart}])},[e[7]||(e[7]=(0,n.Lk)("h6",{class:"f-18 mb-0 dropdown-title"},"Cart",-1)),(0,n.Lk)("ul",null,[(0,n.Lk)("li",ha,[(0,n.Lk)("div",ga,[e[2]||(e[2]=(0,n.Fv)('<img class="img-fluid b-r-5 me-3 img-60" src="'+da+'" alt=""><div class="media-body"><span>Furniture Chair for Home</span><div class="qty-box"><div class="input-group"><span class="input-group-prepend"><button class="btn quantity-left-minus" type="button" data-type="minus" data-field=""> - </button></span><input class="form-control input-number" type="text" name="quantity" value="1"><span class="input-group-prepend"><button class="btn quantity-right-plus" type="button" data-type="plus" data-field=""> + </button></span></div></div><h6 class="font-primary mb-0">$500</h6></div>',2)),(0,n.Lk)("div",pa,[(0,n.Lk)("a",ba,[(0,n.bF)(o,{type:"x"})])])])]),(0,n.Lk)("li",fa,[(0,n.Lk)("div",La,[e[3]||(e[3]=(0,n.Fv)('<img class="img-fluid b-r-5 me-3 img-60" src="'+da+'" alt=""><div class="media-body"><span>Furniture Chair for Home</span><div class="qty-box"><div class="input-group"><span class="input-group-prepend"><button class="btn quantity-left-minus" type="button" data-type="minus" data-field=""> - </button></span><input class="form-control input-number" type="text" name="quantity" value="1"><span class="input-group-prepend"><button class="btn quantity-right-plus" type="button" data-type="plus" data-field=""> + </button></span></div></div><h6 class="font-primary mb-0">$500</h6></div>',2)),(0,n.Lk)("div",ya,[(0,n.Lk)("a",va,[(0,n.bF)(o,{type:"x"})])])])]),e[6]||(e[6]=(0,n.Lk)("li",{class:"total"},[(0,n.Lk)("h6",{class:"mb-0"},[(0,n.eW)(" Order Total : "),(0,n.Lk)("span",{class:"f-right"},"$1000.00")])],-1)),(0,n.Lk)("li",Ca,[(0,n.bF)(r,{class:"d-block mb-3 f-w-700 view-cart",to:"/ecommerce/cart"},{default:(0,n.k6)(()=>e[4]||(e[4]=[(0,n.eW)(" Go to your cart ")])),_:1,__:[4]}),(0,n.bF)(r,{to:"/ecommerce/checkout",class:"btn btn-primary view-checkout"},{default:(0,n.k6)(()=>e[5]||(e[5]=[(0,n.eW)(" Checkout ")])),_:1,__:[5]})])])],2)])}var Ea={name:"Cart",data(){return{cart:!1}},methods:{cart_open(){this.cart=!this.cart}}};const Da=(0,r.A)(Ea,[["render",Pa]]);var Ma=Da,wa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAjBAMAAADs965qAAAAD1BMVEXd3d0AAADBwcGlpaWKiopWip6MAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAQUlEQVQokWNgGAUIoASEyDQDA5Oxk7MCEg0WczZiYGYwANNQYGJkbMDgAqWhwAEIXaA01CwjEwOgRjBNa68MdQAA0zYIQWXjQpMAAAAASUVORK5CYII=";const Fa={class:"profile-nav onhover-dropdown pe-0 py-0"},Xa={class:"media profile-media"},xa={class:"media-body"},Ta={class:"mb-0 font-roboto"},Sa={class:"profile-dropdown onhover-show-div"};function Ba(a,e,t,s,i,l){const o=(0,n.g2)("vue-feather");return(0,n.uX)(),(0,n.CE)("li",Fa,[(0,n.Lk)("div",Xa,[e[2]||(e[2]=(0,n.Lk)("img",{class:"b-r-10",src:wa,alt:""},null,-1)),(0,n.Lk)("div",xa,[(0,n.Lk)("span",null,(0,k.v_)(i.user.name),1),(0,n.Lk)("p",Ta,[(0,n.eW)((0,k.v_)(i.user.role_name)+" ",1),e[1]||(e[1]=(0,n.Lk)("i",{class:"middle fa fa-angle-down"},null,-1))])])]),(0,n.Lk)("ul",Sa,[(0,n.Lk)("li",null,[(0,n.bF)(o,{type:"user"}),e[3]||(e[3]=(0,n.Lk)("span",null,"Account",-1))]),(0,n.Lk)("li",{onClick:e[0]||(e[0]=(...a)=>l.logout&&l.logout(...a)),style:{cursor:"pointer"}},[(0,n.bF)(o,{type:"log-in"}),e[4]||(e[4]=(0,n.Lk)("span",null,"Log out",-1))])])])}var Aa=t(4373);const _a=()=>{try{const a=JSON.parse(localStorage.getItem("User"));return a||{}}catch(a){return console.error("Gagal parse user data dari localStorage:",a),{}}},ja=()=>_a().token,Va="http://37.44.244.19/api_desaonline/api",Ia=Aa.A.create({baseURL:Va});Ia.interceptors.request.use(a=>{const e=ja();return e&&(a.headers.Authorization=`Bearer ${e}`),a},a=>Promise.reject(a));var Na=Ia,Ua={name:"Profile",data(){return{user:{name:"Pengguna",role_name:"Role"}}},mounted(){this.fetchUserProfile()},methods:{fetchUserProfile(){const a=JSON.parse(localStorage.getItem("User"))||{},e=a.id_pengguna;e&&Na.get("",{params:{act:"users",key:e},headers:{Authorization:`Bearer ${a.token}`}}).then(a=>{const e=a.data?.[0]?.data?.[0];e&&(this.user.name=e.name||"Pengguna",this.user.role_name=e.roles?.role_name||"Role")}).catch(a=>{console.error("Gagal mengambil data user:",a),!a.response||401!==a.response.status&&403!==a.response.status||this.logout()})},logout(){const a=JSON.parse(localStorage.getItem("User"))?.token;Na.get("/logout",{headers:{Authorization:`Bearer ${a}`}}).finally(()=>{localStorage.removeItem("User"),this.$router.replace("/auth")})}}};const Ra=(0,r.A)(Ua,[["render",Ba]]);var Qa=Ra,Wa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHkAAAAjCAYAAACw76XYAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAA3nSURBVHgB7Vt7kBTFGf+6Z/ZxTxYuRIwVWNRDUIQlKkEQWSpWEiwVKYsCFfUoYyiVyFFJyhjLcET/IJGoRxkrD5TDmAhqAj6iGAwsKoiPhOWw4gPURdRCDrkH3O3tY7rzfT0ze7Nzu7d7h4Ers7+rrunp7e55/Pp79hyDfuL6G7smc4CZXPJZINi3QMgqJqwfDQaSy02P/Nk/C0oYNNCL6VRX3xpgcf9tAHIBSKhlggEwCcIDXZLBK1JClAv+LkvLDs1gzVDCoEJBkq9bc/g61uz9hQR5JvKKksogXQ770mX84bQv1fRkQ+VBKGFQIy/Jc1e3DyvzpVazvd45ohsFF3V0sozFkkPY4nOk74WGhoySVpj1vPRVHjsa1HVjhMaApWSyteOTjndfuK02ASWcVLBcjdesbh3FmbGZH9Fr2Yce7MWgvf39Azzgnf63356939n32sfavmPo8mqmswVokX3UF7g5sQDZLgXbBKA9te6qqqeghJOCXiTPW9V2hq4ZL6HdDWr7vCAMgMMfRaB7x0sXbW19YLvdb/6jbeejXb4PZ5iuSMWijsycVVJFEtFIPcm8hFgK2N0b5lU/AiWcUGSRPLehfZheZbzJNDidf64D69CgZX8EunZuff3lwyun2P3mr26dhLb5ReByuCKXZnGSzM1+En8Q6JlJsuXSPJeGfCjZeeynzy06rQu+BIwdOyXIuRHgXAsIYbR5vRWxaDTSBiVkkGWT0Z6ugBScLtGKsi84tLa8Bd07t4CuQaPdZ/6q1klGGl7IEGxLMZKIYouOmXkE6yDVn0m02cxu0cuqzr/iVy2XPHP78KMwAIRCU4JCaEtwQdXhaQDNgWrXNA2vk4KJE6dFhZCNmubdmI/wc8+dfiXnYoOjKbZ79/bR+a6Jc27FQ9g+x/kX7tmzoyl7zql1nLM1UBAyhu8hpqISbjRGoztjUCQmTJh2Pz53fdZsUixtbn7tgXxjuF2Z//OOOpFkN4kEek3tGnRp7dC1extojMX1TvZPu18KYL1IwykyjeSl8WGtQnWJqh2sIl1FOI5CwmR5iuc+GAAmTLhwiZTaLutBA3m6hehlI+G7QqGpodxdDPfYIPQDeP1gMW15RlO/MD0DPUsoNO2GYkbR4nYTbF6XLwuFwvnehUlyuGGrbqTEMiJYJlHFdmrQsf0p4Ec7YKjGtv3j2MpD1O+qe48skClWCynsl+YmsQ6ypVXsehbZJOWGtI5UtB/MebR1KfQDJCn4QLRiA0UOCUrJtuYnelAggBLdRAQW6mgYPJxvDsNIXplvnCK5puW8a2WCBWUSX/4xBomOFoCDB6ASY+IJZf63e67C5zAij0qKiLTINiwCHUQ7pdcsaKwFy9SJbK8X7pj7xAdDoAjQS+AcluX4qYkxuZAxNpMxsdRUhdkvAIneACcHbeZ9ZRe8x43ujkLw+kKToXZa0sdvebWBsslogxdJHdU0kkqpye4PX1M/jPH5oAyksmmzfrTXZyTge6KCJ6Qf9uDyOIg+1ThPSp7BU3QVCp0kpTVN74tZjpbpZANYthlkxnxTn+GV5ZU3YW0lFACtYnyQoLMNL7M0Gt3utEURLA9MnDgVSWXOlR0MhS4KR6OvRuDEoi3PNSNuG4/kz8ZDXqJpkaPEOzVSDEyNZmu1MKnsXD4Inz2//dsojRcCqmlUxZBGcWYHP0Qp5jDC40FnRlcc+WtG1CYr+D0dNcaIZxdXX/DsLdWXP3dz9Znxb1aPjldrdxmMtZmSbc4jlErPlmylvqWpuollrmIs7c65T0gvFECOlRpzEQw9LwyWu9uEEGEYREBnaX//+mvLXOMbpZRrnW1CJHMuEh2k9xJIopRp+MJR5Yr4Z6ChLf4G6lIdpRNl7+vUcUNDFantt90TbJrDYni45/uPxx/ztKaf88SNc2iQ4JZnzcwojY6W9DoursgPVOptF2J1G/T9mEHnYHzA3fl6RqM7ouiFrkU1PsNu41wOqrAKJXeGqynW9wgZdj4/Pg+qfA2lWy5xzEnaoME9UudJmCbpbQtTXcvOQ4rcYRg3oWcNo/y+WigCm64ui4XXtF5WneBvaSmoUWraLuquehIk1MY10u5C2XbBBT1wAZJZ0NUQ7at3c/P2OhgEGD9+Sth5jkQETK3Egtnt2VLZe46s/hEr7IqhaYo5fgvlMkucJdlI3s2Bo2dNKpt3dypyyzHm1JDs8WX+S+X0VcOhCEQWDo0lqvSfGaSWU1Yh9W1w9LiZSahhqu9ybzqjyllajIevJoIYu291Fs65218g4pej9mnKNwmOuyG7f8+CQPPnUtmil5fNWYKPRKKBJaxiJEFHkr0oeUS2T0OCmOd6KBIv3lj+cNqjHYKMfSayrTDLIpjjnfl0obx0016zs+H/F2hGWF6tZIVWddmtImLXMKHT5PwFF8wN7piZJLmSJWmLiSuSNUxfoaOtpJjUNtVx8+GHUinZIoDLTAjYLJK2JLviZyS6zGOY5ynLSUuIGvjKgkI6ZwG3b4AhnthAajbXaHdsjDb4aWeGzKpHnPOh9GTlBXSeYga+eF1lBmmPkFcocskZJqKTZupyjLj0Dz+B5+FeKAIiZXSINFcfFtD+s3LCrJx2mU+Aj/ankuY5+QOMa19VkjFVuqNXqjQUmn4lEkvpz4zEIXl03quvO6pAh6vJ3QfnehqTRGHHXOSJR+xznRsY+gj5tUyioqIGGzkk0ENCTQ1d6Bwpx8wnfp2Y9+D7vvWLn4YCEMLrF0nDTClzZm1goIr2CChnhsqqAXnz9Du53BocgIJQ+d6gfYZqaVRfvSn9iQ8ecvRfe3xxcrZ3fzyIRl/ZiPeHKUp+v6MZY/kLQtHomxnVbcXG4ay7kHwDxtiFLpEVM3OWghaOthMlGiipYZTXgubzQwcmmMkmH0obZqzjkeDxsfXGzQ/eWugKkISRSh1TipQkFlOfftTh5biKaPMDqC1pplBJorHfZwXnBOZWc8F8Pc0cr0p/1tmlt0Oi9QqpJk2aOir3fGTjWDC79fhCMtzgyGGHfYHsPoWzYPnnT9TZdY5pyl0sxVSigiHZ3pZKSJw6Bo6il0R7gZ+jq9zBTKJRon0okQ+KH6/aEm+4P5hzdswh8i6Yopw5nFdHsitwDh/F4AmeIV6pa4tsPBZMDJAtcjWF89kxfDm9Unyo5iLOc/RYI+4+hsHqc8+XXNJ7Pq3PEK4QUA1P7N2ayFo4KGOzYYDARZ4Zi7uLfKfQ4BrlHJH97ZIQP3U6xsnvwMEUBrxlGuxNJOC8oT7sLVWRupzplfBResV9bzCv2CTLjd1SS7RIn4jfsvKzy1oOD6tQplwTwEkLUH7bGquyXmT7lS2W6ojWYXuhm8Y+G1F1ubI+cg1uWiw3jBRuLWptug6Y39Zm59ipiaGURJwNpMpQ7VFbuOfFQD22YbLfWJtOQ6yv+Qaq+kkrpNPdISShofecPao6R2xMaIK8kAFXaBa2Y2Y9kYTn/T5Yga+73Ew5otr+9BQ4MuZi8O99GdpQxaIphU9TaTitkpuq2yKMaWIy6GIyOtTAvDoc0zEN+rEH/J2WvUWjrjJpuvLQrbo0CafdKw+STfkQDjuhAMws1kWNeC2nVAVpS5HzvrOiOGZ5rpwuxae4UMKu5jqUcix9zwfFIYiLRjobaL9byzE5+QzOc3dsjIjgfvdC6AO997xVKjfC1+9jH3AD/q5RLtkwi4ZqO9kShpYxM+BjXAWHcFm/35WAWHeqRyJ1i0irjtoA/vj2d6H9g2oMxTAcs0IySrIwTLZA3DyyOCZe4tiZSheq72727l/vHroLikBz86u4/8oaoR8wNzFyJxpoldPv0A8USlwMBHgP5BQ2uJpdCZP8GTEb5GVnjzF3rdRWI9L0kP3VDgkbp23ADuThkxmwf+QVEPOUw4F4CvZ2JmFPawIOo+ds0G6TZpYjrALujC6Af78+Dp03IthOrnBViGhObd14lYR55Krgb936CugHiGjaWsyxpegGEign5dvEsEG/M2ZQ6BKBgvOxmTnIcKDfzpg1Z3YKlr5agew981gxC4tzH/Vx3kOAPPZMTHDTWLkFNfVMW7dkjpSNHCahcth7MMT7MQytaoGqshT4/CiJ3ho4cnQ0vHNgNKS/8JhxLzclXB3tumbXaSMEMuETaoXY+kcrR8MAYX4MoAVR9weFoJww2V6ORY8O5Dsv04umRIIRMucj0vQYvoFosZ/oFLP5b8Lf1tc9Zs/Td9/scfQM3ZkFQvedIXnRWfJ8VLmbkd0AEWwXsI/WZgM5Swb6YORwq30m60O+HnKhh+wM6ZZqp3OyC6qubPLCdevKmqCE/ymyovtFZ6t/g/kT1W2CBbgIZ+aHe5L+nYLZmSyZyWhJLnuIpjbNcW6pdzPTJRsff8Y/4DiwhOLBnSe//w97DDn4jW2fFUeOoriSphQzw/SMyX5TndM5OW6UWFEFx1jnFC/TZ0OUcFEOWQr2sSPdxXqoJRwncubpFp8lf4nSd5dTbfey1eBQ47Zkg6NuSa+tym21Lrjcneapy9e9XF5EKrOELwN5k7G3jpO3I1d3YI8hbrJzEm6Rrey0/V8UDnLB/FJkc1c6fu2Tu9B7K+GEoc+Me/1YGcQdpEeQnZm5iHYSDtBDdsZW07+3mja7RWiyvulf+l+ghBOOorZVloyT85DA27A61a2u80q3SfIXgsnfGR7euGYXK0nvSUK/9s5QhY/CAZdguRiFdBZ9Uusiuh39sDfQJd+GJG95bwS8GYmoL7VLOIn4LwKSnnsJDhUAAAAAAElFTkSuQmCC";const Ka={class:"header-logo-wrapper col-auto p-0"},Oa={class:"logo-wrapper"};function $a(a,e,t,s,i,l){const o=(0,n.g2)("router-link"),r=(0,n.g2)("vue-feather");return(0,n.uX)(),(0,n.CE)("div",Ka,[(0,n.Lk)("div",Oa,[(0,n.bF)(o,{to:"/"},{default:(0,n.k6)(()=>e[1]||(e[1]=[(0,n.Lk)("img",{class:"img-fluid",src:Wa,alt:""},null,-1)])),_:1,__:[1]})]),(0,n.Lk)("div",{class:"toggle-sidebar",onClick:e[0]||(e[0]=(...a)=>l.toggle_sidebar&&l.toggle_sidebar(...a))},[(0,n.bF)(r,{class:"status_toggle middle sidebar-toggle",type:"align-center",id:"sidebar-toggle"})])])}var Ga={name:"Logo",methods:{toggle_sidebar(){this.$store.dispatch("menu/opensidebar")}}};const Ja=(0,r.A)(Ga,[["render",$a]]);var qa=Ja;const Ha={class:"form-group w-100"},Ya={class:"Typeahead Typeahead--twitterUsers"},za={class:"u-posRelative"},Za={class:"ProfileCard-avatar header-search"},ae={class:"stroke-icon"},ee=["xlink:href"],te={class:"ProfileCard-details"},se={class:"ProfileCard-realName"};function ie(a,e,s,i,o,r){const c=(0,n.g2)("vue-feather"),d=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("form",{class:(0,k.C4)(["form-inline search-full col",a.searchOpen?"open":""]),action:"#",method:"get",onSubmit:e[3]||(e[3]=(0,l.D$)(()=>{},["prevent"]))},[(0,n.Lk)("div",Ha,[(0,n.Lk)("div",Ya,[(0,n.Lk)("div",za,[(0,n.bo)((0,n.Lk)("input",{class:"demo-input Typeahead-input form-control-plaintext w-100",type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>o.terms=a),placeholder:"Search Cuba ..",name:"q",title:"",autofocus:""},null,512),[[l.Jo,o.terms]]),e[4]||(e[4]=(0,n.Lk)("div",{class:"spinner-border Typeahead-spinner",role:"status"},[(0,n.Lk)("span",{class:"sr-only"},"Loading...")],-1)),(0,n.bF)(c,{class:"close-search",type:"x",onClick:e[1]||(e[1]=a=>r.search_close())})]),a.menuItems.length?((0,n.uX)(),(0,n.CE)("div",{key:0,class:(0,k.C4)(o.searchResult?"Typeahead-menu is-open":"Typeahead-menu")},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.menuItems.slice(0,8),(a,s)=>((0,n.uX)(),(0,n.CE)("div",{class:"ProfileCard u-cf",key:s},[(0,n.Lk)("div",Za,[((0,n.uX)(),(0,n.CE)("svg",ae,[(0,n.Lk)("use",{"xlink:href":t(1274)+`#${a.icon}`},null,8,ee)]))]),(0,n.Lk)("div",te,[(0,n.Lk)("div",se,[(0,n.Lk)("span",{onClick:e[2]||(e[2]=a=>r.removeFix())},[(0,n.bF)(d,{to:{path:a.path},class:"realname"},{default:(0,n.k6)(()=>[(0,n.eW)((0,k.v_)(a.title),1)]),_:2},1032,["to"])])])])]))),128))],2)):(0,n.Q3)("",!0),(0,n.Lk)("div",{class:(0,k.C4)(o.searchResultEmpty?"Typeahead-menu is-open":"Typeahead-menu")},e[5]||(e[5]=[(0,n.Lk)("div",{class:"tt-dataset tt-dataset-0"},[(0,n.Lk)("div",{class:"EmptyMessage"}," Your search turned up 0 results. Opps There are no result found. ")],-1)]),2)])])],34)}var le=document.getElementsByTagName("body")[0],ne={name:"SearchBar",data(){return{terms:"",searchResult:!1,searchResultEmpty:!1}},computed:{...(0,y.aH)({menuItems:a=>a.menu.searchData,searchOpen:a=>a.menu.searchOpen})},watch:{terms:{handler(a){this.terms?this.addFix():this.removeFix(),this.$store.dispatch("menu/searchTerm",a),this.menuItems.length?this.searchResultEmpty=!1:this.searchResultEmpty=!0},deep:!0}},methods:{search_open(){this.$store.state.menu.searchOpen=!0},search_close(){this.$store.state.menu.searchOpen=!1,le.classList.remove("offcanvas")},searchterm(){this.$store.dispatch("menu/searchTerm",this.terms)},addFix(){le.classList.add("offcanvas"),this.searchResult=!0},removeFix(){le.classList.remove("offcanvas"),this.searchResult=!1,this.terms=""}}};const oe=(0,r.A)(ne,[["render",ie]]);var re=oe,ce={components:{Bookmark:G,Notifications:sa,Mode:ca,Cart:Ma,Profile:Qa,Logo:qa,Swiper:J.RC,SwiperSlide:J.qr,SearchBar:re},data(){return{bookmark:!1}},computed:{...(0,y.aH)({menuItems:a=>a.menu.searchData,megamenuItems:a=>a.menu.megamenu,searchOpen:a=>a.menu.searchOpen})},methods:{search_open(){this.$store.state.menu.searchOpen=!0},bookmark_open(){this.bookmark=!this.bookmark}},setup(){return{modules:[q.Ij]}}};const de=(0,r.A)(ce,[["render",D]]);var ue=de,me="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAjCAYAAAAe2bNZAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAi7SURBVHgBrVh9jFTVFT/nvjfzZmZnZT9CQU1wsV2KaJpYG6ptEUlNK8bWEkNBQWNjKalaS2O/bNN2W/2DVkoLoca2iIbSKkJL0lDBYvlqbKnaIIYoyocLKMEd9mt2d2bf1z2ec++b2dllkdF4k5t735vz7v3d3/mdc+8dhPdZ7rirNFMBzFGk5oLGT4KmRtTJjzECKdq+7s+ZufABiluP0Z3LepuwnLkPgBYDQTtqBEACnYISIfybCF5WWh3CiIpOjK/AByznBXP742dux1fSPyWgj/H8vHKEKAdHoqx6LPLCJzZ15E/Dh1TOCWb+2v6WrBeuxcPpeXqYiWDfBFnsDCbgvZeTt62jo+ocU+Y+Q15+cKDNdePJDgKGFPQW3yoe2nZfuw91Fhzv5W1rey9RGO9QPW47HkuxFUJ//xsnVVN61t9+N+N4re2iDX2fj126FV1czIrxxBaUHVgD9ZPG7QDO5qduadwM7xfMgtV9H3Wd+DnWRZtzJA06Bjjz5m4Y/s9zn9vV+9vnK3YL1/d9inWzkkeYZSbnalq0o5J0SAAxROGQoDMEfHDLggvW1QVmfkd/i9sYv4gOXKrecQGLDhSO74bSvl3/23tmxdVVIGt7r2TtPAuKJhoQaIFUwShrR/yDZoWTaI3sM8X0SDA0+L2tSy8ujQWjah/Y38shhEuJzbBbQe+pl2B4305wHVpVBbK698o4gm06ookU8QRcIU6qPMf2nVRtnskwI1VrA+huN9u468u/LDSeE8zCHxXv1AEu0T6rr9+BktMPpQN7wEEsu0P4r4pdCLCRJ5lEEVUn1MnkFI8AozFV17SaYCZNSq0cF8x1HbvcONQ/EyAUMLVDDhSf3wxqoAjNDu755+CKLrG75eGexRRiO4RsF6mEgRFQoxiJxoDSNSyZd87X563v/c5ZYFoLVy0iH9soYKNBBL9YADh9EvKcUz6RzRysWsdqHkbWHUIRRQmoOJmoBlAtG7aymDRW+wIqnYYH5j99dMIoMOTDUnYRtzzwsILhY/81CWia50EWqE9s5n7rsBf78MXQUX6QVS9x3ep76qiJFmEqVAkrNaAMg2hZSt5DDVD+dGI+l19S1ezNC/s/zau7BtmR5Mj2EgCePgYNSsHklOQYiQOATOvkdr+BHiq1xo/u/lpzX2WAG7ZQm+odXJwe0vc7ETTZ5TEAE95JBdtC0toRhQmJfefH85+m1Zu+ioELlL4eAgHCPzDVunwKHNbKRcyhy27ibz8iH27paBR3HRwruu3zsJObh254srwh1RttTZXjy+UjrQQE2XwDNu9oi7NahH1mqSnv9l3D3T1KBfBZCi2lIFQPdRkQLa4jkQRTs5l2qKNsvzXbOZCNbooUdhvX1LhIV0JeJ+/iJC2JcEIJeT3bMIUBTlGsE8WRBKwbNTxkQOQcBsOgrshmbqRZqyfWA4jd1+k3uj+MZeIwqWZyxYDQTpzkoVw6qmoLI32FBeOrKQwI0E9qHIDLYNIMXUB5Dg+EqTugzvLsXbnHopTTBVHCggGVhH8CRLFoPFdbMRvWcEaFmTwGsiUrA8bh/O7yIoQVcZf0eRP8BlUleJ6CSJxpd+igwszYjAyQTcX2ObTu1L5uNWBUiLFhRiprRqkGA0IiTwAFds+Zpm/8w3ehzqLDuKirrKBxkea+MJFVGjzZzwVsUAHoJGBi7FP8wuGPVCCUtDIYBT5HAnuIj3L8ocje07/yF6y5uS4wOp2RvKUTV0nGFiAej5XD2GR5qjBn25PWTSEUFH+gBAz/GOfawfEyUOS8I5rpimIbgymClIcb42+uuee8aAKYYtwggAIwCS/Dvsuxj8g3v5tgqYBiu1MWTAT7UZDHomoWbiEP/oXTYIDVJnv8OxwaRbSAmCGP1bdG3796Z7njN23jAiFCVYKrrdtZcwyqgcfwJIdxhq8ApGAEFLfmwManBrVPO3CbEZnoo0RQvnAW55nX4HQYQmvWgcO+D1c1e2xNppJLc9IEb0bLV76Aab2dcvEBcvwCebp894pTNxXOtDQYqTkalLAq+1fyrdk85VzqyoGMTMuqMIc21w/gmYwHy/l1zhyAODGptydBz7RrIXN4L/QxtSmOwrfDCC7OK+uyZGB09Exw9UwOIMC0C4NuCpwTKcgM8e+8tYjoTGZ3TUQmfbLAZK9KMShtcu0+46aNR/CoiuEfvAhQsa0OuysoXAeFabPhBKPtiiJ4o+RD53A4skI3mTDpM7vwx4NfgP6jF3CK4DSRpApJpshJFcq2xTJHbJmNpZbYbcN46K8PNu83zBg3AzzC5vNV8iAMpYtsH8yG41OaIC7tASoPQjSkoegquKhVQXOOschKufZgAzz88lfgrf2ThXJznDC5QaH5HR0yEWmkICxJ1jULkeyMyytyqyayJdNpJ3toDlV0WGklMlsI8i2vw4T0CWhuLEBjNgQvw6OlW6FnYCq8dnIqRN0ps+HwjdIwZtpK36n07ckAnOS9S50b1+enVjBU701s+30ebAejaKIEjFS5uKW72W0906ELp3MeIIhZyxJgZl9ODuSYTGzYkO1Z2b6wZFhwbMSC6EH6Yq/Vz2sDcVSKXzrDXF//VMuMrgFWYUpuBCQok/OKDEzJrUAYoeSmYN45Nc+JW03fpVVP/j2zrHb+UbeD37+KG9j215Xbhhmrptpt37LCm4iJBM7upq/kWQJAEqip/E3yLPlGdCKJ1Qg7hCPYMzyKlbOYqZR7P06/4NX8pNZdZ2mp0kebnwxTUNNXIyuqsmUOXXQgUuGXntqbO1kXGCn3XEY/4DEfYIsJY0GNCywBZXSEZ4MAe/LbUYrKizbt5ygYp7znsWDZdGrj4+M6HmXOeIBqgdWCqmpJ/jaxmipoh5Y98X/3L+81X11nlG9fRgt4Iv5/Bj4z1k3nZMuC6dZIj8Ypterx/Vg43zz1HZiSwq67hD+4nuu1vOi5ctUYA6if9fwCh+AeBrPz9cnw4u7d5qZVV3kXOX3GB94bJtEAAAAASUVORK5CYII=";const ke={class:"logo-wrapper"},he={class:"logo-icon-wrapper"};function ge(a,e,t,s,i,l){const o=(0,n.g2)("Logo"),r=(0,n.g2)("vue-feather"),c=(0,n.g2)("router-link"),d=(0,n.g2)("Nav");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",ke,[(0,n.bF)(o),(0,n.Lk)("div",{class:"back-btn",onClick:e[0]||(e[0]=(...a)=>l.toggle_sidebar&&l.toggle_sidebar(...a))},e[2]||(e[2]=[(0,n.Lk)("i",{class:"fa fa-angle-left"},null,-1)])),(0,n.Lk)("div",{class:"toggle-sidebar",onClick:e[1]||(e[1]=(...a)=>l.toggle_sidebar&&l.toggle_sidebar(...a))},[(0,n.bF)(r,{class:"status_toggle middle sidebar-toggle",type:"grid",id:"sidebar-toggle"})])]),(0,n.Lk)("div",he,[(0,n.bF)(c,{to:"/"},{default:(0,n.k6)(()=>e[3]||(e[3]=[(0,n.Lk)("img",{class:"img-fluid",src:me,alt:""},null,-1)])),_:1,__:[3]})]),(0,n.bF)(d)])}var pe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHoAAAAjCAYAAABb2B7bAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAyLSURBVHgB7Vt7kBTFGf+6Z/Z13B13XBFRK7CnHopaia8YTULcq1hJsFSkLApU1KOMoXxEL5WnsQxr9A+TEBXKWHmgEGMiqIkSTcRguMWU8ZnciVREeS1iEeSAvVvg9vYx3fm+np69ubnZx50EKLK/qq9muueb3pn59ffob2YZjBLX3TBwPgdo55LPAMHOASEbmNAHLQaSy9WP/i48A2o4qmBWo9TRmWpimfBtAHIeSGhjggEwCSIAA5LB36WEHi74RlaQacNi66GGow4Vib522Z5r2frgDyXIU5BbtFgGhTrYXIjwRwqh/PKn4vW7oIajHiWJnr20f0IklF/KNgVniUE0YPTXuQhL5sazW8+QoRfi8aLDVpjxFxmqP7A/aprWJIMBy8tcKv1heuMLt7VloYYjDubXefXS1BTOrDV8n9nGtgZQi0F///s7eFNw+h9/fvp2t+41j/d9yTLlVcxk8zBCh0gXuD2wANkvBVsNYDy94sqGp6GGI4YRRM9Z0neyaVgvYRyOGpuDICyAPdsSMPiPl77QlXrwFUdv7mN952Gcvh9HmK6IRVFbZo8qaUcS2Ug/2b6EZB7YPc/MaXwUajjsGEb07Hj/BLPBepMZcBL/yASWNqB3ewIGXut6/eU9iy5w9OYuTZ2NsfpF4HKiIphGcRPNbT2JBwRma5Jiu7Tb0pIP5w4e+M7zC04cgEMAKWUTbqIoTbqrhzHWBzUMA3c3ML7eB3k4SSIFbC+H1M63YPC1tWAacrGjM3dJ6myrAC+IgpwoC/igUcDSQm3L7iMRqi2VRZMIoci+2Yw0dF3+494GGCOIXJSFKF3YTKF0o3RpSWH/NpRlKNEK45CeG2eV0e3w6HaXuK6UrAzS6dbXGIPR3fsVPr+xTU/4kigSPfcH6Q6RYzeKLGZS/QYMGP0w8PY6MBjLmAfZ3xy9PMBKJPA4WZBFMoUmVjqEW5pwlwjXVkg4Xx4XuB/GAE0ePeQ4SqyEGul0oNADWFh6NKXnRtPH1G2C8mO49WhSdaB04TU+ANXjehj5G1GUK8qdpIiOxbtMKy8WEskyh+72oAHpV54Gvj8NzQZb99cDi3aT3pU/3TdP5lkb5FGvwLXlDhE+zJK1pRfJFi7rVn3G12Y9lvomjAKa5C4Y+dDLIV6B7KMBnXiN8UpK+v5LEXp9uXMV0S29514jsywqczjYAQbZdC/Arh1Qj2vmT0XCG4raFp/FiECSPJGpCbc0iS6y3VZsCwZvwYr7RHgwCHfMfnLLeKgeRFjU09eDQhNmlpbf+JwXH62LPISga2v3yGIfvduhMmLljpVz32odLbOwQJrospFYKmMObn1VHZgaCkEEpEpsZnxjU8jKwlfEOJ6VYXgHp8guzLOmBfLyZI6kA53LJZVA7YyM6eTLTr7pV1QbpN1Wi3AGE+vr6m/EvUVQAXo2d3i6n8XEa5a3D3UTuF3m6acZn4DDD0oOE56+BF4jPVe3p6H4fhbq9pQZyzsZ1qFc5Gp3gh3SRoDPnNv/WbTKCwFdNrplKKBZs11b0Zo5TAoEwDBMxVO4ZVJbbhy/N91iTXru1sbPPHdz42XP39R4SuaTja2ZRuMuCzNd28LtcYRy78MtXLlyabtxYpqr9Zdx5+wnZRAqwy9RuttPER/WchhJagyOLiR8+kpapE4U3c8gCSNJnVnqfBNk8GLIobUZ+NDR/YrMTjAwNp+AftVEK0Ub/AQpPhNvIBe+wTvA6lksiZt7v/pE5vFAqvB8IGOdQScJbtuwWk+Dva7WVuz6cTUBmurNvgvBnp3lMILoCrN/FQxPjpJwdMGPlGQZfa81LyZPgROAnoHzbM6iEOXjQZDLHHxe0hMXtuuWB3crgieYBmXcMCUcaoMqsPqqSDK2LHVpY5a/ZeShRblsR0iBDxVRqI8b5OmFivWCC3I/lYiOetrJcsp4sw/i5kE48qCH7+2j++309C3Ha05CacQ87Wf1lia02wgoWUt4T+YsxybzQQ4cM25y33zwoCK4zkCikfAzI+FL5PQlE6EKJOY3J7MN5vctctF5LeTKLY6ZOLNJ1evsumCh6NZZQZwJxy5o6dTlkbhHJwElwhCB1s4wfKInXJPCO5l9s2/Osnwykg0sq8XKgYlEB9ECifCQgSSxwHVQJV68oe6RQsDYDcV4TYTrJZgmmeMMD5nCLrCo+M1Oh/9vJCpYs9fNF1cWugqYcB1r8lthkEXXsxy9muKKaANrmpiAK2smF077+MLi61I53CrAmMQK2BqRcyzaWykDiAQsu53XiVtWtMCxi6RH/Mqz8VJFkxKrjYSnvcrTHlE34DzPLGXRJHl04XycIpiSZCI7Z9ewp4pLfvVtqBIib6VF0ZqZctuClmBIboQLCNF7LZoIOYd841gmej5aXatLmrGvFez1vxudJdb63r5VPta/3HuOd03NucX6OD5sAwnhOTLlFiSaQxazJvTaMIAJk0rWQuIn2TkPlUzf3RAiGBY5m2CpYjNTJIdwrDpmqeqbdCze3u6oYlivJZQtNdJyRNeSHammOhaFwwBNVLvPIb+qlzfmzvQWzsGu93vR4W5wlodejmRwIhofvFXXBkYoDGksSFOM3l2w7HVQQEIgxFZaNz10C1RCDiYr10xkI5G4OIcw+vM69Nsyq46rxM8hHPV2QmUkPW2KRVPK6C/UN+sWL7yTJwql8Wkofz2jgo6tSU/3sCqhdtsxGBuGGSXHkmY3I4uzKPvFJKy3HrLHT4X9mDnRe8SPMIVOM5tstOwQZlIPiW8tWZuJPxD1HV5KxgfgAjsUYIxHwsfhGCFao2d5kXypyAZFOG63Q2UkfPo6wfcSfGvCSR9Vr/u8Xfq88RrFeFVDjxn1dPd72p0wdsTcoQDfTPLXhAFXq4SJ4vGAhMzx03Ed/S7syuOCOGLApmwWzm0OobZUIk3ZHpSwrXDf/W+woFgt66y3pZHtlSGRuXnRzkt790wYp0K7IYCTN6B6uD5XVcfoWyOTPlaQaouR4pVKV03FEV3ajLkfhI5FVDt2rJMI8asb+9XAV3nGo7G6cExa6vToMWm8hVWOVxU0AX7JV8LTnulzPAmlEYPhkyfmjMnmnCJPDodgPVJQVyxwIAGBKevghE0vw6njQ1iQNuDMiUE4sRnpi6BmWAxJSAvuH8CS6XdfvR76/lOPsR71DLArborkoX0indE+faVk0LsSOOcP9zR3Q3UPqAtGD7+auDPmNhh9bKbixnyfsaK42QZjQ5KSNddYMRh5r63llmH6DZh7Uvbp5A/4ys1sC7fgzwbVni1bDHThud4Y9E69CD7I5jBOF+D9gSwkB/NDlmnaRDr76BXg1xu+DP1bGnGZhks1vVyjQgzDggxk7C3LYGafQWWSAXTlg2xjNSQTdGlvPowOiQrnUFKUhOpBln43HFokYWRy5k3CKq21Cd7iSXFNrV5TIlUPO18AkaFxeoWYRi4+vAi2T74ckoE62JHJw6aDOXgnlYU9OQutUGqrlbCPjYM7e+bBv16fhgkdh6ECDFdCZFNGzwbxV7L2livBY4PmfTAK6BcWNPOfraCaAHtp017u0yJXBkyuOFlmPBqDCG6v4oFXi6Qe82yfMb05QcVQ4VM8IagJUyyC3HiaXIvl7nanKlvc0upogoT6Ce/B+OAH0NzQCw2RPITCaJHBFti3vxXe3dEKhb0Bu57NtcumLXe5bz0xJHkBx62bMrnysfpWGCN0fKY6b1RLn5bEWMnQFhD1jNdT4QWK+/woVIe+chNQ31txCVnt/XjPc36nSPSCU+V56H7XIMNNRLIj4Gx1/KYEysK8jBJx9X5Kfxw4RDAMEV4kXrt5alOMUPt4boDNX7Eishxq+J9jWFlzwenqLze/pX2HZAEe0pn9aa+kv21o8hVp2vdLLofIpj7D1dauXu2bcvETfwp/nOVDDaPAsK9Af/lv9jjy8DMnXiueXKL4krY1Y+EU6L8aFM9pn1ObkjkqvijBc3Sb1tP0CRIVZVSSlofNbN/goU5oaigD3xcVt54qf4RWeJfbhY+I3eBy6Y6Fg2tfW7Hj1h0XL7h8u8Dzl614ua6asmcNhwgl30jdMk1+D/m6AzXGewn3JV0TruK2828NF8Fgf3GyZqCQueapbszoajisKPvqsfM0GRUcHkWG2v3IdpMOMER4MXbTX2vtGN4rDNm5/J/m76GGIwJWjdLt0+QcJPE23P2c13WXtHKb6L2CyV9YAb54WTerWfERRFVEO0B3PgVPuBjli2isM+hzXQ/Z/ZibvYGp+jokeu17k+DNREJ9CV7DEcZ/Adn9hryAs/7iAAAAAElFTkSuQmCC";function be(a,e,t,s,i,l){const o=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.Wv)(o,{to:"/"},{default:(0,n.k6)(()=>e[0]||(e[0]=[(0,n.Lk)("img",{class:"img-fluid for-light",src:Wa,alt:""},null,-1),(0,n.Lk)("img",{class:"img-fluid for-dark",src:pe,alt:""},null,-1)])),_:1,__:[0]})}var fe={name:"Logo"};const Le=(0,r.A)(fe,[["render",be]]);var ye=Le;const ve={class:"sidebar-main",id:"sidebar-main"};function Ce(a,e,t,s,i,l){const o=(0,n.g2)("vue-feather"),r=(0,n.g2)("Navmenu");return(0,n.uX)(),(0,n.CE)("nav",ve,[(0,n.Lk)("li",{class:(0,k.C4)(["left-arrow",{"d-none":"rtl"==a.layout.settings.layout_type?a.hideLeftArrowRTL:a.hideLeftArrow}]),onClick:e[0]||(e[0]=e=>l.layoutobject.split(" ").includes("horizontal-wrapper")&&"rtl"===a.layout.settings.layout_type?l.scrollToLeftRTL():l.scrollToLeft())},[(0,n.bF)(o,{type:"arrow-left"})],2),(0,n.bF)(r),(0,n.Lk)("li",{class:(0,k.C4)(["right-arrow",{"d-none":"rtl"==a.layout.settings.layout_type?a.hideRightArrowRTL:a.hideRightArrow}]),onClick:e[1]||(e[1]=e=>"horizontal_sidebar"==l.layoutobject&&"rtl"==a.layout.settings.layout_type?l.scrollToRightRTL():l.scrollToRight())},[(0,n.bF)(o,{type:"arrow-right"})],2)])}const Pe={id:"sidebar-menu"},Ee={class:"back-btn"},De={key:0},Me={class:"lan-1"},we=["onClick"],Fe={class:"stroke-icon"},Xe=["xlink:href"],xe={class:"fill-icon"},Te=["xlink:href"],Se={class:"lan-3"},Be={key:0,class:"according-menu"},Ae={class:"stroke-icon"},_e=["xlink:href"],je={class:"fill-icon"},Ve=["xlink:href"],Ie={key:0,class:"fa fa-angle-right pull-right"},Ne=["href","onClick"],Ue={class:"stroke-icon"},Re=["xlink:href"],Qe={class:"fill-icon"},We=["xlink:href"],Ke={key:0,class:"fa fa-angle-right pull-right"},Oe=["href","onClick"],$e={class:"stroke-icon"},Ge=["xlink:href"],Je={class:"fill-icon"},qe=["xlink:href"],He={key:0,class:"fa fa-angle-right pull-right"},Ye=["onClick"],ze={key:1,class:"fa fa-angle-right pull-right mt-1"},Ze=["href"],at={key:1,class:"fa fa-angle-right pull-right mt-1"},et=["href"],tt={key:1,class:"fa fa-angle-right pull-right mt-1"},st={key:1,class:"fa fa-angle-right pull-right"},it={key:1,class:"fa fa-angle-right pull-right"},lt={key:1,class:"fa fa-angle-right pull-right"};function nt(a,e,s,i,l,o){const r=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("div",Pe,[(0,n.Lk)("ul",{class:"sidebar-links custom-scrollbar",id:"myDIV",style:(0,k.Tr)([o.layoutobject.split(" ").includes("horizontal-wrapper")?"rtl"==a.layout.settings.layout_type?{"  -right":a.margin+"px"}:{"margin-left":a.margin+"px"}:{margin:"0px"}])},[(0,n.Lk)("li",Ee,[(0,n.bF)(r,{to:"/"},{default:(0,n.k6)(()=>e[3]||(e[3]=[(0,n.Lk)("img",{class:"img-fluid",src:me,alt:""},null,-1)])),_:1,__:[3]}),e[4]||(e[4]=(0,n.Lk)("div",{class:"mobile-back text-end"},[(0,n.Lk)("span",null,"Back"),(0,n.Lk)("i",{class:"fa fa-angle-right ps-2","aria-hidden":"true"})],-1))]),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.menuItems,(s,i)=>((0,n.uX)(),(0,n.CE)("li",{key:i,class:(0,k.C4)(["sidebar-list",{" sidebar-main-title":"headtitle"==s.type},s.showPin?"pined":""])},["headtitle"==s.type?((0,n.uX)(),(0,n.CE)("div",De,[(0,n.Lk)("h6",Me,(0,k.v_)(s.headTitle1),1)])):(0,n.Q3)("",!0),s.badgeType?((0,n.uX)(),(0,n.CE)("label",{key:1,class:(0,k.C4)("badge badge-"+s.badgeType)},(0,k.v_)(s.badgeValue),3)):(0,n.Q3)("",!0),"sub"==s.type?((0,n.uX)(),(0,n.CE)("a",{key:2,href:"javascript:void(0)",class:(0,k.C4)(["sidebar-link sidebar-title",{active:s.active}]),onClick:a=>o.setNavActive(s,i)},[((0,n.uX)(),(0,n.CE)("svg",Fe,[(0,n.Lk)("use",{"xlink:href":t(1274)+`#${s.icon}`},null,8,Xe)])),((0,n.uX)(),(0,n.CE)("svg",xe,[(0,n.Lk)("use",{"xlink:href":t(1274)+`#${s.iconf}`},null,8,Te)])),(0,n.Lk)("span",Se,(0,k.v_)(a.$t(s.title)),1),s.children?((0,n.uX)(),(0,n.CE)("div",Be,e[5]||(e[5]=[(0,n.Lk)("i",{class:"fa fa-angle-right pull-right"},null,-1)]))):(0,n.Q3)("",!0)],10,we)):(0,n.Q3)("",!0),"link"==s.type?((0,n.uX)(),(0,n.Wv)(r,{key:3,to:s.path,class:(0,k.C4)(["sidebar-link sidebar-title",{active:s.active}]),onClick:[e[0]||(e[0]=a=>o.hidesecondmenu()),a=>o.setNavActive(s,i)]},{default:(0,n.k6)(()=>[((0,n.uX)(),(0,n.CE)("svg",Ae,[(0,n.Lk)("use",{"xlink:href":t(1274)+`#${s.icon}`},null,8,_e)])),((0,n.uX)(),(0,n.CE)("svg",je,[(0,n.Lk)("use",{"xlink:href":t(1274)+`#${s.iconf}`},null,8,Ve)])),(0,n.Lk)("span",null,(0,k.v_)(a.$t(s.title)),1),s.children?((0,n.uX)(),(0,n.CE)("i",Ie)):(0,n.Q3)("",!0)]),_:2},1032,["to","class","onClick"])):(0,n.Q3)("",!0),"extLink"==s.type?((0,n.uX)(),(0,n.CE)("a",{key:4,href:s.path,class:"sidebar-link sidebar-title",onClick:a=>o.setNavActive(s,i)},[((0,n.uX)(),(0,n.CE)("svg",Ue,[(0,n.Lk)("use",{"xlink:href":t(1274)+`#${s.icon}`},null,8,Re)])),((0,n.uX)(),(0,n.CE)("svg",Qe,[(0,n.Lk)("use",{"xlink:href":t(1274)+`#${s.iconf}`},null,8,We)])),(0,n.Lk)("span",null,(0,k.v_)(s.title),1),s.children?((0,n.uX)(),(0,n.CE)("i",Ke)):(0,n.Q3)("",!0)],8,Ne)):(0,n.Q3)("",!0),"extTabLink"==s.type?((0,n.uX)(),(0,n.CE)("a",{key:5,href:s.path,target:"_blank",class:"sidebar-link sidebar-title",onClick:a=>o.setNavActive(s,i)},[((0,n.uX)(),(0,n.CE)("svg",$e,[(0,n.Lk)("use",{"xlink:href":t(1274)+`#${s.icon}`},null,8,Ge)])),((0,n.uX)(),(0,n.CE)("svg",Je,[(0,n.Lk)("use",{"xlink:href":t(1274)+`#${s.iconf}`},null,8,qe)])),(0,n.Lk)("span",null,(0,k.v_)(s.title),1),s.children?((0,n.uX)(),(0,n.CE)("i",He)):(0,n.Q3)("",!0)],8,Oe)):(0,n.Q3)("",!0),s.children?((0,n.uX)(),(0,n.CE)("ul",{key:6,class:(0,k.C4)(["sidebar-submenu",{"menu-open":s.active}]),style:(0,k.Tr)({display:s.active?"":"none"})},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.children,(a,t)=>((0,n.uX)(),(0,n.CE)("li",{key:t},["sub"==a.type?((0,n.uX)(),(0,n.CE)("a",{key:0,class:(0,k.C4)(["lan-4",{active:a.active}]),href:"javascript:void(0)",onClick:e=>o.setNavActive(a,t)},[(0,n.eW)((0,k.v_)(a.title)+" ",1),a.badgeType?((0,n.uX)(),(0,n.CE)("label",{key:0,class:(0,k.C4)("badge badge-"+a.badgeType+" pull-right")},(0,k.v_)(a.badgeValue),3)):(0,n.Q3)("",!0),a.children?((0,n.uX)(),(0,n.CE)("i",{key:1,class:(0,k.C4)(["fa pull-right mt-1",[a.active?"fa fa-angle-down":"fa fa-angle-right"]])},null,2)):(0,n.Q3)("",!0)],10,Ye)):(0,n.Q3)("",!0),"link"==a.type?((0,n.uX)(),(0,n.Wv)(r,{key:1,class:(0,k.C4)(["lan-4",{active:a.active}]),to:a.path,onClick:[e=>o.setNavActive(a,t),e[1]||(e[1]=a=>o.hidesecondmenu())]},{default:(0,n.k6)(()=>[(0,n.eW)((0,k.v_)(a.title)+" ",1),a.badgeType?((0,n.uX)(),(0,n.CE)("label",{key:0,class:(0,k.C4)("badge badge-"+a.badgeType+" pull-right")},(0,k.v_)(a.badgeValue),3)):(0,n.Q3)("",!0),a.children?((0,n.uX)(),(0,n.CE)("i",ze)):(0,n.Q3)("",!0)]),_:2},1032,["class","to","onClick"])):(0,n.Q3)("",!0),"extLink"==a.type?((0,n.uX)(),(0,n.CE)("a",{key:2,href:a.path,class:"submenu-title"},[(0,n.eW)((0,k.v_)(a.title)+" ",1),a.badgeType?((0,n.uX)(),(0,n.CE)("label",{key:0,class:(0,k.C4)("badge badge-"+a.badgeType+" pull-right")},(0,k.v_)(a.badgeValue),3)):(0,n.Q3)("",!0),a.children?((0,n.uX)(),(0,n.CE)("i",at)):(0,n.Q3)("",!0)],8,Ze)):(0,n.Q3)("",!0),"extTabLink"==a.type?((0,n.uX)(),(0,n.CE)("a",{key:3,class:"submenu-title",href:a.path,target:"_blank"},[(0,n.eW)((0,k.v_)(a.title)+" ",1),a.badgeType?((0,n.uX)(),(0,n.CE)("label",{key:0,class:(0,k.C4)("badge badge-"+a.badgeType+" pull-right")},(0,k.v_)(a.badgeValue),3)):(0,n.Q3)("",!0),a.children?((0,n.uX)(),(0,n.CE)("i",tt)):(0,n.Q3)("",!0)],8,et)):(0,n.Q3)("",!0),a.children?((0,n.uX)(),(0,n.CE)("ul",{key:4,class:(0,k.C4)(["nav-sub-childmenu submenu-content",{opensubchild:a.active}])},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.children,(a,t)=>((0,n.uX)(),(0,n.CE)("li",{key:t},["link"==a.type?((0,n.uX)(),(0,n.Wv)(r,{key:0,class:(0,k.C4)({active:a.active}),to:a.path,onClick:[e[2]||(e[2]=a=>o.hidesecondmenu()),e=>o.setNavActive(a,t)]},{default:(0,n.k6)(()=>[(0,n.eW)((0,k.v_)(a.title)+" ",1),a.badgeType?((0,n.uX)(),(0,n.CE)("label",{key:0,class:(0,k.C4)("badge badge-"+a.badgeType+" pull-right")},(0,k.v_)(a.badgeValue),3)):(0,n.Q3)("",!0),a.children?((0,n.uX)(),(0,n.CE)("i",st)):(0,n.Q3)("",!0)]),_:2},1032,["class","to","onClick"])):(0,n.Q3)("",!0),"extLink"==a.type?((0,n.uX)(),(0,n.Wv)(r,{key:1,to:a.path},{default:(0,n.k6)(()=>[(0,n.eW)((0,k.v_)(a.title)+" ",1),a.badgeType?((0,n.uX)(),(0,n.CE)("label",{key:0,class:(0,k.C4)("badge badge-"+a.badgeType+" pull-right")},(0,k.v_)(a.badgeValue),3)):(0,n.Q3)("",!0),a.children?((0,n.uX)(),(0,n.CE)("i",it)):(0,n.Q3)("",!0)]),_:2},1032,["to"])):(0,n.Q3)("",!0),"extLink"==a.type?((0,n.uX)(),(0,n.Wv)(r,{key:2,to:a.path},{default:(0,n.k6)(()=>[(0,n.eW)((0,k.v_)(a.title)+" ",1),a.badgeType?((0,n.uX)(),(0,n.CE)("label",{key:0,class:(0,k.C4)("badge badge-"+a.badgeType+" pull-right")},(0,k.v_)(a.badgeValue),3)):(0,n.Q3)("",!0),a.children?((0,n.uX)(),(0,n.CE)("i",lt)):(0,n.Q3)("",!0)]),_:2},1032,["to"])):(0,n.Q3)("",!0)]))),128))],2)):(0,n.Q3)("",!0)]))),128))],6)):(0,n.Q3)("",!0)],2))),128))],4)])}t(1148),t(7588);var ot={name:"Navmenu",data(){return{layoutobj:{},items:[],text:"",active:!1}},computed:{...(0,y.aH)({menuItems:a=>a.menu.data,layout:a=>a.layout.layout,sidebar:a=>a.layout.sidebarType,activeoverlay:a=>a.menu.activeoverlay,togglesidebar:a=>a.menu.togglesidebar,width:a=>a.menu.width,height:a=>a.menu.height,margin:a=>a.menu.margin,menuWidth:a=>a.menu.menuWidth}),showPinTitle:{get(){let a=!1;return this.menuItems.every(e=>(e.showPin&&(a=!0),!a)),a}},layoutobject:{get:function(){return JSON.parse(JSON.stringify(v.find(a=>Object.keys(a).pop()===this.layout.settings.layout)))[this.layout.settings.layout]},set:function(){return this.layoutobj=v.find(a=>Object.keys(a).pop()===this.layout.settings.layout),this.layoutobj=JSON.parse(JSON.stringify(this.layoutobj))[this.layout.settings.layout],this.layoutobj}}},watch:{width(){if(window.addEventListener("resize",this.handleResize),this.handleResize(),window.addEventListener("scroll",this.handleScroll),this.handleScroll(),window.innerWidth<992){const a=JSON.parse(JSON.stringify(this.layoutobject).replace("horizontal-wrapper","compact-wrapper"));document.querySelector(".page-wrapper").className="page-wrapper "+a,this.$store.state.menu.margin=0}else document.querySelector(".page-wrapper").className="page-wrapper "+this.layoutobject;(window.innerWidth<1199&&"Tokyo"===this.layout.settings.layout||window.innerWidth<1199&&"Moscow"===this.layout.settings.layout||window.innerWidth<1199&&"Rome"===this.layout.settings.layout)&&this.menuItems.filter(a=>{a.active=!1})}},created(){window.addEventListener("resize",this.handleResize),this.handleResize(),this.$store.state.menu.width<991&&(this.layout.settings.layout="Dubai",this.margin=0),setTimeout(()=>{const a=document.getElementById("myDIV");this.$store.state.menu.menuWidth=a.offsetWidth,this.$store.state.menu.menuWidth>window.innerWidth?(this.$store.state.menu.hideRightArrow=!1,this.$store.state.menu.hideLeftArrowRTL=!1):(this.$store.state.menu.hideRightArrow=!1,this.$store.state.menu.hideLeftArrowRTL=!0)},500),this.layoutobject=v.find(a=>Object.keys(a).pop()===this.layout.settings.layout),this.layoutobject=JSON.parse(JSON.stringify(this.layoutobject))[this.layout.settings.layout]},destroyed(){window.removeEventListener("resize",this.handleResize)},mounted(){window.addEventListener("unload",this.HandleUnload);let a=JSON.parse(localStorage.getItem("pins")||"[]");a.forEach(a=>{let e=this.menuItems.findIndex(e=>e.title==a);e>-1&&(this.menuItems[e].showPin=!0)}),this.menuItems.filter(a=>{if(a.path===this.$route.path&&this.$store.dispatch("menu/setActiveRoute",a),!a.children)return!1;a.children.filter(a=>{if(a.path===this.$route.path&&this.$store.dispatch("menu/setActiveRoute",a),!a.children)return!1;a.children.filter(a=>{a.path===this.$route.path&&this.$store.dispatch("menu/setActiveRoute",a)})})})},methods:{HandleUnload(){let a=[];this.menuItems.forEach(e=>{e.showPin&&a.push(e.title)}),localStorage.setItem("pins",JSON.stringify(a))},handleScroll(){window.scrollY>400?"material-type"!==this.layoutobject.split(" ").pop()&&"advance-layout"!==this.layoutobject.split(" ").pop()||(document.querySelector(".sidebar-main").className="sidebar-main hovered"):document.getElementById("sidebar-main")&&(document.querySelector(".sidebar-main").className="sidebar-main")},togglePinnedName({item:a}){a.showPin=!a.showPin,this.menuItems.length>0?this.menuItems="show":this.menuItems=""},setNavActive(a){this.$store.dispatch("menu/setNavActive",a),this.layoutobject.split(" ").includes("compact-sidebar")&&window.innerWidth>991&&(this.menuItems.some(a=>!0===a.active)?this.$store.state.menu.activeoverlay=!0:this.$store.state.menu.activeoverlay=!1)},setNavActiveh(a){this.layoutobject.split(" ").includes("horizontal-wrapper")&&(this.$store.dispatch("menu/setNavActive",a),this.layoutobject.split(" ").includes("compact-sidebar")&&window.innerWidth>991&&(this.menuItems.some(a=>!0===a.active)?this.$store.state.menu.activeoverlay=!0:this.$store.state.menu.activeoverlay=!1))},hidesecondmenu(){window.innerWidth<991?(this.$store.state.menu.activeoverlay=!1,this.$store.state.menu.togglesidebar=!1,this.menuItems.filter(a=>{a.active=!1})):this.layoutobject.split(" ").includes("compact-sidebar")&&(this.$store.state.menu.activeoverlay=!1,this.menuItems.filter(a=>{a.active=!1}))},handleResize(){this.$store.state.menu.width=window.innerWidth-450}}};const rt=(0,r.A)(ot,[["render",nt]]);var ct=rt,dt={name:"Nav",components:{Navmenu:ct},data(){return{layoutobj:{}}},computed:{...(0,y.aH)({layout:a=>a.layout.layout,hideRightArrowRTL:a=>a.menu.hideRightArrowRTL,hideLeftArrowRTL:a=>a.menu.hideLeftArrowRTL,hideRightArrow:a=>a.menu.hideRightArrow,hideLeftArrow:a=>a.menu.hideLeftArrow,width:a=>a.menu.width,height:a=>a.menu.height,margin:a=>a.menu.margin,menuWidth:a=>a.menu.menuWidth}),layoutobject:{get:function(){return JSON.parse(JSON.stringify(v.find(a=>Object.keys(a).pop()===this.layout.settings.layout)))[this.layout.settings.layout]},set:function(){return this.layoutobj=v.find(a=>Object.keys(a).pop()===this.layout.settings.layout),this.layoutobj=JSON.parse(JSON.stringify(this.layoutobj))[this.layout.settings.layout],this.layoutobj}}},watch:{layoutobject(){setTimeout(()=>{const a=document.getElementById("myDIV");this.$store.state.menu.menuWidth=a.offsetWidth},500)}},methods:{scrollToRightRTL(){this.temp=this.$store.state.menu.width+this.$store.state.menu.margin,0===this.temp?(this.$store.state.menu.margin=this.temp,this.$store.state.menu.hideRightArrowRTL=!1):(this.$store.state.menu.margin+=this.$store.state.menu.width,this.$store.state.menu.hideRightArrowRTL=!1,this.$store.state.menu.hideLeftArrowRTL=!1)},scrollToLeftRTL(){this.$store.state.menu.margin<=-this.$store.state.menu.width?(this.$store.state.menu.margin+=-this.$store.state.menu.width,this.$store.state.menu.hideLeftArrowRTL=!0):(this.$store.state.menu.margin+=-this.$store.state.menu.width,this.$store.state.menu.hideRightArrowRTL=!1,this.$store.state.menu.activeoverlay=!1)},scrollToLeft(){this.$store.state.menu.margin>=-this.$store.state.menu.width?(this.$store.state.menu.margin=0,this.$store.state.menu.hideLeftArrow=!0):(this.$store.state.menu.margin+=this.$store.state.menu.width,this.$store.state.menu.hideRightArrow=!1)},scrollToRight(){this.temp=this.$store.state.menu.width-this.$store.state.menu.margin,this.temp+this.$store.state.menu.width>this.$store.state.menu.menuWidth?(this.$store.state.menu.margin=-this.temp,this.$store.state.menu.hideRightArrow=!0):(this.$store.state.menu.margin+=-this.$store.state.menu.width,this.$store.state.menu.hideLeftArrow=!1)}}};const ut=(0,r.A)(dt,[["render",Ce]]);var mt=ut,kt={name:"Sidebar",components:{Logo:ye,Nav:mt},computed:{...(0,y.aH)({menuItems:a=>a.menu.data,activeoverlay:a=>a.menu.activeoverlay})},methods:{toggle_sidebar(){this.$store.dispatch("menu/opensidebar"),this.$store.state.menu.activeoverlay=!1}}};const ht=(0,r.A)(kt,[["render",ge]]);var gt=ht;function pt(a,e,t,s,i,l){return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("footer",{class:(0,k.C4)(["footer","footer-dark"==this.footer?"footer-dark":""])},e[0]||(e[0]=[(0,n.Lk)("div",{class:"container-fluid"},[(0,n.Lk)("div",{class:"row"},[(0,n.Lk)("div",{class:"col-md-12 footer-copyright text-center"},[(0,n.Lk)("p",{class:"mb-0"},"Copyright 2023 © Desa Online | Ruang Media Solusi ")])])],-1)]),2)])}var bt={data:[{headTitle1:"General",type:"headtitle"},{title:"Beranda",icon:"stroke-home",iconf:"fill-home",type:"link",path:"/",active:!1},{title:"Informasi Desa",icon:"stroke-faq",iconf:"fill-faq",type:"sub",active:!1,children:[{path:"/village-information/profile",title:"Profil Desa",type:"link",active:!1}]},{title:"Pemerintahan",icon:"stroke-board",iconf:"fill-board",type:"sub",active:!1,children:[{path:"/village-government/officials",title:"Perangkat Desa",type:"link",active:!1},{path:"/village-government/tenure-periods",title:"Periode Jabatan",type:"link",active:!1}]},{title:"Kependudukan",icon:"customers",iconf:"customers",type:"sub",active:!1,children:[{path:"/population/residents",title:"Penduduk",type:"link",active:!1},{path:"/population/families",title:"keluarga",type:"link",active:!1},{path:"/population/households",title:"Rumah Tangga",type:"link",active:!1},{path:"/population/groups",title:"Kelompok",type:"link",active:!1}]},{title:"Dokumen",icon:"stroke-file",iconf:"fill-file",type:"sub",active:!1,children:[{path:"/documents/incoming-letters",title:"Surat Masuk",type:"link",active:!1},{path:"/documents/outgoing-letters",title:"Surat Keluar",type:"link",active:!1},{path:"/documents/regulations",title:"Peraturan/regulasi",type:"link",active:!1},{path:"/documents/decrees",title:"Keputusan Kepala Desa",type:"link",active:!1}]},{title:"Agenda Kegiatan",icon:"stroke-calendar",iconf:"fill-calendar",type:"sub",active:!1,children:[{path:"/activities/programs",title:"Progam Kegiatan",type:"link",active:!1},{path:"/activities/categories",title:"Kategori Kegiatan",type:"link",active:!1}]},{title:"Keuangan",icon:"stroke-charts",iconf:"fill-charts",type:"sub",active:!1,children:[{path:"/cash-flow/income",title:"Pemasukan",type:"link",active:!1},{path:"/cash-flow/expenses",title:"Pengeluaran",type:"link",active:!1}]},{title:"Aset/Inventory",icon:"stroke-bonus-kit",iconf:"fill-bonus-kit",type:"sub",active:!1,children:[{path:"/assets/land",title:"Tanah",type:"link",active:!1},{path:"/assets/buildings",title:"Bangunan",type:"link",active:!1},{path:"/assets/rooms",title:"Ruangan",type:"link",active:!1},{path:"/assets/vehicles",title:"Kendaraan",type:"link",active:!1},{path:"/assets/equipment",title:"Peralatan dan Mesin",type:"link",active:!1},{path:"/assets/items",title:"Barang",type:"link",active:!1}]},{title:"Pertanahan",icon:"stroke-maps",iconf:"fill-maps",type:"sub",active:!1,children:[{path:"/land-affairs/parcels",title:"Data Percil",type:"link",active:!1},{path:"/land-affairs/c-ledger",title:"C Desa",type:"link",active:!1}]},{title:"Badan Usaha",icon:"stroke-ecommerce",iconf:"fill-ecommerce",type:"sub",active:!1,children:[{path:"/enterprise/profile",title:"Profil",type:"link",active:!1},{path:"/enterprise/management",title:"Pengurus/Pengelola",type:"link",active:!1},{path:"/enterprise/reports",title:"Laporan Usaha",type:"link",active:!1}]},{title:"Website",icon:"stroke-internationalization",iconf:"fill-internationalization",type:"sub",active:!1,children:[{title:"Artikel",type:"sub",active:!1,children:[{path:"/website/articles/list",title:"Artikel",type:"link",active:!1},{path:"/website/articles/categories",title:"Kategori Artikel",type:"link",active:!1}]},{title:"Download",type:"sub",active:!1,children:[{path:"/website/download/documents",title:"Dokumen",type:"link",active:!1},{path:"/website/download/document-types",title:"Jenis Dokumen",type:"link",active:!1}]}]},{title:"Banner",icon:"stroke-gallery",iconf:"fill-gallery",type:"link",path:"/banner",active:!1},{title:"Layanan",icon:"stroke-job-search",iconf:"fill-job-search",type:"link",path:"/services",active:!1},{title:"Pengumuman",icon:"notification",iconf:"notification",type:"link",path:"/notices",active:!1},{title:"Link Terkait",icon:"stroke-button",iconf:"fill-button",type:"link",path:"/related-links",active:!1},{headTitle1:"Referensi",type:"headtitle"},{title:"Umum",icon:"stroke-user",iconf:"fill-user",type:"sub",active:!1,children:[{path:"/general/user",title:"Pengguna",type:"link",active:!1},{path:"/general/roles",title:"Role",type:"link",active:!1},{path:"/general/regions",title:"Wilayah",type:"link",active:!1}]},{title:"Kependudukan",icon:"stroke-social",iconf:"fill-social",type:"sub",active:!1,children:[{path:"/demographics/religions",title:"Agama",type:"link",active:!1},{path:"/demographics/blood-types",title:"Golongan Darah",type:"link",active:!1},{path:"/demographics/family-relationships",title:"Hubungan Keluarga",type:"link",active:!1},{path:"/demographics/genders",title:"Jenis Kelamin",type:"link",active:!1},{path:"/demographics/occupations",title:"Pekerjaan",type:"link",active:!1},{path:"/demographics/education-levels",title:"Pendidikan",type:"link",active:!1},{path:"/demographics/birth-attendants",title:"Penolong Kelahiran",type:"link",active:!1},{path:"/demographics/birth-places",title:"Tempat Dilahirkan",type:"link",active:!1},{path:"/demographics/martial-statuses",title:"Status Perkawinan",type:"link",active:!1},{path:"/demographics/group-categories",title:"Kategori Kelompok",type:"link",active:!1}]},{title:"Keuangan",icon:"stroke-charts",iconf:"fill-charts",type:"sub",active:!1,children:[{path:"/finance/budget-sources",title:"Sumber Anggaran",type:"link",active:!1},{path:"/finance/account-codes",title:"Kode Rekening",type:"link",active:!1}]},{title:"Pemerintahan",icon:"stroke-builders",iconf:"fill-builders",type:"sub",active:!1,children:[{path:"/government/positions",title:"Jabatan",type:"link",active:!1},{path:"/government/official-status",title:"Status Perangkat",type:"link",active:!1}]},{title:"BUMDES",icon:"stroke-project",iconf:"fill-project",type:"sub",active:!1,children:[{path:"/bumdes/business-fields",title:"Bidang Usaha",type:"link",active:!1},{path:"/bumdes/report-periods",title:"Periode Laporan Usaha",type:"link",active:!1}]},{title:"Dokumen",icon:"stroke-file",iconf:"fill-file",type:"sub",active:!1,children:[{path:"/archives/incoming-letter-types",title:"Jenis Surat Masuk",type:"link",active:!1},{path:"/archives/outgoing-letter-types",title:"Jenis Surat Keluar",type:"link",active:!1},{path:"/archives/regulation-types",title:"Jenis Peraturan/Regulasi",type:"link",active:!1}]},{title:"Aset",icon:"stroke-bonus-kit",iconf:"fill-bonus-kit",type:"sub",active:!1,children:[{path:"/inventory/legal-status",title:"Status Hak",type:"link",active:!1},{path:"/inventory/land-origins",title:"Asal Usul Tanah",type:"link",active:!1},{path:"/inventory/acquisition-procedures",title:"Prosedur Penguasaan",type:"link",active:!1},{path:"/inventory/acquisitions",title:"Perolehan",type:"link",active:!1},{path:"/inventory/conditions",title:"Kondisi",type:"link",active:!1},{path:"/inventory/multi-story-construction",title:"Kontruksi Bertingkat",type:"link",active:!1},{path:"/inventory/concrete-construction",title:"Kontruksi Beton",type:"link",active:!1},{path:"/inventory/physical-status",title:"Keberadaan Fisik",type:"link",active:!1},{path:"/inventory/item-categories",title:"Kategori Barang",type:"link",active:!1}]}]},ft={name:"footerpage",data(){return{customizer:!1,data:"data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(s["default"]))}},computed:{...(0,y.L8)({footer:"layout/footer"})}};const Lt=(0,r.A)(ft,[["render",pt]]);var yt=Lt;function vt(a,e,t,s,i,l){const o=(0,n.g2)("vue-feather");return(0,n.uX)(),(0,n.CE)("div",{class:"tap-top",style:(0,k.Tr)([i.display?{display:"block"}:{display:"none"}])},[(0,n.bF)(o,{type:"chevrons-up",onClick:e[0]||(e[0]=a=>l.executeScroll())})],4)}var Ct={name:"TapTop",data(){return{display:!1}},created(){window.addEventListener("scroll",this.handleScroll)},unmounted(){window.removeEventListener("scroll",this.handleScroll)},methods:{executeScroll(){window.scrollTo({top:0,left:0,behavior:"smooth"})},handleScroll(){window.scrollY>600?this.display=!0:this.display=!1}}};const Pt=(0,r.A)(Ct,[["render",vt]]);var Et=Pt,Dt={props:["sidebar_toggle_var"],components:{Header:ue,Sidebar:gt,Footer:yt,TapTop:Et},data(){return{loading:!0,mobileheader_toggle_var:!1,sidebar_toggle_var:!1,horizontal_Sidebar:!0,resized:!1,layoutobj:{}}},computed:{...(0,y.aH)({menuItems:a=>a.menu.data,layout:a=>a.layout.layout,togglesidebar:a=>a.menu.togglesidebar,activeoverlay:a=>a.menu.activeoverlay,svg:a=>a.layout.svg}),...(0,y.L8)({sidebar:"layout/sidebar"}),layoutobject:{get:function(){return JSON.parse(JSON.stringify(v.find(a=>Object.keys(a).pop()===this.layout.settings.layout)))[this.layout.settings.layout]},set:function(){return this.layoutobj=v.find(a=>Object.keys(a).pop()===this.layout.settings.layout),this.layoutobj=JSON.parse(JSON.stringify(this.layoutobj))[this.layout.settings.layout],this.layoutobj}}},watch:{$route(){if(setTimeout(()=>{this.loading=!this.loading},3e3),this.loading=!this.loading,this.menuItems.filter(a=>{if(a.path===this.$route.path&&this.$store.dispatch("menu/setActiveRoute",a),!a.children)return!1;a.children.filter(a=>{if(a.path===this.$route.path&&this.$store.dispatch("menu/setActiveRoute",a),!a.children)return!1;a.children.filter(a=>{a.path===this.$route.path&&this.$store.dispatch("menu/setActiveRoute",a)})})}),this.layoutobj=v.find(a=>Object.keys(a).pop()===this.layout.settings.layout),console.log("layobj==>",this.layoutobj),window.innerWidth<991&&"LosAngeles"===this.layout.settings.layout||window.innerWidth<991&&"Singapore"===this.layout.settings.layout||window.innerWidth<991&&"Barcelona"===this.layout.settings.layout){const a=JSON.parse(JSON.stringify(this.layoutobj).replace("horizontal-wrapper","compact-wrapper"));this.layoutobj=JSON.parse(JSON.stringify(a))[this.layout.settings.layout]}else this.layoutobj=JSON.parse(JSON.stringify(this.layoutobj))[this.layout.settings.layout]},sidebar_toggle_var:function(){this.resized=this.width<=991?!this.sidebar_toggle_var:this.sidebar_toggle_var}},created(){window.addEventListener("resize",this.handleResize),this.handleResize(),this.resized=this.sidebar_toggle_var,this.$store.dispatch("layout/set"),this.layout.settings.layout=this.$route.query.layout?this.$route.query.layout:"Dubai",this.layoutobj=v.find(a=>Object.keys(a).pop()===this.layout.settings.layout),this.layoutobj=JSON.parse(JSON.stringify(this.layoutobj))[this.layout.settings.layout]},methods:{sidebar_toggle(a){this.sidebar_toggle_var=!a},mobiletoggle_toggle(a){this.mobileheader_toggle_var=a},handleResize(){this.$store.dispatch("menu/resizetoggle")},removeoverlay(){this.$store.state.menu.activeoverlay=!1,window.innerWidth<991&&(this.$store.state.menu.togglesidebar=!1),this.menuItems.filter(a=>{a.active=!1})},hidesecondmenu(){this.layoutobject.split(" ").includes("compact-sidebar")&&this.menuItems.filter(a=>{a.active=!1}),window.innerWidth<991&&(this.$store.state.menu.togglesidebar=!1)}},mounted(){this.loading=!1}};const Mt=(0,r.A)(Dt,[["render",L]]);var wt=Mt;const Ft={class:"container-fluid"},Xt={class:"row widget-grid"};function xt(a,e,t,s,i,l){const o=(0,n.g2)("Breadcrumbs"),r=(0,n.g2)("WelcomeCard");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(o,{main:"Dashboard",title:a.$route.meta.title},null,8,["title"]),(0,n.Lk)("div",Ft,[(0,n.Lk)("div",Xt,[(0,n.bF)(r)])])])}var Tt=t.p+"img/cartoon.8cc6ce88.svg";const St={class:"col-xxl-4 col-sm-6 box-col-6"};function Bt(a,e,t,s,i,l){return(0,n.uX)(),(0,n.CE)("div",St,e[0]||(e[0]=[(0,n.Fv)('<div class="card profile-box"><div class="card-body"><div class="media"><div class="media-body"><div class="greeting-user"><h4 class="f-w-600 mb-0">Welcome to cuba</h4><p>Here whats happing in your account today</p><div class="whatsnew-btn"><a class="btn btn-outline-white">Whats New !</a></div></div></div><div><div class="clockbox"><svg id="clock" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 600 600"><g id="face"><circle class="circle" cx="300" cy="300" r="253.9"></circle><path class="hour-marks" d="M300.5 94V61M506 300.5h32M300.5 506v33M94 300.5H60M411.3 107.8l7.9-13.8M493 190.2l13-7.4M492.1 411.4l16.5 9.5M411 492.3l8.9 15.3M189 492.3l-9.2 15.9M107.7 411L93 419.5M107.5 189.3l-17.1-9.9M188.1 108.2l-9-15.6"></path><circle class="mid-circle" cx="300" cy="300" r="16.2"></circle></g><g id="hour"><path class="hour-hand" d="M300.5 298V142"></path><circle class="sizing-box" cx="300" cy="300" r="253.9"></circle></g><g id="minute"><path class="minute-hand" d="M300.5 298V67"></path><circle class="sizing-box" cx="300" cy="300" r="253.9"></circle></g><g id="second"><path class="second-hand" d="M300.5 350V55"></path><circle class="sizing-box" cx="300" cy="300" r="253.9"></circle></g></svg></div><div class="badge f-10 p-0" id="txt"></div></div></div><div class="cartoon"><img class="img-fluid" src="'+Tt+'" alt="vector women with leptop"></div></div></div>',1)]))}var At={data(){return{interval:"",greeting:"",time:""}},mounted(){const a=document.querySelector("#hour"),e=document.querySelector("#minute"),t=document.querySelector("#second");var s=new Date;let i=s.getHours(),l=s.getMinutes(),n=s.getSeconds();var o=i>=12?"PM":"AM";let r=360*i/12+6*l/12,c=360*l/60+6*n/60,d=360*n/60;function u(){r+=30/3600,c+=.1,d+=6,a.style.transform="rotate("+r+"deg)",e.style.transform="rotate("+c+"deg)",t.style.transform="rotate("+d+"deg)",document.getElementById("txt").innerHTML=i+":"+l+" "+o}this.interval=setInterval(u,1e3)},unmounted(){clearTimeout(this.interval)}};const _t=(0,r.A)(At,[["render",Bt]]);var jt=_t,Vt={components:{WelcomeCard:jt}};const It=(0,r.A)(Vt,[["render",xt]]);var Nt=It;const Ut={class:"container-fluid"},Rt={class:"row"},Qt={class:"col-12 p-0"},Wt={class:"login-card"},Kt={class:"login-main"},Ot={class:"theme-form"},$t={class:"form-group"},Gt={key:0,class:"validate-error"},Jt={class:"form-group"},qt={class:"form-input position-relative"},Ht=["type"],Yt={key:0,class:"validate-error"},zt={class:"form-group mb-0"},Zt={class:"text-end mt-3"};function as(a,e,t,s,i,o){const r=(0,n.g2)("vue-feather");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",Ut,[(0,n.Lk)("div",Rt,[(0,n.Lk)("div",Qt,[(0,n.Lk)("div",Wt,[(0,n.Lk)("div",null,[e[9]||(e[9]=(0,n.Lk)("div",null,[(0,n.Lk)("a",{class:"logo"},[(0,n.Lk)("img",{class:"img-fluid for-light",src:Wa,alt:"looginpage"}),(0,n.Lk)("img",{class:"img-fluid for-dark",src:pe,alt:"looginpage"})])],-1)),(0,n.Lk)("div",Kt,[(0,n.Lk)("form",Ot,[e[7]||(e[7]=(0,n.Lk)("h4",null,"Sign in to account",-1)),e[8]||(e[8]=(0,n.Lk)("p",null,"Enter your email & password to login",-1)),(0,n.Lk)("div",$t,[e[4]||(e[4]=(0,n.Lk)("label",{class:"col-form-label"},"Email Address",-1)),(0,n.bo)((0,n.Lk)("input",{class:"form-control",type:"email",required:"",placeholder:"email@gmail.com","onUpdate:modelValue":e[0]||(e[0]=a=>i.user.email.value=a)},null,512),[[l.Jo,i.user.email.value]]),i.user.email.value&&o.validEmail(i.user.email.value)?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("span",Gt,(0,k.v_)(i.user.email.errormsg),1))]),(0,n.Lk)("div",Jt,[e[5]||(e[5]=(0,n.Lk)("label",{class:"col-form-label"},"Password",-1)),(0,n.Lk)("div",qt,[(0,n.bo)((0,n.Lk)("input",{class:"form-control",type:i.showPassword?"text":"password",required:"",placeholder:"*********","onUpdate:modelValue":e[1]||(e[1]=a=>i.user.password.value=a)},null,8,Ht),[[l.hp,i.user.password.value]]),(0,n.Lk)("span",{class:"position-absolute end-0 top-50 translate-middle-y me-3",style:{cursor:"pointer"},onClick:e[2]||(e[2]=(...a)=>o.togglePassword&&o.togglePassword(...a))},[(0,n.bF)(r,{type:i.showPassword?"eye-off":"eye"},null,8,["type"])]),i.user.password.value.length<7?((0,n.uX)(),(0,n.CE)("span",Yt,(0,k.v_)(i.user.password.errormsg),1)):(0,n.Q3)("",!0)])]),(0,n.Lk)("div",zt,[e[6]||(e[6]=(0,n.Lk)("div",{class:"checkbox p-0"},[(0,n.Lk)("input",{id:"checkbox1",type:"checkbox"}),(0,n.Lk)("label",{class:"text-muted",for:"checkbox1"},"Remember password")],-1)),(0,n.Lk)("div",Zt,[(0,n.Lk)("button",{class:"btn btn-primary btn-block w-100",type:"submit",onClick:e[3]||(e[3]=(0,l.D$)((...a)=>o.login&&o.login(...a),["prevent"]))}," Sign in ")])])])])])])])])])])}const es=async(a,e)=>{try{const t=new FormData;t.append("email",a),t.append("password",e);const s=await Na.post("/auth",t);return s.data}catch(t){throw console.error("Error during login:",t),t}};var ts={name:"login",data(){return{showPassword:!1,user:{email:{value:"",errormsg:""},password:{value:"",errormsg:""}}}},methods:{togglePassword(){this.showPassword=!this.showPassword},async login(){if(this.user.email.errormsg="",this.user.password.errormsg="",this.user.email.value&&this.validEmail(this.user.email.value))if(!this.user.password.value||this.user.password.value.length<6)this.user.password.errormsg="Password minimal 6 karakter.";else try{const a=await es(this.user.email.value,this.user.password.value);console.log("API Response:",a);const e=a?.success,t=e?.token,s=e?.data;t&&s?(localStorage.setItem("User",JSON.stringify({token:t,email:this.user.email.value,id_pengguna:s.id_pengguna})),this.$router.push("/")):alert("Login gagal: Respons dari server tidak valid.")}catch(a){a.response?alert("Login gagal: "+(a.response.data.message||"Email atau password salah.")):alert("Tidak bisa terhubung ke server. Periksa koneksi internet Anda."),console.error("Error saat login:",a)}else this.user.email.errormsg="Email tidak valid."},validEmail(a){const e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return e.test(a)}}};const ss=(0,r.A)(ts,[["render",as]]);var is=ss;const ls={class:"container-fluid"},ns={class:"row"};function os(a,e,t,s,i,l){const o=(0,n.g2)("Breadcrumbs"),r=(0,n.g2)("ProfilesTable");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(o,{main:"Informasi Desa",title:a.$route.meta.title},null,8,["title"]),(0,n.Lk)("div",ls,[(0,n.Lk)("div",ns,[(0,n.bF)(r)])])])}const rs={class:"col-sm-12"},cs={class:"card"},ds={class:"card-body"},us={class:"d-flex justify-content-end align-items-start mb-3"},ms={class:"d-flex gap-2"},ks={key:0,class:"border p-3 mb-3 rounded filter-section"},hs={class:"row g-3"},gs={class:"col-md-4"},ps={class:"col-md-4"},bs={class:"d-flex justify-content-end gap-2 mt-3"},fs={class:"table-responsive"},Ls={class:"table table-hover"},ys={key:0,class:"fa fa-sort-asc"},vs={key:1,class:"fa fa-sort-desc"},Cs={key:2,class:"fa fa-sort"},Ps={key:0,class:"fa fa-sort-asc"},Es={key:1,class:"fa fa-sort-desc"},Ds={key:2,class:"fa fa-sort"},Ms={key:0},ws=["src"],Fs={key:1,class:"text-muted"},Xs={class:"d-flex align-items-center gap-2"},xs=["onClick"],Ts={class:"fw-bold"},Ss={class:"btn-group"},Bs=["onClick"],As=["onClick"],_s=["onClick"],js={key:0,class:"nested-row"},Vs={colspan:5,class:"nested-content-cell"},Is={key:0,class:"text-center p-3"},Ns={key:1,class:"p-3 text-center"},Us=["onClick"],Rs={key:2},Qs={class:"list-group list-group-flush"},Ws={class:"d-flex justify-content-between align-items-center"},Ks={class:"d-flex align-items-center gap-2"},Os=["onClick"],$s={class:"btn-group",role:"group"},Gs=["onClick"],Js=["onClick"],qs=["onClick"],Hs={key:0,class:"nested-list ps-5 pt-2"},Ys={key:0,class:"text-center p-2"},zs={key:1,class:"text-muted fst-italic p-2"},Zs={key:2,class:"list-group list-group-flush"},ai={class:"d-flex justify-content-between align-items-center"},ei={class:"d-flex align-items-center gap-2"},ti=["onClick"],si={class:"btn-group",role:"group"},ii=["onClick"],li=["onClick"],ni=["onClick"],oi={key:0,class:"nested-list ps-5 pt-2"},ri={key:0,class:"text-center p-2"},ci={key:1,class:"text-muted fst-italic p-2"},di={key:2,class:"list-group list-group-flush"},ui={class:"d-flex justify-content-between align-items-center"},mi={class:"d-flex align-items-center ps-4"},ki={class:"btn-group",role:"group"},hi=["onClick"],gi=["onClick"],pi={class:"mt-3 text-end"},bi=["onClick"],fi={key:2},Li={class:"d-flex flex-column flex-md-row justify-content-md-between align-items-center mt-3 px-3 pb-3"},yi={class:"mt-2"},vi={key:0,class:"text-muted"},Ci={key:0,class:"d-flex align-items-center flex-wrap gap-2 mt-2"},Pi={class:"pagination mb-0"},Ei=["onClick"];function Di(a,e,t,s,i,o){const r=(0,n.g2)("add-edit-profile-modal"),c=(0,n.g2)("detail-profile-modal"),d=(0,n.g2)("add-edit-dusun-modal"),u=(0,n.g2)("add-edit-rw-modal"),m=(0,n.g2)("add-edit-rt-modal");return(0,n.uX)(),(0,n.CE)("div",rs,[i.isProfileModalVisible?((0,n.uX)(),(0,n.Wv)(r,{key:0,"profile-to-edit":i.profileBeingEdited,onClose:o.closeProfileModal,onSaveSuccessful:o.handleProfileSaveSuccessful},null,8,["profile-to-edit","onClose","onSaveSuccessful"])):(0,n.Q3)("",!0),i.isDetailModalVisible?((0,n.uX)(),(0,n.Wv)(c,{key:1,"profile-to-view":i.profileBeingViewed,onClose:o.closeDetailModal},null,8,["profile-to-view","onClose"])):(0,n.Q3)("",!0),i.isDusunModalVisible?((0,n.uX)(),(0,n.Wv)(d,{key:2,"profile-data":i.profileForDusun,"dusun-to-edit":i.dusunBeingEdited,onClose:o.closeDusunModal,onSaveSuccessful:o.handleDusunSaveSuccessful},null,8,["profile-data","dusun-to-edit","onClose","onSaveSuccessful"])):(0,n.Q3)("",!0),i.isRwModalVisible?((0,n.uX)(),(0,n.Wv)(u,{key:3,"dusun-data":i.dusunForRw,"rw-to-edit":i.rwBeingEdited,onClose:o.closeRwModal,onSaveSuccessful:o.handleRwSaveSuccessful},null,8,["dusun-data","rw-to-edit","onClose","onSaveSuccessful"])):(0,n.Q3)("",!0),i.isRtModalVisible?((0,n.uX)(),(0,n.Wv)(m,{key:4,"rw-data":i.rwForRt,"rt-to-edit":i.rtBeingEdited,onClose:o.closeRtModal,onSaveSuccessful:o.handleRtSaveSuccessful},null,8,["rw-data","rt-to-edit","onClose","onSaveSuccessful"])):(0,n.Q3)("",!0),(0,n.Lk)("div",cs,[e[46]||(e[46]=(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("h3",null,"Daftar Desa")],-1)),(0,n.Lk)("div",ds,[(0,n.Lk)("div",us,[(0,n.Lk)("div",ms,[(0,n.Lk)("button",{class:"btn btn-outline-light txt-dark",onClick:e[0]||(e[0]=(...a)=>o.toggleFilterVisibility&&o.toggleFilterVisibility(...a))},[(0,n.Lk)("i",{class:(0,k.C4)([i.isFilterVisible?"fa fa-angle-up":"fa fa-angle-down","me-2"])},null,2),(0,n.Lk)("span",null,(0,k.v_)(i.isFilterVisible?"Sembunyikan":"Tampilkan")+" Filter",1)]),(0,n.Lk)("button",{class:"btn btn-success",onClick:e[1]||(e[1]=(...a)=>o.openAddProfileModal&&o.openAddProfileModal(...a))},e[10]||(e[10]=[(0,n.Lk)("i",{class:"fa fa-plus me-2"},null,-1),(0,n.Lk)("span",null,"Tambah Data Desa",-1)]))])]),i.isFilterVisible?((0,n.uX)(),(0,n.CE)("div",ks,[(0,n.Lk)("div",hs,[(0,n.Lk)("div",gs,[e[11]||(e[11]=(0,n.Lk)("label",{for:"filterName",class:"form-label"},"Nama Desa",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterName",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.filters.namawilayah=a),placeholder:"Filter berdasarkan nama desa"},null,512),[[l.Jo,i.filters.namawilayah]])]),(0,n.Lk)("div",ps,[e[12]||(e[12]=(0,n.Lk)("label",{for:"filterAddress",class:"form-label"},"Alamat Kantor",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterAddress",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=a=>i.filters.alamatkantor=a),placeholder:"Filter berdasarkan alamat kantor"},null,512),[[l.Jo,i.filters.alamatkantor]])])]),(0,n.Lk)("div",bs,[(0,n.Lk)("button",{class:"btn btn-secondary",onClick:e[4]||(e[4]=(...a)=>o.resetFilters&&o.resetFilters(...a))},e[13]||(e[13]=[(0,n.Lk)("i",{class:"fa fa-refresh me-2"},null,-1),(0,n.Lk)("span",null,"Reset Filter",-1)])),(0,n.Lk)("button",{class:"btn btn-primary",onClick:e[5]||(e[5]=(...a)=>o.applyFilters&&o.applyFilters(...a))},e[14]||(e[14]=[(0,n.Lk)("i",{class:"fa fa-search me-2"},null,-1),(0,n.Lk)("span",null,"Terapkan Filter",-1)]))])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",fs,[(0,n.Lk)("table",Ls,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[e[17]||(e[17]=(0,n.Lk)("th",{scope:"col",style:{width:"5%"}},"No",-1)),e[18]||(e[18]=(0,n.Lk)("th",{scope:"col",style:{width:"10%"}},"Logo",-1)),(0,n.Lk)("th",{scope:"col",onClick:e[6]||(e[6]=a=>o.sortBy("namawilayah"))},[e[15]||(e[15]=(0,n.eW)(" Nama Desa ")),"namawilayah"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",ys)):"namawilayah"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",vs)):((0,n.uX)(),(0,n.CE)("i",Cs))]),(0,n.Lk)("th",{scope:"col",onClick:e[7]||(e[7]=a=>o.sortBy("alamatkantor"))},[e[16]||(e[16]=(0,n.eW)(" Alamat Kantor ")),"alamatkantor"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",Ps)):"alamatkantor"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",Es)):((0,n.uX)(),(0,n.CE)("i",Ds))]),e[19]||(e[19]=(0,n.Lk)("th",{scope:"col",style:{width:"20%"}},"Aksi",-1))])]),(0,n.Lk)("tbody",null,[i.isLoading?((0,n.uX)(),(0,n.CE)("tr",Ms,e[20]||(e[20]=[(0,n.Lk)("td",{colspan:"5",class:"text-center p-5"},[(0,n.Lk)("div",{class:"spinner-border text-primary",role:"status"}),(0,n.Lk)("p",{class:"mt-2"},"Memuat data...")],-1)]))):o.paginatedProfiles.length>0?((0,n.uX)(!0),(0,n.CE)(n.FK,{key:1},(0,n.pI)(o.paginatedProfiles,(a,t)=>((0,n.uX)(),(0,n.CE)(n.FK,{key:a.iddesa},[(0,n.Lk)("tr",null,[(0,n.Lk)("td",null,(0,k.v_)((i.currentPage-1)*i.perPage+t+1),1),(0,n.Lk)("td",null,[a.logo?((0,n.uX)(),(0,n.CE)("img",{key:0,src:a.logo,alt:"Logo",style:{height:"40px",width:"auto"}},null,8,ws)):((0,n.uX)(),(0,n.CE)("span",Fs,"-"))]),(0,n.Lk)("td",null,[(0,n.Lk)("div",Xs,[(0,n.Lk)("button",{class:"btn btn-expand flex-shrink-0",onClick:e=>o.toggleExpand(a,"desa")},[(0,n.Lk)("i",{class:(0,k.C4)(["fa fa-chevron-right",{"is-expanded":i.expanded.desa[a.iddesa]}])},null,2)],8,xs),(0,n.Lk)("span",Ts,(0,k.v_)(a.wilayah.namawilayah),1)])]),(0,n.Lk)("td",null,(0,k.v_)(a.alamatkantor||"-"),1),(0,n.Lk)("td",null,[(0,n.Lk)("div",Ss,[(0,n.Lk)("button",{class:"btn btn-info btn-sm",onClick:e=>o.openDetailModal(a)},e[21]||(e[21]=[(0,n.Lk)("i",{class:"fa fa-eye"},null,-1)]),8,Bs),(0,n.Lk)("button",{class:"btn btn-primary btn-sm",onClick:e=>o.openEditProfileModal(a)},e[22]||(e[22]=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)]),8,As),(0,n.Lk)("button",{class:"btn btn-danger btn-sm",onClick:e=>o.advancedDeleteAlert(a.iddesa)},e[23]||(e[23]=[(0,n.Lk)("i",{class:"fa fa-trash"},null,-1)]),8,_s)])])]),i.expanded.desa[a.iddesa]?((0,n.uX)(),(0,n.CE)("tr",js,[(0,n.Lk)("td",Vs,[i.loading.dusun[a.iddesa]?((0,n.uX)(),(0,n.CE)("div",Is,e[24]||(e[24]=[(0,n.Lk)("div",{class:"spinner-border spinner-border-sm"},null,-1),(0,n.eW)(" Memuat Dusun... ")]))):i.subData.dusun[a.iddesa]&&0!==i.subData.dusun[a.iddesa].length?((0,n.uX)(),(0,n.CE)("div",Rs,[(0,n.Lk)("ul",Qs,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.subData.dusun[a.iddesa],t=>((0,n.uX)(),(0,n.CE)("li",{key:t.iddusun,class:"list-group-item px-0 py-2"},[(0,n.Lk)("div",Ws,[(0,n.Lk)("div",Ks,[(0,n.Lk)("button",{class:"btn btn-light btn-expand me-2",onClick:a=>o.toggleExpand(t,"dusun")},[(0,n.Lk)("i",{class:(0,k.C4)(["fa fa-chevron-right",{"is-expanded":i.expanded.dusun[t.iddusun]}])},null,2)],8,Os),(0,n.Lk)("span",null,[(0,n.eW)((0,k.v_)(t.namadusun)+" ",1),e[27]||(e[27]=(0,n.Lk)("span",{class:"badge bg-secondary ms-1"},"Dusun",-1))])]),(0,n.Lk)("div",$s,[(0,n.Lk)("button",{class:"btn btn-success btn-xs",title:"Tambah RW",onClick:a=>o.openAddRwModal(t)},e[28]||(e[28]=[(0,n.Lk)("i",{class:"fa fa-plus"},null,-1),(0,n.eW)(" RW ")]),8,Gs),(0,n.Lk)("button",{class:"btn btn-primary btn-xs",title:"Edit Dusun",onClick:e=>o.openEditDusunModal(t,a)},e[29]||(e[29]=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)]),8,Js),(0,n.Lk)("button",{class:"btn btn-danger btn-xs",title:"Hapus Dusun",onClick:e=>o.advancedDeleteDusunAlert(t,a)},e[30]||(e[30]=[(0,n.Lk)("i",{class:"fa fa-trash"},null,-1)]),8,qs)])]),i.expanded.dusun[t.iddusun]?((0,n.uX)(),(0,n.CE)("div",Hs,[i.loading.rw[t.iddusun]?((0,n.uX)(),(0,n.CE)("div",Ys,e[31]||(e[31]=[(0,n.Lk)("div",{class:"spinner-border spinner-border-sm text-secondary"},null,-1),(0,n.eW)(" Memuat RW... ")]))):i.subData.rw[t.iddusun]&&0!==i.subData.rw[t.iddusun].length?((0,n.uX)(),(0,n.CE)("ul",Zs,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.subData.rw[t.iddusun],a=>((0,n.uX)(),(0,n.CE)("li",{key:a.idrw,class:"list-group-item px-0 py-2"},[(0,n.Lk)("div",ai,[(0,n.Lk)("div",ei,[(0,n.Lk)("button",{class:"btn btn-light btn-expand me-2",onClick:e=>o.toggleExpand(a,"rw")},[(0,n.Lk)("i",{class:(0,k.C4)(["fa fa-chevron-right",{"is-expanded":i.expanded.rw[a.idrw]}])},null,2)],8,ti),(0,n.Lk)("span",null,[(0,n.eW)((0,k.v_)(a.namarw)+" ",1),e[32]||(e[32]=(0,n.Lk)("span",{class:"badge bg-info ms-1"},"RW",-1))])]),(0,n.Lk)("div",si,[(0,n.Lk)("button",{class:"btn btn-success btn-xs",title:"Tambah RT",onClick:e=>o.openAddRtModal(a)},e[33]||(e[33]=[(0,n.Lk)("i",{class:"fa fa-plus"},null,-1),(0,n.eW)(" RT ")]),8,ii),(0,n.Lk)("button",{class:"btn btn-primary btn-xs",title:"Edit RW",onClick:e=>o.openEditRwModal(a,t)},e[34]||(e[34]=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)]),8,li),(0,n.Lk)("button",{class:"btn btn-danger btn-xs",title:"Hapus RW",onClick:e=>o.advancedDeleteRwAlert(a,t)},e[35]||(e[35]=[(0,n.Lk)("i",{class:"fa fa-trash"},null,-1)]),8,ni)])]),i.expanded.rw[a.idrw]?((0,n.uX)(),(0,n.CE)("div",oi,[i.loading.rt[a.idrw]?((0,n.uX)(),(0,n.CE)("div",ri,e[36]||(e[36]=[(0,n.Lk)("div",{class:"spinner-border spinner-border-sm text-success"},null,-1),(0,n.eW)(" Memuat RT... ")]))):i.subData.rt[a.idrw]&&0!==i.subData.rt[a.idrw].length?((0,n.uX)(),(0,n.CE)("ul",di,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.subData.rt[a.idrw],t=>((0,n.uX)(),(0,n.CE)("li",{key:t.idrt,class:"list-group-item px-0 py-2"},[(0,n.Lk)("div",ui,[(0,n.Lk)("div",mi,[(0,n.Lk)("span",null,[(0,n.eW)((0,k.v_)(t.namart)+" ",1),e[37]||(e[37]=(0,n.Lk)("span",{class:"badge bg-success ms-1"},"RT",-1))])]),(0,n.Lk)("div",ki,[(0,n.Lk)("button",{class:"btn btn-primary btn-xs",title:"Edit RT",onClick:e=>o.openEditRtModal(t,a)},e[38]||(e[38]=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)]),8,hi),(0,n.Lk)("button",{class:"btn btn-danger btn-xs",title:"Hapus RT",onClick:e=>o.advancedDeleteRtAlert(t,a)},e[39]||(e[39]=[(0,n.Lk)("i",{class:"fa fa-trash"},null,-1)]),8,gi)])])]))),128))])):((0,n.uX)(),(0,n.CE)("div",ci," Belum ada data RT di RW ini. "))])):(0,n.Q3)("",!0)]))),128))])):((0,n.uX)(),(0,n.CE)("div",zs," Belum ada data RW di dusun ini. "))])):(0,n.Q3)("",!0)]))),128))]),(0,n.Lk)("div",pi,[(0,n.Lk)("button",{class:"btn btn-outline-success btn-sm",onClick:e=>o.openAddDusunModal(a)},e[40]||(e[40]=[(0,n.Lk)("i",{class:"fa fa-plus"},null,-1),(0,n.eW)(" Tambah Dusun Baru ")]),8,bi)])])):((0,n.uX)(),(0,n.CE)("div",Ns,[e[26]||(e[26]=(0,n.Lk)("p",{class:"text-muted fst-italic mb-2"}," Belum ada data dusun. ",-1)),(0,n.Lk)("button",{class:"btn btn-success btn-sm",onClick:e=>o.openAddDusunModal(a)},e[25]||(e[25]=[(0,n.Lk)("i",{class:"fa fa-plus"},null,-1),(0,n.eW)(" Tambah Dusun Pertama ")]),8,Us)]))])])):(0,n.Q3)("",!0)],64))),128)):((0,n.uX)(),(0,n.CE)("tr",fi,e[41]||(e[41]=[(0,n.Lk)("td",{colspan:"5",class:"text-center"}," Tidak ada data yang tersedia. ",-1)])))])])]),(0,n.Lk)("div",Li,[(0,n.Lk)("div",yi,[i.totalItems>0?((0,n.uX)(),(0,n.CE)("span",vi,[e[42]||(e[42]=(0,n.eW)(" Menampilkan ")),(0,n.Lk)("strong",null,(0,k.v_)((i.currentPage-1)*i.perPage+1),1),e[43]||(e[43]=(0,n.eW)(" - ")),(0,n.Lk)("strong",null,(0,k.v_)(Math.min(i.currentPage*i.perPage,i.totalItems)),1),e[44]||(e[44]=(0,n.eW)(" dari ")),(0,n.Lk)("strong",null,(0,k.v_)(i.totalItems),1),e[45]||(e[45]=(0,n.eW)(" data "))])):(0,n.Q3)("",!0)]),-1!==i.perPage&&o.totalPages>1?((0,n.uX)(),(0,n.CE)("nav",Ci,[(0,n.Lk)("ul",Pi,[(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[8]||(e[8]=a=>o.changePage(i.currentPage-1))}," Prev ")],2),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.pageNumbers,a=>((0,n.uX)(),(0,n.CE)("li",{class:(0,k.C4)(["page-item",{active:i.currentPage===a}]),key:a},[(0,n.Lk)("button",{class:"page-link",onClick:e=>o.changePage(a)},(0,k.v_)(a),9,Ei)],2))),128)),(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:i.currentPage===o.totalPages}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[9]||(e[9]=a=>o.changePage(i.currentPage+1))}," Next ")],2)])])):(0,n.Q3)("",!0)])])])}const Mi=(a={})=>Na.get("",{params:{act:"profil-desa",...a}}),wi=a=>a?Na.get("",{params:{act:"profil-desa",key:a}}):Promise.reject(new Error("ID profil desa tidak tersedia.")),Fi=a=>(a.append("act","profil-desa"),Na.post("",a)),Xi=(a,e)=>a?(e.append("act","profil-desa"),e.append("key",a),Na.post("",e)):Promise.reject(new Error("ID profil desa tidak tersedia.")),xi=a=>a?Na.delete("",{data:{act:"profil-desa",key:a}}):Promise.reject(new Error("ID profil desa tidak tersedia.")),Ti=(a={})=>Na.get("",{params:{act:"dusun",...a}}),Si=a=>(a.append("act","dusun"),Na.post("",a)),Bi=(a,e)=>a?(e.append("act","dusun"),e.append("key",a),Na.post("",e)):Promise.reject(new Error("ID dusun tidak tersedia.")),Ai=a=>a?Na.delete("",{data:{act:"dusun",key:a}}):Promise.reject(new Error("ID dusun tidak tersedia.")),_i=(a={})=>Na.get("",{params:{act:"rw",...a}}),ji=a=>(a.append("act","rw"),Na.post("",a)),Vi=(a,e)=>a?(e.append("act","rw"),e.append("key",a),Na.post("",e)):Promise.reject(new Error("ID rw tidak tersedia.")),Ii=a=>a?Na.delete("",{data:{act:"rw",key:a}}):Promise.reject(new Error("ID rw tidak tersedia.")),Ni=(a={})=>Na.get("",{params:{act:"rt",...a}}),Ui=a=>(a.append("act","rt"),Na.post("",a)),Ri=(a,e)=>a?(e.append("act","rt"),e.append("key",a),Na.post("",e)):Promise.reject(new Error("ID rt tidak tersedia.")),Qi=a=>a?Na.delete("",{data:{act:"rt",key:a}}):Promise.reject(new Error("ID rt tidak tersedia.")),Wi={class:"modal-header"},Ki={class:"modal-title"},Oi={class:"modal-body"},$i={class:"mb-3"},Gi={class:"input-group"},Ji=["value"],qi={class:"row"},Hi={class:"col-md-8 mb-3"},Yi={class:"col-md-4 mb-3"},zi={class:"mb-3"},Zi={class:"row"},al={class:"col-md-6 mb-3"},el={class:"col-md-6 mb-3"},tl={class:"row"},sl={class:"col-md-6 mb-3"},il=["src"],ll={class:"col-md-6 mb-3"},nl=["src"],ol=["for"],rl=["id","rows","onUpdate:modelValue"],cl={key:0,class:"alert alert-danger mt-3"},dl={class:"modal-footer"},ul=["disabled"],ml={key:0,class:"spinner-border spinner-border-sm",role:"status"},kl={key:1},hl={key:0,class:"modal-overlay-selector"},gl={class:"modal-content-selector"},pl={class:"modal-header"},bl={class:"modal-body-selector"};function fl(a,e,t,s,i,o){const r=(0,n.g2)("FilterRegions");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",{class:"modal-overlay",onClick:e[13]||(e[13]=(...a)=>o.handleOverlayClick&&o.handleOverlayClick(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[12]||(e[12]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",Wi,[(0,n.Lk)("h5",Ki,(0,k.v_)(o.isEditMode?"Edit Data Profil Desa":"Tambah Data Profil Desa"),1),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",Oi,[(0,n.Lk)("form",{onSubmit:e[9]||(e[9]=(0,l.D$)((...a)=>o.submitForm&&o.submitForm(...a),["prevent"]))},[(0,n.Lk)("div",$i,[e[16]||(e[16]=(0,n.Lk)("label",{class:"form-label"},"Nama Desa",-1)),(0,n.Lk)("div",Gi,[(0,n.Lk)("input",{type:"text",class:"form-control",value:i.selectedRegionName,placeholder:"Pilih wilayah dengan menekan tombol 'Cari'",readonly:"",required:""},null,8,Ji),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[1]||(e[1]=(...a)=>o.openRegionSelector&&o.openRegionSelector(...a))},e[15]||(e[15]=[(0,n.Lk)("i",{class:"fa fa-search"},null,-1),(0,n.eW)(" Cari ")]))])]),(0,n.Lk)("div",qi,[(0,n.Lk)("div",Hi,[e[17]||(e[17]=(0,n.Lk)("label",{class:"form-label"},"Alamat Kantor Desa ",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.formData.alamatkantor=a),placeholder:"Masukkan alamat kantor desa",required:""},null,512),[[l.Jo,i.formData.alamatkantor]])]),(0,n.Lk)("div",Yi,[e[18]||(e[18]=(0,n.Lk)("label",{class:"form-label"},"Kode Pos",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=a=>i.formData.kodepos=a),placeholder:"Masukkan kode pos kantor desa",required:""},null,512),[[l.Jo,i.formData.kodepos]])])]),(0,n.Lk)("div",zi,[e[19]||(e[19]=(0,n.Lk)("label",{class:"form-label"},"Koordinat",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[4]||(e[4]=a=>i.formData.koordinat=a),placeholder:"Masukkan koordinat kantor desa",required:""},null,512),[[l.Jo,i.formData.koordinat]])]),(0,n.Lk)("div",Zi,[(0,n.Lk)("div",al,[e[20]||(e[20]=(0,n.Lk)("label",{class:"form-label"},"Email Desa",-1)),(0,n.bo)((0,n.Lk)("input",{type:"email",class:"form-control","onUpdate:modelValue":e[5]||(e[5]=a=>i.formData.email=a),placeholder:"Masukkan email desa",required:""},null,512),[[l.Jo,i.formData.email]])]),(0,n.Lk)("div",el,[e[21]||(e[21]=(0,n.Lk)("label",{class:"form-label"},"Website",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[6]||(e[6]=a=>i.formData.website=a),placeholder:"Masukkan website desa",required:""},null,512),[[l.Jo,i.formData.website]])])]),(0,n.Lk)("div",tl,[(0,n.Lk)("div",sl,[e[22]||(e[22]=(0,n.Lk)("label",{class:"form-label"},"Upload Logo",-1)),(0,n.Lk)("input",{type:"file",class:"form-control",accept:"image/*",onChange:e[7]||(e[7]=a=>o.handleFileUpload(a,"logo"))},null,32),i.logoPreview?((0,n.uX)(),(0,n.CE)("img",{key:0,src:i.logoPreview,alt:"Logo Preview",class:"image-preview mt-2"},null,8,il)):(0,n.Q3)("",!0)]),(0,n.Lk)("div",ll,[e[23]||(e[23]=(0,n.Lk)("label",{class:"form-label"},"Upload Foto Kantor",-1)),(0,n.Lk)("input",{type:"file",class:"form-control",accept:"image/*",onChange:e[8]||(e[8]=a=>o.handleFileUpload(a,"foto"))},null,32),i.fotoPreview?((0,n.uX)(),(0,n.CE)("img",{key:0,src:i.fotoPreview,alt:"Foto Preview",class:"image-preview mt-2"},null,8,nl)):(0,n.Q3)("",!0)])]),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.textareaFields,(a,e)=>((0,n.uX)(),(0,n.CE)("div",{class:"mb-3",key:e},[(0,n.Lk)("label",{for:e,class:"form-label"},(0,k.v_)(a.label),9,ol),(0,n.bo)((0,n.Lk)("textarea",{class:"form-control",id:e,rows:a.rows,"onUpdate:modelValue":a=>i.formData[e]=a},null,8,rl),[[l.Jo,i.formData[e]]])]))),128)),i.errorMessage?((0,n.uX)(),(0,n.CE)("div",cl,(0,k.v_)(i.errorMessage),1)):(0,n.Q3)("",!0)],32)]),(0,n.Lk)("div",dl,[(0,n.Lk)("button",{type:"button",class:"btn btn-danger",onClick:e[10]||(e[10]=(...a)=>o.closeModal&&o.closeModal(...a))},"Batal"),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[11]||(e[11]=(...a)=>o.submitForm&&o.submitForm(...a)),disabled:i.isLoading},[i.isLoading?((0,n.uX)(),(0,n.CE)("span",ml)):((0,n.uX)(),(0,n.CE)("span",kl,"Simpan"))],8,ul)])])]),i.isRegionSelectorVisible?((0,n.uX)(),(0,n.CE)("div",hl,[(0,n.Lk)("div",gl,[(0,n.Lk)("div",pl,[e[24]||(e[24]=(0,n.Lk)("h5",{class:"modal-title"},"Pilih Wilayah",-1)),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[14]||(e[14]=(...a)=>o.closeRegionSelector&&o.closeRegionSelector(...a))})]),(0,n.Lk)("div",bl,[(0,n.bF)(r,{onRegionSelected:o.handleRegionSelection},null,8,["onRegionSelected"])])])])):(0,n.Q3)("",!0)])}const Ll={class:"col-sm-12"},yl={class:"card"},vl={class:"card-body"},Cl={class:"border p-3 mb-3 rounded filter-section"},Pl={class:"row g-3"},El={class:"col-md-4"},Dl={class:"col-md-4"},Ml={class:"d-flex justify-content-end gap-2 mt-3"},wl={class:"table-responsive signal-table"},Fl={class:"table table-hover"},Xl={key:0,class:"fa fa-sort-asc"},xl={key:1,class:"fa fa-sort-desc"},Tl={key:2,class:"fa fa-sort"},Sl={key:0,class:"fa fa-sort-asc"},Bl={key:1,class:"fa fa-sort-desc"},Al={key:2,class:"fa fa-sort"},_l={key:0},jl={scope:"row"},Vl=["onClick"],Il={key:2},Nl={class:"d-flex flex-column flex-md-row justify-content-md-between align-items-center mt-3 px-3 pb-3"},Ul={class:"mt-2"},Rl={key:0,class:"text-muted"},Ql={key:0,class:"d-flex align-items-center flex-wrap gap-2 mt-2"},Wl={class:"pagination mb-0"},Kl={key:0,class:"page-item"},Ol={key:1,class:"page-item disabled"},$l=["onClick"],Gl={key:2,class:"page-item disabled"},Jl={key:3,class:"page-item"};function ql(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",Ll,[(0,n.Lk)("div",yl,[e[30]||(e[30]=(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("h3",null,"Pilih Wilayah Desa")],-1)),(0,n.Lk)("div",vl,[(0,n.Lk)("div",Cl,[(0,n.Lk)("div",Pl,[(0,n.Lk)("div",El,[e[12]||(e[12]=(0,n.Lk)("label",{for:"filterCode",class:"form-label"},"Kode Wilayah",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterCode",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=a=>i.filters.region_code=a),placeholder:"Filter berdasarkan kode...",onKeyup:e[1]||(e[1]=(0,l.jR)((...a)=>o.applyFilters&&o.applyFilters(...a),["enter"]))},null,544),[[l.Jo,i.filters.region_code]])]),(0,n.Lk)("div",Dl,[e[13]||(e[13]=(0,n.Lk)("label",{for:"filterName",class:"form-label"},"Nama Wilayah",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterName",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.filters.region_name=a),placeholder:"Filter berdasarkan nama...",onKeyup:e[3]||(e[3]=(0,l.jR)((...a)=>o.applyFilters&&o.applyFilters(...a),["enter"]))},null,544),[[l.Jo,i.filters.region_name]])])]),(0,n.Lk)("div",Ml,[(0,n.Lk)("button",{class:"btn btn-secondary",onClick:e[4]||(e[4]=(...a)=>o.resetFilters&&o.resetFilters(...a))},e[14]||(e[14]=[(0,n.Lk)("i",{class:"fa fa-refresh me-2"},null,-1),(0,n.Lk)("span",null,"Reset Filter",-1)])),(0,n.Lk)("button",{class:"btn btn-primary",onClick:e[5]||(e[5]=(...a)=>o.applyFilters&&o.applyFilters(...a))},e[15]||(e[15]=[(0,n.Lk)("i",{class:"fa fa-search me-2"},null,-1),(0,n.Lk)("span",null,"Terapkan Filter",-1)]))])])]),(0,n.Lk)("div",wl,[(0,n.Lk)("table",Fl,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[e[18]||(e[18]=(0,n.Lk)("th",{scope:"col"},"No",-1)),(0,n.Lk)("th",{scope:"col",onClick:e[6]||(e[6]=a=>o.sortBy("region_code"))},[e[16]||(e[16]=(0,n.eW)(" Kode Wilayah ")),"region_code"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",Xl)):"region_code"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",xl)):((0,n.uX)(),(0,n.CE)("i",Tl))]),(0,n.Lk)("th",{scope:"col",onClick:e[7]||(e[7]=a=>o.sortBy("region_name"))},[e[17]||(e[17]=(0,n.eW)(" Nama Wilayah ")),"region_name"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",Sl)):"region_name"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",Bl)):((0,n.uX)(),(0,n.CE)("i",Al))]),e[19]||(e[19]=(0,n.Lk)("th",{scope:"col"},"Tipe",-1)),e[20]||(e[20]=(0,n.Lk)("th",{scope:"col"},"Aksi",-1))])]),(0,n.Lk)("tbody",null,[i.isLoading?((0,n.uX)(),(0,n.CE)("tr",_l,e[21]||(e[21]=[(0,n.Lk)("td",{colspan:"5",class:"text-center"},[(0,n.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,n.Lk)("span",{class:"visually-hidden"},"Loading...")])],-1)]))):o.paginatedRegions.length>0?((0,n.uX)(!0),(0,n.CE)(n.FK,{key:1},(0,n.pI)(o.paginatedRegions,(a,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:a.region_id},[(0,n.Lk)("th",jl,(0,k.v_)((i.currentPage-1)*i.perPage+t+1),1),(0,n.Lk)("td",null,(0,k.v_)(a.region_code),1),(0,n.Lk)("td",null,(0,k.v_)(a.region_name),1),(0,n.Lk)("td",null,(0,k.v_)(a.region_type),1),(0,n.Lk)("td",null,[(0,n.Lk)("button",{class:"btn btn-success btn-sm",onClick:e=>o.selectRegion(a)},e[22]||(e[22]=[(0,n.Lk)("i",{class:"fa fa-check me-1"},null,-1),(0,n.eW)(" Pilih ")]),8,Vl)])]))),128)):((0,n.uX)(),(0,n.CE)("tr",Il,e[23]||(e[23]=[(0,n.Lk)("td",{colspan:"5",class:"text-center"},"Tidak ada data yang cocok atau tersedia.",-1)])))])]),(0,n.Lk)("div",Nl,[(0,n.Lk)("div",Ul,[i.totalItems>0?((0,n.uX)(),(0,n.CE)("span",Rl,[e[24]||(e[24]=(0,n.eW)(" Menampilkan ")),(0,n.Lk)("strong",null,(0,k.v_)((i.currentPage-1)*i.perPage+1),1),e[25]||(e[25]=(0,n.eW)(" - ")),(0,n.Lk)("strong",null,(0,k.v_)(Math.min(i.currentPage*i.perPage,i.totalItems)),1),e[26]||(e[26]=(0,n.eW)(" dari ")),(0,n.Lk)("strong",null,(0,k.v_)(i.totalItems),1),e[27]||(e[27]=(0,n.eW)(" data "))])):(0,n.Q3)("",!0)]),-1!==i.perPage&&o.totalPages>1?((0,n.uX)(),(0,n.CE)("nav",Ql,[(0,n.Lk)("ul",Wl,[(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[8]||(e[8]=a=>o.changePage(i.currentPage-1))},"Prev")],2),o.pageNumbers[0]>1?((0,n.uX)(),(0,n.CE)("li",Kl,[(0,n.Lk)("button",{class:"page-link",onClick:e[9]||(e[9]=a=>o.changePage(1))},"1")])):(0,n.Q3)("",!0),o.pageNumbers[0]>2?((0,n.uX)(),(0,n.CE)("li",Ol,e[28]||(e[28]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.pageNumbers,a=>((0,n.uX)(),(0,n.CE)("li",{key:a,class:(0,k.C4)(["page-item",{active:i.currentPage===a}])},[(0,n.Lk)("button",{class:"page-link",onClick:e=>o.changePage(a)},(0,k.v_)(a),9,$l)],2))),128)),o.pageNumbers.slice(-1)[0]<o.totalPages-1?((0,n.uX)(),(0,n.CE)("li",Gl,e[29]||(e[29]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),o.pageNumbers.slice(-1)[0]<o.totalPages?((0,n.uX)(),(0,n.CE)("li",Jl,[(0,n.Lk)("button",{class:"page-link",onClick:e[10]||(e[10]=a=>o.changePage(o.totalPages))},(0,k.v_)(o.totalPages),1)])):(0,n.Q3)("",!0),(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:i.currentPage===o.totalPages}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[11]||(e[11]=a=>o.changePage(i.currentPage+1))},"Next")],2)])])):(0,n.Q3)("",!0)])])])])}t(1701);const Hl=(a={})=>Na.get("",{params:{act:"regions",...a}}),Yl=a=>a?Na.get("",{params:{act:"regions",key:a}}):Promise.reject(new Error("ID Region tidak disediakan.")),zl=a=>Na.post("",{act:"regions",record:a}),Zl=(a,e)=>a?Na.put("",{act:"regions",key:a,record:e}):Promise.reject(new Error("ID Region tidak tersedia.")),an=a=>a?Na.delete("",{data:{act:"regions",key:a}}):Promise.reject(new Error("ID Region tidak tersedia."));var en={emits:["region-selected"],data(){return{regions:[],sortColumn:"",sortDirection:"asc",currentPage:1,perPage:10,totalItems:0,isLoading:!1,filters:{region_code:"",region_name:""}}},computed:{paginatedRegions(){return this.regions},totalPages(){return this.perPage<=0?1:Math.ceil(this.totalItems/this.perPage)},pageNumbers(){const a=[],e=5;let t=Math.max(1,this.currentPage-Math.floor(e/2)),s=t+e-1;s>this.totalPages&&(s=this.totalPages,t=Math.max(1,s-e+1));for(let i=t;i<=s;i++)a.push(i);return a}},watch:{currentPage(){this.fetchRegions()},perPage(){this.currentPage=1,this.fetchRegions()}},async mounted(){await this.fetchRegions()},methods:{selectRegion(a){const e={id:a.region_id,name:a.region_name};this.$emit("region-selected",e)},async fetchRegions(){this.isLoading=!0;try{const a={page:this.currentPage,limit:this.perPage,order:this.sortColumn?`${this.sortColumn} ${this.sortDirection}`:""},e=Object.entries(this.filters).filter(([,a])=>a&&""!==a.trim()).map(([a,e])=>`${a}=${e.trim()}`),t="region_type=D",s=[t,...e];s.length>0&&(a.filter=s.join(","));const i=await Hl(a),l=i.data?.data||i.data?.[0]?.data||[],n=i.data?.meta?.pagination||i.data?.[0]?.meta?.pagination||{};this.regions=l,this.totalItems=n.total||l.length}catch(a){console.error("Error fetching regions:",a)}finally{this.isLoading=!1}},sortBy(a){this.sortColumn===a?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=a,this.sortDirection="asc"),this.fetchRegions()},changePage(a){a>=1&&a<=this.totalPages&&(this.currentPage=a)},applyFilters(){this.currentPage=1,this.fetchRegions()},resetFilters(){this.filters.region_code="",this.filters.region_name="",this.currentPage=1,this.sortColumn="region_code",this.sortDirection="asc",this.fetchRegions()}}};const tn=(0,r.A)(en,[["render",ql],["__scopeId","data-v-ea1ede56"]]);var sn=tn,ln=t(7411);const nn={idwilayah:"",logo:"",foto:"",alamatkantor:"",koordinat:"",email:"",website:"",kodepos:"",sejarah:"",profildesa:"",profilmasyarakat:"",profilpotensi:"",visimisi:"",sambutankepaladesa:""};var on={name:"addEditProfilDesaModal",components:{FilterRegions:sn},props:{profileToEdit:{type:Object,default:null}},data(){return{formData:{...nn},selectedLogoFile:null,selectedFotoFile:null,logoPreview:null,fotoPreview:null,isLoading:!1,errorMessage:null,toast:(0,ln.dj)(),isRegionSelectorVisible:!1,selectedRegionName:"",textareaFields:{sambutankepaladesa:{label:"Sambutan Kepala Desa",rows:3},sejarah:{label:"Sejarah Desa",rows:4},visimisi:{label:"Visi & Misi",rows:4},profildesa:{label:"Profil Umum Desa",rows:3},profilmasyarakat:{label:"Profil Masyarakat",rows:3},profilpotensi:{label:"Profil Potensi Desa",rows:3}}}},computed:{isEditMode(){return!!this.profileToEdit}},watch:{profileToEdit:{handler(a){a?(this.formData={...nn,...a},this.logoPreview=a.logo||null,this.fotoPreview=a.foto||null,this.selectedLogoFile=null,this.selectedFotoFile=null,this.formData.idwilayah&&this.fetchRegionNameById(this.formData.idwilayah)):(this.formData={...nn},this.selectedRegionName="",this.selectedLogoFile=null,this.selectedFotoFile=null,this.logoPreview=null,this.fotoPreview=null),this.errorMessage=null},immediate:!0,deep:!0}},methods:{closeModal(){this.$emit("close")},handleOverlayClick(a){a.target===a.currentTarget&&this.closeModal()},openRegionSelector(){this.isRegionSelectorVisible=!0},closeRegionSelector(){this.isRegionSelectorVisible=!1},handleRegionSelection(a){this.formData.idwilayah=a.id,this.selectedRegionName=a.name,this.closeRegionSelector()},handleFileUpload(a,e){const t=a.target.files[0];t?(console.log("File yang dipilih:",t),"logo"===e?(this.selectedLogoFile=t,this.logoPreview=URL.createObjectURL(t)):"foto"===e&&(this.selectedFotoFile=t,this.fotoPreview=URL.createObjectURL(t))):console.log("Tidak ada file yang dipilih")},async fetchRegionNameById(a){if(a)try{const e=await Yl(a),t=e.data?.[0]?.data?.[0]||null;t&&t.region_name?this.selectedRegionName=t.region_name:this.selectedRegionName="Nama wilayah tidak ditemukan"}catch(e){this.selectedRegionName="Gagal memuat nama wilayah"}else this.selectedRegionName="Wilayah tidak ditemukan"},async submitForm(){if(this.errorMessage=null,!this.formData.idwilayah||!this.formData.alamatkantor)return void(this.errorMessage="Nama Desa (Wilayah) dan Alamat Kantor wajib diisi.");this.isLoading=!0,this.errorMessage=null;const a=new FormData;a.append("act","profil-desa"),this.selectedLogoFile?a.append("upload_logo",this.selectedLogoFile):this.formData.logo&&a.append("record[logo]",this.formData.logo),this.selectedFotoFile?a.append("upload_foto",this.selectedFotoFile):this.formData.foto&&a.append("record[foto]",this.formData.foto);const e={...this.formData};delete e.logo,delete e.foto,delete e.wilayah,Object.keys(e).forEach(t=>{const s=e[t];null!==s&&void 0!==s&&""!==s&&a.append(`record[${t}]`,s)});try{this.isEditMode?(a.append("_method","PUT"),await Xi(this.profileToEdit.iddesa,a),this.toast.success("Data profil desa berhasil diperbarui.")):(await Fi(a),this.toast.success("Data profil desa berhasil ditambah.")),this.$emit("save-successful"),this.closeModal()}catch(t){this.errorMessage=t.response?.data?.failed||t.response?.data?.message||"Gagal menyimpan data. Silakan coba lagi.",this.toast.error("Gagal menyimpan data profil desa.")}finally{this.isLoading=!1}}}};const rn=(0,r.A)(on,[["render",fl],["__scopeId","data-v-0a5ba586"]]);var cn=rn;const dn={class:"modal-header"},un={class:"modal-body"},mn={key:0,class:"text-center p-5"},kn={key:1,class:"text-center p-5 text-danger"},hn={key:0,class:"text-muted"},gn={key:2,class:"profile-container"},pn={class:"text-center mb-4"},bn=["src"],fn={key:1,src:"https://placehold.co/150x150/EBF4FF/7F9CF5?text=Logo",alt:"Logo Default",class:"logo-desa"},Ln={class:"nama-desa mt-3"},yn={class:"alamat-desa"},vn={key:0},Cn={class:"row detail-section"},Pn={class:"col-md-4"},En={class:"col-md-4"},Dn={class:"col-md-4"},Mn={class:"detail-section"},wn={class:"text-content"},Fn={class:"detail-section"},Xn={class:"text-content"},xn={class:"detail-section"},Tn={class:"text-content"},Sn={class:"detail-section"},Bn={class:"text-content"},An={class:"detail-section"},_n={class:"text-content"},jn={class:"detail-section"},Vn={class:"text-content"},In={class:"detail-section"},Nn=["src"],Un={key:1,style:{display:"none"}},Rn={key:2},Qn={class:"detail-section"},Wn={key:0,class:"text-center p-3"},Kn={key:1,class:"table-responsive"},On={class:"table table-bordered table-striped struktur-wilayah-table"},$n={key:0},Gn={class:"text-muted small"},Jn={key:1},qn={key:2},Hn={key:0,class:"text-muted small"},Yn={key:3},zn={key:0,class:"text-muted small"},Zn={key:2,class:"text-muted"},ao={class:"modal-footer"};function eo(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",{class:"modal-overlay",onClick:e[3]||(e[3]=(...a)=>o.closeModal&&o.closeModal(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[2]||(e[2]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",dn,[e[4]||(e[4]=(0,n.Lk)("h5",{class:"modal-title"},"Detail Profil Desa",-1)),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",un,[i.isLoading?((0,n.uX)(),(0,n.CE)("div",mn,e[5]||(e[5]=[(0,n.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,n.Lk)("span",{class:"visually-hidden"},"Loading...")],-1),(0,n.Lk)("p",{class:"mt-2"},"Memuat data...",-1)]))):i.error?((0,n.uX)(),(0,n.CE)("div",kn,[e[6]||(e[6]=(0,n.Lk)("i",{class:"fa fa-exclamation-triangle fa-3x mb-3"},null,-1)),e[7]||(e[7]=(0,n.Lk)("h4",null,"Terjadi Kesalahan",-1)),(0,n.Lk)("p",null,(0,k.v_)(i.error),1),i.debugMessage?((0,n.uX)(),(0,n.CE)("small",hn,"Detail: "+(0,k.v_)(i.debugMessage),1)):(0,n.Q3)("",!0)])):i.profile?((0,n.uX)(),(0,n.CE)("div",gn,[(0,n.Lk)("div",pn,[i.profile.logo?((0,n.uX)(),(0,n.CE)("img",{key:0,src:i.profile.logo,alt:"Logo Desa",class:"logo-desa",onerror:"this.src='https://placehold.co/150x150/EBF4FF/7F9CF5?text=Logo'"},null,8,bn)):((0,n.uX)(),(0,n.CE)("img",fn)),(0,n.Lk)("h2",Ln,(0,k.v_)(i.profile.namawilayah||"Nama Desa Belum Diatur"),1),(0,n.Lk)("p",yn,[(0,n.eW)((0,k.v_)(i.profile.alamatkantor||"Alamat belum diatur")+" ",1),i.profile.kodepos?((0,n.uX)(),(0,n.CE)("span",vn,", Kode Pos "+(0,k.v_)(i.profile.kodepos),1)):(0,n.Q3)("",!0)])]),e[21]||(e[21]=(0,n.Lk)("hr",null,null,-1)),(0,n.Lk)("div",Cn,[(0,n.Lk)("div",Pn,[e[8]||(e[8]=(0,n.Lk)("h5",null,[(0,n.Lk)("i",{class:"fa fa-envelope me-2"}),(0,n.eW)("Email")],-1)),(0,n.Lk)("p",null,(0,k.v_)(i.profile.email||"-"),1)]),(0,n.Lk)("div",En,[e[9]||(e[9]=(0,n.Lk)("h5",null,[(0,n.Lk)("i",{class:"fa fa-globe me-2"}),(0,n.eW)("Website")],-1)),(0,n.Lk)("p",null,(0,k.v_)(i.profile.website||"-"),1)]),(0,n.Lk)("div",Dn,[e[10]||(e[10]=(0,n.Lk)("h5",null,[(0,n.Lk)("i",{class:"fa fa-map-marker me-2"}),(0,n.eW)("Koordinat")],-1)),(0,n.Lk)("p",null,(0,k.v_)(i.profile.koordinat||"-"),1)])]),e[22]||(e[22]=(0,n.Lk)("hr",null,null,-1)),(0,n.Lk)("div",Mn,[e[11]||(e[11]=(0,n.Lk)("h4",null,[(0,n.Lk)("i",{class:"fa fa-user me-2"}),(0,n.eW)("Sambutan Kepala Desa")],-1)),(0,n.Lk)("p",wn,(0,k.v_)(i.profile.sambutankepaladesa||"Tidak ada data."),1)]),(0,n.Lk)("div",Fn,[e[12]||(e[12]=(0,n.Lk)("h4",null,[(0,n.Lk)("i",{class:"fa fa-bullseye me-2"}),(0,n.eW)("Visi & Misi")],-1)),(0,n.Lk)("p",Xn,(0,k.v_)(i.profile.visimisi||"Tidak ada data."),1)]),(0,n.Lk)("div",xn,[e[13]||(e[13]=(0,n.Lk)("h4",null,[(0,n.Lk)("i",{class:"fa fa-book me-2"}),(0,n.eW)("Sejarah Desa")],-1)),(0,n.Lk)("p",Tn,(0,k.v_)(i.profile.sejarah||"Tidak ada data."),1)]),(0,n.Lk)("div",Sn,[e[14]||(e[14]=(0,n.Lk)("h4",null,[(0,n.Lk)("i",{class:"fa fa-info-circle me-2"}),(0,n.eW)("Profil Umum Desa")],-1)),(0,n.Lk)("p",Bn,(0,k.v_)(i.profile.profildesa||"Tidak ada data."),1)]),(0,n.Lk)("div",An,[e[15]||(e[15]=(0,n.Lk)("h4",null,[(0,n.Lk)("i",{class:"fa fa-users me-2"}),(0,n.eW)("Profil Masyarakat")],-1)),(0,n.Lk)("p",_n,(0,k.v_)(i.profile.profilmasyarakat||"Tidak ada data."),1)]),(0,n.Lk)("div",jn,[e[16]||(e[16]=(0,n.Lk)("h4",null,[(0,n.Lk)("i",{class:"fa fa-lightbulb-o me-2"}),(0,n.eW)("Profil Potensi Desa")],-1)),(0,n.Lk)("p",Vn,(0,k.v_)(i.profile.profilpotensi||"Tidak ada data."),1)]),(0,n.Lk)("div",In,[e[17]||(e[17]=(0,n.Lk)("h4",null,[(0,n.Lk)("i",{class:"fa fa-image me-2"}),(0,n.eW)("Foto Kantor Desa")],-1)),i.profile.foto?((0,n.uX)(),(0,n.CE)("img",{key:0,src:i.profile.foto,alt:"Foto Kantor Desa",class:"kantor-foto",onerror:"this.style.display='none'; this.nextElementSibling.style.display='block'"},null,8,Nn)):((0,n.uX)(),(0,n.CE)("p",Un,"Tidak ada foto.")),i.profile.foto?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("p",Rn,"Tidak ada foto."))]),(0,n.Lk)("div",Qn,[e[20]||(e[20]=(0,n.Lk)("h4",null,[(0,n.Lk)("i",{class:"fa fa-sitemap me-2"}),(0,n.eW)("Struktur Wilayah")],-1)),i.isStrukturLoading?((0,n.uX)(),(0,n.CE)("div",Wn,e[18]||(e[18]=[(0,n.Lk)("div",{class:"spinner-border spinner-border-sm text-primary",role:"status"},null,-1),(0,n.Lk)("p",{class:"mt-2 mb-0"},"Memuat struktur wilayah...",-1)]))):o.flatWilayahList.length>0?((0,n.uX)(),(0,n.CE)("div",Kn,[(0,n.Lk)("table",On,[e[19]||(e[19]=(0,n.Lk)("thead",{class:"table-light"},[(0,n.Lk)("tr",null,[(0,n.Lk)("th",{style:{width:"35%"}},"Nama Dusun"),(0,n.Lk)("th",{style:{width:"25%"}},"Nama RW"),(0,n.Lk)("th",{style:{width:"25%"}},"Nama RT")])],-1)),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.flatWilayahList,(a,e)=>((0,n.uX)(),(0,n.CE)("tr",{key:a.id},[0===e||a.namaDusun!==o.flatWilayahList[e-1].namaDusun?((0,n.uX)(),(0,n.CE)("td",$n,[(0,n.Lk)("strong",null,(0,k.v_)(a.namaDusun),1),(0,n.Lk)("div",Gn,"Kepala: "+(0,k.v_)(a.kepalaDusun),1)])):((0,n.uX)(),(0,n.CE)("td",Jn)),0===e||a.namaRw!==o.flatWilayahList[e-1].namaRw||a.namaDusun!==o.flatWilayahList[e-1].namaDusun?((0,n.uX)(),(0,n.CE)("td",qn,[(0,n.eW)((0,k.v_)(a.namaRw)+" ",1),"-"!==a.namaRw?((0,n.uX)(),(0,n.CE)("div",Hn,"Ketua: "+(0,k.v_)(a.ketuaRw),1)):(0,n.Q3)("",!0)])):((0,n.uX)(),(0,n.CE)("td",Yn)),(0,n.Lk)("td",null,[(0,n.eW)((0,k.v_)(a.namaRt)+" ",1),"-"!==a.namaRt?((0,n.uX)(),(0,n.CE)("div",zn,"Ketua: "+(0,k.v_)(a.ketuaRt),1)):(0,n.Q3)("",!0)])]))),128))])])])):((0,n.uX)(),(0,n.CE)("p",Zn,"Data struktur wilayah tidak tersedia."))]),(0,n.Lk)("div",ao,[(0,n.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:e[1]||(e[1]=(...a)=>o.closeModal&&o.closeModal(...a))},"Tutup")])])):(0,n.Q3)("",!0)])])])}var to={name:"DetailProfileModal",props:{profileToView:{type:Object,required:!0}},emits:["close"],data(){return{profile:null,isLoading:!1,error:null,debugMessage:"",strukturWilayah:[],isStrukturLoading:!1}},methods:{closeModal(){this.$emit("close")},async fetchProfile(){const a=this.profileToView?.iddesa;if(a){this.isLoading=!0,this.error=null,this.debugMessage="";try{const e=await wi(a),t=e.data;if(t&&t.length>0&&t[0].data&&t[0].data.length>0){const e=t[0].data[0];this.profile={...e,...e.wilayah},this.fetchStrukturWilayah(a)}else this.error="Data profil tidak ditemukan atau format respons tidak sesuai.",this.debugMessage=`Struktur data yang diterima: ${JSON.stringify(t)}`}catch(e){console.error("Gagal mengambil detail profil:",e),this.error=e.message||"Terjadi kesalahan saat memuat data.",e.response&&(this.debugMessage=`Status: ${e.response.status} - Data: ${JSON.stringify(e.response.data)}`)}finally{this.isLoading=!1}}else this.error="ID profile desa tidak valid atau tidak tersedia."},async fetchStrukturWilayah(a){this.isStrukturLoading=!0;try{const e=await Ti({filter:`iddesa=${a}`,limit:-1}),t=e.data?.data||e.data?.[0]?.data||[];this.strukturWilayah=await Promise.all(t.map(async a=>{const e=await _i({filter:`iddusun=${a.iddusun}`,limit:-1}),t=e.data?.data||e.data?.[0]?.data||[],s=await Promise.all(t.map(async a=>{const e=await Ni({filter:`idrw=${a.idrw}`,limit:-1}),t=e.data?.data||e.data?.[0]?.data||[];return{...a,rts:t}}));return{...a,rws:s}}))}catch(e){console.error("Gagal memuat struktur wilayah:",e)}finally{this.isStrukturLoading=!1}}},mounted(){this.fetchProfile()},computed:{flatWilayahList(){const a=[];return this.strukturWilayah?(this.strukturWilayah.forEach(e=>{e.rws&&e.rws.length>0?e.rws.forEach(t=>{t.rts&&t.rts.length>0?t.rts.forEach(s=>{a.push({id:s.idrt,namaDusun:e.namadusun,kepalaDusun:e.kadus?.namakepaladusun||"-",namaRw:t.namarw,ketuaRw:t.ketuarw?.namaketuarw||"-",namaRt:s.namart,ketuaRt:s.ketuart?.namaketuart||"-"})}):a.push({id:`rw-${t.idrw}`,namaDusun:e.namadusun,kepalaDusun:e.kadus?.namakepaladusun||"-",namaRw:t.namarw,ketuaRw:t.ketuarw?.namaketuarw||"-",namaRt:"-",ketuaRt:"-"})}):a.push({id:`dusun-${e.iddusun}`,namaDusun:e.namadusun,kepalaDusun:e.penduduk?.nama||"-",namaRw:"-",ketuaRw:"-",namaRt:"-",ketuaRt:"-"})}),a):[]}},watch:{profileToView:{handler(a,e){a?.iddesa!==e?.iddesa&&this.fetchProfile()},deep:!0}}};const so=(0,r.A)(to,[["render",eo],["__scopeId","data-v-3d69035c"]]);var io=so;const lo={class:"modal-header"},no={class:"modal-title"},oo={class:"modal-body"},ro={key:0,class:"alert alert-danger"},co={class:"mb-3"},uo=["value"],mo={class:"mb-3"},ko={class:"mb-3"},ho=["disabled"],go={disabled:"",value:""},po=["value"],bo={class:"modal-footer"},fo=["disabled"],Lo={key:0,class:"spinner-border spinner-border-sm"},yo={key:1};function vo(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",{class:"modal-overlay",onClick:e[7]||(e[7]=(...a)=>o.handleOverlayClick&&o.handleOverlayClick(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[6]||(e[6]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",lo,[(0,n.Lk)("h5",no,(0,k.v_)(o.isEditMode?"Edit Data Dusun":"Tambah Data Dusun"),1),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a))})]),(0,n.Lk)("div",oo,[i.errorMessage?((0,n.uX)(),(0,n.CE)("div",ro,(0,k.v_)(i.errorMessage),1)):(0,n.Q3)("",!0),(0,n.Lk)("form",{onSubmit:e[3]||(e[3]=(0,l.D$)((...a)=>o.submitForm&&o.submitForm(...a),["prevent"]))},[(0,n.Lk)("div",co,[e[8]||(e[8]=(0,n.Lk)("label",{for:"namawilayah",class:"form-label"},"Nama Desa",-1)),(0,n.Lk)("input",{type:"text",id:"namawilayah",class:"form-control",value:t.profileData?.wilayah?.namawilayah,disabled:"",readonly:""},null,8,uo)]),(0,n.Lk)("div",mo,[e[9]||(e[9]=(0,n.Lk)("label",{for:"namadusun",class:"form-label"},"Nama Dusun",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"namadusun",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=a=>i.formData.namadusun=a),placeholder:"Masukkan nama dusun",required:""},null,512),[[l.Jo,i.formData.namadusun]])]),(0,n.Lk)("div",ko,[e[10]||(e[10]=(0,n.Lk)("label",{for:"idpenduduk",class:"form-label"},"Nama Kepala Dusun",-1)),(0,n.bo)((0,n.Lk)("select",{id:"idpenduduk",class:"form-select","onUpdate:modelValue":e[2]||(e[2]=a=>i.formData.idpenduduk=a),disabled:i.isLoading},[(0,n.Lk)("option",go,(0,k.v_)(o.filteredResidents.length>0?"Pilih Kepala Dusun":"Tidak ada penduduk di desa ini"),1),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.filteredResidents,a=>((0,n.uX)(),(0,n.CE)("option",{key:a.idpenduduk,value:a.idpenduduk},(0,k.v_)(a.nama)+") ",9,po))),128))],8,ho),[[l.u1,i.formData.idpenduduk]])])],32)]),(0,n.Lk)("div",bo,[(0,n.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:e[4]||(e[4]=(...a)=>o.closeModal&&o.closeModal(...a))},"Batal"),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[5]||(e[5]=(...a)=>o.submitForm&&o.submitForm(...a)),disabled:i.isLoading},[i.isLoading?((0,n.uX)(),(0,n.CE)("span",Lo)):((0,n.uX)(),(0,n.CE)("span",yo,"Simpan"))],8,fo)])])])}const Co=(a={})=>Na.get("",{params:{act:"penduduk",...a}}),Po=a=>a?Na.get("",{params:{act:"penduduk",key:a}}):Promise.reject(new Error("ID penduduk tidak tersedia.")),Eo=a=>(a.append("act","penduduk"),Na.post("",a)),Do=(a,e)=>a?(e.append("act","penduduk"),e.append("key",a),Na.post("",e)):Promise.reject(new Error("ID penduduk tidak tersedia.")),Mo=a=>a?Na.delete("",{data:{act:"penduduk",key:a}}):Promise.reject(new Error("ID penduduk tidak tersedia.")),wo={namadusun:"",idpenduduk:"",iddesa:null};var Fo={name:"AddEditDusunModal",props:{dusunToEdit:{type:Object,default:null},profileData:{type:Object,required:!0}},data(){return{formData:{...wo},residents:[],isLoading:!1,errorMessage:null,toast:(0,ln.dj)()}},computed:{isEditMode(){return!!this.dusunToEdit},filteredResidents(){return this.profileData&&this.profileData.iddesa?this.residents.filter(a=>a.dusun&&a.dusun.iddesa===this.profileData.iddesa):[]}},watch:{dusunToEdit:{handler(a){a?(this.formData.namadusun=a.namadusun,this.formData.idpenduduk=a.idpenduduk,this.formData.iddesa=a.iddesa):this.formData={...wo},this.profileData&&(this.formData.iddesa=this.profileData.iddesa),this.errorMessage=null},immediate:!0,deep:!0}},created(){this.fetchResidents()},methods:{closeModal(){this.$emit("close")},handleOverlayClick(a){a.target===a.currentTarget&&this.closeModal()},async fetchResidents(){this.isLoading=!0;try{const a=await Co({limit:-1});this.residents=a.data?.data||a.data?.[0]?.data||[]}catch(a){this.toast.error("Gagal memuat daftar penduduk")}finally{this.isLoading=!1}},async submitForm(){this.isLoading=!0,this.errorMessage=null;const a=new FormData;a.append("record[iddesa]",this.formData.iddesa),a.append("record[namadusun]",this.formData.namadusun),a.append("record[idpenduduk]",this.formData.idpenduduk);try{this.isEditMode?(a.append("_method","PUT"),await Bi(this.dusunToEdit.iddusun,a),this.toast.success("Data dusun berhasil diperbarui")):(await Si(a),this.toast.success("Data dusun berhasil ditambah")),this.$emit("save-successful"),this.closeModal()}catch(e){this.errorMessage=e.response?.data?.failed||e.response?.data?.message||"Gagal menyimpan data. Silakan coba lagi.",this.toast.error("Gagal menyimpan data dusun")}finally{this.isLoading=!1}}}};const Xo=(0,r.A)(Fo,[["render",vo],["__scopeId","data-v-2c226206"]]);var xo=Xo;const To={class:"modal-header"},So={class:"modal-title"},Bo={class:"modal-body"},Ao={key:0,class:"alert alert-danger"},_o={class:"mb-3"},jo=["value"],Vo={class:"mb-3"},Io={class:"mb-3"},No=["disabled"],Uo={disabled:"",value:""},Ro=["value"],Qo={class:"modal-footer"},Wo=["disabled"],Ko={key:0,class:"spinner-border spinner-border-sm"},Oo={key:1};function $o(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",{class:"modal-overlay",onClick:e[7]||(e[7]=(...a)=>o.handleOverlayClick&&o.handleOverlayClick(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[6]||(e[6]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",To,[(0,n.Lk)("h5",So,(0,k.v_)(o.isEditMode?"Edit Data RW":"Tambah Data RW"),1),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a))})]),(0,n.Lk)("div",Bo,[i.errorMessage?((0,n.uX)(),(0,n.CE)("div",Ao,(0,k.v_)(i.errorMessage),1)):(0,n.Q3)("",!0),(0,n.Lk)("form",{onSubmit:e[3]||(e[3]=(0,l.D$)((...a)=>o.submitForm&&o.submitForm(...a),["prevent"]))},[(0,n.Lk)("div",_o,[e[8]||(e[8]=(0,n.Lk)("label",{for:"namadusun",class:"form-label"},"Nama Dusun",-1)),(0,n.Lk)("input",{type:"text",id:"namadusun",class:"form-control",value:t.dusunData?.namadusun,disabled:"",readonly:""},null,8,jo)]),(0,n.Lk)("div",Vo,[e[9]||(e[9]=(0,n.Lk)("label",{for:"namarw",class:"form-label"},"Nama RW",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"namarw",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=a=>i.formData.namarw=a),placeholder:"Contoh: RW 001",required:""},null,512),[[l.Jo,i.formData.namarw]])]),(0,n.Lk)("div",Io,[e[10]||(e[10]=(0,n.Lk)("label",{for:"idpenduduk",class:"form-label"},"Nama Ketua RW",-1)),(0,n.bo)((0,n.Lk)("select",{id:"idpenduduk",class:"form-select","onUpdate:modelValue":e[2]||(e[2]=a=>i.formData.idpenduduk=a),disabled:i.isLoading},[(0,n.Lk)("option",Uo,(0,k.v_)(o.filteredResidents.length>0?"Pilih Ketua RW":"Tidak ada penduduk di dusun ini"),1),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.filteredResidents,a=>((0,n.uX)(),(0,n.CE)("option",{key:a.idpenduduk,value:a.idpenduduk},(0,k.v_)(a.nama),9,Ro))),128))],8,No),[[l.u1,i.formData.idpenduduk]])])],32)]),(0,n.Lk)("div",Qo,[(0,n.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:e[4]||(e[4]=(...a)=>o.closeModal&&o.closeModal(...a))}," Batal "),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[5]||(e[5]=(...a)=>o.submitForm&&o.submitForm(...a)),disabled:i.isLoading},[i.isLoading?((0,n.uX)(),(0,n.CE)("span",Ko)):((0,n.uX)(),(0,n.CE)("span",Oo,"Simpan"))],8,Wo)])])])}const Go={namarw:"",idpenduduk:"",iddusun:null};var Jo={name:"AddEditRwModal",props:{rwToEdit:{type:Object,default:null},dusunData:{type:Object,required:!0}},data(){return{formData:{...Go},residents:[],isLoading:!1,errorMessage:null,toast:(0,ln.dj)()}},computed:{isEditMode(){return!!this.rwToEdit},filteredResidents(){return this.dusunData&&this.dusunData.iddusun?this.residents.filter(a=>a.rw&&a.rw.iddusun===this.dusunData.iddusun):[]}},watch:{rwToEdit:{handler(a){a?(this.formData.namarw=a.namarw,this.formData.idpenduduk=a.idpenduduk,this.formData.iddusun=a.iddusun):this.formData={...Go},this.dusunData&&(this.formData.iddusun=this.dusunData.iddusun),this.errorMessage=null},immediate:!0,deep:!0}},created(){this.fetchResidents()},methods:{closeModal(){this.$emit("close")},handleOverlayClick(a){a.target===a.currentTarget&&this.closeModal()},async fetchResidents(){this.isLoading=!0;try{const a=await Co({limit:-1});this.residents=a.data?.data||a.data?.[0]?.data||[]}catch(a){this.toast.error("Gagal memuat daftar penduduk")}finally{this.isLoading=!1}},async submitForm(){this.isLoading=!0,this.errorMessage=null;const a=new FormData;a.append("record[iddusun]",this.formData.iddusun),a.append("record[namarw]",this.formData.namarw),a.append("record[idpenduduk]",this.formData.idpenduduk);try{this.isEditMode?(a.append("_method","PUT"),await Vi(this.rwToEdit.idrw,a),this.toast.success("Data RW berhasil diperbarui")):(await ji(a),this.toast.success("Data RW berhasil ditambah")),this.$emit("save-successful"),this.closeModal()}catch(e){this.errorMessage=e.response?.data?.failed||e.response?.data?.message||"Gagal menyimpan data. Silakan coba lagi.",this.toast.error("Gagal menyimpan data RW")}finally{this.isLoading=!1}}}};const qo=(0,r.A)(Jo,[["render",$o],["__scopeId","data-v-05bce8f3"]]);var Ho=qo;const Yo={class:"modal-header"},zo={class:"modal-title"},Zo={class:"modal-body"},ar={key:0,class:"alert alert-danger"},er={class:"mb-3"},tr=["value"],sr={class:"mb-3"},ir={class:"mb-3"},lr=["disabled"],nr={disabled:"",value:""},or=["value"],rr={class:"modal-footer"},cr=["disabled"],dr={key:0,class:"spinner-border spinner-border-sm"},ur={key:1};function mr(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",{class:"modal-overlay",onClick:e[7]||(e[7]=(...a)=>o.handleOverlayClick&&o.handleOverlayClick(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[6]||(e[6]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",Yo,[(0,n.Lk)("h5",zo,(0,k.v_)(o.isEditMode?"Edit Data RT":"Tambah Data RT"),1),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a))})]),(0,n.Lk)("div",Zo,[i.errorMessage?((0,n.uX)(),(0,n.CE)("div",ar,(0,k.v_)(i.errorMessage),1)):(0,n.Q3)("",!0),(0,n.Lk)("form",{onSubmit:e[3]||(e[3]=(0,l.D$)((...a)=>o.submitForm&&o.submitForm(...a),["prevent"]))},[(0,n.Lk)("div",er,[e[8]||(e[8]=(0,n.Lk)("label",{for:"namarw",class:"form-label"},"Nama RW",-1)),(0,n.Lk)("input",{type:"text",id:"namarw",class:"form-control",value:t.rwData?.namarw,disabled:"",readonly:""},null,8,tr)]),(0,n.Lk)("div",sr,[e[9]||(e[9]=(0,n.Lk)("label",{for:"namart",class:"form-label"},"Nama RT",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"namart",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=a=>i.formData.namart=a),placeholder:"Contoh: RT 001",required:""},null,512),[[l.Jo,i.formData.namart]])]),(0,n.Lk)("div",ir,[e[10]||(e[10]=(0,n.Lk)("label",{for:"idpenduduk",class:"form-label"},"Nama Ketua RT",-1)),(0,n.bo)((0,n.Lk)("select",{id:"idpenduduk",class:"form-select","onUpdate:modelValue":e[2]||(e[2]=a=>i.formData.idpenduduk=a),disabled:i.isLoading},[(0,n.Lk)("option",nr,(0,k.v_)(o.filteredResidents.length>0?"Pilih Ketua RT":"Tidak ada penduduk di RT ini"),1),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.filteredResidents,a=>((0,n.uX)(),(0,n.CE)("option",{key:a.idpenduduk,value:a.idpenduduk},(0,k.v_)(a.nama),9,or))),128))],8,lr),[[l.u1,i.formData.idpenduduk]])])],32)]),(0,n.Lk)("div",rr,[(0,n.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:e[4]||(e[4]=(...a)=>o.closeModal&&o.closeModal(...a))}," Batal "),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[5]||(e[5]=(...a)=>o.submitForm&&o.submitForm(...a)),disabled:i.isLoading},[i.isLoading?((0,n.uX)(),(0,n.CE)("span",dr)):((0,n.uX)(),(0,n.CE)("span",ur,"Simpan"))],8,cr)])])])}const kr={namart:"",idpenduduk:"",idrw:null};var hr={name:"AddEditRtModal",props:{rtToEdit:{type:Object,default:null},rwData:{type:Object,required:!0}},data(){return{formData:{...kr},residents:[],isLoading:!1,errorMessage:null,toast:(0,ln.dj)()}},computed:{isEditMode(){return!!this.rtToEdit},filteredResidents(){return this.rwData&&this.rwData.idrw?this.residents.filter(a=>a.rt&&a.rt.idrw===this.rwData.idrw):[]}},watch:{rtToEdit:{handler(a){a?(this.formData.namart=a.namart,this.formData.idpenduduk=a.idpenduduk):this.formData={...kr},this.rwData&&(this.formData.idrw=this.rwData.idrw),this.errorMessage=null},immediate:!0,deep:!0}},created(){this.fetchResidents()},methods:{closeModal(){this.$emit("close")},handleOverlayClick(a){a.target===a.currentTarget&&this.closeModal()},async fetchResidents(){this.isLoading=!0;try{const a=await Co({limit:-1});this.residents=a.data?.data||a.data?.[0]?.data||[]}catch(a){this.toast.error("Gagal memuat daftar penduduk.")}finally{this.isLoading=!1}},async submitForm(){this.isLoading=!0,this.errorMessage=null;const a=new FormData;a.append("record[idrw]",this.formData.idrw),a.append("record[namart]",this.formData.namart),a.append("record[idpenduduk]",this.formData.idpenduduk);try{this.isEditMode?(a.append("_method","PUT"),await Ri(this.rtToEdit.idrt,a),this.toast.success("Data RT berhasil diperbarui")):(await Ui(a),this.toast.success("Data RT berhasil ditambah")),this.$emit("save-successful"),this.closeModal()}catch(e){this.errorMessage=e.response?.data?.failed||e.response?.data?.message||"Gagal menyimpan data. Silakan coba lagi.",this.toast.error("Gagal menyimpan data RT")}finally{this.isLoading=!1}}}};const gr=(0,r.A)(hr,[["render",mr],["__scopeId","data-v-e3de8b98"]]);var pr=gr,br={components:{AddEditProfileModal:cn,DetailProfileModal:io,AddEditDusunModal:xo,AddEditRwModal:Ho,AddEditRtModal:pr},data(){return{profiles:[],isLoading:!1,sortColumn:"created_at",sortDirection:"asc",currentPage:1,perPage:10,totalItems:0,isProfileModalVisible:!1,isDetailModalVisible:!1,isDusunModalVisible:!1,isRwModalVisible:!1,isRtModalVisible:!1,profileBeingEdited:null,profileBeingViewed:null,profileForDusun:null,dusunBeingEdited:null,dusunForRw:null,rwBeingEdited:null,rwForRt:null,rtBeingEdited:null,expanded:{desa:{},dusun:{},rw:{}},loading:{dusun:{},rw:{},rt:{}},subData:{dusun:{},rw:{},rt:{}},isFilterVisible:!1,filters:{namawilayah:"",alamatkantor:""}}},computed:{paginatedProfiles(){return this.profiles},totalPages(){return this.perPage<=0?1:Math.ceil(this.totalItems/this.perPage)},pageNumbers(){const a=[],e=5;let t=Math.max(1,this.currentPage-Math.floor(e/2)),s=t+e-1;s>this.totalPages&&(s=this.totalPages,t=Math.max(1,s-e+1));for(let i=t;i<=s;i++)a.push(i);return a}},watch:{currentPage(){this.fetchProfiles()},perPage(){this.currentPage=1,this.fetchProfiles()}},async mounted(){this.toast=(0,ln.dj)(),await this.fetchProfiles()},methods:{async fetchProfiles(){this.isLoading=!0;try{const a={page:this.currentPage,limit:this.perPage,order:this.sortColumn?`${this.sortColumn} ${this.sortDirection}`:"",filter:this.filters.namawilayah?`namawilayah=${this.filters.namawilayah}`:""},e=await Mi(a),t=e.data?.data||e.data?.[0]?.data||[],s=e.data?.[0]?.meta?.pagination||{};this.profiles=t,this.totalItems=s.total||t.length}catch(a){this.toast.error("Gagal memuat data desa")}finally{this.isLoading=!1}},async fetchDusunForDesa(a){if(!this.subData.dusun[a]){this.loading.dusun[a]=!0;try{const e=await Ti({filter:`iddesa=${a}`,limit:-1});this.subData.dusun[a]=e.data?.data||e.data?.[0]?.data||[]}catch(e){this.toast.error("Gagal memuat data dusun"),this.subData.dusun[a]=[]}finally{this.loading.dusun[a]=!1}}},async fetchRwForDusun(a){if(!this.subData.rw[a]){this.loading.rw[a]=!0;try{const e=await _i({filter:`iddusun=${a}`,limit:-1});this.subData.rw[a]=e.data?.data||e.data?.[0]?.data||[]}catch(e){this.toast.error("Gagal memuat data RW."),this.subData.rw[a]=[]}finally{this.loading.rw[a]=!1}}},toggleExpand(a,e){const t=a[`id${e}`];this.expanded[e][t]=!this.expanded[e][t],"desa"===e&&this.expanded.desa[t]&&this.fetchDusunForDesa(t),"dusun"===e&&this.expanded.dusun[t]&&this.fetchRwForDusun(t),"rw"===e&&this.expanded.rw[t]&&this.fetchRtForRw(t)},sortBy(a){this.sortColumn===a?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=a,this.sortDirection="asc"),this.fetchProfiles()},changePage(a){a>=1&&a<=this.totalPages&&(this.currentPage=a)},openAddDusunModal(a){this.dusunBeingEdited=null,this.profileForDusun=a,this.isDusunModalVisible=!0},openEditDusunModal(a,e){this.dusunBeingEdited=a,this.profileForDusun=e,this.isDusunModalVisible=!0},closeDusunModal(){this.isDusunModalVisible=!1,this.dusunBeingEdited=null,this.profileForDusun=null},handleDusunSaveSuccessful(){const a=this.profileForDusun.iddesa;this.closeDusunModal(),delete this.subData.dusun[a],this.fetchDusunForDesa(a)},advancedDeleteDusunAlert(a,e){this.$swal({title:`Hapus Dusun ${a.namadusun}?`,text:"Data RW dan RT yang terkait juga akan terhapus. Aksi ini tidak dapat dibatalkan.",icon:"warning",showCancelButton:!0,confirmButtonText:'<i class="fa fa-check me-2"></i> Hapus!',confirmButtonColor:"#d33",cancelButtonText:'<i class="fa fa-times me-2"></i> Batal',cancelButtonColor:"#efefef",reverseButtons:!0}).then(async t=>{if(t.isConfirmed)try{await Ai(a.iddusun),this.toast.success("Data dusun berhasil dihapus."),delete this.subData.dusun[e.iddesa],this.fetchDusunForDesa(e.iddesa)}catch(s){this.toast.error("Gagal menghapus data dusun.")}})},openAddProfileModal(){this.profileBeingEdited=null,this.isProfileModalVisible=!0},openEditProfileModal(a){this.profileBeingEdited=a,this.isProfileModalVisible=!0},closeProfileModal(){this.isProfileModalVisible=!1},handleProfileSaveSuccessful(){this.closeProfileModal(),this.fetchProfiles()},openDetailModal(a){this.profileBeingViewed={...a},this.isDetailModalVisible=!0},closeDetailModal(){this.isDetailModalVisible=!1},advancedDeleteAlert(a){this.$swal({title:"Hapus Data Profil Desa",text:"Apakah Anda yakin ingin menghapus data ini?",icon:"warning",showCancelButton:!0,confirmButtonText:'<i class="fa fa-check me-2"></i> Hapus!',confirmButtonColor:"#d33",cancelButtonText:'<i class="fa fa-times me-2"></i> Batal',cancelButtonColor:"#efefef",reverseButtons:!0}).then(async e=>{if(e.isConfirmed)try{await xi(a),this.fetchProfiles(),this.toast.success("Data profil desa berhasil dihapus.")}catch(t){this.toast.error("Gagal menghapus data profil desa.")}})},openAddRwModal(a){this.rwBeingEdited=null,this.dusunForRw=a,this.isRwModalVisible=!0},openEditRwModal(a,e){this.rwBeingEdited=a,this.dusunForRw=e,this.isRwModalVisible=!0},closeRwModal(){this.isRwModalVisible=!1,this.rwBeingEdited=null,this.dusunForRw=null},handleRwSaveSuccessful(){const a=this.dusunForRw.iddusun;this.closeRwModal(),delete this.subData.rw[a],this.fetchRwForDusun(a)},advancedDeleteRwAlert(a,e){this.$swal({title:`Hapus ${a.namarw}?`,text:"Data RT yang terkait juga akan terhapus. Aksi ini tidak dapat dibatalkan.",icon:"warning",showCancelButton:!0,confirmButtonText:'<i class="fa fa-check me-2"></i> Hapus!',confirmButtonColor:"#d33",cancelButtonText:'<i class="fa fa-times me-2"></i> Batal',cancelButtonColor:"#efefef",reverseButtons:!0}).then(async t=>{if(t.isConfirmed)try{await Ii(a.idrw),this.toast.success("Data RW berhasil dihapus."),delete this.subData.rw[e.iddusun],this.fetchRwForDusun(e.iddusun)}catch(s){this.toast.error("Gagal menghapus data RW.")}})},openAddRtModal(a){this.rtBeingEdited=null,this.rwForRt=a,this.isRtModalVisible=!0},openEditRtModal(a,e){this.rtBeingEdited=a,this.rwForRt=e,this.isRtModalVisible=!0},closeRtModal(){this.isRtModalVisible=!1,this.rtBeingEdited=null,this.rwForRt=null},handleRtSaveSuccessful(){const a=this.rwForRt.idrw;this.closeRtModal(),delete this.subData.rt[a],this.fetchRtForRw(a)},async fetchRtForRw(a){if(!this.subData.rt[a]){this.loading.rt[a]=!0;try{const e=await Ni({filter:`idrw=${a}`,limit:-1});this.subData.rt[a]=e.data?.data||e.data?.[0]?.data||[]}catch(e){this.toast.error("Gagal memuat data RT."),this.subData.rt[a]=[]}finally{this.loading.rt[a]=!1}}},advancedDeleteRtAlert(a,e){this.$swal({title:`Hapus ${a.namart}?`,text:"Aksi ini tidak dapat dibatalkan.",icon:"warning",showCancelButton:!0,confirmButtonText:'<i class="fa fa-check me-2"></i> Hapus!',confirmButtonColor:"#d33",cancelButtonText:'<i class="fa fa-times me-2"></i> Batal',cancelButtonColor:"#efefef",reverseButtons:!0}).then(async t=>{if(t.isConfirmed)try{await Qi(a.idrt),this.toast.success("Data RT berhasil dihapus"),delete this.subData.rt[e.idrw],this.fetchRtForRw(e.idrw)}catch(s){this.toast.error("Gagal menghapus data RT")}})},toggleFilterVisibility(){this.isFilterVisible=!this.isFilterVisible},applyFilters(){this.currentPage=1,this.fetchProfiles()},resetFilters(){this.filters.namawilayah="",this.filters.alamatkantor="",this.sortColumn="created_at",this.sortDirection="asc",this.currentPage=1,this.fetchProfiles()}}};const fr=(0,r.A)(br,[["render",Di],["__scopeId","data-v-478fa9e9"]]);var Lr=fr,yr={components:{ProfilesTable:Lr}};const vr=(0,r.A)(yr,[["render",os]]);var Cr=vr;const Pr={class:"container-fluid"},Er={class:"row"};function Dr(a,e,t,s,i,l){const o=(0,n.g2)("Breadcrumbs"),r=(0,n.g2)("OfficialsTable");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(o,{main:"Pemerintahan",title:a.$route.meta.title},null,8,["title"]),(0,n.Lk)("div",Pr,[(0,n.Lk)("div",Er,[(0,n.bF)(r)])])])}const Mr={class:"col-sm-12"},wr={class:"card"},Fr={class:"card-body"},Xr={class:"d-flex justify-content-end align-items-start mb-3"},xr={class:"d-flex gap-2"},Tr={key:0,class:"fa fa-angle-up me-2"},Sr={key:1,class:"fa fa-angle-down me-2"},Br={key:0,class:"border p-3 mb-3 rounded filter-section"},Ar={class:"row g-3"},_r={class:"col-md-3"},jr={class:"col-md-3"},Vr={class:"col-md-3"},Ir={class:"col-md-3"},Nr=["value"],Ur={class:"d-flex justify-content-end gap-2 mt-3"},Rr={class:"table-responsive signal-table"},Qr={class:"table table-hover"},Wr={key:0,class:"fa fa-sort-asc"},Kr={key:1,class:"fa fa-sort-desc"},Or={key:2,class:"fa fa-sort"},$r={key:0,class:"fa fa-sort-asc"},Gr={key:1,class:"fa fa-sort-desc"},Jr={key:2,class:"fa fa-sort"},qr={key:0,class:"fa fa-sort-asc"},Hr={key:1,class:"fa fa-sort-desc"},Yr={key:2,class:"fa fa-sort"},zr={key:0,class:"fa fa-sort-asc"},Zr={key:1,class:"fa fa-sort-desc"},ac={key:2,class:"fa fa-sort"},ec={key:0},tc={scope:"row"},sc={class:"btn-group"},ic=["onClick"],lc=["onClick"],nc={key:0},oc={class:"d-flex flex-column flex-md-row justify-content-md-between align-items-center mt-3 px-3 pb-3"},rc={class:"mt-2"},cc={key:0,class:"text-muted"},dc={key:0,class:"d-flex align-items-center flex-wrap gap-2 mt-2"},uc={class:"pagination mb-0"},mc={key:0,class:"page-item"},kc={key:1,class:"page-item disabled"},hc=["onClick"],gc={key:2,class:"page-item disabled"},pc={key:3,class:"page-item"};function bc(a,e,t,s,i,o){const r=(0,n.g2)("add-edit-official-modal");return(0,n.uX)(),(0,n.CE)("div",Mr,[i.isModalVisible?((0,n.uX)(),(0,n.Wv)(r,{key:0,"official-to-edit":i.officialBeingEdited,onClose:o.closeModal,onSaveSuccessful:o.handleSaveSuccessful},null,8,["official-to-edit","onClose","onSaveSuccessful"])):(0,n.Q3)("",!0),(0,n.Lk)("div",wr,[e[41]||(e[41]=(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("h3",null,"Daftar Perangkat Desa")],-1)),(0,n.Lk)("div",Fr,[(0,n.Lk)("div",Xr,[(0,n.Lk)("div",xr,[(0,n.Lk)("button",{class:"btn btn-outline-light txt-dark",onClick:e[0]||(e[0]=(...a)=>o.toggleFilterVisibility&&o.toggleFilterVisibility(...a))},[i.isFilterVisible?((0,n.uX)(),(0,n.CE)("i",Tr)):((0,n.uX)(),(0,n.CE)("i",Sr)),(0,n.Lk)("span",null,(0,k.v_)(i.isFilterVisible?"Sembunyikan":"Tampilkan")+" Filter",1)]),(0,n.Lk)("button",{class:"btn btn-success",onClick:e[1]||(e[1]=(...a)=>o.openAddModal&&o.openAddModal(...a))},e[16]||(e[16]=[(0,n.Lk)("i",{class:"fa fa-plus me-2"},null,-1),(0,n.Lk)("span",null," Tambah Data",-1)]))])]),i.isFilterVisible?((0,n.uX)(),(0,n.CE)("div",Br,[(0,n.Lk)("div",Ar,[(0,n.Lk)("div",_r,[e[17]||(e[17]=(0,n.Lk)("label",{for:"filterVillageName",class:"form-label"},"Nama Desa",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterVillageName",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.filters.namawilayah=a),placeholder:"Filter berdasarkan nama desa"},null,512),[[l.Jo,i.filters.namawilayah]])]),(0,n.Lk)("div",jr,[e[18]||(e[18]=(0,n.Lk)("label",{for:"filterName",class:"form-label"},"Nama Pengurus",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterName",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=a=>i.filters.namapengurus=a),placeholder:"Filter berdasarkan nama pengurus"},null,512),[[l.Jo,i.filters.namapengurus]])]),(0,n.Lk)("div",Vr,[e[19]||(e[19]=(0,n.Lk)("label",{for:"filterPosition",class:"form-label"},"Jabatan",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterPosition",class:"form-control","onUpdate:modelValue":e[4]||(e[4]=a=>i.filters.namajabatan=a),placeholder:"Filter berdasarkan jabatan"},null,512),[[l.Jo,i.filters.namajabatan]])]),(0,n.Lk)("div",Ir,[e[21]||(e[21]=(0,n.Lk)("label",{for:"filterStatus",class:"form-label"},"Status",-1)),(0,n.bo)((0,n.Lk)("select",{id:"filterStatus",class:"form-select","onUpdate:modelValue":e[5]||(e[5]=a=>i.filters.namastatus=a)},[e[20]||(e[20]=(0,n.Lk)("option",{value:""},"Semua Status",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.statusList,a=>((0,n.uX)(),(0,n.CE)("option",{key:a,value:a},(0,k.v_)(a),9,Nr))),128))],512),[[l.u1,i.filters.namastatus]])])]),(0,n.Lk)("div",Ur,[(0,n.Lk)("button",{class:"btn btn-secondary",onClick:e[6]||(e[6]=(...a)=>o.resetFilters&&o.resetFilters(...a))},e[22]||(e[22]=[(0,n.Lk)("i",{class:"fa fa-refresh me-2"},null,-1),(0,n.Lk)("span",null,"Reset Filter",-1)])),(0,n.Lk)("button",{class:"btn btn-primary",onClick:e[7]||(e[7]=(...a)=>o.applyFilters&&o.applyFilters(...a))},e[23]||(e[23]=[(0,n.Lk)("i",{class:"fa fa-search me-2"},null,-1),(0,n.Lk)("span",null,"Terapkan Filter",-1)]))])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",Rr,[(0,n.Lk)("table",Qr,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[e[28]||(e[28]=(0,n.Lk)("th",{scope:"col"},"No",-1)),(0,n.Lk)("th",{scope:"col",onClick:e[8]||(e[8]=a=>o.sortBy("namawilayah"))},[e[24]||(e[24]=(0,n.eW)(" Nama Desa ")),"namawilayah"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",Wr)):"namawilayah"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",Kr)):((0,n.uX)(),(0,n.CE)("i",Or))]),e[29]||(e[29]=(0,n.Lk)("th",{scope:"col"},"Periode Jabatan",-1)),(0,n.Lk)("th",{scope:"col",onClick:e[9]||(e[9]=a=>o.sortBy("namapengurus"))},[e[25]||(e[25]=(0,n.eW)(" Nama Pengurus ")),"namapengurus"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",$r)):"namapengurus"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",Gr)):((0,n.uX)(),(0,n.CE)("i",Jr))]),(0,n.Lk)("th",{scope:"col",onClick:e[10]||(e[10]=a=>o.sortBy("namajabatan"))},[e[26]||(e[26]=(0,n.eW)(" Jabatan ")),"namajabatan"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",qr)):"namajabatan"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",Hr)):((0,n.uX)(),(0,n.CE)("i",Yr))]),(0,n.Lk)("th",{scope:"col",onClick:e[11]||(e[11]=a=>o.sortBy("namastatus"))},[e[27]||(e[27]=(0,n.eW)(" Status ")),"namastatus"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",zr)):"namastatus"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",Zr)):((0,n.uX)(),(0,n.CE)("i",ac))]),e[30]||(e[30]=(0,n.Lk)("th",{scope:"col"},"Aksi",-1))])]),(0,n.Lk)("tbody",null,[i.isLoading?((0,n.uX)(),(0,n.CE)("tr",ec,e[31]||(e[31]=[(0,n.Lk)("td",{colspan:"7",class:"text-center p-5"},[(0,n.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,n.Lk)("span",{class:"visually-hidden"},"Loading...")]),(0,n.Lk)("p",{class:"mt-2"},"Memuat data...")],-1)]))):((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.paginatedOfficials,(a,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:a.idperangkat},[(0,n.Lk)("th",tc,(0,k.v_)((i.currentPage-1)*i.perPage+t+1),1),(0,n.Lk)("td",null,(0,k.v_)(a.wilayah.namawilayah||"-"),1),(0,n.Lk)("td",null,(0,k.v_)(a.periode.tahunawal)+" - "+(0,k.v_)(a.periode.tahunakhir||"-"),1),(0,n.Lk)("td",null,(0,k.v_)(a.penduduk.namapengurus||"-"),1),(0,n.Lk)("td",null,(0,k.v_)(a.jabatan.namajabatan||"-"),1),(0,n.Lk)("td",null,(0,k.v_)(a.status.namastatus||"-"),1),(0,n.Lk)("td",null,[(0,n.Lk)("div",sc,[(0,n.Lk)("button",{class:"btn btn-primary btn-sm",onClick:e=>o.openEditModal(a),title:"Ubah Data"},e[32]||(e[32]=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)]),8,ic),(0,n.Lk)("button",{class:"btn btn-danger sweet-11 btn-sm",type:"button",onClick:e=>o.advancedDeleteAlert(a.idperangkat),title:"Hapus Data"},e[33]||(e[33]=[(0,n.Lk)("i",{class:"fa fa-trash"},null,-1)]),8,lc)])])]))),128)),0===o.paginatedOfficials.length?((0,n.uX)(),(0,n.CE)("tr",nc,e[34]||(e[34]=[(0,n.Lk)("td",{colspan:"7",class:"text-center"},"Tidak ada data yang cocok atau tersedia.",-1)]))):(0,n.Q3)("",!0)],64))])]),(0,n.Lk)("div",oc,[(0,n.Lk)("div",rc,[i.totalItems>0?((0,n.uX)(),(0,n.CE)("span",cc,[e[35]||(e[35]=(0,n.eW)(" Menampilkan ")),(0,n.Lk)("strong",null,(0,k.v_)((i.currentPage-1)*i.perPage+1),1),e[36]||(e[36]=(0,n.eW)(" - ")),(0,n.Lk)("strong",null,(0,k.v_)(Math.min(i.currentPage*i.perPage,i.totalItems)),1),e[37]||(e[37]=(0,n.eW)(" dari ")),(0,n.Lk)("strong",null,(0,k.v_)(i.totalItems),1),e[38]||(e[38]=(0,n.eW)(" data "))])):(0,n.Q3)("",!0)]),-1!==i.perPage&&o.totalPages>1?((0,n.uX)(),(0,n.CE)("nav",dc,[(0,n.Lk)("ul",uc,[(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[12]||(e[12]=a=>o.changePage(i.currentPage-1))},"Prev")],2),o.pageNumbers[0]>1?((0,n.uX)(),(0,n.CE)("li",mc,[(0,n.Lk)("button",{class:"page-link",onClick:e[13]||(e[13]=a=>o.changePage(1))},"1")])):(0,n.Q3)("",!0),o.pageNumbers[0]>2?((0,n.uX)(),(0,n.CE)("li",kc,e[39]||(e[39]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.pageNumbers,a=>((0,n.uX)(),(0,n.CE)("li",{key:a,class:(0,k.C4)(["page-item",{active:i.currentPage===a}])},[(0,n.Lk)("button",{class:"page-link",onClick:e=>o.changePage(a)},(0,k.v_)(a),9,hc)],2))),128)),o.pageNumbers.slice(-1)[0]<o.totalPages-1?((0,n.uX)(),(0,n.CE)("li",gc,e[40]||(e[40]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),o.pageNumbers.slice(-1)[0]<o.totalPages?((0,n.uX)(),(0,n.CE)("li",pc,[(0,n.Lk)("button",{class:"page-link",onClick:e[14]||(e[14]=a=>o.changePage(o.totalPages))},(0,k.v_)(o.totalPages),1)])):(0,n.Q3)("",!0),(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:i.currentPage===o.totalPages}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[15]||(e[15]=a=>o.changePage(i.currentPage+1))},"Next")],2)])])):(0,n.Q3)("",!0)])])])])}t(7642),t(8004),t(3853),t(5876),t(2475),t(5024),t(1698);const fc=(a={})=>Na.get("",{params:{act:"perangkat",...a}}),Lc=a=>(a.append("act","perangkat"),Na.post("",a)),yc=(a,e)=>a?(e.append("act","perangkat"),e.append("key",a),Na.post("",e)):Promise.reject(new Error("ID perangkat tidak tersedia.")),vc=a=>a?Na.delete("",{data:{act:"perangkat",key:a}}):Promise.reject(new Error("ID perangkat tidak tersedia.")),Cc={class:"modal-header"},Pc={class:"modal-title"},Ec={class:"modal-body"},Dc={class:"mb-3"},Mc=["disabled"],wc={disabled:"",value:""},Fc=["value"],Xc={class:"mb-3"},xc=["disabled"],Tc={disabled:"",value:""},Sc=["value"],Bc={class:"mb-3"},Ac=["disabled"],_c={disabled:"",value:""},jc=["value"],Vc={class:"mb-3"},Ic=["disabled"],Nc={disabled:"",value:""},Uc=["value"],Rc={class:"mb-3"},Qc=["disabled"],Wc={disabled:"",value:""},Kc=["value"],Oc={key:0,class:"alert alert-danger mt-3"},$c={class:"modal-footer"},Gc=["disabled"],Jc={key:0,class:"spinner-border spinner-border-sm",role:"status"},qc={key:1};function Hc(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",{class:"modal-overlay",onClick:e[10]||(e[10]=(...a)=>o.handleOverlayClick&&o.handleOverlayClick(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[9]||(e[9]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",Cc,[(0,n.Lk)("h5",Pc,(0,k.v_)(o.isEditMode?"Edit Data Perangkat Desa":"Tambah Data Perangkat Desa"),1),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",Ec,[(0,n.Lk)("form",{onSubmit:e[6]||(e[6]=(0,l.D$)((...a)=>o.submitForm&&o.submitForm(...a),["prevent"]))},[(0,n.Lk)("div",Dc,[e[11]||(e[11]=(0,n.Lk)("label",{class:"form-label"},"Desa",-1)),(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":e[1]||(e[1]=a=>i.selectedDesaId=a),required:"",disabled:i.isListLoading},[(0,n.Lk)("option",wc,(0,k.v_)(i.isListLoading?"Memuat...":"Pilih Desa"),1),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.desaList,a=>((0,n.uX)(),(0,n.CE)("option",{key:a.iddesa,value:a.iddesa},(0,k.v_)(a.wilayah.namawilayah),9,Fc))),128))],8,Mc),[[l.u1,i.selectedDesaId]])]),(0,n.Lk)("div",Xc,[e[12]||(e[12]=(0,n.Lk)("label",{class:"form-label"},"Periode Jabatan",-1)),(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":e[2]||(e[2]=a=>i.formData.idperiode=a),required:"",disabled:i.isListLoading||!i.selectedDesaId},[(0,n.Lk)("option",Tc,(0,k.v_)(i.isListLoading?"Memuat...":i.selectedDesaId?"Pilih Periode Jabatan":"Pilih Desa terlebih dahulu"),1),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.filteredPeriodeList,a=>((0,n.uX)(),(0,n.CE)("option",{key:a.idperiode,value:a.idperiode},(0,k.v_)(a.tahunawal)+" - "+(0,k.v_)(a.tahunakhir),9,Sc))),128))],8,xc),[[l.u1,i.formData.idperiode]])]),(0,n.Lk)("div",Bc,[e[13]||(e[13]=(0,n.Lk)("label",{class:"form-label"},"Nama Pengurus",-1)),(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":e[3]||(e[3]=a=>i.formData.idpenduduk=a),required:"",disabled:i.isListLoading},[(0,n.Lk)("option",_c,(0,k.v_)(i.isListLoading?"Memuat...":"Pilih Nama Pengurus"),1),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.pendudukList,a=>((0,n.uX)(),(0,n.CE)("option",{key:a.idpenduduk,value:a.idpenduduk},(0,k.v_)(a.nama),9,jc))),128))],8,Ac),[[l.u1,i.formData.idpenduduk]])]),(0,n.Lk)("div",Vc,[e[14]||(e[14]=(0,n.Lk)("label",{class:"form-label"},"Jabatan",-1)),(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":e[4]||(e[4]=a=>i.formData.idjabatan=a),required:"",disabled:i.isListLoading},[(0,n.Lk)("option",Nc,(0,k.v_)(i.isListLoading?"Memuat...":"Pilih Jabatan"),1),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.jabatanList,a=>((0,n.uX)(),(0,n.CE)("option",{key:a.idjabatan,value:a.idjabatan},(0,k.v_)(a.namajabatan),9,Uc))),128))],8,Ic),[[l.u1,i.formData.idjabatan]])]),(0,n.Lk)("div",Rc,[e[15]||(e[15]=(0,n.Lk)("label",{class:"form-label"},"Status",-1)),(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":e[5]||(e[5]=a=>i.formData.idstatus=a),required:"",disabled:i.isListLoading},[(0,n.Lk)("option",Wc,(0,k.v_)(i.isListLoading?"Memuat...":"Pilih Status Perangkat Desa"),1),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.statusList,a=>((0,n.uX)(),(0,n.CE)("option",{key:a.idstatus,value:a.idstatus},(0,k.v_)(a.namastatus),9,Kc))),128))],8,Qc),[[l.u1,i.formData.idstatus]])]),i.errorMessage?((0,n.uX)(),(0,n.CE)("div",Oc,(0,k.v_)(i.errorMessage),1)):(0,n.Q3)("",!0)],32)]),(0,n.Lk)("div",$c,[(0,n.Lk)("button",{type:"button",class:"btn btn-danger",onClick:e[7]||(e[7]=(...a)=>o.closeModal&&o.closeModal(...a))},"Batal"),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[8]||(e[8]=(...a)=>o.submitForm&&o.submitForm(...a)),disabled:i.isLoading},[i.isLoading?((0,n.uX)(),(0,n.CE)("span",Jc)):((0,n.uX)(),(0,n.CE)("span",qc,"Simpan"))],8,Gc)])])])])}const Yc=(a={})=>Na.get("",{params:{act:"periode-perangkat",...a}}),zc=a=>(a.append("act","periode-perangkat"),Na.post("",a)),Zc=(a,e)=>a?(e.append("act","periode-perangkat"),e.append("key",a),Na.post("",e)):Promise.reject(new Error("ID periode jabatan tidak tersedia.")),ad=a=>a?Na.delete("",{data:{act:"periode-perangkat",key:a}}):Promise.reject(new Error("ID periode jabatan tidak tersedia.")),ed=(a={})=>Na.get("",{params:{act:"status-perangkat",...a}}),td=a=>Na.post("",{act:"status-perangkat",record:a}),sd=(a,e)=>a?Na.put("",{act:"status-perangkat",key:a,record:e}):Promise.reject(new Error("ID status perangkat tidak tersedia.")),id=a=>a?Na.delete("",{data:{act:"status-perangkat",key:a}}):Promise.reject(new Error("ID status perangkat tidak tersedia.")),ld=(a={})=>Na.get("",{params:{act:"jabatan",...a}}),nd=a=>Na.post("",{act:"jabatan",record:a}),od=(a,e)=>a?Na.put("",{act:"jabatan",key:a,record:e}):Promise.reject(new Error("ID jabatan tidak tersedia.")),rd=a=>a?Na.delete("",{data:{act:"jabatan",key:a}}):Promise.reject(new Error("ID jabatan tidak tersedia.")),cd={idperiode:"",idjabatan:"",idstatus:"",idpenduduk:""};var dd={name:"addEditOfficialModal",props:{officialToEdit:{type:Object,default:null}},data(){return{formData:{...cd},desaList:[],selectedDesaId:"",periodeList:[],jabatanList:[],pendudukList:[],statusList:[],isListLoading:!1,isLoading:!1,errorMessage:null,toast:(0,ln.dj)()}},computed:{isEditMode(){return!!this.officialToEdit},filteredPeriodeList(){return this.selectedDesaId?this.periodeList.filter(a=>a.iddesa==this.selectedDesaId):[]}},watch:{selectedDesaId(a,e){if(a!==e){if(this.isEditMode&&""===e)return;this.formData.idperiode=""}},officialToEdit(){this.populateForm()}},async created(){await this.initializeComponent()},methods:{closeModal(){this.$emit("close")},handleOverlayClick(a){a.target===a.currentTarget&&this.closeModal()},async initializeComponent(){await this.fetchDropdownData(),this.populateForm()},async fetchDropdownData(){this.isListLoading=!0;try{const[a,e,t,s,i]=await Promise.all([Mi({limit:-1}),Yc({limit:-1}),Co({limit:-1}),ld({limit:-1}),ed({limit:-1})]);this.desaList=a.data?.data||a.data?.[0]?.data||[],this.periodeList=e.data?.data||e.data?.[0]?.data||[],this.pendudukList=t.data?.data||t.data?.[0]?.data||[],this.jabatanList=s.data?.data||s.data?.[0]?.data||[],this.statusList=i.data?.data||i.data?.[0]?.data||[]}catch(a){this.toast.error("Gagal memuat semua data referensi")}finally{this.isListLoading=!1}},populateForm(){if(this.errorMessage=null,this.isEditMode&&this.officialToEdit){const a=this.officialToEdit;this.formData.idjabatan=a.idjabatan,this.formData.idperiode=a.idperiode,this.formData.idpenduduk=a.idpenduduk,this.formData.idstatus=a.idstatus;const e=this.periodeList.find(a=>a.idperiode==this.formData.idperiode);e&&(this.selectedDesaId=e.iddesa)}else this.formData={...cd},this.selectedDesaId=""},async submitForm(){this.isLoading=!0,this.errorMessage=null;const a=new FormData;a.append("record[idpenduduk]",this.formData.idpenduduk),a.append("record[idjabatan]",this.formData.idjabatan),a.append("record[idperiode]",this.formData.idperiode),a.append("record[idstatus]",this.formData.idstatus);try{this.isEditMode?(a.append("_method","PUT"),await yc(this.officialToEdit.idperangkat,a),this.toast.success("Data perangkat desa berhasil diperbarui")):(await Lc(a),this.toast.success("Data perangkat desa berhasil ditambah")),this.$emit("save-successful"),this.closeModal()}catch(e){this.errorMessage=e.response?.data?.failed||e.response?.data?.message||"Gagal menyimpan data. Silakan coba lagi",this.toast.error("Gagal menyimpan data perangkat desa")}finally{this.isLoading=!1}}}};const ud=(0,r.A)(dd,[["render",Hc],["__scopeId","data-v-c458b8ee"]]);var md=ud,kd={components:{AddEditOfficialModal:md},data(){return{officials:[],isLoading:!1,sortColumn:"created_at",sortDirection:"asc",isModalVisible:!1,currentPage:1,perPage:20,totalItems:0,officialBeingEdited:null,isFilterVisible:!1,filters:{namapengurus:"",namajabatan:"",namawilayah:"",namastatus:""},statusList:[]}},computed:{paginatedOfficials(){return this.officials},totalPages(){return this.perPage<=0?1:Math.ceil(this.totalItems/this.perPage)},pageNumbers(){const a=[],e=5;let t=Math.max(1,this.currentPage-Math.floor(e/2)),s=t+e-1;s>this.totalPages&&(s=this.totalPages,t=Math.max(1,s-e+1));for(let i=t;i<=s;i++)a.push(i);return a}},watch:{currentPage(){this.fetchOfficials()},perPage(){this.currentPage=1,this.fetchOfficials()}},async mounted(){this.toast=(0,ln.dj)(),await this.fetchOfficials()},methods:{openAddModal(){this.officialBeingEdited=null,this.isModalVisible=!0},openEditModal(a){this.officialBeingEdited={...a},this.isModalVisible=!0},closeModal(){this.isModalVisible=!1,this.officialBeingEdited=null},handleSaveSuccessful(){this.closeModal(),this.fetchOfficials()},async fetchOfficials(){this.isLoading=!0;try{const a={act:"perangkat",page:this.currentPage,limit:this.perPage,order:this.sortColumn?`${this.sortColumn} ${this.sortDirection}`:"",group:""},e=Object.entries(this.filters).filter(([,a])=>""!==a&&null!==a).map(([a,e])=>`${a}=${e}`);e.length>0?a.filter=e.join(","):a.filter="";const t=await fc(a),s=t.data?.data||t.data?.[0]?.data||[],i=t.data?.meta?.pagination||t.data?.[0]?.meta?.pagination||{};if(this.officials=s,this.totalItems=i.total||s.length,s.length>0){const a=s.map(a=>a.status.namastatus).filter(Boolean);this.statusList=[...new Set(a)]}}catch(a){console.error("Error fetching officials:",a),this.toast.error("Gagal memuat data perangkat.",{icon:"fa fa-times"})}finally{this.isLoading=!1}},advancedDeleteAlert(a){this.$swal({title:"Hapus Data Perangkat",text:"Apakah Anda yakin ingin menghapus data ini?",icon:"warning",showCancelButton:!0,confirmButtonText:'<i class="fa fa-check me-2"></i> Hapus!',confirmButtonColor:"#d33",cancelButtonText:'<i class="fa fa-times me-2"></i> Batal',cancelButtonColor:"#efefef",reverseButtons:!0}).then(async e=>{if(e.isConfirmed)try{await vc(a),1===this.officials.length&&this.currentPage>1?this.currentPage--:this.fetchOfficials(),this.toast.success("Data perangkat berhasil dihapus",{icon:"fa fa-check"})}catch(t){this.toast.error("Gagal menghapus data perangkat",{icon:"fa fa-times"})}})},sortBy(a){this.sortColumn===a?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=a,this.sortDirection="asc"),this.fetchOfficials()},changePage(a){a>=1&&a<=this.totalPages&&(this.currentPage=a)},toggleFilterVisibility(){this.isFilterVisible=!this.isFilterVisible},applyFilters(){this.currentPage=1,this.fetchOfficials()},resetFilters(){this.filters.namapengurus="",this.filters.namajabatan="",this.filters.namawilayah="",this.filters.namastatus="",this.sortColumn="created_at",this.sortDirection="desc",this.currentPage=1,this.fetchOfficials()}}};const hd=(0,r.A)(kd,[["render",bc],["__scopeId","data-v-cff8b76c"]]);var gd=hd,pd={components:{OfficialsTable:gd}};const bd=(0,r.A)(pd,[["render",Dr]]);var fd=bd;const Ld={class:"container-fluid"},yd={class:"row"};function vd(a,e,t,s,i,l){const o=(0,n.g2)("Breadcrumbs"),r=(0,n.g2)("tenurePeriodsTable");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(o,{main:"Pemerintahan",title:a.$route.meta.title},null,8,["title"]),(0,n.Lk)("div",Ld,[(0,n.Lk)("div",yd,[(0,n.bF)(r)])])])}const Cd={class:"col-sm-12"},Pd={class:"card"},Ed={class:"card-body"},Dd={class:"d-flex justify-content-end align-items-start mb-3"},Md={class:"d-flex gap-2"},wd={key:0,class:"fa fa-angle-up me-2"},Fd={key:1,class:"fa fa-angle-down me-2"},Xd={key:0,class:"border p-3 mb-3 rounded filter-section"},xd={class:"row g-3"},Td={class:"col-md-3"},Sd={class:"col-md-3"},Bd={class:"col-md-3"},Ad={class:"col-md-3"},_d={class:"d-flex justify-content-end gap-2 mt-3"},jd={class:"table-responsive signal-table"},Vd={class:"table table-hover"},Id={key:0,class:"fa fa-sort-asc"},Nd={key:1,class:"fa fa-sort-desc"},Ud={key:2,class:"fa fa-sort"},Rd={key:0,class:"fa fa-sort-asc"},Qd={key:1,class:"fa fa-sort-desc"},Wd={key:2,class:"fa fa-sort"},Kd={key:0,class:"fa fa-sort-asc"},Od={key:1,class:"fa fa-sort-desc"},$d={key:2,class:"fa fa-sort"},Gd={key:0,class:"fa fa-sort-asc"},Jd={key:1,class:"fa fa-sort-desc"},qd={key:2,class:"fa fa-sort"},Hd={key:0},Yd={scope:"row"},zd={class:"btn-group"},Zd=["onClick"],au=["onClick"],eu=["onClick"],tu={key:0},su={class:"d-flex flex-column flex-md-row justify-content-md-between align-items-center mt-3 px-3 pb-3"},iu={class:"mt-2"},lu={key:0,class:"text-muted"},nu={key:0,class:"d-flex align-items-center flex-wrap gap-2 mt-2"},ou={class:"pagination mb-0"},ru={key:0,class:"page-item"},cu={key:1,class:"page-item disabled"},du=["onClick"],uu={key:2,class:"page-item disabled"},mu={key:3,class:"page-item"};function ku(a,e,t,s,i,o){const r=(0,n.g2)("add-edit-period-modal");return(0,n.uX)(),(0,n.CE)("div",Cd,[i.isModalVisible?((0,n.uX)(),(0,n.Wv)(r,{key:0,"period-to-edit":i.periodBeingEdited,onClose:o.closeModal,onSaveSuccessful:o.handleSaveSuccessful},null,8,["period-to-edit","onClose","onSaveSuccessful"])):(0,n.Q3)("",!0),(0,n.Lk)("div",Pd,[e[40]||(e[40]=(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("h3",null,"Daftar Periode Jabatan")],-1)),(0,n.Lk)("div",Ed,[(0,n.Lk)("div",Dd,[(0,n.Lk)("div",Md,[(0,n.Lk)("button",{class:"btn btn-outline-light txt-dark",onClick:e[0]||(e[0]=(...a)=>o.toggleFilterVisibility&&o.toggleFilterVisibility(...a))},[i.isFilterVisible?((0,n.uX)(),(0,n.CE)("i",wd)):((0,n.uX)(),(0,n.CE)("i",Fd)),(0,n.Lk)("span",null,(0,k.v_)(i.isFilterVisible?"Sembunyikan":"Tampilkan")+" Filter",1)]),(0,n.Lk)("button",{class:"btn btn-success",onClick:e[1]||(e[1]=(...a)=>o.openAddModal&&o.openAddModal(...a))},e[16]||(e[16]=[(0,n.Lk)("i",{class:"fa fa-plus me-2"},null,-1),(0,n.Lk)("span",null," Tambah Data",-1)]))])]),i.isFilterVisible?((0,n.uX)(),(0,n.CE)("div",Xd,[(0,n.Lk)("div",xd,[(0,n.Lk)("div",Td,[e[17]||(e[17]=(0,n.Lk)("label",{for:"filterVillageName",class:"form-label"},"Nama Desa",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterVillageName",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.filters.namawilayah=a),placeholder:"Filter berdasarkan nama desa"},null,512),[[l.Jo,i.filters.namawilayah]])]),(0,n.Lk)("div",Sd,[e[18]||(e[18]=(0,n.Lk)("label",{for:"filterStartYear",class:"form-label"},"Tahun Awal",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterStartYear",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=a=>i.filters.tahunawal=a),placeholder:"Filter berdasarkan tahun awal"},null,512),[[l.Jo,i.filters.tahunawal]])]),(0,n.Lk)("div",Bd,[e[19]||(e[19]=(0,n.Lk)("label",{for:"filterEndYear",class:"form-label"},"Tahun Akhir",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterEndYear",class:"form-control","onUpdate:modelValue":e[4]||(e[4]=a=>i.filters.tahunakhir=a),placeholder:"Filter berdasarkan tahun akhir"},null,512),[[l.Jo,i.filters.tahunakhir]])]),(0,n.Lk)("div",Ad,[e[20]||(e[20]=(0,n.Lk)("label",{for:"filterSkDate",class:"form-label"},"Tanggal SK",-1)),(0,n.bo)((0,n.Lk)("input",{type:"date",id:"filterSkDate",class:"form-control","onUpdate:modelValue":e[5]||(e[5]=a=>i.filters.tanggal_sk=a)},null,512),[[l.Jo,i.filters.tanggal_sk]])])]),(0,n.Lk)("div",_d,[(0,n.Lk)("button",{class:"btn btn-secondary",onClick:e[6]||(e[6]=(...a)=>o.resetFilters&&o.resetFilters(...a))},e[21]||(e[21]=[(0,n.Lk)("i",{class:"fa fa-refresh me-2"},null,-1),(0,n.Lk)("span",null,"Reset Filter",-1)])),(0,n.Lk)("button",{class:"btn btn-primary",onClick:e[7]||(e[7]=(...a)=>o.applyFilters&&o.applyFilters(...a))},e[22]||(e[22]=[(0,n.Lk)("i",{class:"fa fa-search me-2"},null,-1),(0,n.Lk)("span",null,"Terapkan Filter",-1)]))])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",jd,[(0,n.Lk)("table",Vd,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[e[27]||(e[27]=(0,n.Lk)("th",{scope:"col"},"No",-1)),(0,n.Lk)("th",{scope:"col",onClick:e[8]||(e[8]=a=>o.sortBy("namawilayah"))},[e[23]||(e[23]=(0,n.eW)(" Nama Desa ")),"namawilayah"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",Id)):"namawilayah"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",Nd)):((0,n.uX)(),(0,n.CE)("i",Ud))]),(0,n.Lk)("th",{scope:"col",onClick:e[9]||(e[9]=a=>o.sortBy("tahunawal"))},[e[24]||(e[24]=(0,n.eW)(" Tahun Awal ")),"tahunawal"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",Rd)):"tahunawal"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",Qd)):((0,n.uX)(),(0,n.CE)("i",Wd))]),(0,n.Lk)("th",{scope:"col",onClick:e[10]||(e[10]=a=>o.sortBy("tahunakhir"))},[e[25]||(e[25]=(0,n.eW)(" Tahun Akhir ")),"tahunakhir"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",Kd)):"tahunakhir"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",Od)):((0,n.uX)(),(0,n.CE)("i",$d))]),(0,n.Lk)("th",{scope:"col",onClick:e[11]||(e[11]=a=>o.sortBy("tanggal_sk"))},[e[26]||(e[26]=(0,n.eW)(" Tanggal SK ")),"tanggal_sk"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",Gd)):"tanggal_sk"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",Jd)):((0,n.uX)(),(0,n.CE)("i",qd))]),e[28]||(e[28]=(0,n.Lk)("th",{scope:"col"},"Aksi",-1))])]),(0,n.Lk)("tbody",null,[i.isLoading?((0,n.uX)(),(0,n.CE)("tr",Hd,e[29]||(e[29]=[(0,n.Lk)("td",{colspan:"6",class:"text-center p-5"},[(0,n.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,n.Lk)("span",{class:"visually-hidden"},"Loading...")]),(0,n.Lk)("p",{class:"mt-2"},"Memuat data...")],-1)]))):((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.paginatedPeriods,(a,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:a.idperiode},[(0,n.Lk)("th",Yd,(0,k.v_)((i.currentPage-1)*i.perPage+t+1),1),(0,n.Lk)("td",null,(0,k.v_)(a.wilayah?.namawilayah||"-"),1),(0,n.Lk)("td",null,(0,k.v_)(a.tahunawal||"-"),1),(0,n.Lk)("td",null,(0,k.v_)(a.tahunakhir||"-"),1),(0,n.Lk)("td",null,(0,k.v_)(o.formatTanggal(a.tanggal_sk)||"-"),1),(0,n.Lk)("td",null,[(0,n.Lk)("div",zd,[(0,n.Lk)("button",{class:"btn btn-info btn-sm",onClick:e=>o.openSkFile(a.filesk),title:"Lihat File SK"},e[30]||(e[30]=[(0,n.Lk)("i",{class:"fa fa-file"},null,-1)]),8,Zd),(0,n.Lk)("button",{class:"btn btn-primary btn-sm",onClick:e=>o.openEditModal(a),title:"Ubah Data"},e[31]||(e[31]=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)]),8,au),(0,n.Lk)("button",{class:"btn btn-danger sweet-11 btn-sm",type:"button",onClick:e=>o.advancedDeleteAlert(a.idperiode),title:"Hapus Data"},e[32]||(e[32]=[(0,n.Lk)("i",{class:"fa fa-trash"},null,-1)]),8,eu)])])]))),128)),0===o.paginatedPeriods.length?((0,n.uX)(),(0,n.CE)("tr",tu,e[33]||(e[33]=[(0,n.Lk)("td",{colspan:"6",class:"text-center"},"Tidak ada data yang cocok atau tersedia.",-1)]))):(0,n.Q3)("",!0)],64))])]),(0,n.Lk)("div",su,[(0,n.Lk)("div",iu,[i.totalItems>0?((0,n.uX)(),(0,n.CE)("span",lu,[e[34]||(e[34]=(0,n.eW)(" Menampilkan ")),(0,n.Lk)("strong",null,(0,k.v_)((i.currentPage-1)*i.perPage+1),1),e[35]||(e[35]=(0,n.eW)(" - ")),(0,n.Lk)("strong",null,(0,k.v_)(Math.min(i.currentPage*i.perPage,i.totalItems)),1),e[36]||(e[36]=(0,n.eW)(" dari ")),(0,n.Lk)("strong",null,(0,k.v_)(i.totalItems),1),e[37]||(e[37]=(0,n.eW)(" data "))])):(0,n.Q3)("",!0)]),-1!==i.perPage&&o.totalPages>1?((0,n.uX)(),(0,n.CE)("nav",nu,[(0,n.Lk)("ul",ou,[(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[12]||(e[12]=a=>o.changePage(i.currentPage-1))},"Prev")],2),o.pageNumbers[0]>1?((0,n.uX)(),(0,n.CE)("li",ru,[(0,n.Lk)("button",{class:"page-link",onClick:e[13]||(e[13]=a=>o.changePage(1))},"1")])):(0,n.Q3)("",!0),o.pageNumbers[0]>2?((0,n.uX)(),(0,n.CE)("li",cu,e[38]||(e[38]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.pageNumbers,a=>((0,n.uX)(),(0,n.CE)("li",{key:a,class:(0,k.C4)(["page-item",{active:i.currentPage===a}])},[(0,n.Lk)("button",{class:"page-link",onClick:e=>o.changePage(a)},(0,k.v_)(a),9,du)],2))),128)),o.pageNumbers.slice(-1)[0]<o.totalPages-1?((0,n.uX)(),(0,n.CE)("li",uu,e[39]||(e[39]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),o.pageNumbers.slice(-1)[0]<o.totalPages?((0,n.uX)(),(0,n.CE)("li",mu,[(0,n.Lk)("button",{class:"page-link",onClick:e[14]||(e[14]=a=>o.changePage(o.totalPages))},(0,k.v_)(o.totalPages),1)])):(0,n.Q3)("",!0),(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:i.currentPage===o.totalPages}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[15]||(e[15]=a=>o.changePage(i.currentPage+1))},"Next")],2)])])):(0,n.Q3)("",!0)])])])])}const hu={class:"modal-header"},gu={class:"modal-title"},pu={class:"modal-body"},bu={class:"mb-3"},fu=["disabled"],Lu={disabled:"",value:""},yu=["value"],vu={class:"row"},Cu={class:"col-md-6 mb-3"},Pu={class:"col-md-6 mb-3"},Eu={class:"mb-3"},Du={class:"mb-3"},Mu={key:0,class:"mt-2"},wu=["href"],Fu={key:1,class:"mt-2"},Xu={key:0,class:"alert alert-danger mt-3"},xu={class:"modal-footer"},Tu=["disabled"],Su={key:0,class:"spinner-border spinner-border-sm",role:"status"},Bu={key:1};function Au(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",{class:"modal-overlay",onClick:e[10]||(e[10]=(...a)=>o.handleOverlayClick&&o.handleOverlayClick(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[9]||(e[9]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",hu,[(0,n.Lk)("h5",gu,(0,k.v_)(o.isEditMode?"Edit Data Periode Jabatan":"Tambah Data Periode Jabatan"),1),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",pu,[(0,n.Lk)("form",{onSubmit:e[6]||(e[6]=(0,l.D$)((...a)=>o.submitForm&&o.submitForm(...a),["prevent"]))},[(0,n.Lk)("div",bu,[e[11]||(e[11]=(0,n.Lk)("label",{class:"form-label"},"Nama Desa",-1)),(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":e[1]||(e[1]=a=>i.formData.iddesa=a),required:"",disabled:i.isDesaListLoading},[(0,n.Lk)("option",Lu,(0,k.v_)(i.isDesaListLoading?"Memuat...":"Pilih Desa"),1),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.desaList,a=>((0,n.uX)(),(0,n.CE)("option",{key:a.iddesa,value:a.iddesa},(0,k.v_)(a.wilayah.namawilayah),9,yu))),128))],8,fu),[[l.u1,i.formData.iddesa]])]),(0,n.Lk)("div",vu,[(0,n.Lk)("div",Cu,[e[12]||(e[12]=(0,n.Lk)("label",{class:"form-label"},"Tahun Awal",-1)),(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.formData.tahunawal=a),placeholder:"YYYY",required:""},null,512),[[l.Jo,i.formData.tahunawal]])]),(0,n.Lk)("div",Pu,[e[13]||(e[13]=(0,n.Lk)("label",{class:"form-label"},"Tahun Akhir",-1)),(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=a=>i.formData.tahunakhir=a),placeholder:"YYYY",required:""},null,512),[[l.Jo,i.formData.tahunakhir]])])]),(0,n.Lk)("div",Eu,[e[14]||(e[14]=(0,n.Lk)("label",{class:"form-label"},"Tanggal SK",-1)),(0,n.bo)((0,n.Lk)("input",{type:"date",class:"form-control","onUpdate:modelValue":e[4]||(e[4]=a=>i.formData.tanggal_sk=a),required:""},null,512),[[l.Jo,i.formData.tanggal_sk]])]),(0,n.Lk)("div",Du,[e[17]||(e[17]=(0,n.Lk)("label",{class:"form-label"},"Upload File SK",-1)),(0,n.Lk)("input",{type:"file",class:"form-control",accept:".pdf,.doc,.docx,image/*",onChange:e[5]||(e[5]=(...a)=>o.handleFileUpload&&o.handleFileUpload(...a))},null,32),o.isEditMode&&i.formData.filesk&&!i.selectedSkFile?((0,n.uX)(),(0,n.CE)("div",Mu,[e[15]||(e[15]=(0,n.eW)(" File saat ini: ")),(0,n.Lk)("a",{href:i.formData.filesk,target:"_blank",rel:"noopener noreferrer"},"Lihat File",8,wu)])):(0,n.Q3)("",!0),i.skFileName?((0,n.uX)(),(0,n.CE)("div",Fu,[e[16]||(e[16]=(0,n.eW)(" File baru: ")),(0,n.Lk)("strong",null,(0,k.v_)(i.skFileName),1)])):(0,n.Q3)("",!0)]),i.errorMessage?((0,n.uX)(),(0,n.CE)("div",Xu,(0,k.v_)(i.errorMessage),1)):(0,n.Q3)("",!0)],32)]),(0,n.Lk)("div",xu,[(0,n.Lk)("button",{type:"button",class:"btn btn-danger",onClick:e[7]||(e[7]=(...a)=>o.closeModal&&o.closeModal(...a))},"Batal"),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[8]||(e[8]=(...a)=>o.submitForm&&o.submitForm(...a)),disabled:i.isLoading},[i.isLoading?((0,n.uX)(),(0,n.CE)("span",Su)):((0,n.uX)(),(0,n.CE)("span",Bu,"Simpan"))],8,Tu)])])])])}const _u={iddesa:"",tahunawal:"",tahunakhir:"",tanggal_sk:"",filesk:null};var ju={name:"addEditPeriodModal",props:{periodToEdit:{type:Object,default:null}},data(){return{formData:{..._u},selectedSkFile:null,skFileName:"",desaList:[],isDesaListLoading:!1,isLoading:!1,errorMessage:null,toast:(0,ln.dj)()}},computed:{isEditMode(){return!!this.periodToEdit}},watch:{periodToEdit:{handler(a){a?(this.formData.iddesa=a.iddesa,this.formData.tahunawal=a.tahunawal,this.formData.tahunakhir=a.tahunakhir,this.formData.tanggal_sk=a.tanggal_sk,this.formData.filesk=a.filesk):this.formData={..._u},this.selectedSkFile=null,this.skFileName="",this.errorMessage=null},immediate:!0,deep:!0}},created(){this.fetchDesaList()},methods:{closeModal(){this.$emit("close")},handleOverlayClick(a){a.target===a.currentTarget&&this.closeModal()},async fetchDesaList(){this.isDesaListLoading=!0;try{const a=await Mi({limit:-1});this.desaList=a.data?.data||a.data?.[0]?.data||[]}catch(a){this.toast.error("Gagal memuat daftar desa")}finally{this.isDesaListLoading=!1}},handleFileUpload(a){const e=a.target.files[0];if(!e)return this.selectedSkFile=null,void(this.skFileName="");this.selectedSkFile=e,this.skFileName=e.name},async submitForm(){this.isLoading=!0,this.errorMessage=null;const a=new FormData;a.append("record[iddesa]",this.formData.iddesa),a.append("record[tahunawal]",this.formData.tahunawal),a.append("record[tahunakhir]",this.formData.tahunakhir),a.append("record[tanggal_sk]",this.formData.tanggal_sk),this.selectedSkFile&&a.append("upload_filesk",this.selectedSkFile);try{this.isEditMode?(a.append("_method","PUT"),await Zc(this.periodToEdit.idperiode,a),this.toast.success("Data periode jabatan berhasil diperbarui")):(await zc(a),this.toast.success("Data periode jabatan berhasil ditambah")),this.$emit("save-successful"),this.closeModal()}catch(e){this.errorMessage=e.response?.data?.failed||e.response?.data?.message||"Gagal menyimpan data. Silakan coba lagi.",this.toast.error("Gagal menyimpan data periode jabatan")}finally{this.isLoading=!1}}}};const Vu=(0,r.A)(ju,[["render",Au],["__scopeId","data-v-35180cde"]]);var Iu=Vu,Nu={components:{AddEditPeriodModal:Iu},data(){return{periods:[],isLoading:!1,sortColumn:"created_at",sortDirection:"asc",isModalVisible:!1,currentPage:1,perPage:10,totalItems:0,periodBeingEdited:null,isFilterVisible:!1,filters:{namadesa:"",tahunawal:"",tahunakhir:"",tanggal_sk:""}}},computed:{paginatedPeriods(){return this.periods},totalPages(){return this.perPage<=0?1:Math.ceil(this.totalItems/this.perPage)},pageNumbers(){const a=[],e=5;let t=Math.max(1,this.currentPage-Math.floor(e/2)),s=t+e-1;s>this.totalPages&&(s=this.totalPages,t=Math.max(1,s-e+1));for(let i=t;i<=s;i++)a.push(i);return a}},watch:{currentPage(){this.fetchPeriods()},perPage(){this.currentPage=1,this.fetchPeriods()}},async mounted(){this.toast=(0,ln.dj)(),await this.fetchPeriods()},methods:{openAddModal(){this.periodBeingEdited=null,this.isModalVisible=!0},openEditModal(a){this.periodBeingEdited={...a},this.isModalVisible=!0},closeModal(){this.isModalVisible=!1,this.periodBeingEdited=null},openSkFile(a){a?window.open(a,"_blank"):this.toast.info("Tidak ada file SK yang tersedia.",{icon:"fa fa-info-circle"})},formatTanggal(a){if(!a)return null;const e={day:"numeric",month:"long",year:"numeric"};return new Date(a).toLocaleDateString("id-ID",e)},handleSaveSuccessful(){this.closeModal(),this.fetchPeriods()},async fetchPeriods(){this.isLoading=!0;try{const a={act:"periode-perangkat",page:this.currentPage,limit:this.perPage,order:this.sortColumn?`${this.sortColumn} ${this.sortDirection}`:"",group:""},e=Object.entries(this.filters).filter(([,a])=>""!==a&&null!==a).map(([a,e])=>`${a}=${e}`);e.length>0?a.filter=e.join(","):a.filter="";const t=await Yc(a),s=t.data?.data||t.data?.[0]?.data||[],i=t.data?.meta?.pagination||t.data?.[0]?.meta?.pagination||{};this.periods=s,this.totalItems=i.total||s.length}catch(a){console.error("Error fetching periods:",a),this.toast.error("Gagal memuat data periode jabatan",{icon:"fa fa-times"})}finally{this.isLoading=!1}},advancedDeleteAlert(a){this.$swal({title:"Hapus Data Periode Jabatan",text:"Apakah Anda yakin ingin menghapus data ini?",icon:"warning",showCancelButton:!0,confirmButtonText:'<i class="fa fa-check me-2"></i> Hapus!',confirmButtonColor:"#d33",cancelButtonText:'<i class="fa fa-times me-2"></i> Batal',cancelButtonColor:"#efefef",reverseButtons:!0}).then(async e=>{if(e.isConfirmed)try{await ad(a),1===this.periods.length&&this.currentPage>1?this.currentPage--:this.fetchPeriods(),this.toast.success("Data periode jabatan berhasil dihapus",{icon:"fa fa-check"})}catch(t){this.toast.error("Gagal menghapus data periode jabatan",{icon:"fa fa-times"})}})},sortBy(a){this.sortColumn===a?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=a,this.sortDirection="asc"),this.fetchPeriods()},changePage(a){a>=1&&a<=this.totalPages&&(this.currentPage=a)},toggleFilterVisibility(){this.isFilterVisible=!this.isFilterVisible},applyFilters(){this.currentPage=1,this.fetchPeriods()},resetFilters(){this.filters.namawilayah="",this.filters.tahunawal="",this.filters.tahunakhir="",this.filters.tanggal_sk="",this.sortColumn="created_at",this.sortDirection="asc",this.currentPage=1,this.fetchPeriods()}}};const Uu=(0,r.A)(Nu,[["render",ku],["__scopeId","data-v-274376c2"]]);var Ru=Uu,Qu={components:{tenurePeriodsTable:Ru}};const Wu=(0,r.A)(Qu,[["render",vd]]);var Ku=Wu;const Ou={class:"container-fluid"},$u={class:"row"};function Gu(a,e,t,s,i,l){const o=(0,n.g2)("Breadcrumbs"),r=(0,n.g2)("ResidentsTable");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(o,{main:"Kependudukan",title:a.$route.meta.title},null,8,["title"]),(0,n.Lk)("div",Ou,[(0,n.Lk)("div",$u,[(0,n.bF)(r)])])])}const Ju={class:"col-sm-12"},qu={class:"card"},Hu={class:"card-body"},Yu={class:"d-flex justify-content-end align-items-start mb-3"},zu={class:"d-flex gap-2"},Zu={key:0,class:"fa fa-angle-up me-2"},am={key:1,class:"fa fa-angle-down me-2"},em={key:0,class:"border p-3 mb-3 rounded filter-section"},tm={class:"row g-3"},sm={class:"col-md-4"},im={class:"col-md-4"},lm={class:"col-md-4"},nm=["value"],om={class:"d-flex justify-content-end gap-2 mt-3"},rm={class:"table-responsive signal-table"},cm={class:"table table-hover"},dm={key:0,class:"fa fa-sort-asc"},um={key:1,class:"fa fa-sort-desc"},mm={key:2,class:"fa fa-sort"},km={key:0,class:"fa fa-sort-asc"},hm={key:1,class:"fa fa-sort-desc"},gm={key:2,class:"fa fa-sort"},pm={key:0,class:"fa fa-sort-asc"},bm={key:1,class:"fa fa-sort-desc"},fm={key:2,class:"fa fa-sort"},Lm={key:0},ym={scope:"row"},vm={class:"btn-group"},Cm=["onClick"],Pm=["onClick"],Em=["onClick"],Dm={key:0},Mm={class:"d-flex flex-column flex-md-row justify-content-md-between align-items-center mt-3 px-3 pb-3"},wm={class:"mt-2"},Fm={key:0,class:"text-muted"},Xm={key:0,class:"d-flex align-items-center flex-wrap gap-2 mt-2"},xm={class:"pagination mb-0"},Tm={key:0,class:"page-item"},Sm={key:1,class:"page-item disabled"},Bm=["onClick"],Am={key:2,class:"page-item disabled"},_m={key:3,class:"page-item"};function jm(a,e,t,s,i,o){const r=(0,n.g2)("add-edit-resident-modal"),c=(0,n.g2)("detail-resident-modal");return(0,n.uX)(),(0,n.CE)("div",Ju,[i.isModalVisible?((0,n.uX)(),(0,n.Wv)(r,{key:0,"resident-to-edit":i.residentBeingEdited,onClose:o.closeModal,onSaveSuccessful:o.handleSaveSuccessful},null,8,["resident-to-edit","onClose","onSaveSuccessful"])):(0,n.Q3)("",!0),i.isDetailModalVisible?((0,n.uX)(),(0,n.Wv)(c,{key:1,"resident-to-view":i.residentBeingViewed,onClose:o.closeDetailModal},null,8,["resident-to-view","onClose"])):(0,n.Q3)("",!0),(0,n.Lk)("div",qu,[e[38]||(e[38]=(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("h3",null,"Daftar Penduduk")],-1)),(0,n.Lk)("div",Hu,[(0,n.Lk)("div",Yu,[(0,n.Lk)("div",zu,[(0,n.Lk)("button",{class:"btn btn-outline-light txt-dark",onClick:e[0]||(e[0]=(...a)=>o.toggleFilterVisibility&&o.toggleFilterVisibility(...a))},[i.isFilterVisible?((0,n.uX)(),(0,n.CE)("i",Zu)):((0,n.uX)(),(0,n.CE)("i",am)),(0,n.Lk)("span",null,(0,k.v_)(i.isFilterVisible?"Sembunyikan":"Tampilkan")+" Filter",1)]),(0,n.Lk)("button",{class:"btn btn-success",onClick:e[1]||(e[1]=(...a)=>o.openAddModal&&o.openAddModal(...a))},e[14]||(e[14]=[(0,n.Lk)("i",{class:"fa fa-plus me-2"},null,-1),(0,n.Lk)("span",null," Tambah Data",-1)]))])]),i.isFilterVisible?((0,n.uX)(),(0,n.CE)("div",em,[(0,n.Lk)("div",tm,[(0,n.Lk)("div",sm,[e[15]||(e[15]=(0,n.Lk)("label",{for:"filterNik",class:"form-label"},"NIK",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterNik",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.filters.nik=a),placeholder:"Filter berdasarkan NIK..."},null,512),[[l.Jo,i.filters.nik]])]),(0,n.Lk)("div",im,[e[16]||(e[16]=(0,n.Lk)("label",{for:"filterName",class:"form-label"},"Nama Penduduk",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterName",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=a=>i.filters.nama=a),placeholder:"Filter berdasarkan nama penduduk..."},null,512),[[l.Jo,i.filters.nama]])]),(0,n.Lk)("div",lm,[e[18]||(e[18]=(0,n.Lk)("label",{for:"filterGender",class:"form-label"},"Jenis Kelamin",-1)),(0,n.bo)((0,n.Lk)("select",{id:"filterGender",class:"form-select","onUpdate:modelValue":e[4]||(e[4]=a=>i.filters.idjeniskelamin=a)},[e[17]||(e[17]=(0,n.Lk)("option",{value:""},"Semua Jenis Kelamin",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.genderList,a=>((0,n.uX)(),(0,n.CE)("option",{key:a.idjeniskelamin,value:a.idjeniskelamin},(0,k.v_)(a.namajeniskelamin),9,nm))),128))],512),[[l.u1,i.filters.idjeniskelamin]])])]),(0,n.Lk)("div",om,[(0,n.Lk)("button",{class:"btn btn-secondary",onClick:e[5]||(e[5]=(...a)=>o.resetFilters&&o.resetFilters(...a))},e[19]||(e[19]=[(0,n.Lk)("i",{class:"fa fa-refresh me-2"},null,-1),(0,n.Lk)("span",null,"Reset Filter",-1)])),(0,n.Lk)("button",{class:"btn btn-primary",onClick:e[6]||(e[6]=(...a)=>o.applyFilters&&o.applyFilters(...a))},e[20]||(e[20]=[(0,n.Lk)("i",{class:"fa fa-search me-2"},null,-1),(0,n.Lk)("span",null,"Terapkan Filter",-1)]))])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",rm,[(0,n.Lk)("table",cm,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[e[24]||(e[24]=(0,n.Lk)("th",{scope:"col"},"No",-1)),(0,n.Lk)("th",{scope:"col",onClick:e[7]||(e[7]=a=>o.sortBy("nik"))},[e[21]||(e[21]=(0,n.eW)(" NIK ")),"nik"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",dm)):"nik"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",um)):((0,n.uX)(),(0,n.CE)("i",mm))]),(0,n.Lk)("th",{scope:"col",onClick:e[8]||(e[8]=a=>o.sortBy("nama"))},[e[22]||(e[22]=(0,n.eW)(" Nama ")),"nama"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",km)):"nama"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",hm)):((0,n.uX)(),(0,n.CE)("i",gm))]),(0,n.Lk)("th",{scope:"col",onClick:e[9]||(e[9]=a=>o.sortBy("namajeniskelamin"))},[e[23]||(e[23]=(0,n.eW)(" Jenis Kelamin ")),"namajeniskelamin"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",pm)):"namajeniskelamin"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",bm)):((0,n.uX)(),(0,n.CE)("i",fm))]),e[25]||(e[25]=(0,n.Lk)("th",{scope:"col"},"Tempat, Tanggal Lahir",-1)),e[26]||(e[26]=(0,n.Lk)("th",{scope:"col"},"Aksi",-1))])]),(0,n.Lk)("tbody",null,[i.isLoading?((0,n.uX)(),(0,n.CE)("tr",Lm,e[27]||(e[27]=[(0,n.Lk)("td",{colspan:"6",class:"text-center p-5"},[(0,n.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,n.Lk)("span",{class:"visually-hidden"},"Loading...")]),(0,n.Lk)("p",{class:"mt-2"},"Memuat data...")],-1)]))):((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.paginatedResidents,(a,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:a.idpenduduk},[(0,n.Lk)("th",ym,(0,k.v_)((i.currentPage-1)*i.perPage+t+1),1),(0,n.Lk)("td",null,(0,k.v_)(a.nik||"-"),1),(0,n.Lk)("td",null,(0,k.v_)(a.nama||"-"),1),(0,n.Lk)("td",null,(0,k.v_)(a.jk.namajeniskelamin||"-"),1),(0,n.Lk)("td",null,(0,k.v_)([a.tempatlahir,o.formatTanggal(a.tanggallahir)].filter(Boolean).join(", ")||"-"),1),(0,n.Lk)("td",null,[(0,n.Lk)("div",vm,[(0,n.Lk)("button",{class:"btn btn-info btn-sm",onClick:e=>o.openDetailModal(a),title:"Lihat Detail Data"},e[28]||(e[28]=[(0,n.Lk)("i",{class:"fa fa-eye"},null,-1)]),8,Cm),(0,n.Lk)("button",{class:"btn btn-primary btn-sm",onClick:e=>o.openEditModal(a),title:"Ubah Data"},e[29]||(e[29]=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)]),8,Pm),(0,n.Lk)("button",{class:"btn btn-danger sweet-11 btn-sm",type:"button",onClick:e=>o.advancedDeleteAlert(a.idpenduduk),title:"Hapus Data"},e[30]||(e[30]=[(0,n.Lk)("i",{class:"fa fa-trash"},null,-1)]),8,Em)])])]))),128)),0===o.paginatedResidents.length?((0,n.uX)(),(0,n.CE)("tr",Dm,e[31]||(e[31]=[(0,n.Lk)("td",{colspan:"6",class:"text-center"},"Tidak ada data yang cocok atau tersedia.",-1)]))):(0,n.Q3)("",!0)],64))])]),(0,n.Lk)("div",Mm,[(0,n.Lk)("div",wm,[i.totalItems>0?((0,n.uX)(),(0,n.CE)("span",Fm,[e[32]||(e[32]=(0,n.eW)(" Menampilkan ")),(0,n.Lk)("strong",null,(0,k.v_)((i.currentPage-1)*i.perPage+1),1),e[33]||(e[33]=(0,n.eW)(" - ")),(0,n.Lk)("strong",null,(0,k.v_)(Math.min(i.currentPage*i.perPage,i.totalItems)),1),e[34]||(e[34]=(0,n.eW)(" dari ")),(0,n.Lk)("strong",null,(0,k.v_)(i.totalItems),1),e[35]||(e[35]=(0,n.eW)(" data "))])):(0,n.Q3)("",!0)]),-1!==i.perPage&&o.totalPages>1?((0,n.uX)(),(0,n.CE)("nav",Xm,[(0,n.Lk)("ul",xm,[(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[10]||(e[10]=a=>o.changePage(i.currentPage-1))},"Prev")],2),o.pageNumbers[0]>1?((0,n.uX)(),(0,n.CE)("li",Tm,[(0,n.Lk)("button",{class:"page-link",onClick:e[11]||(e[11]=a=>o.changePage(1))},"1")])):(0,n.Q3)("",!0),o.pageNumbers[0]>2?((0,n.uX)(),(0,n.CE)("li",Sm,e[36]||(e[36]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.pageNumbers,a=>((0,n.uX)(),(0,n.CE)("li",{key:a,class:(0,k.C4)(["page-item",{active:i.currentPage===a}])},[(0,n.Lk)("button",{class:"page-link",onClick:e=>o.changePage(a)},(0,k.v_)(a),9,Bm)],2))),128)),o.pageNumbers.slice(-1)[0]<o.totalPages-1?((0,n.uX)(),(0,n.CE)("li",Am,e[37]||(e[37]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),o.pageNumbers.slice(-1)[0]<o.totalPages?((0,n.uX)(),(0,n.CE)("li",_m,[(0,n.Lk)("button",{class:"page-link",onClick:e[12]||(e[12]=a=>o.changePage(o.totalPages))},(0,k.v_)(o.totalPages),1)])):(0,n.Q3)("",!0),(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:i.currentPage===o.totalPages}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[13]||(e[13]=a=>o.changePage(i.currentPage+1))},"Next")],2)])])):(0,n.Q3)("",!0)])])])])}const Vm={class:"modal-header"},Im={class:"modal-title"},Nm={class:"modal-body"},Um={class:"mb-3"},Rm={class:"mb-3"},Qm={class:"row"},Wm={class:"col-md-6 mb-3"},Km=["disabled"],Om={disabled:"",value:""},$m=["value"],Gm={class:"col-md-6 mb-3"},Jm=["disabled"],qm={disabled:"",value:""},Hm=["value"],Ym={class:"row"},zm={class:"col-md-6 mb-3"},Zm=["disabled"],ak={disabled:"",value:""},ek=["value"],tk={class:"col-md-6 mb-3"},sk=["disabled"],ik={disabled:"",value:""},lk=["value"],nk={class:"row"},ok={class:"col-md-6 mb-3"},rk={class:"col-md-6 mb-3"},ck={class:"row"},dk={class:"col-md-6 mb-3"},uk=["disabled"],mk={disabled:"",value:""},kk=["value"],hk={class:"col-md-6 mb-3"},gk=["disabled"],pk={disabled:"",value:""},bk=["value"],fk={class:"mb-3"},Lk=["disabled"],yk={disabled:"",value:""},vk=["value"],Ck={class:"mb-3"},Pk=["disabled"],Ek={disabled:"",value:""},Dk=["value"],Mk={class:"mb-3"},wk=["disabled"],Fk={disabled:"",value:""},Xk=["value"],xk={class:"mb-3"},Tk=["disabled"],Sk={disabled:"",value:""},Bk=["value"],Ak={class:"mb-3"},_k=["disabled"],jk={disabled:"",value:""},Vk=["value"],Ik={class:"mb-3"},Nk=["disabled"],Uk={disabled:"",value:""},Rk=["value"],Qk={class:"mb-3"},Wk=["disabled"],Kk={disabled:"",value:""},Ok=["value"],$k={class:"mb-3"},Gk={key:0,class:"alert alert-danger mt-3"},Jk={class:"modal-footer"},qk=["disabled"],Hk={key:0,class:"spinner-border spinner-border-sm",role:"status"},Yk={key:1};function zk(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",{class:"modal-overlay",onClick:e[23]||(e[23]=(...a)=>o.handleOverlayClick&&o.handleOverlayClick(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[22]||(e[22]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",Vm,[(0,n.Lk)("h5",Im,(0,k.v_)(o.isEditMode?"Edit Data Penduduk":"Tambah Data Penduduk"),1),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",Nm,[(0,n.Lk)("form",{onSubmit:e[19]||(e[19]=(0,l.D$)((...a)=>o.submitForm&&o.submitForm(...a),["prevent"]))},[(0,n.Lk)("div",Um,[e[24]||(e[24]=(0,n.Lk)("label",{class:"form-label"},"Nomor Induk Kependudukan (NIK)",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=a=>i.formData.nik=a),placeholder:"Masukkan NIK",required:""},null,512),[[l.Jo,i.formData.nik]])]),(0,n.Lk)("div",Rm,[e[25]||(e[25]=(0,n.Lk)("label",{class:"form-label"},"Nama",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.formData.nama=a),placeholder:"Masukkan nama",required:""},null,512),[[l.Jo,i.formData.nama]])]),(0,n.Lk)("div",Qm,[(0,n.Lk)("div",Wm,[e[26]||(e[26]=(0,n.Lk)("label",{class:"form-label"},"Nama Desa",-1)),(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":e[3]||(e[3]=a=>i.selectedLocation.desa=a),required:"",disabled:i.isListLoading},[(0,n.Lk)("option",Om,(0,k.v_)(i.isListLoading?"Memuat...":"Pilih Desa"),1),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.desaList,a=>((0,n.uX)(),(0,n.CE)("option",{key:a.iddesa,value:a.iddesa},(0,k.v_)(a.wilayah?.namawilayah),9,$m))),128))],8,Km),[[l.u1,i.selectedLocation.desa]])]),(0,n.Lk)("div",Gm,[e[27]||(e[27]=(0,n.Lk)("label",{class:"form-label"},"Nama Dusun",-1)),(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":e[4]||(e[4]=a=>i.selectedLocation.dusun=a),required:"",disabled:i.isListLoading||!i.selectedLocation.desa},[(0,n.Lk)("option",qm,(0,k.v_)(i.selectedLocation.desa?i.isListLoading?"Memuat...":"Pilih Dusun":"Pilih Desa terlebih dahulu"),1),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.filteredDusunList,a=>((0,n.uX)(),(0,n.CE)("option",{key:a.iddusun,value:a.iddusun},(0,k.v_)(a.namadusun),9,Hm))),128))],8,Jm),[[l.u1,i.selectedLocation.dusun]])])]),(0,n.Lk)("div",Ym,[(0,n.Lk)("div",zm,[e[28]||(e[28]=(0,n.Lk)("label",{class:"form-label"},"Nama RW",-1)),(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":e[5]||(e[5]=a=>i.selectedLocation.rw=a),required:"",disabled:i.isListLoading||!i.selectedLocation.dusun},[(0,n.Lk)("option",ak,(0,k.v_)(i.selectedLocation.dusun?i.isListLoading?"Memuat...":"Pilih RW":"Pilih Dusun terlebih dahulu"),1),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.filteredRwList,a=>((0,n.uX)(),(0,n.CE)("option",{key:a.idrw,value:a.idrw},(0,k.v_)(a.namarw),9,ek))),128))],8,Zm),[[l.u1,i.selectedLocation.rw]])]),(0,n.Lk)("div",tk,[e[29]||(e[29]=(0,n.Lk)("label",{class:"form-label"},"Nama RT",-1)),(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":e[6]||(e[6]=a=>i.formData.idrt=a),required:"",disabled:i.isListLoading||!i.selectedLocation.rw},[(0,n.Lk)("option",ik,(0,k.v_)(i.selectedLocation.rw?i.isListLoading?"Memuat...":"Pilih RT":"Pilih RW terlebih dahulu"),1),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.filteredRtList,a=>((0,n.uX)(),(0,n.CE)("option",{key:a.idrt,value:a.idrt},(0,k.v_)(a.namart),9,lk))),128))],8,sk),[[l.u1,i.formData.idrt]])])]),(0,n.Lk)("div",nk,[(0,n.Lk)("div",ok,[e[30]||(e[30]=(0,n.Lk)("label",{class:"form-label"},"Tempat Lahir",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[7]||(e[7]=a=>i.formData.tempatlahir=a),placeholder:"Tempat Lahir...",required:""},null,512),[[l.Jo,i.formData.tempatlahir]])]),(0,n.Lk)("div",rk,[e[31]||(e[31]=(0,n.Lk)("label",{class:"form-label"},"Tanggal Lahir",-1)),(0,n.bo)((0,n.Lk)("input",{type:"date",class:"form-control","onUpdate:modelValue":e[8]||(e[8]=a=>i.formData.tanggallahir=a),required:""},null,512),[[l.Jo,i.formData.tanggallahir]])])]),(0,n.Lk)("div",ck,[(0,n.Lk)("div",dk,[e[32]||(e[32]=(0,n.Lk)("label",{class:"form-label"},"Agama",-1)),(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":e[9]||(e[9]=a=>i.formData.idagama=a),required:"",disabled:i.isListLoading},[(0,n.Lk)("option",mk,(0,k.v_)(i.isListLoading?"Memuat...":"Pilih Agama"),1),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.religionsList,a=>((0,n.uX)(),(0,n.CE)("option",{key:a.idagama,value:a.idagama},(0,k.v_)(a.namaagama),9,kk))),128))],8,uk),[[l.u1,i.formData.idagama]])]),(0,n.Lk)("div",hk,[e[33]||(e[33]=(0,n.Lk)("label",{class:"form-label"},"Golongan Darah",-1)),(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":e[10]||(e[10]=a=>i.formData.idgolongandarah=a),required:"",disabled:i.isListLoading},[(0,n.Lk)("option",pk,(0,k.v_)(i.isListLoading?"Memuat...":"Pilih Golongan Darah"),1),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.bloodTypesList,a=>((0,n.uX)(),(0,n.CE)("option",{key:a.idgolongandarah,value:a.idgolongandarah},(0,k.v_)(a.namagolongandarah),9,bk))),128))],8,gk),[[l.u1,i.formData.idgolongandarah]])])]),(0,n.Lk)("div",fk,[e[34]||(e[34]=(0,n.Lk)("label",{class:"form-label"},"Jenis Kelamin",-1)),(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":e[11]||(e[11]=a=>i.formData.idjeniskelamin=a),required:"",disabled:i.isListLoading},[(0,n.Lk)("option",yk,(0,k.v_)(i.isListLoading?"Memuat...":"Pilih Jenis Kelamin"),1),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.genderList,a=>((0,n.uX)(),(0,n.CE)("option",{key:a.idjeniskelamin,value:a.idjeniskelamin},(0,k.v_)(a.namajeniskelamin),9,vk))),128))],8,Lk),[[l.u1,i.formData.idjeniskelamin]])]),(0,n.Lk)("div",Ck,[e[35]||(e[35]=(0,n.Lk)("label",{class:"form-label"},"Hubungan Keluarga",-1)),(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":e[12]||(e[12]=a=>i.formData.idhubungankeluarga=a),required:"",disabled:i.isListLoading},[(0,n.Lk)("option",Ek,(0,k.v_)(i.isListLoading?"Memuat...":"Pilih Hubungan Keluarga"),1),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.familyRelationshipsList,a=>((0,n.uX)(),(0,n.CE)("option",{key:a.idhubungankeluarga,value:a.idhubungankeluarga},(0,k.v_)(a.namahubungankeluarga),9,Dk))),128))],8,Pk),[[l.u1,i.formData.idhubungankeluarga]])]),(0,n.Lk)("div",Mk,[e[36]||(e[36]=(0,n.Lk)("label",{class:"form-label"},"Pekerjaan",-1)),(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":e[13]||(e[13]=a=>i.formData.idpekerjaan=a),required:"",disabled:i.isListLoading},[(0,n.Lk)("option",Fk,(0,k.v_)(i.isListLoading?"Memuat...":"Pilih Pekerjaan"),1),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.occupationsList,a=>((0,n.uX)(),(0,n.CE)("option",{key:a.idpekerjaan,value:a.idpekerjaan},(0,k.v_)(a.namapekerjaan),9,Xk))),128))],8,wk),[[l.u1,i.formData.idpekerjaan]])]),(0,n.Lk)("div",xk,[e[37]||(e[37]=(0,n.Lk)("label",{class:"form-label"},"Pendidikan",-1)),(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":e[14]||(e[14]=a=>i.formData.idpendidikan=a),required:"",disabled:i.isListLoading},[(0,n.Lk)("option",Sk,(0,k.v_)(i.isListLoading?"Memuat...":"Pilih Pendidikan"),1),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.educationsList,a=>((0,n.uX)(),(0,n.CE)("option",{key:a.idpendidikan,value:a.idpendidikan},(0,k.v_)(a.namapendidikan),9,Bk))),128))],8,Tk),[[l.u1,i.formData.idpendidikan]])]),(0,n.Lk)("div",Ak,[e[38]||(e[38]=(0,n.Lk)("label",{class:"form-label"},"Status Perkawinan",-1)),(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":e[15]||(e[15]=a=>i.formData.idstatusperkawinan=a),required:"",disabled:i.isListLoading},[(0,n.Lk)("option",jk,(0,k.v_)(i.isListLoading?"Memuat...":"Pilih Status Perkawinan"),1),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.martialStatusesList,a=>((0,n.uX)(),(0,n.CE)("option",{key:a.idstatusperkawinan,value:a.idstatusperkawinan},(0,k.v_)(a.namastatusperkawinan),9,Vk))),128))],8,_k),[[l.u1,i.formData.idstatusperkawinan]])]),(0,n.Lk)("div",Ik,[e[39]||(e[39]=(0,n.Lk)("label",{class:"form-label"},"Penolong Kelahiran",-1)),(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":e[16]||(e[16]=a=>i.formData.idpenolongkelahiran=a),required:"",disabled:i.isListLoading},[(0,n.Lk)("option",Uk,(0,k.v_)(i.isListLoading?"Memuat...":"Pilih Penolong Kelahiran"),1),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.birthAttendantsList,a=>((0,n.uX)(),(0,n.CE)("option",{key:a.idpenolongkelahiran,value:a.idpenolongkelahiran},(0,k.v_)(a.namapenolongkelahiran),9,Rk))),128))],8,Nk),[[l.u1,i.formData.idpenolongkelahiran]])]),(0,n.Lk)("div",Qk,[e[40]||(e[40]=(0,n.Lk)("label",{class:"form-label"},"Tempat Dilahirkan",-1)),(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":e[17]||(e[17]=a=>i.formData.idtempatkelahiran=a),required:"",disabled:i.isListLoading},[(0,n.Lk)("option",Kk,(0,k.v_)(i.isListLoading?"Memuat...":"Pilih Tempat Dilahirkan"),1),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.birthPlacesList,a=>((0,n.uX)(),(0,n.CE)("option",{key:a.idtempatdilahirkan,value:a.idtempatdilahirkan},(0,k.v_)(a.namatempatdilahirkan),9,Ok))),128))],8,Wk),[[l.u1,i.formData.idtempatkelahiran]])]),(0,n.Lk)("div",$k,[e[41]||(e[41]=(0,n.Lk)("label",{class:"form-label"},"Nomor whatsapp",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[18]||(e[18]=a=>i.formData.whatsapp=a),placeholder:"Masukkan Nomor Whatsapp",required:""},null,512),[[l.Jo,i.formData.whatsapp]])]),i.errorMessage?((0,n.uX)(),(0,n.CE)("div",Gk,(0,k.v_)(i.errorMessage),1)):(0,n.Q3)("",!0)],32)]),(0,n.Lk)("div",Jk,[(0,n.Lk)("button",{type:"button",class:"btn btn-danger",onClick:e[20]||(e[20]=(...a)=>o.closeModal&&o.closeModal(...a))},"Batal"),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[21]||(e[21]=(...a)=>o.submitForm&&o.submitForm(...a)),disabled:i.isLoading},[i.isLoading?((0,n.uX)(),(0,n.CE)("span",Hk)):((0,n.uX)(),(0,n.CE)("span",Yk,"Simpan"))],8,qk)])])])])}const Zk=(a={})=>Na.get("",{params:{act:"jenis-kelamin",...a}}),ah=a=>Na.post("",{act:"jenis-kelamin",record:a}),eh=(a,e)=>a?Na.put("",{act:"jenis-kelamin",key:a,record:e}):Promise.reject(new Error("ID jenis kelamin tidak tersedia.")),th=a=>a?Na.delete("",{data:{act:"jenis-kelamin",key:a}}):Promise.reject(new Error("ID jenis kelamin tidak tersedia.")),sh=(a={})=>Na.get("",{params:{act:"agama",...a}}),ih=a=>Na.post("",{act:"agama",record:a}),lh=(a,e)=>a?Na.put("",{act:"agama",key:a,record:e}):Promise.reject(new Error("ID agama tidak tersedia.")),nh=a=>a?Na.delete("",{data:{act:"agama",key:a}}):Promise.reject(new Error("ID agama tidak tersedia.")),oh=(a={})=>Na.get("",{params:{act:"golongan-darah",...a}}),rh=a=>Na.post("",{act:"golongan-darah",record:a}),ch=(a,e)=>a?Na.put("",{act:"golongan-darah",key:a,record:e}):Promise.reject(new Error("ID golongan darah tidak tersedia.")),dh=a=>a?Na.delete("",{data:{act:"golongan-darah",key:a}}):Promise.reject(new Error("ID golongan darah tidak tersedia.")),uh=(a={})=>Na.get("",{params:{act:"tempat-dilahirkan",...a}}),mh=a=>Na.post("",{act:"tempat-dilahirkan",record:a}),kh=(a,e)=>a?Na.put("",{act:"tempat-dilahirkan",key:a,record:e}):Promise.reject(new Error("ID tempat dilahirkan tidak tersedia.")),hh=a=>a?Na.delete("",{data:{act:"tempat-dilahirkan",key:a}}):Promise.reject(new Error("ID tempat dilahirkan tidak tersedia.")),gh=(a={})=>Na.get("",{params:{act:"hubungan-keluarga",...a}}),ph=a=>Na.post("",{act:"hubungan-keluarga",record:a}),bh=(a,e)=>a?Na.put("",{act:"hubungan-keluarga",key:a,record:e}):Promise.reject(new Error("ID hubungan keluarga tidak tersedia.")),fh=a=>a?Na.delete("",{data:{act:"hubungan-keluarga",key:a}}):Promise.reject(new Error("ID hubungan keluarga tidak tersedia.")),Lh=(a={})=>Na.get("",{params:{act:"pendidikan",...a}}),yh=a=>Na.post("",{act:"pendidikan",record:a}),vh=(a,e)=>a?Na.put("",{act:"pendidikan",key:a,record:e}):Promise.reject(new Error("ID pendidikan tidak tersedia.")),Ch=a=>a?Na.delete("",{data:{act:"pendidikan",key:a}}):Promise.reject(new Error("ID pendidikan tidak tersedia.")),Ph=(a={})=>Na.get("",{params:{act:"pekerjaan",...a}}),Eh=a=>Na.post("",{act:"pekerjaan",record:a}),Dh=(a,e)=>a?Na.put("",{act:"pekerjaan",key:a,record:e}):Promise.reject(new Error("ID pekerjaan tidak tersedia.")),Mh=a=>a?Na.delete("",{data:{act:"pekerjaan",key:a}}):Promise.reject(new Error("ID pekerjaan tidak tersedia.")),wh=(a={})=>Na.get("",{params:{act:"penolong-kelahiran",...a}}),Fh=a=>Na.post("",{act:"penolong-kelahiran",record:a}),Xh=(a,e)=>a?Na.put("",{act:"penolong-kelahiran",key:a,record:e}):Promise.reject(new Error("ID Penolong Kelahiran tidak tersedia.")),xh=a=>a?Na.delete("",{data:{act:"penolong-kelahiran",key:a}}):Promise.reject(new Error("ID Penolong Kelahiran tidak tersedia.")),Th=(a={})=>Na.get("",{params:{act:"status-perkawinan",...a}}),Sh=a=>Na.post("",{act:"status-perkawinan",record:a}),Bh=(a,e)=>a?Na.put("",{act:"status-perkawinan",key:a,record:e}):Promise.reject(new Error("ID status perkawinan tidak tersedia.")),Ah=a=>a?Na.delete("",{data:{act:"status-perkawinan",key:a}}):Promise.reject(new Error("ID status perkawinan tidak tersedia.")),_h={nik:"",nama:"",tempatlahir:"",tanggallahir:"",idrt:"",idjeniskelamin:"",idagama:"",idgolongandarah:"",idhubungankeluarga:"",idpekerjaan:"",idpendidikan:"",idpenolongkelahiran:"",idstatusperkawinan:"",idtempatkelahiran:"",whatsapp:""};var jh={name:"addEditResidentModal",props:{residentToEdit:{type:Object,default:null}},data(){return{formData:{..._h},selectedLocation:{desa:"",dusun:"",rw:""},desaList:[],dusunList:[],rwList:[],rtList:[],genderList:[],religionsList:[],bloodTypesList:[],familyRelationshipsList:[],occupationsList:[],educationsList:[],martialStatusesList:[],birthAttendantsList:[],birthPlacesList:[],isListLoading:!1,isLoading:!1,errorMessage:null,toast:(0,ln.dj)()}},computed:{isEditMode(){return!!this.residentToEdit},filteredDusunList(){return this.selectedLocation.desa?this.dusunList.filter(a=>a.iddesa==this.selectedLocation.desa):[]},filteredRwList(){return this.selectedLocation.dusun?this.rwList.filter(a=>a.iddusun==this.selectedLocation.dusun):[]},filteredRtList(){return this.selectedLocation.rw?this.rtList.filter(a=>a.idrw==this.selectedLocation.rw):[]}},watch:{"selectedLocation.desa"(a,e){a!==e&&(this.selectedLocation.dusun="",this.selectedLocation.rw="",this.formData.idrt="")},"selectedLocation.dusun"(a,e){a!==e&&(this.selectedLocation.rw="",this.formData.idrt="")},"selectedLocation.rw"(a,e){a!==e&&(this.formData.idrt="")},residentToEdit(){this.populateForm()}},async created(){await this.initializeComponent()},methods:{closeModal(){this.$emit("close")},handleOverlayClick(a){a.target===a.currentTarget&&this.closeModal()},async initializeComponent(){await this.fetchDropdownData(),this.populateForm()},async fetchDropdownData(){this.isListLoading=!0;try{const[a,e,t,s,i,l,n,o,r,c,d,u,m]=await Promise.all([Mi({limit:-1}),Ti({limit:-1}),_i({limit:-1}),Ni({limit:-1}),Zk({limit:-1}),sh({limit:-1}),oh({limit:-1}),gh({limit:-1}),Ph({limit:-1}),Lh({limit:-1}),wh({limit:-1}),Th({limit:-1}),uh({limit:-1})]);this.desaList=a.data?.data||a.data?.[0]?.data||[],this.dusunList=e.data?.data||e.data?.[0]?.data||[],this.rwList=t.data?.data||t.data?.[0]?.data||[],this.rtList=s.data?.data||s.data?.[0]?.data||[],this.genderList=i.data?.data||i.data?.[0]?.data||[],this.religionsList=l.data?.data||l.data?.[0]?.data||[],this.bloodTypesList=n.data?.data||n.data?.[0]?.data||[],this.familyRelationshipsList=o.data?.data||o.data?.[0]?.data||[],this.occupationsList=r.data?.data||r.data?.[0]?.data||[],this.educationsList=c.data?.data||c.data?.[0]?.data||[],this.birthAttendantsList=d.data?.data||d.data?.[0]?.data||[],this.martialStatusesList=u.data?.data||u.data?.[0]?.data||[],this.birthPlacesList=m.data?.data||m.data?.[0]?.data||[]}catch(a){this.toast.error("Gagal memuat semua data referensi")}finally{this.isListLoading=!1}},populateForm(){if(this.errorMessage=null,this.isEditMode&&this.residentToEdit){Object.assign(this.formData,this.residentToEdit);const a=this.rtList.find(a=>a.idrt===this.residentToEdit.idrt);if(a){const e=this.rwList.find(e=>e.idrw===a.idrw);if(e){const a=this.dusunList.find(a=>a.iddusun===e.iddusun);a&&(this.selectedLocation.desa=a.iddesa,this.selectedLocation.dusun=a.iddusun,this.selectedLocation.rw=e.idrw)}}}else this.formData={..._h},this.selectedLocation={desa:"",dusun:"",rw:""}},async submitForm(){this.isLoading=!0,this.errorMessage=null;const a=new FormData;a.append("record[nik]",this.formData.nik||""),a.append("record[nama]",this.formData.nama||""),a.append("record[tempatlahir]",this.formData.tempatlahir||""),a.append("record[tanggallahir]",this.formData.tanggallahir||""),a.append("record[idjeniskelamin]",this.formData.idjeniskelamin||""),a.append("record[idagama]",this.formData.idagama||""),a.append("record[idgolongandarah]",this.formData.idgolongandarah||""),a.append("record[idhubungankeluarga]",this.formData.idhubungankeluarga||""),a.append("record[idpekerjaan]",this.formData.idpekerjaan||""),a.append("record[idpendidikan]",this.formData.idpendidikan||""),a.append("record[idpenolongkelahiran]",this.formData.idpenolongkelahiran||""),a.append("record[idstatusperkawinan]",this.formData.idstatusperkawinan||""),a.append("record[idtempatkelahiran]",this.formData.idtempatkelahiran||""),a.append("record[whatsapp]",this.formData.whatsapp||""),a.append("record[idrt]",this.formData.idrt||"");try{this.isEditMode?(a.append("_method","PUT"),await Do(this.residentToEdit.idpenduduk,a),this.toast.success("Data penduduk berhasil diperbarui")):(await Eo(a),this.toast.success("Data penduduk berhasil ditambah")),this.$emit("save-successful"),this.closeModal()}catch(e){this.errorMessage=e.response?.data?.failed||e.response?.data?.message||"Gagal menyimpan data. Silakan coba lagi",this.toast.error("Gagal menyimpan data penduduk")}finally{this.isLoading=!1}}}};const Vh=(0,r.A)(jh,[["render",zk],["__scopeId","data-v-0d1b3c16"]]);var Ih=Vh;const Nh={class:"modal-header"},Uh={class:"modal-body"},Rh={key:0,class:"text-center p-5"},Qh={key:1,class:"text-center p-5 text-danger"},Wh={key:2,class:"profile-container"},Kh={class:"text-center mb-4"},Oh={class:"penduduk mt-3"},$h={class:"nik"},Gh={class:"detail-section"},Jh={class:"row"},qh={class:"col-md-6 detail-item"},Hh={class:"col-md-6 detail-item"},Yh={class:"col-md-6 detail-item"},zh={class:"col-md-6 detail-item"},Zh={class:"col-md-6 detail-item"},ag={class:"col-md-6 detail-item"},eg={class:"detail-section"},tg={class:"row"},sg={class:"col-md-6 detail-item"},ig={class:"col-md-6 detail-item"},lg={class:"col-md-6 detail-item"},ng={class:"col-md-6 detail-item"},og={class:"detail-section"},rg={class:"row"},cg={class:"col-md-6 detail-item"},dg={class:"col-md-6 detail-item"},ug={class:"detail-section"},mg={class:"row"},kg={class:"col-md-6 detail-item"},hg={class:"detail-section"},gg={class:"row"},pg={class:"col-md-6 detail-item"},bg={class:"col-md-6 detail-item"},fg={class:"modal-footer"};function Lg(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",{class:"modal-overlay",onClick:e[3]||(e[3]=(...a)=>o.closeModal&&o.closeModal(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[2]||(e[2]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",Nh,[e[4]||(e[4]=(0,n.Lk)("h5",{class:"modal-title"},"Detail Data Penduduk",-1)),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",Uh,[i.isLoading?((0,n.uX)(),(0,n.CE)("div",Rh,e[5]||(e[5]=[(0,n.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,n.Lk)("span",{class:"visually-hidden"},"Loading...")],-1),(0,n.Lk)("p",{class:"mt-2"},"Memuat data...",-1)]))):i.error?((0,n.uX)(),(0,n.CE)("div",Qh,[e[6]||(e[6]=(0,n.Lk)("i",{class:"fa fa-exclamation-triangle fa-3x mb-3"},null,-1)),e[7]||(e[7]=(0,n.Lk)("h4",null,"Terjadi Kesalahan",-1)),(0,n.Lk)("p",null,(0,k.v_)(i.error),1)])):i.penduduk?((0,n.uX)(),(0,n.CE)("div",Wh,[(0,n.Lk)("div",Kh,[(0,n.Lk)("h2",Oh,(0,k.v_)(i.penduduk.nama||"Nama Tidak Tersedia"),1),(0,n.Lk)("p",$h," NIK: "+(0,k.v_)(i.penduduk.nik||"-"),1)]),e[28]||(e[28]=(0,n.Lk)("hr",null,null,-1)),(0,n.Lk)("div",Gh,[e[14]||(e[14]=(0,n.Lk)("h4",null,[(0,n.Lk)("i",{class:"fa fa-user-circle me-2"}),(0,n.eW)("Data Diri")],-1)),(0,n.Lk)("div",Jh,[(0,n.Lk)("div",qh,[e[8]||(e[8]=(0,n.Lk)("label",null,"Tempat, Tanggal Lahir",-1)),(0,n.Lk)("span",null,(0,k.v_)([i.penduduk.tempatlahir,o.formatTanggal(i.penduduk.tanggallahir)].filter(Boolean).join(", ")||"-"),1)]),(0,n.Lk)("div",Hh,[e[9]||(e[9]=(0,n.Lk)("label",null,"Jenis Kelamin",-1)),(0,n.Lk)("span",null,(0,k.v_)(i.penduduk.jk?.namajeniskelamin||"-"),1)]),(0,n.Lk)("div",Yh,[e[10]||(e[10]=(0,n.Lk)("label",null,"Agama",-1)),(0,n.Lk)("span",null,(0,k.v_)(i.penduduk.agama?.namaagama||"-"),1)]),(0,n.Lk)("div",zh,[e[11]||(e[11]=(0,n.Lk)("label",null,"Golongan Darah",-1)),(0,n.Lk)("span",null,(0,k.v_)(i.penduduk.darah?.namagolongandarah||"-"),1)]),(0,n.Lk)("div",Zh,[e[12]||(e[12]=(0,n.Lk)("label",null,"Status Perkawinan",-1)),(0,n.Lk)("span",null,(0,k.v_)(i.penduduk.perkawinan?.namastatusperkawinan||"-"),1)]),(0,n.Lk)("div",ag,[e[13]||(e[13]=(0,n.Lk)("label",null,"Hubungan Keluarga",-1)),(0,n.Lk)("span",null,(0,k.v_)(i.penduduk.hubungan?.namahubungankeluarga||"-"),1)])])]),(0,n.Lk)("div",eg,[e[19]||(e[19]=(0,n.Lk)("h4",null,[(0,n.Lk)("i",{class:"fa fa-map-marker me-2"}),(0,n.eW)("Data Alamat")],-1)),(0,n.Lk)("div",tg,[(0,n.Lk)("div",sg,[e[15]||(e[15]=(0,n.Lk)("label",null,"Desa",-1)),(0,n.Lk)("span",null,(0,k.v_)(i.penduduk.wilayah?.namawilayah||"-"),1)]),(0,n.Lk)("div",ig,[e[16]||(e[16]=(0,n.Lk)("label",null,"Dusun",-1)),(0,n.Lk)("span",null,(0,k.v_)(i.penduduk.dusun?.namadusun||"-"),1)]),(0,n.Lk)("div",lg,[e[17]||(e[17]=(0,n.Lk)("label",null,"RW",-1)),(0,n.Lk)("span",null,(0,k.v_)(i.penduduk.rw?.namarw||"-"),1)]),(0,n.Lk)("div",ng,[e[18]||(e[18]=(0,n.Lk)("label",null,"RT",-1)),(0,n.Lk)("span",null,(0,k.v_)(i.penduduk.rt?.namart||"-"),1)])])]),(0,n.Lk)("div",og,[e[22]||(e[22]=(0,n.Lk)("h4",null,[(0,n.Lk)("i",{class:"fa fa-briefcase me-2"}),(0,n.eW)("Pendidikan & Pekerjaan")],-1)),(0,n.Lk)("div",rg,[(0,n.Lk)("div",cg,[e[20]||(e[20]=(0,n.Lk)("label",null,"Pendidikan Terakhir",-1)),(0,n.Lk)("span",null,(0,k.v_)(i.penduduk.pendidikan?.namapendidikan||"-"),1)]),(0,n.Lk)("div",dg,[e[21]||(e[21]=(0,n.Lk)("label",null,"Pekerjaan",-1)),(0,n.Lk)("span",null,(0,k.v_)(i.penduduk.pekerjaan?.namapekerjaan||"-"),1)])])]),(0,n.Lk)("div",ug,[e[24]||(e[24]=(0,n.Lk)("h4",null,[(0,n.Lk)("i",{class:"fa fa-whatsapp me-2"}),(0,n.eW)("Kontak")],-1)),(0,n.Lk)("div",mg,[(0,n.Lk)("div",kg,[e[23]||(e[23]=(0,n.Lk)("label",null,"Nomor WhatsApp",-1)),(0,n.Lk)("span",null,(0,k.v_)(i.penduduk.whatsapp||"-"),1)])])]),(0,n.Lk)("div",hg,[e[27]||(e[27]=(0,n.Lk)("h4",null,[(0,n.Lk)("i",{class:"fa fa-child me-2"}),(0,n.eW)("Data Kelahiran")],-1)),(0,n.Lk)("div",gg,[(0,n.Lk)("div",pg,[e[25]||(e[25]=(0,n.Lk)("label",null,"Tempat Dilahirkan",-1)),(0,n.Lk)("span",null,(0,k.v_)(i.penduduk.tempatkelahiran?.namatempatdilahirkan||"-"),1)]),(0,n.Lk)("div",bg,[e[26]||(e[26]=(0,n.Lk)("label",null,"Penolong Kelahiran",-1)),(0,n.Lk)("span",null,(0,k.v_)(i.penduduk.penolong?.namapenolongkelahiran||"-"),1)])])])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",fg,[(0,n.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:e[1]||(e[1]=(...a)=>o.closeModal&&o.closeModal(...a))},"Tutup")])])])])}var yg={name:"DetailResidentModal",props:{residentToView:{type:Object,required:!0}},emits:["close"],data(){return{penduduk:null,isLoading:!1,error:null}},methods:{closeModal(){this.$emit("close")},formatTanggal(a){if(!a)return null;const e={day:"numeric",month:"long",year:"numeric"};return new Date(a).toLocaleDateString("id-ID",e)},async fetchResidents(){const a=this.residentToView?.idpenduduk;if(a){this.isLoading=!0,this.error=null;try{const e=await Po(a),t=e.data;if(Array.isArray(t)&&t.length>0){const a=t[0]?.data?.[0];a?this.penduduk=a:this.error="Struktur data penduduk di dalam respons tidak valid"}}catch(e){console.error("Gagal mengambil detail penduduk:",e),this.error=e.response?.data?.message||e.message||"Terjadi kesalahan saat memuat data"}finally{this.isLoading=!1}}else this.error="ID penduduk tidak valid atau tidak tersedia."}},mounted(){this.fetchResidents()},watch:{residentToView:{handler(a,e){a?.idpenduduk!==e?.idpenduduk&&this.fetchResidents()},deep:!0}}};const vg=(0,r.A)(yg,[["render",Lg],["__scopeId","data-v-496d32e1"]]);var Cg=vg,Pg={components:{AddEditResidentModal:Ih,DetailResidentModal:Cg},data(){return{residents:[],genderList:[],isLoading:!1,sortColumn:"created_at",sortDirection:"asc",isModalVisible:!1,currentPage:1,perPage:10,totalItems:0,residentBeingEdited:null,isFilterVisible:!1,filters:{namapenduduk:"",namakategoripenduduk:"",namawilayah:""},isDetailModalVisible:!1,residentBeingViewed:null}},computed:{paginatedResidents(){return this.residents},totalPages(){return this.perPage<=0?1:Math.ceil(this.totalItems/this.perPage)},pageNumbers(){const a=[],e=5;let t=Math.max(1,this.currentPage-Math.floor(e/2)),s=t+e-1;s>this.totalPages&&(s=this.totalPages,t=Math.max(1,s-e+1));for(let i=t;i<=s;i++)a.push(i);return a}},watch:{currentPage(){this.fetchResidents()},perPage(){this.currentPage=1,this.fetchResidents()}},async mounted(){this.toast=(0,ln.dj)(),await this.fetchResidents(),await this.fetchGenders()},methods:{openAddModal(){this.residentBeingEdited=null,this.isModalVisible=!0},openEditModal(a){this.residentBeingEdited={...a},this.isModalVisible=!0},closeModal(){this.isModalVisible=!1,this.residentBeingEdited=null},openDetailModal(a){this.residentBeingViewed={...a},this.isDetailModalVisible=!0},closeDetailModal(){this.isDetailModalVisible=!1,this.residentBeingViewed=null},handleSaveSuccessful(){this.closeModal(),this.fetchResidents()},formatTanggal(a){if(!a)return null;const e={day:"numeric",month:"long",year:"numeric"};return new Date(a).toLocaleDateString("id-ID",e)},async fetchResidents(){this.isLoading=!0;try{const a={act:"penduduk",page:this.currentPage,limit:this.perPage,order:this.sortColumn?`${this.sortColumn} ${this.sortDirection}`:"",group:""},e=Object.entries(this.filters).filter(([,a])=>""!==a&&null!==a).map(([a,e])=>`${a}=${e}`);e.length>0?a.filter=e.join(","):a.filter="";const t=await Co(a),s=t.data?.data||t.data?.[0]?.data||[],i=t.data?.meta?.pagination||t.data?.[0]?.meta?.pagination||{};this.residents=s,this.totalItems=i.total||s.length}catch(a){console.error("Error fetching residents:",a),this.toast.error("Gagal memuat data penduduk",{icon:"fa fa-times"})}finally{this.isLoading=!1}},async fetchGenders(){try{const a=await Zk({limit:-1});this.genderList=a.data?.data||a.data?.[0]?.data||[]}catch(a){this.toast.error("Gagal memuat daftar jenis kelamin")}},advancedDeleteAlert(a){this.$swal({title:"Hapus Data Penduduk",text:"Apakah Anda yakin ingin menghapus data ini?",icon:"warning",showCancelButton:!0,confirmButtonText:'<i class="fa fa-check me-2"></i></i> Hapus!',confirmButtonColor:"#d33",cancelButtonText:'<i class="fa fa-times me-2"></i> Batal',cancelButtonColor:"#efefef",reverseButtons:!0}).then(async e=>{if(e.isConfirmed)try{await Mo(a),1===this.residents.length&&this.currentPage>1?this.currentPage--:this.fetchResidents(),this.toast.success("Data penduduk berhasil dihapus",{icon:"fa fa-check"})}catch(t){this.toast.error("Gagal menghapus data penduduk",{icon:"fa fa-times"})}})},sortBy(a){this.sortColumn===a?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=a,this.sortDirection="asc"),this.fetchResidents()},changePage(a){a>=1&&a<=this.totalPages&&(this.currentPage=a)},toggleFilterVisibility(){this.isFilterVisible=!this.isFilterVisible},applyFilters(){this.currentPage=1,this.fetchResidents()},resetFilters(){this.filters.namawilayah="",this.filters.tahunawal="",this.filters.tahunakhir="",this.filters.tanggal_sk="",this.filters.idjeniskelamin="",this.sortColumn="created_at",this.sortDirection="asc",this.currentPage=1,this.fetchResidents()}}};const Eg=(0,r.A)(Pg,[["render",jm],["__scopeId","data-v-c15856ae"]]);var Dg=Eg,Mg={components:{ResidentsTable:Dg}};const wg=(0,r.A)(Mg,[["render",Gu]]);var Fg=wg;const Xg={class:"container-fluid"},xg={class:"row"};function Tg(a,e,t,s,i,l){const o=(0,n.g2)("Breadcrumbs"),r=(0,n.g2)("groupsTable");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(o,{main:"Kependudukan",title:a.$route.meta.title},null,8,["title"]),(0,n.Lk)("div",Xg,[(0,n.Lk)("div",xg,[(0,n.bF)(r)])])])}const Sg={class:"col-sm-12"},Bg={class:"card"},Ag={class:"card-body"},_g={class:"d-flex justify-content-end align-items-start mb-3"},jg={class:"d-flex gap-2"},Vg={key:0,class:"fa fa-angle-up me-2"},Ig={key:1,class:"fa fa-angle-down me-2"},Ng={key:0,class:"border p-3 mb-3 rounded filter-section"},Ug={class:"row g-3"},Rg={class:"col-md-3"},Qg={class:"col-md-3"},Wg={class:"col-md-3"},Kg={class:"d-flex justify-content-end gap-2 mt-3"},Og={class:"table-responsive signal-table"},$g={class:"table table-hover"},Gg={key:0,class:"fa fa-sort-asc"},Jg={key:1,class:"fa fa-sort-desc"},qg={key:2,class:"fa fa-sort"},Hg={key:0,class:"fa fa-sort-asc"},Yg={key:1,class:"fa fa-sort-desc"},zg={key:2,class:"fa fa-sort"},Zg={key:0,class:"fa fa-sort-asc"},ap={key:1,class:"fa fa-sort-desc"},ep={key:2,class:"fa fa-sort"},tp={key:0},sp={scope:"row"},ip=["src"],lp={key:1,class:"text-muted"},np={class:"btn-group"},op=["onClick"],rp=["onClick"],cp=["onClick"],dp={key:0},up={class:"d-flex flex-column flex-md-row justify-content-md-between align-items-center mt-3 px-3 pb-3"},mp={class:"mt-2"},kp={key:0,class:"text-muted"},hp={key:0,class:"d-flex align-items-center flex-wrap gap-2 mt-2"},gp={class:"pagination mb-0"},pp={key:0,class:"page-item"},bp={key:1,class:"page-item disabled"},fp=["onClick"],Lp={key:2,class:"page-item disabled"},yp={key:3,class:"page-item"};function vp(a,e,t,s,i,o){const r=(0,n.g2)("add-edit-group-modal");return(0,n.uX)(),(0,n.CE)("div",Sg,[i.isModalVisible?((0,n.uX)(),(0,n.Wv)(r,{key:0,"group-to-edit":i.groupBeingEdited,onClose:o.closeModal,onSaveSuccessful:o.handleSaveSuccessful},null,8,["group-to-edit","onClose","onSaveSuccessful"])):(0,n.Q3)("",!0),(0,n.Lk)("div",Bg,[e[38]||(e[38]=(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("h3",null,"Daftar Kelompok")],-1)),(0,n.Lk)("div",Ag,[(0,n.Lk)("div",_g,[(0,n.Lk)("div",jg,[(0,n.Lk)("button",{class:"btn btn-outline-light txt-dark",onClick:e[0]||(e[0]=(...a)=>o.toggleFilterVisibility&&o.toggleFilterVisibility(...a))},[i.isFilterVisible?((0,n.uX)(),(0,n.CE)("i",Vg)):((0,n.uX)(),(0,n.CE)("i",Ig)),(0,n.Lk)("span",null,(0,k.v_)(i.isFilterVisible?"Sembunyikan":"Tampilkan")+" Filter",1)]),(0,n.Lk)("button",{class:"btn btn-success",onClick:e[1]||(e[1]=(...a)=>o.openAddModal&&o.openAddModal(...a))},e[14]||(e[14]=[(0,n.Lk)("i",{class:"fa fa-plus me-2"},null,-1),(0,n.Lk)("span",null," Tambah Data",-1)]))])]),i.isFilterVisible?((0,n.uX)(),(0,n.CE)("div",Ng,[(0,n.Lk)("div",Ug,[(0,n.Lk)("div",Rg,[e[15]||(e[15]=(0,n.Lk)("label",{for:"filterGroupName",class:"form-label"},"Nama Kelompok",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterGroupName",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.filters.namkelompok=a),placeholder:"Filter berdasarkan nama kelompok..."},null,512),[[l.Jo,i.filters.namkelompok]])]),(0,n.Lk)("div",Qg,[e[16]||(e[16]=(0,n.Lk)("label",{for:"filterGroupCategory",class:"form-label"},"Kategori Kelompok",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterGroupCategory",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=a=>i.filters.namakategorikelompok=a),placeholder:"Filter berdasarkan kategori kelompok..."},null,512),[[l.Jo,i.filters.namakategorikelompok]])]),(0,n.Lk)("div",Wg,[e[17]||(e[17]=(0,n.Lk)("label",{for:"filterVillageName",class:"form-label"},"Nama Desa",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterVillageName",class:"form-control","onUpdate:modelValue":e[4]||(e[4]=a=>i.filters.namawilayah=a),placeholder:"Filter berdasarkan nama desa..."},null,512),[[l.Jo,i.filters.namawilayah]])])]),(0,n.Lk)("div",Kg,[(0,n.Lk)("button",{class:"btn btn-secondary",onClick:e[5]||(e[5]=(...a)=>o.resetFilters&&o.resetFilters(...a))},e[18]||(e[18]=[(0,n.Lk)("i",{class:"fa fa-refresh me-2"},null,-1),(0,n.Lk)("span",null,"Reset Filter",-1)])),(0,n.Lk)("button",{class:"btn btn-primary",onClick:e[6]||(e[6]=(...a)=>o.applyFilters&&o.applyFilters(...a))},e[19]||(e[19]=[(0,n.Lk)("i",{class:"fa fa-search me-2"},null,-1),(0,n.Lk)("span",null,"Terapkan Filter",-1)]))])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",Og,[(0,n.Lk)("table",$g,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[e[23]||(e[23]=(0,n.Lk)("th",{scope:"col"},"No",-1)),e[24]||(e[24]=(0,n.Lk)("th",{scope:"col"},"Logo",-1)),(0,n.Lk)("th",{scope:"col",onClick:e[7]||(e[7]=a=>o.sortBy("namakelompok"))},[e[20]||(e[20]=(0,n.eW)(" Nama Kelompok ")),"namakelompok"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",Gg)):"namakelompok"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",Jg)):((0,n.uX)(),(0,n.CE)("i",qg))]),(0,n.Lk)("th",{scope:"col",onClick:e[8]||(e[8]=a=>o.sortBy("namakategorikelompok"))},[e[21]||(e[21]=(0,n.eW)(" Nama Kategori Kelompok ")),"namakategorikelompok"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",Hg)):"namakategorikelompok"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",Yg)):((0,n.uX)(),(0,n.CE)("i",zg))]),(0,n.Lk)("th",{scope:"col",onClick:e[9]||(e[9]=a=>o.sortBy("namawilayah"))},[e[22]||(e[22]=(0,n.eW)(" Nama Desa ")),"namawilayah"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",Zg)):"namawilayah"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",ap)):((0,n.uX)(),(0,n.CE)("i",ep))]),e[25]||(e[25]=(0,n.Lk)("th",{scope:"col"},"Deskripsi",-1)),e[26]||(e[26]=(0,n.Lk)("th",{scope:"col"},"Aksi",-1))])]),(0,n.Lk)("tbody",null,[i.isLoading?((0,n.uX)(),(0,n.CE)("tr",tp,e[27]||(e[27]=[(0,n.Lk)("td",{colspan:"6",class:"text-center p-5"},[(0,n.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,n.Lk)("span",{class:"visually-hidden"},"Loading...")]),(0,n.Lk)("p",{class:"mt-2"},"Memuat data...")],-1)]))):((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.paginatedGroups,(a,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:a.idkelompok},[(0,n.Lk)("th",sp,(0,k.v_)((i.currentPage-1)*i.perPage+t+1),1),(0,n.Lk)("td",null,[a.logo?((0,n.uX)(),(0,n.CE)("img",{key:0,src:a.logo,alt:"Logo",style:{height:"50px",width:"auto"}},null,8,ip)):((0,n.uX)(),(0,n.CE)("span",lp,"-"))]),(0,n.Lk)("td",null,(0,k.v_)(a.namakelompok||"-"),1),(0,n.Lk)("td",null,(0,k.v_)(a.kelompok.namakategorikelompok||"-"),1),(0,n.Lk)("td",null,(0,k.v_)(a.wilayah.namawilayah||"-"),1),(0,n.Lk)("td",null,(0,k.v_)(a.deskripsi||"-"),1),(0,n.Lk)("td",null,[(0,n.Lk)("div",np,[(0,n.Lk)("button",{class:"btn btn-info btn-sm",onClick:e=>o.openSkFile(a.filesk),title:"Lihat File SK"},e[28]||(e[28]=[(0,n.Lk)("i",{class:"fa fa-file"},null,-1)]),8,op),(0,n.Lk)("button",{class:"btn btn-primary btn-sm",onClick:e=>o.openEditModal(a),title:"Ubah Data"},e[29]||(e[29]=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)]),8,rp),(0,n.Lk)("button",{class:"btn btn-danger sweet-11 btn-sm",type:"button",onClick:e=>o.advancedDeleteAlert(a.idkelompok),title:"Hapus Data"},e[30]||(e[30]=[(0,n.Lk)("i",{class:"fa fa-trash"},null,-1)]),8,cp)])])]))),128)),0===o.paginatedGroups.length?((0,n.uX)(),(0,n.CE)("tr",dp,e[31]||(e[31]=[(0,n.Lk)("td",{colspan:"6",class:"text-center"},"Tidak ada data yang cocok atau tersedia.",-1)]))):(0,n.Q3)("",!0)],64))])]),(0,n.Lk)("div",up,[(0,n.Lk)("div",mp,[i.totalItems>0?((0,n.uX)(),(0,n.CE)("span",kp,[e[32]||(e[32]=(0,n.eW)(" Menampilkan ")),(0,n.Lk)("strong",null,(0,k.v_)((i.currentPage-1)*i.perPage+1),1),e[33]||(e[33]=(0,n.eW)(" - ")),(0,n.Lk)("strong",null,(0,k.v_)(Math.min(i.currentPage*i.perPage,i.totalItems)),1),e[34]||(e[34]=(0,n.eW)(" dari ")),(0,n.Lk)("strong",null,(0,k.v_)(i.totalItems),1),e[35]||(e[35]=(0,n.eW)(" data "))])):(0,n.Q3)("",!0)]),-1!==i.perPage&&o.totalPages>1?((0,n.uX)(),(0,n.CE)("nav",hp,[(0,n.Lk)("ul",gp,[(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[10]||(e[10]=a=>o.changePage(i.currentPage-1))},"Prev")],2),o.pageNumbers[0]>1?((0,n.uX)(),(0,n.CE)("li",pp,[(0,n.Lk)("button",{class:"page-link",onClick:e[11]||(e[11]=a=>o.changePage(1))},"1")])):(0,n.Q3)("",!0),o.pageNumbers[0]>2?((0,n.uX)(),(0,n.CE)("li",bp,e[36]||(e[36]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.pageNumbers,a=>((0,n.uX)(),(0,n.CE)("li",{key:a,class:(0,k.C4)(["page-item",{active:i.currentPage===a}])},[(0,n.Lk)("button",{class:"page-link",onClick:e=>o.changePage(a)},(0,k.v_)(a),9,fp)],2))),128)),o.pageNumbers.slice(-1)[0]<o.totalPages-1?((0,n.uX)(),(0,n.CE)("li",Lp,e[37]||(e[37]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),o.pageNumbers.slice(-1)[0]<o.totalPages?((0,n.uX)(),(0,n.CE)("li",yp,[(0,n.Lk)("button",{class:"page-link",onClick:e[12]||(e[12]=a=>o.changePage(o.totalPages))},(0,k.v_)(o.totalPages),1)])):(0,n.Q3)("",!0),(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:i.currentPage===o.totalPages}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[13]||(e[13]=a=>o.changePage(i.currentPage+1))},"Next")],2)])])):(0,n.Q3)("",!0)])])])])}const Cp=(a={})=>Na.get("",{params:{act:"kelompok",...a}}),Pp=a=>(a.append("act","kelompok"),Na.post("",a)),Ep=(a,e)=>a?(e.append("act","kelompok"),e.append("key",a),Na.post("",e)):Promise.reject(new Error("ID kelompok tidak tersedia.")),Dp=a=>a?Na.delete("",{data:{act:"kelompok",key:a}}):Promise.reject(new Error("ID kelompok tidak tersedia.")),Mp={class:"modal-header"},wp={class:"modal-title"},Fp={class:"modal-body"},Xp={class:"mb-3"},xp={class:"mb-3"},Tp=["disabled"],Sp={disabled:"",value:""},Bp=["value"],Ap={class:"mb-3"},_p=["disabled"],jp={disabled:"",value:""},Vp=["value"],Ip={class:"row"},Np={class:"mb-3"},Up={class:"row"},Rp={class:"col-md-6 mb-3"},Qp={class:"mt-2"},Wp={key:0},Kp=["src"],Op={key:1},$p=["src"],Gp={class:"col-md-6 mb-3"},Jp={key:0,class:"mt-2"},qp=["href"],Hp={key:1,class:"mt-2"},Yp={key:0,class:"alert alert-danger mt-3"},zp={class:"modal-footer"},Zp=["disabled"],ab={key:0,class:"spinner-border spinner-border-sm",role:"status"},eb={key:1};function tb(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",{class:"modal-overlay",onClick:e[11]||(e[11]=(...a)=>o.handleOverlayClick&&o.handleOverlayClick(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[10]||(e[10]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",Mp,[(0,n.Lk)("h5",wp,(0,k.v_)(o.isEditMode?"Edit Data Kelompok":"Tambah Data Kelompok"),1),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",Fp,[(0,n.Lk)("form",{onSubmit:e[7]||(e[7]=(0,l.D$)((...a)=>o.submitForm&&o.submitForm(...a),["prevent"]))},[(0,n.Lk)("div",Xp,[e[12]||(e[12]=(0,n.Lk)("label",{class:"form-label"},"Nama Kelompok ",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=a=>i.formData.namakelompok=a),required:""},null,512),[[l.Jo,i.formData.namakelompok]])]),(0,n.Lk)("div",xp,[e[13]||(e[13]=(0,n.Lk)("label",{class:"form-label"},"Nama Desa",-1)),(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":e[2]||(e[2]=a=>i.formData.iddesa=a),required:"",disabled:i.isDesaListLoading},[(0,n.Lk)("option",Sp,(0,k.v_)(i.isDesaListLoading?"Memuat daftar desa...":"Pilih Desa"),1),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.desaList,a=>((0,n.uX)(),(0,n.CE)("option",{key:a.iddesa,value:a.iddesa},(0,k.v_)(a.wilayah.namawilayah),9,Bp))),128))],8,Tp),[[l.u1,i.formData.iddesa]])]),(0,n.Lk)("div",Ap,[e[14]||(e[14]=(0,n.Lk)("label",{class:"form-label"},"Kategori Kelompok",-1)),(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":e[3]||(e[3]=a=>i.formData.idkategorikelompok=a),required:"",disabled:i.isCategoryListLoading},[(0,n.Lk)("option",jp,(0,k.v_)(i.isCategoryListLoading?"Memuat daftar kategori...":"Pilih Kategori Kelompok"),1),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.categoryList,a=>((0,n.uX)(),(0,n.CE)("option",{key:a.idkategorikelompok,value:a.idkategorikelompok},(0,k.v_)(a.namakategorikelompok),9,Vp))),128))],8,_p),[[l.u1,i.formData.idkategorikelompok]])]),(0,n.Lk)("div",Ip,[(0,n.Lk)("div",Np,[e[15]||(e[15]=(0,n.Lk)("label",{class:"form-label"},"Deskripsi",-1)),(0,n.bo)((0,n.Lk)("textarea",{class:"form-control","onUpdate:modelValue":e[4]||(e[4]=a=>i.formData.deskripsi=a),rows:"4",placeholder:"Deskripsi..."},null,512),[[l.Jo,i.formData.deskripsi]])])]),(0,n.Lk)("div",Up,[(0,n.Lk)("div",Rp,[e[16]||(e[16]=(0,n.Lk)("label",{class:"form-label"},"Upload Logo Usaha",-1)),(0,n.Lk)("input",{type:"file",class:"form-control",accept:"image/*",onChange:e[5]||(e[5]=(...a)=>o.handleLogoUpload&&o.handleLogoUpload(...a))},null,32),(0,n.Lk)("div",Qp,[i.logoPreviewUrl?((0,n.uX)(),(0,n.CE)("div",Wp,[(0,n.Lk)("img",{src:i.logoPreviewUrl,alt:"Preview Logo",class:"img-thumbnail",style:{"max-width":"150px","max-height":"150px"}},null,8,Kp)])):o.isEditMode&&i.formData.logo?((0,n.uX)(),(0,n.CE)("div",Op,[(0,n.Lk)("img",{src:i.formData.logo,alt:"Logo Saat Ini",class:"img-thumbnail",style:{"max-width":"150px","max-height":"150px"}},null,8,$p)])):(0,n.Q3)("",!0)])]),(0,n.Lk)("div",Gp,[e[19]||(e[19]=(0,n.Lk)("label",{class:"form-label"},"Upload File SK",-1)),(0,n.Lk)("input",{type:"file",class:"form-control",accept:".pdf,.doc,.docx,image/*",onChange:e[6]||(e[6]=(...a)=>o.handleFileUpload&&o.handleFileUpload(...a))},null,32),o.isEditMode&&i.formData.filesk&&!i.selectedSkFile?((0,n.uX)(),(0,n.CE)("div",Jp,[e[17]||(e[17]=(0,n.eW)(" File saat ini: ")),(0,n.Lk)("a",{href:i.formData.filesk,target:"_blank",rel:"noopener noreferrer"},"Lihat File",8,qp)])):(0,n.Q3)("",!0),i.skFileName?((0,n.uX)(),(0,n.CE)("div",Hp,[e[18]||(e[18]=(0,n.eW)(" File baru: ")),(0,n.Lk)("strong",null,(0,k.v_)(i.skFileName),1)])):(0,n.Q3)("",!0)])]),i.errorMessage?((0,n.uX)(),(0,n.CE)("div",Yp,(0,k.v_)(i.errorMessage),1)):(0,n.Q3)("",!0)],32)]),(0,n.Lk)("div",zp,[(0,n.Lk)("button",{type:"button",class:"btn btn-danger",onClick:e[8]||(e[8]=(...a)=>o.closeModal&&o.closeModal(...a))},"Batal"),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[9]||(e[9]=(...a)=>o.submitForm&&o.submitForm(...a)),disabled:i.isLoading},[i.isLoading?((0,n.uX)(),(0,n.CE)("span",ab)):((0,n.uX)(),(0,n.CE)("span",eb,"Simpan"))],8,Zp)])])])])}const sb=(a={})=>Na.get("",{params:{act:"kategori-kelompok",...a}}),ib=a=>Na.post("",{act:"kategori-kelompok",record:a}),lb=(a,e)=>a?Na.put("",{act:"kategori-kelompok",key:a,record:e}):Promise.reject(new Error("ID kategori kelompok tidak tersedia.")),nb=a=>a?Na.delete("",{data:{act:"kategori-kelompok",key:a}}):Promise.reject(new Error("ID kategori kelompok tidak tersedia.")),ob={namakelompok:"",iddesa:"",idkategorikelompok:"",deskripsi:"",logo:null,filesk:null};var rb={name:"addEditGroupModal",props:{groupToEdit:{type:Object,default:null}},data(){return{formData:{...ob},selectedSkFile:null,skFileName:"",selectedLogoFile:null,logoPreviewUrl:null,desaList:[],categoryList:[],isDesaListLoading:!1,isCategoryListLoading:!1,isLoading:!1,errorMessage:null,toast:(0,ln.dj)()}},computed:{isEditMode(){return!!this.groupToEdit}},watch:{groupToEdit:{handler(a){a?(this.formData.namakelompok=a.namakelompok,this.formData.iddesa=a.iddesa,this.formData.idkategorikelompok=a.idkategorikelompok,this.formData.deskripsi=a.deskripsi,this.formData.filesk=a.filesk,this.logo=a.logo):this.formData={...ob},this.selectedSkFile=null,this.skFileName="",this.selectedLogoFile=null,this.logoPreviewUrl=null,this.errorMessage=null},immediate:!0,deep:!0}},created(){this.fetchDesaList(),this.fetchCategoryList()},methods:{closeModal(){this.$emit("close")},handleOverlayClick(a){a.target===a.currentTarget&&this.closeModal()},async fetchDesaList(){this.isDesaListLoading=!0;try{const a=await Mi({limit:-1});this.desaList=a.data?.data||a.data?.[0]?.data||[]}catch(a){this.toast.error("Gagal memuat daftar desa.")}finally{this.isDesaListLoading=!1}},async fetchCategoryList(){this.isCategoryListLoading=!0;try{const a=await sb({limit:-1});this.categoryList=a.data?.data||a.data?.[0]?.data||[]}catch(a){this.toast.error("Gagal memuat daftar kategori kelompok.")}finally{this.isCategoryListLoading=!1}},handleFileUpload(a){const e=a.target.files[0];if(!e)return this.selectedSkFile=null,void(this.skFileName="");this.selectedSkFile=e,this.skFileName=e.name},handleLogoUpload(a){const e=a.target.files[0];if(this.logoPreviewUrl&&URL.revokeObjectURL(this.logoPreviewUrl),!e)return this.selectedLogoFile=null,void(this.logoPreviewUrl=null);this.selectedLogoFile=e,this.logoPreviewUrl=URL.createObjectURL(e)},async submitForm(){this.isLoading=!0,this.errorMessage=null;const a=new FormData;a.append("record[namakelompok]",this.formData.namakelompok),a.append("record[iddesa]",this.formData.iddesa),a.append("record[idkategorikelompok]",this.formData.idkategorikelompok),a.append("record[deskripsi]",this.formData.deskripsi),this.selectedSkFile&&a.append("upload_filesk",this.selectedSkFile),this.selectedLogoFile&&a.append("upload_logo",this.selectedLogoFile);try{let e;this.isEditMode?(a.append("_method","PUT"),e=await Ep(this.groupToEdit.idkelompok,a),this.toast.success("Data kelompok berhasil diperbarui")):(e=await Pp(a),this.toast.success("Data kelompok berhasil ditambah")),this.$emit("save-successful"),this.closeModal()}catch(e){this.errorMessage=e.response?.data?.failed||e.response?.data?.message||"Gagal menyimpan data. Silakan coba lagi",this.toast.error("Gagal menyimpan data kelompok")}finally{this.isLoading=!1}}}};const cb=(0,r.A)(rb,[["render",tb],["__scopeId","data-v-3f8f9338"]]);var db=cb,ub={components:{AddEditGroupModal:db},data(){return{groups:[],isLoading:!1,sortColumn:"created_at",sortDirection:"asc",isModalVisible:!1,currentPage:1,perPage:10,totalItems:0,groupBeingEdited:null,isFilterVisible:!1,filters:{namakelompok:"",namakategorikelompok:"",namawilayah:""}}},computed:{paginatedGroups(){return this.groups},totalPages(){return this.perPage<=0?1:Math.ceil(this.totalItems/this.perPage)},pageNumbers(){const a=[],e=5;let t=Math.max(1,this.currentPage-Math.floor(e/2)),s=t+e-1;s>this.totalPages&&(s=this.totalPages,t=Math.max(1,s-e+1));for(let i=t;i<=s;i++)a.push(i);return a}},watch:{currentPage(){this.fetchGroups()},perPage(){this.currentPage=1,this.fetchGroups()}},async mounted(){this.toast=(0,ln.dj)(),await this.fetchGroups()},methods:{openAddModal(){this.groupBeingEdited=null,this.isModalVisible=!0},openEditModal(a){this.groupBeingEdited={...a},this.isModalVisible=!0},closeModal(){this.isModalVisible=!1,this.groupBeingEdited=null},openSkFile(a){a?window.open(a,"_blank"):this.toast.info("Tidak ada file SK yang tersedia.",{icon:"fa fa-info-circle"})},handleSaveSuccessful(){this.closeModal(),this.fetchGroups()},async fetchGroups(){this.isLoading=!0;try{const a={act:"kelompok",page:this.currentPage,limit:this.perPage,order:this.sortColumn?`${this.sortColumn} ${this.sortDirection}`:"",group:""},e=Object.entries(this.filters).filter(([,a])=>""!==a&&null!==a).map(([a,e])=>`${a}=${e}`);e.length>0?a.filter=e.join(","):a.filter="";const t=await Cp(a),s=t.data?.data||t.data?.[0]?.data||[],i=t.data?.meta?.pagination||t.data?.[0]?.meta?.pagination||{};this.groups=s,this.totalItems=i.total||s.length}catch(a){console.error("Error fetching groups:",a),this.toast.error("Gagal memuat data kelompok",{icon:"fa fa-times"})}finally{this.isLoading=!1}},advancedDeleteAlert(a){this.$swal({title:"Hapus Data Kelompok",text:"Apakah Anda yakin ingin menghapus data ini?",icon:"warning",showCancelButton:!0,confirmButtonText:'<i class="fa fa-check me-2"></i> Hapus!',confirmButtonColor:"#d33",cancelButtonText:'<i class="fa fa-times me-2"></i> Batal',cancelButtonColor:"#efefef",reverseButtons:!0}).then(async e=>{if(e.isConfirmed)try{await Dp(a),1===this.groups.length&&this.currentPage>1?this.currentPage--:this.fetchGroups(),this.toast.success("Data kelompok berhasil dihapus",{icon:"fa fa-check"})}catch(t){this.toast.error("Gagal menghapus data kelompok",{icon:"fa fa-times"})}})},sortBy(a){this.sortColumn===a?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=a,this.sortDirection="asc"),this.fetchGroups()},changePage(a){a>=1&&a<=this.totalPages&&(this.currentPage=a)},toggleFilterVisibility(){this.isFilterVisible=!this.isFilterVisible},applyFilters(){this.currentPage=1,this.fetchGroups()},resetFilters(){this.filters.namawilayah="",this.filters.tahunawal="",this.filters.tahunakhir="",this.filters.tanggal_sk="",this.sortColumn="created_at",this.sortDirection="asc",this.currentPage=1,this.fetchGroups()}}};const mb=(0,r.A)(ub,[["render",vp],["__scopeId","data-v-32513114"]]);var kb=mb,hb={components:{groupsTable:kb}};const gb=(0,r.A)(hb,[["render",Tg]]);var pb=gb;const bb={class:"container-fluid"},fb={class:"row"};function Lb(a,e,t,s,i,l){const o=(0,n.g2)("Breadcrumbs"),r=(0,n.g2)("ProgramsTable");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(o,{main:"Agenda Kegiatan",title:a.$route.meta.title},null,8,["title"]),(0,n.Lk)("div",bb,[(0,n.Lk)("div",fb,[(0,n.bF)(r)])])])}const yb={class:"col-sm-12"},vb={class:"card"},Cb={class:"card-body"},Pb={class:"d-flex justify-content-end align-items-start mb-3"},Eb={class:"d-flex gap-2"},Db={key:0,class:"fa fa-angle-up me-2"},Mb={key:1,class:"fa fa-angle-down me-2"},wb={key:0,class:"border p-3 mb-3 rounded filter-section"},Fb={class:"row g-3"},Xb={class:"col-md-3"},xb={class:"col-md-3"},Tb={class:"d-flex justify-content-end gap-2 mt-3"},Sb={class:"table-responsive signal-table"},Bb={class:"table table-hover"},Ab={key:0,class:"fa fa-sort-asc"},_b={key:1,class:"fa fa-sort-desc"},jb={key:2,class:"fa fa-sort"},Vb={key:0,class:"fa fa-sort-asc"},Ib={key:1,class:"fa fa-sort-desc"},Nb={key:2,class:"fa fa-sort"},Ub={key:0,class:"fa fa-sort-asc"},Rb={key:1,class:"fa fa-sort-desc"},Qb={key:2,class:"fa fa-sort"},Wb={key:0,class:"fa fa-sort-asc"},Kb={key:1,class:"fa fa-sort-desc"},Ob={key:2,class:"fa fa-sort"},$b={key:0},Gb={scope:"row"},Jb={class:"btn-group"},qb=["onClick"],Hb=["onClick"],Yb=["onClick"],zb={key:0},Zb={class:"d-flex flex-column flex-md-row justify-content-md-between align-items-center mt-3 px-3 pb-3"},af={class:"mt-2"},ef={key:0,class:"text-muted"},tf={key:0,class:"d-flex align-items-center flex-wrap gap-2 mt-2"},sf={class:"pagination mb-0"},lf={key:0,class:"page-item"},nf={key:1,class:"page-item disabled"},of=["onClick"],rf={key:2,class:"page-item disabled"},cf={key:3,class:"page-item"};function df(a,e,t,s,i,o){const r=(0,n.g2)("add-edit-program-modal"),c=(0,n.g2)("detail-program-modal");return(0,n.uX)(),(0,n.CE)("div",yb,[i.isModalVisible?((0,n.uX)(),(0,n.Wv)(r,{key:0,"program-to-edit":i.programBeingEdited,onClose:o.closeModal,onSaveSuccessful:o.handleSaveSuccessful},null,8,["program-to-edit","onClose","onSaveSuccessful"])):(0,n.Q3)("",!0),i.isDetailModalVisible?((0,n.uX)(),(0,n.Wv)(c,{key:1,"program-to-view":i.programBeingViewed,onClose:o.closeDetailModal},null,8,["program-to-view","onClose"])):(0,n.Q3)("",!0),(0,n.Lk)("div",vb,[e[38]||(e[38]=(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("h3",null,"Daftar Program Kegiatan")],-1)),(0,n.Lk)("div",Cb,[(0,n.Lk)("div",Pb,[(0,n.Lk)("div",Eb,[(0,n.Lk)("button",{class:"btn btn-outline-light txt-dark",onClick:e[0]||(e[0]=(...a)=>o.toggleFilterVisibility&&o.toggleFilterVisibility(...a))},[i.isFilterVisible?((0,n.uX)(),(0,n.CE)("i",Db)):((0,n.uX)(),(0,n.CE)("i",Mb)),(0,n.Lk)("span",null,(0,k.v_)(i.isFilterVisible?"Sembunyikan":"Tampilkan")+" Filter",1)]),(0,n.Lk)("button",{class:"btn btn-success",onClick:e[1]||(e[1]=(...a)=>o.openAddModal&&o.openAddModal(...a))},e[14]||(e[14]=[(0,n.Lk)("i",{class:"fa fa-plus me-2"},null,-1),(0,n.Lk)("span",null," Tambah Data",-1)]))])]),i.isFilterVisible?((0,n.uX)(),(0,n.CE)("div",wb,[(0,n.Lk)("div",Fb,[(0,n.Lk)("div",Xb,[e[15]||(e[15]=(0,n.Lk)("label",{for:"filterProgramTitle",class:"form-label"},"Judul Program",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterProgramTitle",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.filters.judul=a),placeholder:"Filter berdasarkan judul"},null,512),[[l.Jo,i.filters.judul]])]),(0,n.Lk)("div",xb,[e[16]||(e[16]=(0,n.Lk)("label",{for:"filterVillageName",class:"form-label"},"Nama Desa",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterVillageName",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=a=>i.filters.namawilayah=a),placeholder:"Filter berdasarkan nama desa"},null,512),[[l.Jo,i.filters.namawilayah]])])]),(0,n.Lk)("div",Tb,[(0,n.Lk)("button",{class:"btn btn-secondary",onClick:e[4]||(e[4]=(...a)=>o.resetFilters&&o.resetFilters(...a))},e[17]||(e[17]=[(0,n.Lk)("i",{class:"fa fa-refresh me-2"},null,-1),(0,n.Lk)("span",null,"Reset Filter",-1)])),(0,n.Lk)("button",{class:"btn btn-primary",onClick:e[5]||(e[5]=(...a)=>o.applyFilters&&o.applyFilters(...a))},e[18]||(e[18]=[(0,n.Lk)("i",{class:"fa fa-search me-2"},null,-1),(0,n.Lk)("span",null,"Terapkan Filter",-1)]))]),e[19]||(e[19]=(0,n.eW)("             "))])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",Sb,[(0,n.Lk)("table",Bb,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[e[24]||(e[24]=(0,n.Lk)("th",{scope:"col"},"No",-1)),(0,n.Lk)("th",{scope:"col",onClick:e[6]||(e[6]=a=>o.sortBy("namawilayah"))},[e[20]||(e[20]=(0,n.eW)(" Nama Desa ")),"namawilayah"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",Ab)):"namawilayah"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",_b)):((0,n.uX)(),(0,n.CE)("i",jb))]),(0,n.Lk)("th",{scope:"col",onClick:e[7]||(e[7]=a=>o.sortBy("judul"))},[e[21]||(e[21]=(0,n.eW)(" Judul Program ")),"judul"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",Vb)):"judul"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",Ib)):((0,n.uX)(),(0,n.CE)("i",Nb))]),(0,n.Lk)("th",{scope:"col",onClick:e[8]||(e[8]=a=>o.sortBy("tanggalmulai"))},[e[22]||(e[22]=(0,n.eW)(" Tanggal Mulai ")),"tanggalmulai"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",Ub)):"tanggalmulai"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",Rb)):((0,n.uX)(),(0,n.CE)("i",Qb))]),(0,n.Lk)("th",{scope:"col",onClick:e[9]||(e[9]=a=>o.sortBy("tanggalselesai"))},[e[23]||(e[23]=(0,n.eW)(" Tanggal Selesai ")),"tanggalselesai"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",Wb)):"tanggalselesai"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",Kb)):((0,n.uX)(),(0,n.CE)("i",Ob))]),e[25]||(e[25]=(0,n.Lk)("th",{scope:"col"},"Aksi",-1))])]),(0,n.Lk)("tbody",null,[i.isLoading?((0,n.uX)(),(0,n.CE)("tr",$b,e[26]||(e[26]=[(0,n.Lk)("td",{colspan:"6",class:"text-center p-5"},[(0,n.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,n.Lk)("span",{class:"visually-hidden"},"Loading...")]),(0,n.Lk)("p",{class:"mt-2"},"Memuat data...")],-1)]))):((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.programs,(a,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:a.idkegiatan},[(0,n.Lk)("th",Gb,(0,k.v_)((i.currentPage-1)*i.perPage+t+1),1),(0,n.Lk)("td",null,(0,k.v_)(a.wilayah?.namawilayah||"-"),1),(0,n.Lk)("td",null,(0,k.v_)(a.judul||"-"),1),(0,n.Lk)("td",null,(0,k.v_)(o.formatTanggal(a.tanggalmulai)||"-"),1),(0,n.Lk)("td",null,(0,k.v_)(o.formatTanggal(a.tanggalselesai)||"-"),1),(0,n.Lk)("td",null,[(0,n.Lk)("div",Jb,[(0,n.Lk)("button",{class:"btn btn-info btn-sm",onClick:e=>o.openDetailModal(a),title:"Lihat Detail"},e[27]||(e[27]=[(0,n.Lk)("i",{class:"fa fa-eye"},null,-1)]),8,qb),(0,n.Lk)("button",{class:"btn btn-primary btn-sm",onClick:e=>o.openEditModal(a),title:"Ubah Data"},e[28]||(e[28]=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)]),8,Hb),(0,n.Lk)("button",{class:"btn btn-danger sweet-11 btn-sm",type:"button",onClick:e=>o.advancedDeleteAlert(a.idkegiatan),title:"Hapus Data"},e[29]||(e[29]=[(0,n.Lk)("i",{class:"fa fa-trash"},null,-1)]),8,Yb)])])]))),128)),0===i.programs.length?((0,n.uX)(),(0,n.CE)("tr",zb,e[30]||(e[30]=[(0,n.Lk)("td",{colspan:"6",class:"text-center"},"Tidak ada data yang cocok atau tersedia.",-1)]))):(0,n.Q3)("",!0)],64)),e[31]||(e[31]=(0,n.eW)("   "))])]),(0,n.Lk)("div",Zb,[(0,n.Lk)("div",af,[i.totalItems>0?((0,n.uX)(),(0,n.CE)("span",ef,[e[32]||(e[32]=(0,n.eW)(" Menampilkan ")),(0,n.Lk)("strong",null,(0,k.v_)((i.currentPage-1)*i.perPage+1),1),e[33]||(e[33]=(0,n.eW)(" - ")),(0,n.Lk)("strong",null,(0,k.v_)(Math.min(i.currentPage*i.perPage,i.totalItems)),1),e[34]||(e[34]=(0,n.eW)(" dari ")),(0,n.Lk)("strong",null,(0,k.v_)(i.totalItems),1),e[35]||(e[35]=(0,n.eW)(" data "))])):(0,n.Q3)("",!0)]),-1!==i.perPage&&o.totalPages>1?((0,n.uX)(),(0,n.CE)("nav",tf,[(0,n.Lk)("ul",sf,[(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[10]||(e[10]=a=>o.changePage(i.currentPage-1))},"Prev")],2),o.pageNumbers[0]>1?((0,n.uX)(),(0,n.CE)("li",lf,[(0,n.Lk)("button",{class:"page-link",onClick:e[11]||(e[11]=a=>o.changePage(1))},"1")])):(0,n.Q3)("",!0),o.pageNumbers[0]>2?((0,n.uX)(),(0,n.CE)("li",nf,e[36]||(e[36]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.pageNumbers,a=>((0,n.uX)(),(0,n.CE)("li",{key:a,class:(0,k.C4)(["page-item",{active:i.currentPage===a}])},[(0,n.Lk)("button",{class:"page-link",onClick:e=>o.changePage(a)},(0,k.v_)(a),9,of)],2))),128)),o.pageNumbers.slice(-1)[0]<o.totalPages-1?((0,n.uX)(),(0,n.CE)("li",rf,e[37]||(e[37]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),o.pageNumbers.slice(-1)[0]<o.totalPages?((0,n.uX)(),(0,n.CE)("li",cf,[(0,n.Lk)("button",{class:"page-link",onClick:e[12]||(e[12]=a=>o.changePage(o.totalPages))},(0,k.v_)(o.totalPages),1)])):(0,n.Q3)("",!0),(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:i.currentPage===o.totalPages}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[13]||(e[13]=a=>o.changePage(i.currentPage+1))},"Next")],2)])])):(0,n.Q3)("",!0)])])])])}const uf=(a={})=>Na.get("",{params:{act:"kegiatan",...a}}),mf=a=>a?Na.get("",{params:{act:"kegiatan",key:a}}):Promise.reject(new Error("ID kegiatan tidak tersedia.")),kf=a=>(a.append("act","kegiatan"),Na.post("",a)),hf=(a,e)=>a?(e.append("act","kegiatan"),e.append("key",a),Na.post("",e)):Promise.reject(new Error("ID kegiatan tidak tersedia.")),gf=a=>a?Na.delete("",{data:{act:"kegiatan",key:a}}):Promise.reject(new Error("ID kegiatan tidak tersedia.")),pf={class:"modal-header"},bf={class:"modal-title"},ff={class:"modal-body"},Lf={class:"mb-3"},yf=["disabled"],vf={disabled:"",value:""},Cf=["value"],Pf={class:"mb-3"},Ef=["disabled"],Df={disabled:"",value:""},Mf=["value"],wf={class:"mb-3"},Ff={class:"mb-3"},Xf={class:"row"},xf={class:"col-md-6 mb-3"},Tf={class:"col-md-6 mb-3"},Sf={class:"mb-3"},Bf={class:"mb-3"},Af={class:"mt-2"},_f={key:0},jf=["src"],Vf={key:1},If=["src"],Nf={key:0,class:"alert alert-danger mt-3"},Uf={class:"modal-footer"},Rf=["disabled"],Qf={key:0,class:"spinner-border spinner-border-sm",role:"status"},Wf={key:1};function Kf(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",{class:"modal-overlay",onClick:e[13]||(e[13]=(...a)=>o.handleOverlayClick&&o.handleOverlayClick(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[12]||(e[12]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",pf,[(0,n.Lk)("h5",bf,(0,k.v_)(o.isEditMode?"Edit Data Kegiatan":"Tambah Data Kegiatan"),1),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",ff,[(0,n.Lk)("form",{onSubmit:e[9]||(e[9]=(0,l.D$)((...a)=>o.submitForm&&o.submitForm(...a),["prevent"]))},[(0,n.Lk)("div",Lf,[e[14]||(e[14]=(0,n.Lk)("label",{class:"form-label"},"Nama Desa",-1)),(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":e[1]||(e[1]=a=>i.formData.iddesa=a),required:"",disabled:i.isListLoading},[(0,n.Lk)("option",vf,(0,k.v_)(i.isListLoading?"Memuat...":"Pilih Desa"),1),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.desaList,a=>((0,n.uX)(),(0,n.CE)("option",{key:a.iddesa,value:a.iddesa},(0,k.v_)(a.wilayah.namawilayah),9,Cf))),128))],8,yf),[[l.u1,i.formData.iddesa]])]),(0,n.Lk)("div",Pf,[e[15]||(e[15]=(0,n.Lk)("label",{class:"form-label"},"Nama Kategori Kegiatan",-1)),(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":e[2]||(e[2]=a=>i.formData.idkategorikegiatan=a),required:"",disabled:i.isListLoading},[(0,n.Lk)("option",Df,(0,k.v_)(i.isListLoading?"Memuat...":"Pilih Kategori Kegiatan"),1),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.categoryList,a=>((0,n.uX)(),(0,n.CE)("option",{key:a.idkategorikegiatan,value:a.idkategorikegiatan},(0,k.v_)(a.namakategorikegiatan),9,Mf))),128))],8,Ef),[[l.u1,i.formData.idkategorikegiatan]])]),(0,n.Lk)("div",wf,[e[16]||(e[16]=(0,n.Lk)("label",{class:"form-label"},"Judul Program",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=a=>i.formData.judul=a),placeholder:"Masukkan judul program",required:""},null,512),[[l.Jo,i.formData.judul]])]),(0,n.Lk)("div",Ff,[e[17]||(e[17]=(0,n.Lk)("label",{class:"form-label"},"Konten Program",-1)),(0,n.bo)((0,n.Lk)("textarea",{class:"form-control","onUpdate:modelValue":e[4]||(e[4]=a=>i.formData.konten=a),rows:"4",placeholder:"Tuliskan isi konten program",required:""},null,512),[[l.Jo,i.formData.konten]])]),(0,n.Lk)("div",Xf,[(0,n.Lk)("div",xf,[e[18]||(e[18]=(0,n.Lk)("label",{class:"form-label"},"Tanggal Mulai",-1)),(0,n.bo)((0,n.Lk)("input",{type:"date",class:"form-control","onUpdate:modelValue":e[5]||(e[5]=a=>i.formData.tanggalmulai=a),required:""},null,512),[[l.Jo,i.formData.tanggalmulai]])]),(0,n.Lk)("div",Tf,[e[19]||(e[19]=(0,n.Lk)("label",{class:"form-label"},"Tanggal Selesai",-1)),(0,n.bo)((0,n.Lk)("input",{type:"date",class:"form-control","onUpdate:modelValue":e[6]||(e[6]=a=>i.formData.tanggalselesai=a),required:""},null,512),[[l.Jo,i.formData.tanggalselesai]])])]),(0,n.Lk)("div",Sf,[e[20]||(e[20]=(0,n.Lk)("label",{class:"form-label"},"Jam Pelaksanaan",-1)),(0,n.bo)((0,n.Lk)("input",{type:"time",class:"form-control","onUpdate:modelValue":e[7]||(e[7]=a=>i.formData.jampelaksanaan=a),required:""},null,512),[[l.Jo,i.formData.jampelaksanaan]])]),(0,n.Lk)("div",Bf,[e[21]||(e[21]=(0,n.Lk)("label",{class:"form-label"},"Upload Poster",-1)),(0,n.Lk)("input",{type:"file",class:"form-control",accept:"image/*",onChange:e[8]||(e[8]=(...a)=>o.handlePosterUpload&&o.handlePosterUpload(...a))},null,32),(0,n.Lk)("div",Af,[a.posterPreviewUrl?((0,n.uX)(),(0,n.CE)("div",_f,[(0,n.Lk)("img",{src:a.posterPreviewUrl,alt:"Preview Poster",class:"img-thumbnail",style:{"max-width":"150px","max-height":"150px"}},null,8,jf)])):o.isEditMode&&i.formData.poster?((0,n.uX)(),(0,n.CE)("div",Vf,[(0,n.Lk)("img",{src:i.formData.poster,alt:"Poster Saat Ini",class:"img-thumbnail",style:{"max-width":"150px","max-height":"150px"}},null,8,If)])):(0,n.Q3)("",!0)])]),i.errorMessage?((0,n.uX)(),(0,n.CE)("div",Nf,(0,k.v_)(i.errorMessage),1)):(0,n.Q3)("",!0)],32)]),(0,n.Lk)("div",Uf,[(0,n.Lk)("button",{type:"button",class:"btn btn-danger",onClick:e[10]||(e[10]=(...a)=>o.closeModal&&o.closeModal(...a))},"Batal"),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[11]||(e[11]=(...a)=>o.submitForm&&o.submitForm(...a)),disabled:i.isLoading},[i.isLoading?((0,n.uX)(),(0,n.CE)("span",Qf)):((0,n.uX)(),(0,n.CE)("span",Wf,"Simpan"))],8,Rf)])])])])}const Of=(a={})=>Na.get("",{params:{act:"kategori-kegiatan",...a}}),$f=a=>(a.append("act","kategori-kegiatan"),Na.post("",a)),Gf=(a,e)=>a?(e.append("act","kategori-kegiatan"),e.append("key",a),Na.post("",e)):Promise.reject(new Error("ID kategori kegiatan tidak tersedia.")),Jf=a=>a?Na.delete("",{data:{act:"kategori-kegiatan",key:a}}):Promise.reject(new Error("ID kategori kegiatan tidak tersedia.")),qf={idkategorikegiatan:"",iddesa:"",judul:"",konten:"",tanggalmulai:"",tanggalselesai:"",jampelaksanaan:"",poster:null};var Hf={name:"addEditProgramModal",props:{programToEdit:{type:Object,default:null}},data(){return{formData:{...qf},selectedPosterFile:null,PosterPreviewUrl:null,categoryList:[],desaList:[],isListLoading:!1,isLoading:!1,errorMessage:null,toast:(0,ln.dj)()}},computed:{isEditMode(){return!!this.programToEdit}},watch:{programToEdit:{handler(a){a?(this.formData.idkategorikegiatan=a.idkategorikegiatan,this.formData.iddesa=a.iddesa,this.formData.judul=a.judul,this.formData.konten=a.konten,this.formData.tanggalmulai=a.tanggalmulai,this.formData.tanggalselesai=a.tanggalselesai,this.formData.jampelaksanaan=a.jampelaksanaan,this.formData.poster=a.poster):this.formData={...qf},this.errorMessage=null},immediate:!0,deep:!0}},created(){this.fetchDesaList(),this.fetchCategoryList()},beforeUnmount(){this.posterPreviewUrl&&URL.revokeObjectURL(this.posterPreviewUrl)},methods:{closeModal(){this.$emit("close")},handleOverlayClick(a){a.target===a.currentTarget&&this.closeModal()},async fetchDesaList(){this.isListLoading=!0;try{const a=await Mi({limit:-1});this.desaList=a.data?.data||a.data?.[0]?.data||[]}catch(a){this.toast.error("Gagal memuat daftar desa")}finally{this.isListLoading=!1}},async fetchCategoryList(){this.isListLoading=!0;try{const a=await Of({limit:-1});this.categoryList=a.data?.data||a.data?.[0]?.data||[]}catch(a){this.toast.error("Gagal memuat daftar kategori kegiatan")}finally{this.isListLoading=!1}},handlePosterUpload(a){const e=a.target.files[0];if(this.posterPreviewUrl&&URL.revokeObjectURL(this.posterPreviewUrl),!e)return this.selectedPosterFile=null,void(this.posterPreviewUrl=null);this.selectedPosterFile=e,this.posterPreviewUrl=URL.createObjectURL(e)},async submitForm(){this.isLoading=!0,this.errorMessage=null;const a=new FormData;a.append("record[idkategorikegiatan]",this.formData.idkategorikegiatan),a.append("record[iddesa]",this.formData.iddesa),a.append("record[judul]",this.formData.judul),a.append("record[konten]",this.formData.konten),a.append("record[tanggalmulai]",this.formData.tanggalmulai),a.append("record[tanggalselesai]",this.formData.tanggalselesai),a.append("record[jampelaksanaan]",this.formData.jampelaksanaan),this.selectedPosterFile&&a.append("upload_poster",this.selectedPosterFile);try{let e;this.isEditMode?(a.append("_method","PUT"),e=await hf(this.programToEdit.idkegiatan,a),this.toast.success("Data kegiatan berhasil diperbarui")):(e=await kf(a),this.toast.success("Data kegiatan berhasil ditambah")),this.$emit("save-successful",e.data.data),this.closeModal()}catch(e){this.errorMessage=e.response?.data?.failed||e.response?.data?.message||"Gagal menyimpan data. Silakan coba lagi",this.toast.error("Gagal menyimpan data kegiatan")}finally{this.isLoading=!1}}}};const Yf=(0,r.A)(Hf,[["render",Kf],["__scopeId","data-v-448c9002"]]);var zf=Yf;const Zf={class:"modal-header"},aL={class:"modal-body"},eL={key:0,class:"text-center p-5"},tL={key:1,class:"text-center p-5 text-danger"},sL={key:0,class:"text-muted"},iL={key:2,class:"program-details-container"},lL={class:"program-title text-center mb-4"},nL={class:"row"},oL={class:"col-md-5"},rL={class:"detail-item"},cL=["src"],dL={key:1,src:"https://placehold.co/400x200/EBF4FF/7F9CF5?text=Poster",alt:"Poster Default",class:"featured-image"},uL={class:"col-md-7"},mL={class:"detail-item mb-3"},kL={class:"detail-item mb-3"},hL={class:"detail-item mb-3"},gL={class:"detail-item"},pL={class:"detail-section"},bL={class:"text-content"},fL={class:"modal-footer"};function LL(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",{class:"modal-overlay",onClick:e[3]||(e[3]=(...a)=>o.closeModal&&o.closeModal(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[2]||(e[2]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",Zf,[e[4]||(e[4]=(0,n.Lk)("h5",{class:"modal-title"},"Detail Program",-1)),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",aL,[i.isLoading?((0,n.uX)(),(0,n.CE)("div",eL,e[5]||(e[5]=[(0,n.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,n.Lk)("span",{class:"visually-hidden"},"Loading...")],-1),(0,n.Lk)("p",{class:"mt-2"},"Memuat data...",-1)]))):i.error?((0,n.uX)(),(0,n.CE)("div",tL,[e[6]||(e[6]=(0,n.Lk)("i",{class:"fa fa-exclamation-triangle fa-3x mb-3"},null,-1)),e[7]||(e[7]=(0,n.Lk)("h4",null,"Terjadi Kesalahan",-1)),(0,n.Lk)("p",null,(0,k.v_)(i.error),1),i.debugMessage?((0,n.uX)(),(0,n.CE)("small",sL,"Detail: "+(0,k.v_)(i.debugMessage),1)):(0,n.Q3)("",!0)])):i.programDetail?((0,n.uX)(),(0,n.CE)("div",iL,[(0,n.Lk)("h2",lL,(0,k.v_)(i.programDetail.judul||"Judul Belum Tersedia"),1),(0,n.Lk)("div",nL,[(0,n.Lk)("div",oL,[(0,n.Lk)("div",rL,[e[8]||(e[8]=(0,n.Lk)("h5",null,[(0,n.Lk)("i",{class:"fa fa-image me-2"}),(0,n.eW)("Poster")],-1)),i.programDetail.poster?((0,n.uX)(),(0,n.CE)("img",{key:0,src:i.programDetail.poster,alt:"Poster Program",class:"featured-image",onerror:"this.src='https://placehold.co/400x200/EBF4FF/7F9CF5?text=Poster'"},null,8,cL)):((0,n.uX)(),(0,n.CE)("img",dL))])]),(0,n.Lk)("div",uL,[(0,n.Lk)("div",mL,[e[9]||(e[9]=(0,n.Lk)("h5",null,[(0,n.Lk)("i",{class:"fa fa-map-marker me-2"}),(0,n.eW)("Nama Desa")],-1)),(0,n.Lk)("p",null,(0,k.v_)(i.programDetail.wilayah?.namawilayah||"Lokasi tidak diketahui"),1)]),(0,n.Lk)("div",kL,[e[10]||(e[10]=(0,n.Lk)("h5",null,[(0,n.Lk)("i",{class:"fa fa-tags me-2"}),(0,n.eW)("Kategori Program")],-1)),(0,n.Lk)("p",null,(0,k.v_)(i.programDetail.kategorikegiatan?.namakategorikegiatan||"-"),1)]),(0,n.Lk)("div",hL,[e[11]||(e[11]=(0,n.Lk)("h5",null,[(0,n.Lk)("i",{class:"fa fa-calendar me-2"}),(0,n.eW)("Tanggal Pelaksanaan")],-1)),(0,n.Lk)("p",null,(0,k.v_)(o.formattedExecutionDate),1)]),(0,n.Lk)("div",gL,[e[12]||(e[12]=(0,n.Lk)("h5",null,[(0,n.Lk)("i",{class:"fa fa-clock-o me-2"}),(0,n.eW)("Waktu Pelaksanaan")],-1)),(0,n.Lk)("p",null,(0,k.v_)(i.programDetail.jampelaksanaan||"-"),1)])])]),e[14]||(e[14]=(0,n.Lk)("hr",{class:"my-4"},null,-1)),(0,n.Lk)("div",pL,[e[13]||(e[13]=(0,n.Lk)("h4",null,[(0,n.Lk)("i",{class:"fa fa-file-text-o me-2"}),(0,n.eW)("Isi Konten")],-1)),(0,n.Lk)("p",bL,(0,k.v_)(i.programDetail.konten||"Tidak ada konten untuk ditampilkan."),1)])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",fL,[(0,n.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:e[1]||(e[1]=(...a)=>o.closeModal&&o.closeModal(...a))},"Tutup")])])])}var yL={name:"DetailProgramModal",props:{programToView:{type:Object,required:!0}},emits:["close"],data(){return{programDetail:null,isLoading:!1,error:null,debugMessage:""}},computed:{formattedExecutionDate(){if(!this.programDetail)return"-";const{tanggalmulai:a,tanggalselesai:e}=this.programDetail;if(!a)return"-";const t={day:"numeric",month:"long",year:"numeric"},s=new Date(a).toLocaleDateString("id-ID",t);if(a===e||!e)return s;const i=new Date(e).toLocaleDateString("id-ID",t);return`${s} - ${i}`}},methods:{closeModal(){this.$emit("close")},async fetchProgramDetail(){const a=this.programToView?.idkegiatan;if(a){this.isLoading=!0,this.error=null,this.debugMessage="";try{const e=await mf(a),t=e.data;Array.isArray(t)&&t.length>0&&t[0]&&Array.isArray(t[0].data)&&t[0].data.length>0?this.programDetail=t[0].data[0]:(this.error="Data program tidak ditemukan atau format respons tidak sesuai.",this.debugMessage=`Struktur data yang diterima: ${JSON.stringify(t)}`)}catch(e){console.error("Gagal mengambil detail program:",e),this.error=e.message||"Terjadi kesalahan saat memuat data.",e.response&&(this.debugMessage=`Status: ${e.response.status} - Data: ${JSON.stringify(e.response.data)}`)}finally{this.isLoading=!1}}else this.error="ID program tidak valid atau tidak tersedia."}},mounted(){this.fetchProgramDetail()},watch:{programToView:{handler(a,e){a?.idkegiatan!==e?.idkegiatan&&this.fetchProgramDetail()},deep:!0}}};const vL=(0,r.A)(yL,[["render",LL],["__scopeId","data-v-704f26de"]]);var CL=vL,PL={components:{AddEditProgramModal:zf,DetailProgramModal:CL},data(){return{programs:[],isLoading:!1,sortColumn:"created_at",sortDirection:"desc",isModalVisible:!1,currentPage:1,perPage:10,totalItems:0,programBeingEdited:null,isFilterVisible:!1,filters:{judul:"",namawilayah:""},isDetailModalVisible:!1,programBeingViewed:null}},computed:{paginatedPrograms(){return this.programs},totalPages(){return this.perPage<=0?1:Math.ceil(this.totalItems/this.perPage)},pageNumbers(){const a=[],e=5;let t=Math.max(1,this.currentPage-Math.floor(e/2)),s=t+e-1;s>this.totalPages&&(s=this.totalPages,t=Math.max(1,s-e+1));for(let i=t;i<=s;i++)a.push(i);return a}},watch:{currentPage(){this.fetchPrograms()},perPage(){this.currentPage=1,this.fetchPrograms()}},async mounted(){this.toast=(0,ln.dj)(),await this.fetchPrograms()},methods:{openAddModal(){this.programBeingEdited=null,this.isModalVisible=!0},openEditModal(a){this.programBeingEdited={...a},this.isModalVisible=!0},closeModal(){this.isModalVisible=!1,this.programBeingEdited=null},openDetailModal(a){this.programBeingViewed={...a},this.isDetailModalVisible=!0},closeDetailModal(){this.isDetailModalVisible=!1,this.programBeingViewed=null},formatTanggal(a){if(!a)return"-";const e={day:"numeric",month:"long",year:"numeric"};return new Date(a).toLocaleDateString("id-ID",e)},handleSaveSuccessful(){this.closeModal(),this.fetchPrograms()},async fetchPrograms(){this.isLoading=!0;try{const a={act:"kegiatan",page:this.currentPage,limit:this.perPage,order:this.sortColumn?`${this.sortColumn} ${this.sortDirection}`:"",group:""},e=Object.entries(this.filters).filter(([,a])=>""!==a&&null!==a).map(([a,e])=>`${a}=${e}`);e.length>0?a.filter=e.join(","):a.filter="";const t=await uf(a),s=t.data?.data||t.data?.[0]?.data||[],i=t.data?.meta?.pagination||t.data?.[0]?.meta?.pagination||{};this.programs=s,this.totalItems=i.total||s.length}catch(a){console.error("Error fetching programs:",a),this.toast.error("Gagal memuat data kegiatan",{icon:"fa fa-times"})}finally{this.isLoading=!1}},advancedDeleteAlert(a){this.$swal({title:"Hapus Data Program",text:"Apakah Anda yakin ingin menghapus data ini?",icon:"warning",showCancelButton:!0,confirmButtonText:'<i class="fa fa-check me-2"></i> Hapus!',confirmButtonColor:"#d33",cancelButtonText:'<i class="fa fa-times me-2"></i> Batal',cancelButtonColor:"#efefef",reverseButtons:!0}).then(async e=>{if(e.isConfirmed)try{await gf(a),1===this.programs.length&&this.currentPage>1?this.currentPage--:this.fetchPrograms(),this.toast.success("Data kegiatan berhasil dihapus",{icon:"fa fa-check"})}catch(t){this.toast.error("Gagal menghapus data kegiatan",{icon:"fa fa-times"})}})},sortBy(a){this.sortColumn===a?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=a,this.sortDirection="asc"),this.fetchPrograms()},changePage(a){a>=1&&a<=this.totalPages&&(this.currentPage=a)},toggleFilterVisibility(){this.isFilterVisible=!this.isFilterVisible},applyFilters(){this.currentPage=1,this.fetchPrograms()},resetFilters(){this.filters.judul="",this.filters.namawilayah="",this.sortColumn="created_at",this.sortDirection="desc",this.currentPage=1,this.fetchPrograms()}}};const EL=(0,r.A)(PL,[["render",df],["__scopeId","data-v-971c3d3c"]]);var DL=EL,ML={components:{ProgramsTable:DL}};const wL=(0,r.A)(ML,[["render",Lb]]);var FL=wL;const XL={class:"container-fluid"},xL={class:"row"};function TL(a,e,t,s,i,l){const o=(0,n.g2)("Breadcrumbs"),r=(0,n.g2)("ActivityCategoryTable");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(o,{main:"Agenda Kegiatan",title:a.$route.meta.title},null,8,["title"]),(0,n.Lk)("div",XL,[(0,n.Lk)("div",xL,[(0,n.bF)(r)])])])}const SL={class:"col-sm-12"},BL={class:"card"},AL={class:"card-body"},_L={class:"d-flex justify-content-end align-items-start mb-3"},jL={class:"d-flex gap-2"},VL={key:0,class:"fa fa-angle-up me-2"},IL={key:1,class:"fa fa-angle-down me-2"},NL={key:0,class:"border p-3 mb-3 rounded filter-section"},UL={class:"row g-3"},RL={class:"col-md-3"},QL={class:"col-md-3"},WL={class:"d-flex justify-content-end gap-2 mt-3"},KL={class:"table-responsive signal-table"},OL={class:"table table-hover"},$L={key:0,class:"fa fa-sort-asc"},GL={key:1,class:"fa fa-sort-desc"},JL={key:2,class:"fa fa-sort"},qL={key:0,class:"fa fa-sort-asc"},HL={key:1,class:"fa fa-sort-desc"},YL={key:2,class:"fa fa-sort"},zL={key:0},ZL={scope:"row"},ay={class:"btn-group"},ey=["onClick"],ty=["onClick"],sy={key:0},iy={class:"d-flex flex-column flex-md-row justify-content-md-between align-items-center mt-3 px-3 pb-3"},ly={class:"mt-2"},ny={key:0,class:"text-muted"},oy={key:0,class:"d-flex align-items-center flex-wrap gap-2 mt-2"},ry={class:"pagination mb-0"},cy={key:0,class:"page-item"},dy={key:1,class:"page-item disabled"},uy=["onClick"],my={key:2,class:"page-item disabled"},ky={key:3,class:"page-item"};function hy(a,e,t,s,i,o){const r=(0,n.g2)("add-edit-activityCategory-modal");return(0,n.uX)(),(0,n.CE)("div",SL,[i.isModalVisible?((0,n.uX)(),(0,n.Wv)(r,{key:0,"activityCategory-to-edit":i.activityCategoryBeingEdited,onClose:o.closeModal,onSaveSuccessful:o.handleSaveSuccessful},null,8,["activityCategory-to-edit","onClose","onSaveSuccessful"])):(0,n.Q3)("",!0),(0,n.Lk)("div",BL,[e[31]||(e[31]=(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("h3",null,"Daftar Kategori Kegiatan")],-1)),(0,n.Lk)("div",AL,[(0,n.Lk)("div",_L,[(0,n.Lk)("div",jL,[(0,n.Lk)("button",{class:"btn btn-outline-light txt-dark",onClick:e[0]||(e[0]=(...a)=>o.toggleFilterVisibility&&o.toggleFilterVisibility(...a))},[i.isFilterVisible?((0,n.uX)(),(0,n.CE)("i",VL)):((0,n.uX)(),(0,n.CE)("i",IL)),(0,n.Lk)("span",null,(0,k.v_)(i.isFilterVisible?"Sembunyikan":"Tampilkan")+" Filter",1)]),(0,n.Lk)("button",{class:"btn btn-success",onClick:e[1]||(e[1]=(...a)=>o.openAddModal&&o.openAddModal(...a))},e[12]||(e[12]=[(0,n.Lk)("i",{class:"fa fa-plus me-2"},null,-1),(0,n.Lk)("span",null," Tambah Data",-1)]))])]),i.isFilterVisible?((0,n.uX)(),(0,n.CE)("div",NL,[(0,n.Lk)("div",UL,[(0,n.Lk)("div",RL,[e[13]||(e[13]=(0,n.Lk)("label",{for:"filterActivityCategoryName",class:"form-label"},"Nama Kategori Kegiatan",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterActivityCategoryName",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.filters.namakategorikegiatan=a),placeholder:"Filter berdasarkan nama kategori"},null,512),[[l.Jo,i.filters.namakategorikegiatan]])]),(0,n.Lk)("div",QL,[e[14]||(e[14]=(0,n.Lk)("label",{for:"filterVillageName",class:"form-label"},"Nama Desa",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterVillageName",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=a=>i.filters.namawilayah=a),placeholder:"Filter berdasarkan nama desa"},null,512),[[l.Jo,i.filters.namawilayah]])])]),(0,n.Lk)("div",WL,[(0,n.Lk)("button",{class:"btn btn-secondary",onClick:e[4]||(e[4]=(...a)=>o.resetFilters&&o.resetFilters(...a))},e[15]||(e[15]=[(0,n.Lk)("i",{class:"fa fa-refresh me-2"},null,-1),(0,n.Lk)("span",null,"Reset Filter",-1)])),(0,n.Lk)("button",{class:"btn btn-primary",onClick:e[5]||(e[5]=(...a)=>o.applyFilters&&o.applyFilters(...a))},e[16]||(e[16]=[(0,n.Lk)("i",{class:"fa fa-search me-2"},null,-1),(0,n.Lk)("span",null,"Terapkan Filter",-1)]))])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",KL,[(0,n.Lk)("table",OL,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[e[19]||(e[19]=(0,n.Lk)("th",{scope:"col"},"No",-1)),(0,n.Lk)("th",{scope:"col",onClick:e[6]||(e[6]=a=>o.sortBy("namakategorikegiatan"))},[e[17]||(e[17]=(0,n.eW)(" Nama Kategori ")),"namakategorikegiatan"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",$L)):"namakategorikegiatan"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",GL)):((0,n.uX)(),(0,n.CE)("i",JL))]),(0,n.Lk)("th",{scope:"col",onClick:e[7]||(e[7]=a=>o.sortBy("namawilayah"))},[e[18]||(e[18]=(0,n.eW)(" Nama Desa ")),"namawilayah"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",qL)):"namawilayah"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",HL)):((0,n.uX)(),(0,n.CE)("i",YL))]),e[20]||(e[20]=(0,n.Lk)("th",{scope:"col"},"Aksi",-1))])]),(0,n.Lk)("tbody",null,[i.isLoading?((0,n.uX)(),(0,n.CE)("tr",zL,e[21]||(e[21]=[(0,n.Lk)("td",{colspan:"5",class:"text-center p-5"},[(0,n.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,n.Lk)("span",{class:"visually-hidden"},"Loading...")]),(0,n.Lk)("p",{class:"mt-2"},"Memuat data...")],-1)]))):((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.activityCategories,(a,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:a.idkategorikegiatan},[(0,n.Lk)("th",ZL,(0,k.v_)((i.currentPage-1)*i.perPage+t+1),1),(0,n.Lk)("td",null,(0,k.v_)(a.namakategorikegiatan||"-"),1),(0,n.Lk)("td",null,(0,k.v_)(a.wilayah.namawilayah||"-"),1),(0,n.Lk)("td",null,[(0,n.Lk)("div",ay,[(0,n.Lk)("button",{class:"btn btn-primary btn-sm",onClick:e=>o.openEditModal(a),title:"Ubah Data"},e[22]||(e[22]=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)]),8,ey),(0,n.Lk)("button",{class:"btn btn-danger sweet-11 btn-sm",type:"button",onClick:e=>o.advancedDeleteAlert(a.idkategorikegiatan),title:"Hapus Data"},e[23]||(e[23]=[(0,n.Lk)("i",{class:"fa fa-trash"},null,-1)]),8,ty)])])]))),128)),0===o.paginatedActivityCategories.length?((0,n.uX)(),(0,n.CE)("tr",sy,e[24]||(e[24]=[(0,n.Lk)("td",{colspan:"5",class:"text-center"},"Tidak ada data yang cocok atau tersedia.",-1)]))):(0,n.Q3)("",!0)],64))])]),(0,n.Lk)("div",iy,[(0,n.Lk)("div",ly,[i.totalItems>0?((0,n.uX)(),(0,n.CE)("span",ny,[e[25]||(e[25]=(0,n.eW)(" Menampilkan ")),(0,n.Lk)("strong",null,(0,k.v_)((i.currentPage-1)*i.perPage+1),1),e[26]||(e[26]=(0,n.eW)(" - ")),(0,n.Lk)("strong",null,(0,k.v_)(Math.min(i.currentPage*i.perPage,i.totalItems)),1),e[27]||(e[27]=(0,n.eW)(" dari ")),(0,n.Lk)("strong",null,(0,k.v_)(i.totalItems),1),e[28]||(e[28]=(0,n.eW)(" data "))])):(0,n.Q3)("",!0)]),-1!==i.perPage&&o.totalPages>1?((0,n.uX)(),(0,n.CE)("nav",oy,[(0,n.Lk)("ul",ry,[(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[8]||(e[8]=a=>o.changePage(i.currentPage-1))},"Prev")],2),o.pageNumbers[0]>1?((0,n.uX)(),(0,n.CE)("li",cy,[(0,n.Lk)("button",{class:"page-link",onClick:e[9]||(e[9]=a=>o.changePage(1))},"1")])):(0,n.Q3)("",!0),o.pageNumbers[0]>2?((0,n.uX)(),(0,n.CE)("li",dy,e[29]||(e[29]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.pageNumbers,a=>((0,n.uX)(),(0,n.CE)("li",{key:a,class:(0,k.C4)(["page-item",{active:i.currentPage===a}])},[(0,n.Lk)("button",{class:"page-link",onClick:e=>o.changePage(a)},(0,k.v_)(a),9,uy)],2))),128)),o.pageNumbers.slice(-1)[0]<o.totalPages-1?((0,n.uX)(),(0,n.CE)("li",my,e[30]||(e[30]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),o.pageNumbers.slice(-1)[0]<o.totalPages?((0,n.uX)(),(0,n.CE)("li",ky,[(0,n.Lk)("button",{class:"page-link",onClick:e[10]||(e[10]=a=>o.changePage(o.totalPages))},(0,k.v_)(o.totalPages),1)])):(0,n.Q3)("",!0),(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:i.currentPage===o.totalPages}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[11]||(e[11]=a=>o.changePage(i.currentPage+1))},"Next")],2)])])):(0,n.Q3)("",!0)])])])])}const gy={class:"modal-header"},py={class:"modal-title"},by={class:"modal-body"},fy={class:"col mb-3"},Ly={class:"mb-3"},yy=["disabled"],vy={disabled:"",value:""},Cy=["value"],Py={key:0,class:"alert alert-danger mt-3"},Ey={class:"modal-footer"},Dy=["disabled"],My={key:0,class:"spinner-border spinner-border-sm",role:"status"},wy={key:1};function Fy(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",{class:"modal-overlay",onClick:e[7]||(e[7]=(...a)=>o.handleOverlayClick&&o.handleOverlayClick(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[6]||(e[6]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",gy,[(0,n.Lk)("h5",py,(0,k.v_)(o.isEditMode?"Edit Data Kategori Kegiatan":"Tambah Data Kategori Kegiatan"),1),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",by,[(0,n.Lk)("form",{onSubmit:e[3]||(e[3]=(0,l.D$)((...a)=>o.submitForm&&o.submitForm(...a),["prevent"]))},[(0,n.Lk)("div",fy,[e[8]||(e[8]=(0,n.Lk)("label",{class:"form-label"},"Nama Kategori Kegiatan",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=a=>i.formData.namakategorikegiatan=a),placeholder:"Masukkan nama kategori kegiatan",required:""},null,512),[[l.Jo,i.formData.namakategorikegiatan]])]),(0,n.Lk)("div",Ly,[e[9]||(e[9]=(0,n.Lk)("label",{class:"form-label"},"Nama Desa",-1)),(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":e[2]||(e[2]=a=>i.formData.iddesa=a),required:"",disabled:i.isDesaListLoading},[(0,n.Lk)("option",vy,(0,k.v_)(i.isDesaListLoading?"Memuat...":"Pilih Desa"),1),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.desaList,a=>((0,n.uX)(),(0,n.CE)("option",{key:a.iddesa,value:a.iddesa},(0,k.v_)(a.wilayah.namawilayah),9,Cy))),128))],8,yy),[[l.u1,i.formData.iddesa]])]),i.errorMessage?((0,n.uX)(),(0,n.CE)("div",Py,(0,k.v_)(i.errorMessage),1)):(0,n.Q3)("",!0)],32)]),(0,n.Lk)("div",Ey,[(0,n.Lk)("button",{type:"button",class:"btn btn-danger",onClick:e[4]||(e[4]=(...a)=>o.closeModal&&o.closeModal(...a))},"Batal"),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[5]||(e[5]=(...a)=>o.submitForm&&o.submitForm(...a)),disabled:i.isLoading},[i.isLoading?((0,n.uX)(),(0,n.CE)("span",My)):((0,n.uX)(),(0,n.CE)("span",wy,"Simpan"))],8,Dy)])])])])}const Xy={iddesa:"",namakategorikegiatan:""};var xy={name:"addEditActivityCategoryModal",props:{activityCategoryToEdit:{type:Object,default:null}},data(){return{formData:{...Xy},desaList:[],isDesaListLoading:!1,isLoading:!1,errorMessage:null,toast:(0,ln.dj)()}},computed:{isEditMode(){return!!this.activityCategoryToEdit}},watch:{activityCategoryToEdit:{handler(a){a?(this.formData.iddesa=a.id_desa||a.iddesa||"",this.formData.namakategorikegiatan=a.namakategorikegiatan):this.formData={...Xy},this.errorMessage=null},immediate:!0,deep:!0}},created(){this.fetchDesaList()},methods:{closeModal(){this.$emit("close")},handleOverlayClick(a){a.target===a.currentTarget&&this.closeModal()},async fetchDesaList(){this.isDesaListLoading=!0;try{const a=await Mi({limit:-1});this.desaList=a.data?.data||a.data?.[0]?.data||[]}catch(a){this.toast.error("Gagal memuat daftar desa")}finally{this.isDesaListLoading=!1}},async submitForm(){this.isLoading=!0,this.errorMessage=null;const a=new FormData;a.append("record[namakategorikegiatan]",this.formData.namakategorikegiatan),a.append("record[id_desa]",this.formData.iddesa);try{let e;this.isEditMode?(a.append("_method","PUT"),e=await Gf(this.activityCategoryToEdit.idkategoriartikel,a),this.toast.success("Data kategori kegiatan berhasil diperbarui")):(e=await $f(a),this.toast.success("Data kategori kegiatan berhasil ditambah")),this.$emit("save-successful",e.data.data),this.closeModal()}catch(e){this.errorMessage=e.response?.data?.failed||e.response?.data?.message||"Gagal menyimpan data. Silakan coba lagi",this.toast.error("Gagal menyimpan data kategori kegiatan")}finally{this.isLoading=!1}}}};const Ty=(0,r.A)(xy,[["render",Fy],["__scopeId","data-v-3f074b27"]]);var Sy=Ty,By={components:{AddEditActivityCategoryModal:Sy},data(){return{activityCategories:[],isLoading:!1,sortColumn:"created_at",sortDirection:"asc",isModalVisible:!1,currentPage:1,perPage:10,totalItems:0,activityCategoryBeingEdited:null,isFilterVisible:!1,filters:{namakategorikegiatan:"",namawilayah:""}}},computed:{paginatedActivityCategories(){return this.activityCategories},totalPages(){return this.perPage<=0?1:Math.ceil(this.totalItems/this.perPage)},pageNumbers(){const a=[],e=5;let t=Math.max(1,this.currentPage-Math.floor(e/2)),s=t+e-1;s>this.totalPages&&(s=this.totalPages,t=Math.max(1,s-e+1));for(let i=t;i<=s;i++)a.push(i);return a}},watch:{currentPage(){this.fetchActivityCategories()},perPage(){this.currentPage=1,this.fetchActivityCategories()}},async mounted(){this.toast=(0,ln.dj)(),await this.fetchActivityCategories()},methods:{openAddModal(){this.activityCategoryBeingEdited=null,this.isModalVisible=!0},openEditModal(a){this.activityCategoryBeingEdited={...a},this.isModalVisible=!0},closeModal(){this.isModalVisible=!1,this.activityCategoryBeingEdited=null},openSkFile(a){a?window.open(a,"_blank"):this.toast.info("Tidak ada file SK yang tersedia.",{icon:"fa fa-info-circle"})},handleSaveSuccessful(){this.closeModal(),this.fetchActivityCategories()},async fetchActivityCategories(){this.isLoading=!0;try{const a={act:"kategori-kegiatan",page:this.currentPage,limit:this.perPage,order:this.sortColumn?`${this.sortColumn} ${this.sortDirection}`:"",group:""},e=Object.entries(this.filters).filter(([,a])=>""!==a&&null!==a).map(([a,e])=>`${a}=${e}`);e.length>0?a.filter=e.join(","):a.filter="";const t=await Of(a),s=t.data?.data||t.data?.[0]?.data||[],i=t.data?.meta?.pagination||t.data?.[0]?.meta?.pagination||{};this.activityCategories=s,this.totalItems=i.total||s.length}catch(a){console.error("Error fetching activityCategories:",a),this.toast.error("Gagal memuat data kategori kegiatan",{icon:"fa fa-times"})}finally{this.isLoading=!1}},advancedDeleteAlert(a){this.$swal({title:"Hapus Data Kategori Kegiatan",text:"Apakah Anda yakin ingin menghapus data ini?",icon:"warning",showCancelButton:!0,confirmButtonText:'<i class="fa fa-check me-2"></i> Hapus!',confirmButtonColor:"#d33",cancelButtonText:'<i class="fa fa-times me-2"></i> Batal',cancelButtonColor:"#efefef",reverseButtons:!0}).then(async e=>{if(e.isConfirmed)try{await Jf(a),1===this.activityCategories.length&&this.currentPage>1?this.currentPage--:this.fetchActivityCategories(),this.toast.success("Data kategori kegiatan berhasil dihapus",{icon:"fa fa-check"})}catch(t){this.toast.error("Gagal menghapus data kategori kegiatan",{icon:"fa fa-times"})}})},sortBy(a){this.sortColumn===a?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=a,this.sortDirection="asc"),this.fetchActivityCategories()},changePage(a){a>=1&&a<=this.totalPages&&(this.currentPage=a)},toggleFilterVisibility(){this.isFilterVisible=!this.isFilterVisible},applyFilters(){this.currentPage=1,this.fetchActivityCategories()},resetFilters(){this.filters.namadesa="",this.filters.tahunawal="",this.filters.tahunakhir="",this.filters.tanggal_sk="",this.sortColumn="created_at",this.sortDirection="desc",this.currentPage=1,this.fetchActivityCategories()}}};const Ay=(0,r.A)(By,[["render",hy],["__scopeId","data-v-7b461f4a"]]);var _y=Ay,jy={components:{ActivityCategoryTable:_y}};const Vy=(0,r.A)(jy,[["render",TL]]);var Iy=Vy;const Ny={class:"container-fluid"},Uy={class:"row"};function Ry(a,e,t,s,i,l){const o=(0,n.g2)("Breadcrumbs"),r=(0,n.g2)("VehiclesTable");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(o,{main:"Aset/Inventory",title:a.$route.meta.title},null,8,["title"]),(0,n.Lk)("div",Ny,[(0,n.Lk)("div",Uy,[(0,n.bF)(r)])])])}const Qy={class:"col-sm-12"},Wy={class:"card"},Ky={class:"card-body"},Oy={class:"d-flex justify-content-end align-items-start mb-3"},$y={class:"d-flex gap-2"},Gy={key:0,class:"fa fa-angle-up me-2"},Jy={key:1,class:"fa fa-angle-down me-2"},qy={key:0,class:"border p-3 mb-3 rounded filter-section"},Hy={class:"row g-3"},Yy={class:"col-md-3"},zy={class:"col-md-3"},Zy={class:"col-md-3"},av={class:"col-md-3"},ev=["value"],tv={class:"d-flex justify-content-end gap-2 mt-3"},sv={class:"table-responsive signal-table"},iv={class:"table table-hover"},lv={key:0,class:"fa fa-sort-asc"},nv={key:1,class:"fa fa-sort-desc"},ov={key:2,class:"fa fa-sort"},rv={key:0,class:"fa fa-sort-asc"},cv={key:1,class:"fa fa-sort-desc"},dv={key:2,class:"fa fa-sort"},uv={key:0,class:"fa fa-sort-asc"},mv={key:1,class:"fa fa-sort-desc"},kv={key:2,class:"fa fa-sort"},hv={key:0,class:"fa fa-sort-asc"},gv={key:1,class:"fa fa-sort-desc"},pv={key:2,class:"fa fa-sort"},bv={key:0},fv={scope:"row"},Lv={class:"text-muted"},yv={class:"btn-group"},vv=["onClick"],Cv=["onClick"],Pv=["onClick"],Ev={key:0},Dv={class:"d-flex flex-column flex-md-row justify-content-md-between align-items-center mt-3 px-3 pb-3"},Mv={class:"mt-2"},wv={key:0,class:"text-muted"},Fv={key:0,class:"d-flex align-items-center flex-wrap gap-2 mt-2"},Xv={class:"pagination mb-0"},xv={key:0,class:"page-item"},Tv={key:1,class:"page-item disabled"},Sv=["onClick"],Bv={key:2,class:"page-item disabled"},Av={key:3,class:"page-item"};function _v(a,e,t,s,i,o){const r=(0,n.g2)("add-edit-vehicle-modal"),c=(0,n.g2)("detail-vehicle-modal");return(0,n.uX)(),(0,n.CE)("div",Qy,[i.isModalVisible?((0,n.uX)(),(0,n.Wv)(r,{key:0,"vehicle-to-edit":i.vehicleBeingEdited,onClose:o.closeModal,onSaveSuccessful:o.handleSaveSuccessful},null,8,["vehicle-to-edit","onClose","onSaveSuccessful"])):(0,n.Q3)("",!0),i.isDetailModalVisible?((0,n.uX)(),(0,n.Wv)(c,{key:1,"vehicle-to-view":i.vehicleBeingViewed,onClose:o.closeDetailModal},null,8,["vehicle-to-view","onClose"])):(0,n.Q3)("",!0),(0,n.Lk)("div",Wy,[e[43]||(e[43]=(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("h3",null,"Daftar Aset Kendaraan")],-1)),(0,n.Lk)("div",Ky,[(0,n.Lk)("div",Oy,[(0,n.Lk)("div",$y,[(0,n.Lk)("button",{class:"btn btn-outline-light txt-dark",onClick:e[0]||(e[0]=(...a)=>o.toggleFilterVisibility&&o.toggleFilterVisibility(...a))},[i.isFilterVisible?((0,n.uX)(),(0,n.CE)("i",Gy)):((0,n.uX)(),(0,n.CE)("i",Jy)),(0,n.Lk)("span",null,(0,k.v_)(i.isFilterVisible?"Sembunyikan":"Tampilkan")+" Filter",1)]),(0,n.Lk)("button",{class:"btn btn-success",onClick:e[1]||(e[1]=(...a)=>o.openAddModal&&o.openAddModal(...a))},e[16]||(e[16]=[(0,n.Lk)("i",{class:"fa fa-plus me-2"},null,-1),(0,n.Lk)("span",null," Tambah Data",-1)]))])]),i.isFilterVisible?((0,n.uX)(),(0,n.CE)("div",qy,[(0,n.Lk)("div",Hy,[(0,n.Lk)("div",Yy,[e[17]||(e[17]=(0,n.Lk)("label",{for:"filterItemName",class:"form-label"},"Nama Barang",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterItemName",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.filters.namabarang=a),placeholder:"Filter berdasarkan nama barang"},null,512),[[l.Jo,i.filters.namabarang]])]),(0,n.Lk)("div",zy,[e[18]||(e[18]=(0,n.Lk)("label",{for:"filterPoliceNumber",class:"form-label"},"Nomor Polisi",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterPoliceNumber",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=a=>i.filters.nomorpolisi=a),placeholder:"Filter berdasarkan nomor polisi"},null,512),[[l.Jo,i.filters.nomorpolisi]])]),(0,n.Lk)("div",Zy,[e[19]||(e[19]=(0,n.Lk)("label",{for:"filterVillageName",class:"form-label"},"Nama Desa",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterVillageName",class:"form-control","onUpdate:modelValue":e[4]||(e[4]=a=>i.filters.namawilayah=a),placeholder:"Filter berdasarkan nama desa"},null,512),[[l.Jo,i.filters.namawilayah]])]),(0,n.Lk)("div",av,[e[21]||(e[21]=(0,n.Lk)("label",{for:"filterCondition",class:"form-label"},"Kondisi",-1)),(0,n.bo)((0,n.Lk)("select",{id:"filterCondition",class:"form-select","onUpdate:modelValue":e[5]||(e[5]=a=>i.filters.idkondisi=a)},[e[20]||(e[20]=(0,n.Lk)("option",{value:""},"Semua Kondisi",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.kondisiList,a=>((0,n.uX)(),(0,n.CE)("option",{key:a.idkondisi,value:a.idkondisi},(0,k.v_)(a.namakondisi),9,ev))),128))],512),[[l.u1,i.filters.idkondisi]])])]),(0,n.Lk)("div",tv,[(0,n.Lk)("button",{class:"btn btn-secondary",onClick:e[6]||(e[6]=(...a)=>o.resetFilters&&o.resetFilters(...a))},e[22]||(e[22]=[(0,n.Lk)("i",{class:"fa fa-refresh me-2"},null,-1),(0,n.Lk)("span",null,"Reset Filter",-1)])),(0,n.Lk)("button",{class:"btn btn-primary",onClick:e[7]||(e[7]=(...a)=>o.applyFilters&&o.applyFilters(...a))},e[23]||(e[23]=[(0,n.Lk)("i",{class:"fa fa-search me-2"},null,-1),(0,n.Lk)("span",null,"Terapkan Filter",-1)]))])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",sv,[(0,n.Lk)("table",iv,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[e[28]||(e[28]=(0,n.Lk)("th",{scope:"col"},"No",-1)),(0,n.Lk)("th",{scope:"col",onClick:e[8]||(e[8]=a=>o.sortBy("namabarang"))},[e[24]||(e[24]=(0,n.eW)(" Nama Barang / Merk ")),"namabarang"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",lv)):"namabarang"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",nv)):((0,n.uX)(),(0,n.CE)("i",ov))]),(0,n.Lk)("th",{scope:"col",onClick:e[9]||(e[9]=a=>o.sortBy("nomorpolisi"))},[e[25]||(e[25]=(0,n.eW)(" Nomor Polisi ")),"nomorpolisi"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",rv)):"nomorpolisi"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",cv)):((0,n.uX)(),(0,n.CE)("i",dv))]),(0,n.Lk)("th",{scope:"col",onClick:e[10]||(e[10]=a=>o.sortBy("namawilayah"))},[e[26]||(e[26]=(0,n.eW)(" Nama Desa ")),"namawilayah"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",uv)):"namawilayah"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",mv)):((0,n.uX)(),(0,n.CE)("i",kv))]),(0,n.Lk)("th",{scope:"col",onClick:e[11]||(e[11]=a=>o.sortBy("namakondisi"))},[e[27]||(e[27]=(0,n.eW)(" Kondisi ")),"namakondisi"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",hv)):"namakondisi"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",gv)):((0,n.uX)(),(0,n.CE)("i",pv))]),e[29]||(e[29]=(0,n.Lk)("th",{scope:"col"},"Aksi",-1))])]),(0,n.Lk)("tbody",null,[i.isLoading?((0,n.uX)(),(0,n.CE)("tr",bv,e[30]||(e[30]=[(0,n.Lk)("td",{colspan:"7",class:"text-center p-5"},[(0,n.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,n.Lk)("span",{class:"visually-hidden"},"Loading...")]),(0,n.Lk)("p",{class:"mt-2"},"Memuat data...")],-1)]))):((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.paginatedVehicles,(a,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:a.idkendaraan},[(0,n.Lk)("th",fv,(0,k.v_)((i.currentPage-1)*i.perPage+t+1),1),(0,n.Lk)("td",null,[(0,n.eW)((0,k.v_)(a.namabarang)+" ",1),e[31]||(e[31]=(0,n.Lk)("br",null,null,-1)),e[32]||(e[32]=(0,n.eW)()),(0,n.Lk)("small",Lv,(0,k.v_)(a.merk),1)]),(0,n.Lk)("td",null,(0,k.v_)(a.nomorpolisi||"-"),1),(0,n.Lk)("td",null,(0,k.v_)(a.wilayah?.namawilayah||"-"),1),(0,n.Lk)("td",null,(0,k.v_)(a.kondisi?.namakondisi||"-"),1),(0,n.Lk)("td",null,[(0,n.Lk)("div",yv,[(0,n.Lk)("button",{class:"btn btn-info btn-sm",onClick:e=>o.openDetailModal(a),title:"Lihat Detail"},e[33]||(e[33]=[(0,n.Lk)("i",{class:"fa fa-eye"},null,-1)]),8,vv),(0,n.Lk)("button",{class:"btn btn-primary btn-sm",onClick:e=>o.openEditModal(a),title:"Ubah Data"},e[34]||(e[34]=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)]),8,Cv),(0,n.Lk)("button",{class:"btn btn-danger sweet-11 btn-sm",type:"button",onClick:e=>o.advancedDeleteAlert(a.idkendaraan),title:"Hapus Data"},e[35]||(e[35]=[(0,n.Lk)("i",{class:"fa fa-trash"},null,-1)]),8,Pv)])])]))),128)),0===o.paginatedVehicles.length?((0,n.uX)(),(0,n.CE)("tr",Ev,e[36]||(e[36]=[(0,n.Lk)("td",{colspan:"7",class:"text-center"},"Tidak ada data yang cocok atau tersedia.",-1)]))):(0,n.Q3)("",!0)],64))])]),(0,n.Lk)("div",Dv,[(0,n.Lk)("div",Mv,[i.totalItems>0?((0,n.uX)(),(0,n.CE)("span",wv,[e[37]||(e[37]=(0,n.eW)(" Menampilkan ")),(0,n.Lk)("strong",null,(0,k.v_)((i.currentPage-1)*i.perPage+1),1),e[38]||(e[38]=(0,n.eW)(" - ")),(0,n.Lk)("strong",null,(0,k.v_)(Math.min(i.currentPage*i.perPage,i.totalItems)),1),e[39]||(e[39]=(0,n.eW)(" dari ")),(0,n.Lk)("strong",null,(0,k.v_)(i.totalItems),1),e[40]||(e[40]=(0,n.eW)(" data "))])):(0,n.Q3)("",!0)]),-1!==i.perPage&&o.totalPages>1?((0,n.uX)(),(0,n.CE)("nav",Fv,[(0,n.Lk)("ul",Xv,[(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[12]||(e[12]=a=>o.changePage(i.currentPage-1))},"Prev")],2),o.pageNumbers[0]>1?((0,n.uX)(),(0,n.CE)("li",xv,[(0,n.Lk)("button",{class:"page-link",onClick:e[13]||(e[13]=a=>o.changePage(1))},"1")])):(0,n.Q3)("",!0),o.pageNumbers[0]>2?((0,n.uX)(),(0,n.CE)("li",Tv,e[41]||(e[41]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.pageNumbers,a=>((0,n.uX)(),(0,n.CE)("li",{key:a,class:(0,k.C4)(["page-item",{active:i.currentPage===a}])},[(0,n.Lk)("button",{class:"page-link",onClick:e=>o.changePage(a)},(0,k.v_)(a),9,Sv)],2))),128)),o.pageNumbers.slice(-1)[0]<o.totalPages-1?((0,n.uX)(),(0,n.CE)("li",Bv,e[42]||(e[42]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),o.pageNumbers.slice(-1)[0]<o.totalPages?((0,n.uX)(),(0,n.CE)("li",Av,[(0,n.Lk)("button",{class:"page-link",onClick:e[14]||(e[14]=a=>o.changePage(o.totalPages))},(0,k.v_)(o.totalPages),1)])):(0,n.Q3)("",!0),(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:i.currentPage===o.totalPages}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[15]||(e[15]=a=>o.changePage(i.currentPage+1))},"Next")],2)])])):(0,n.Q3)("",!0)])])])])}const jv=(a={})=>Na.get("",{params:{act:"kendaraan",...a}}),Vv=a=>a?Na.get("",{params:{act:"kendaraan",key:a}}):Promise.reject(new Error("ID kendaraan tidak tersedia.")),Iv=a=>(a.append("act","kendaraan"),Na.post("",a)),Nv=(a,e)=>a?(e.append("act","kendaraan"),e.append("key",a),Na.post("",e)):Promise.reject(new Error("ID kendaraan tidak tersedia.")),Uv=a=>a?Na.delete("",{data:{act:"kendaraan",key:a}}):Promise.reject(new Error("ID kendaraan tidak tersedia.")),Rv=(a={})=>Na.get("",{params:{act:"kondisi",...a}}),Qv=a=>Na.post("",{act:"kondisi",record:a}),Wv=(a,e)=>a?Na.put("",{act:"kondisi",key:a,record:e}):Promise.reject(new Error("ID kondisi tidak tersedia.")),Kv=a=>a?Na.delete("",{data:{act:"kondisi",key:a}}):Promise.reject(new Error("ID kondisi tidak tersedia.")),Ov={class:"modal-header"},$v={class:"modal-title"},Gv={class:"modal-body"},Jv={class:"row"},qv={class:"col-md-6 mb-3"},Hv=["disabled"],Yv={disabled:"",value:""},zv=["value"],Zv={class:"col-md-6 mb-3"},aC={class:"row"},eC={class:"col-md-6 mb-3"},tC={class:"col-md-6 mb-3"},sC={class:"row"},iC={class:"col-md-4 mb-3"},lC={class:"col-md-4 mb-3"},nC={class:"col-md-4 mb-3"},oC={class:"row"},rC={class:"col-md-4 mb-3"},cC={class:"col-md-4 mb-3"},dC={class:"col-md-4 mb-3"},uC={class:"row"},mC={class:"col-md-4 mb-3"},kC={class:"col-md-4 mb-3"},hC={class:"col-md-4 mb-3"},gC={class:"row"},pC={class:"col-md-6 mb-3"},bC=["value"],fC={class:"col-md-6 mb-3"},LC=["value"],yC={class:"row"},vC={class:"col-md-6 mb-3"},CC=["value"],PC={class:"col-md-6 mb-3"},EC=["value"],DC={class:"mb-3"},MC={class:"mb-3"},wC={class:"mt-2"},FC={key:0},XC=["src"],xC={key:1},TC=["src"],SC={key:0,class:"alert alert-danger mt-3"},BC={class:"modal-footer"},AC=["disabled"],_C={key:0,class:"spinner-border spinner-border-sm",role:"status"},jC={key:1};function VC(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",{class:"modal-overlay",onClick:e[24]||(e[24]=(...a)=>o.handleOverlayClick&&o.handleOverlayClick(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[23]||(e[23]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",Ov,[(0,n.Lk)("h5",$v,(0,k.v_)(o.isEditMode?"Edit Data Kendaraan":"Tambah Data Kendaraan"),1),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",Gv,[(0,n.Lk)("form",{onSubmit:e[20]||(e[20]=(0,l.D$)((...a)=>o.submitForm&&o.submitForm(...a),["prevent"]))},[(0,n.Lk)("div",Jv,[(0,n.Lk)("div",qv,[e[25]||(e[25]=(0,n.Lk)("label",{class:"form-label"},"Nama Desa",-1)),(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":e[1]||(e[1]=a=>i.formData.iddesa=a),required:"",disabled:i.isListLoading},[(0,n.Lk)("option",Yv,(0,k.v_)(i.isListLoading?"Memuat...":"Pilih Desa"),1),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.desaList,a=>((0,n.uX)(),(0,n.CE)("option",{key:a.iddesa,value:a.iddesa},(0,k.v_)(a.wilayah.namawilayah),9,zv))),128))],8,Hv),[[l.u1,i.formData.iddesa]])]),(0,n.Lk)("div",Zv,[e[26]||(e[26]=(0,n.Lk)("label",{class:"form-label"},"Kode Aset",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.formData.kodeaset=a),placeholder:"Masukkan kode aset",required:""},null,512),[[l.Jo,i.formData.kodeaset]])])]),(0,n.Lk)("div",aC,[(0,n.Lk)("div",eC,[e[27]||(e[27]=(0,n.Lk)("label",{class:"form-label"},"Nomor Register",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=a=>i.formData.nomorregister=a),placeholder:"Masukkan nomor register"},null,512),[[l.Jo,i.formData.nomorregister]])]),(0,n.Lk)("div",tC,[e[28]||(e[28]=(0,n.Lk)("label",{class:"form-label"},"Nama Barang",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[4]||(e[4]=a=>i.formData.namabarang=a),placeholder:"Contoh: Sepeda Motor",required:""},null,512),[[l.Jo,i.formData.namabarang]])])]),(0,n.Lk)("div",sC,[(0,n.Lk)("div",iC,[e[29]||(e[29]=(0,n.Lk)("label",{class:"form-label"},"Merk / Tipe",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[5]||(e[5]=a=>i.formData.merk=a),placeholder:"Contoh: Honda Vario"},null,512),[[l.Jo,i.formData.merk]])]),(0,n.Lk)("div",lC,[e[30]||(e[30]=(0,n.Lk)("label",{class:"form-label"},"Ukuran Silinder (CC)",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[6]||(e[6]=a=>i.formData.ukuransilinder=a),placeholder:"Contoh: 150"},null,512),[[l.Jo,i.formData.ukuransilinder]])]),(0,n.Lk)("div",nC,[e[31]||(e[31]=(0,n.Lk)("label",{class:"form-label"},"Bahan Bakar",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[7]||(e[7]=a=>i.formData.bahanbakar=a),placeholder:"Contoh: Bensin"},null,512),[[l.Jo,i.formData.bahanbakar]])])]),(0,n.Lk)("div",oC,[(0,n.Lk)("div",rC,[e[32]||(e[32]=(0,n.Lk)("label",{class:"form-label"},"Nomor Mesin",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[8]||(e[8]=a=>i.formData.nomormesin=a),placeholder:"Masukkan nomor mesin"},null,512),[[l.Jo,i.formData.nomormesin]])]),(0,n.Lk)("div",cC,[e[33]||(e[33]=(0,n.Lk)("label",{class:"form-label"},"Nomor Rangka",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[9]||(e[9]=a=>i.formData.nomorrangka=a),placeholder:"Masukkan nomor rangka"},null,512),[[l.Jo,i.formData.nomorrangka]])]),(0,n.Lk)("div",dC,[e[34]||(e[34]=(0,n.Lk)("label",{class:"form-label"},"Nomor Polisi",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[10]||(e[10]=a=>i.formData.nomorpolisi=a),placeholder:"Contoh: AA 1234 BCD"},null,512),[[l.Jo,i.formData.nomorpolisi]])])]),(0,n.Lk)("div",uC,[(0,n.Lk)("div",mC,[e[35]||(e[35]=(0,n.Lk)("label",{class:"form-label"},"Tahun Pembuatan",-1)),(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control","onUpdate:modelValue":e[11]||(e[11]=a=>i.formData.tahunpembuatan=a),placeholder:"YYYY"},null,512),[[l.Jo,i.formData.tahunpembuatan]])]),(0,n.Lk)("div",kC,[e[36]||(e[36]=(0,n.Lk)("label",{class:"form-label"},"Tahun Pembelian",-1)),(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control","onUpdate:modelValue":e[12]||(e[12]=a=>i.formData.tahunpembelian=a),placeholder:"YYYY",required:""},null,512),[[l.Jo,i.formData.tahunpembelian]])]),(0,n.Lk)("div",hC,[e[37]||(e[37]=(0,n.Lk)("label",{class:"form-label"},"Harga Pembelian (Rp)",-1)),(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control","onUpdate:modelValue":e[13]||(e[13]=a=>i.formData.hargapembelian=a),placeholder:"Contoh: 15000000"},null,512),[[l.Jo,i.formData.hargapembelian]])])]),(0,n.Lk)("div",gC,[(0,n.Lk)("div",pC,[e[39]||(e[39]=(0,n.Lk)("label",{class:"form-label"},"Kondisi",-1)),(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":e[14]||(e[14]=a=>i.formData.idkondisi=a),required:""},[e[38]||(e[38]=(0,n.Lk)("option",{disabled:"",value:""},"Pilih Kondisi",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.kondisiList,a=>((0,n.uX)(),(0,n.CE)("option",{key:a.idkondisi,value:a.idkondisi},(0,k.v_)(a.namakondisi),9,bC))),128))],512),[[l.u1,i.formData.idkondisi]])]),(0,n.Lk)("div",fC,[e[41]||(e[41]=(0,n.Lk)("label",{class:"form-label"},"Keberadaan Fisik",-1)),(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":e[15]||(e[15]=a=>i.formData.idkeberadaanfisik=a),required:""},[e[40]||(e[40]=(0,n.Lk)("option",{disabled:"",value:""},"Pilih Keberadaan Fisik",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.keberadaanFisikList,a=>((0,n.uX)(),(0,n.CE)("option",{key:a.idkeberadaanfisik,value:a.idkeberadaanfisik},(0,k.v_)(a.namakeberadaanfisik),9,LC))),128))],512),[[l.u1,i.formData.idkeberadaanfisik]])])]),(0,n.Lk)("div",yC,[(0,n.Lk)("div",vC,[e[43]||(e[43]=(0,n.Lk)("label",{class:"form-label"},"Perolehan",-1)),(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":e[16]||(e[16]=a=>i.formData.idperolehan=a),required:""},[e[42]||(e[42]=(0,n.Lk)("option",{disabled:"",value:""},"Pilih Perolehan",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.perolehanList,a=>((0,n.uX)(),(0,n.CE)("option",{key:a.idperolehan,value:a.idperolehan},(0,k.v_)(a.namaperolehan),9,CC))),128))],512),[[l.u1,i.formData.idperolehan]])]),(0,n.Lk)("div",PC,[e[45]||(e[45]=(0,n.Lk)("label",{class:"form-label"},"Sumber Anggaran",-1)),(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":e[17]||(e[17]=a=>i.formData.idsumberanggaran=a),required:""},[e[44]||(e[44]=(0,n.Lk)("option",{disabled:"",value:""},"Pilih Sumber Anggaran",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.sumberAnggaranList,a=>((0,n.uX)(),(0,n.CE)("option",{key:a.idsumberanggaran,value:a.idsumberanggaran},(0,k.v_)(a.namasumberanggaran),9,EC))),128))],512),[[l.u1,i.formData.idsumberanggaran]])])]),(0,n.Lk)("div",DC,[e[46]||(e[46]=(0,n.Lk)("label",{class:"form-label"},"Keterangan",-1)),(0,n.bo)((0,n.Lk)("textarea",{class:"form-control","onUpdate:modelValue":e[18]||(e[18]=a=>i.formData.keterangan=a),rows:"3",placeholder:"Tambahkan keterangan jika ada"},null,512),[[l.Jo,i.formData.keterangan]])]),(0,n.Lk)("div",MC,[e[47]||(e[47]=(0,n.Lk)("label",{class:"form-label"},"Upload Foto",-1)),(0,n.Lk)("input",{type:"file",class:"form-control",accept:"image/*",onChange:e[19]||(e[19]=(...a)=>o.handleFotoUpload&&o.handleFotoUpload(...a))},null,32),(0,n.Lk)("div",wC,[i.fotoPreviewUrl?((0,n.uX)(),(0,n.CE)("div",FC,[(0,n.Lk)("img",{src:i.fotoPreviewUrl,alt:"Preview Foto",class:"img-thumbnail",style:{"max-width":"150px","max-height":"150px"}},null,8,XC)])):o.isEditMode&&i.formData.foto?((0,n.uX)(),(0,n.CE)("div",xC,[(0,n.Lk)("img",{src:i.formData.foto,alt:"Foto Saat Ini",class:"img-thumbnail",style:{"max-width":"150px","max-height":"150px"}},null,8,TC)])):(0,n.Q3)("",!0)])]),i.errorMessage?((0,n.uX)(),(0,n.CE)("div",SC,(0,k.v_)(i.errorMessage),1)):(0,n.Q3)("",!0)],32)]),(0,n.Lk)("div",BC,[(0,n.Lk)("button",{type:"button",class:"btn btn-danger",onClick:e[21]||(e[21]=(...a)=>o.closeModal&&o.closeModal(...a))},"Batal"),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[22]||(e[22]=(...a)=>o.submitForm&&o.submitForm(...a)),disabled:i.isLoading},[i.isLoading?((0,n.uX)(),(0,n.CE)("span",_C)):((0,n.uX)(),(0,n.CE)("span",jC,"Simpan"))],8,AC)])])])])}const IC=(a={})=>Na.get("",{params:{act:"perolehan",...a}}),NC=a=>Na.post("",{act:"perolehan",record:a}),UC=(a,e)=>a?Na.put("",{act:"perolehan",key:a,record:e}):Promise.reject(new Error("ID perolehan tidak tersedia.")),RC=a=>a?Na.delete("",{data:{act:"perolehan",key:a}}):Promise.reject(new Error("ID perolehan tidak tersedia.")),QC=(a={})=>Na.get("",{params:{act:"sumber-anggaran",...a}}),WC=a=>Na.post("",{act:"sumber-anggaran",record:a}),KC=(a,e)=>a?Na.put("",{act:"sumber-anggaran",key:a,record:e}):Promise.reject(new Error("ID sumber anggaran tidak tersedia.")),OC=a=>a?Na.delete("",{data:{act:"sumber-anggaran",key:a}}):Promise.reject(new Error("ID sumber anggaran tidak tersedia.")),$C=(a={})=>Na.get("",{params:{act:"keberadaan-fisik",...a}}),GC=a=>Na.post("",{act:"keberadaan-fisik",record:a}),JC=(a,e)=>a?Na.put("",{act:"keberadaan-fisik",key:a,record:e}):Promise.reject(new Error("ID keberadaan fisik tidak tersedia.")),qC=a=>a?Na.delete("",{data:{act:"keberadaan-fisik",key:a}}):Promise.reject(new Error("ID keberadaan fisik tidak tersedia.")),HC={iddesa:"",idkeberadaanfisik:"",idkondisi:"",idperolehan:"",idsumberanggaran:"",kodeaset:"",nomorregister:"",namabarang:"",merk:"",ukuransilinder:"",bahanbakar:"",tahunpembuatan:"",nomormesin:"",nomorrangka:"",nomorpolisi:"",tahunpembelian:"",hargapembelian:"",keterangan:"",foto:null};var YC={name:"addEditProfileModal",props:{vehicleToEdit:{type:Object,default:null}},data(){return{formData:{...HC},selectedFotoFile:null,fotoPreviewUrl:null,desaList:[],keberadaanFisikList:[],kondisiList:[],perolehanList:[],sumberAnggaranList:[],isListLoading:!1,isBusinessFieldsLoading:!1,isLoading:!1,errorMessage:null,toast:(0,ln.dj)()}},computed:{isEditMode(){return!!this.vehicleToEdit}},watch:{vehicleToEdit:{handler(a){a?(this.formData.iddesa=a.iddesa,this.formData.idkeberadaanfisik=a.idkeberadaanfisik,this.formData.idkondisi=a.idkondisi,this.formData.idperolehan=a.idperolehan,this.formData.idsumberanggaran=a.idsumberanggaran,this.formData.kodeaset=a.kodeaset,this.formData.nomorregister=a.nomorregister,this.formData.namabarang=a.namabarang,this.formData.merk=a.merk,this.formData.ukuransilinder=a.ukuransilinder,this.formData.bahanbakar=a.bahanbakar,this.formData.tahunpembuatan=a.tahunpembuatan,this.formData.nomormesin=a.nomormesin,this.formData.nomorrangka=a.nomorrangka,this.formData.nomorpolisi=a.nomorpolisi,this.formData.tahunpembelian=a.tahunpembelian,this.formData.hargapembelian=a.hargapembelian,this.formData.keterangan=a.keterangan,this.formData.foto=a.foto):this.formData={...HC},this.selectedFotoFile=null,this.fotoPreviewUrl=null,this.errorMessage=null},immediate:!0,deep:!0}},created(){this.fetchDesaList(),this.fetchKeberadaanFisikList(),this.fetchkondisiList(),this.fetchPerolehanList(),this.fetchSumberAnggaranList()},beforeUnmount(){this.fotoPreviewUrl&&URL.revokeObjectURL(this.fotoPreviewUrl)},methods:{closeModal(){this.$emit("close")},handleOverlayClick(a){a.target===a.currentTarget&&this.closeModal()},async fetchDesaList(){this.isListLoading=!0;try{const a=await Mi({limit:-1});this.desaList=a.data?.data||a.data?.[0]?.data||[]}catch(a){this.toast.error("Gagal memuat daftar desa")}finally{this.isListLoading=!1}},async fetchKeberadaanFisikList(){this.isListLoading=!0;try{const a=await $C({limit:-1});this.keberadaanFisikList=a.data?.data||a.data?.[0]?.data||[]}catch(a){this.toast.error("Gagal memuat daftar keberadaan fisik")}finally{this.isListLoading=!1}},async fetchPerolehanList(){this.isListLoading=!0;try{const a=await IC({limit:-1});this.perolehanList=a.data?.data||a.data?.[0]?.data||[]}catch(a){this.toast.error("Gagal memuat daftar perolehan")}finally{this.isListLoading=!1}},async fetchSumberAnggaranList(){this.isListLoading=!0;try{const a=await QC({limit:-1});this.sumberAnggaranList=a.data?.data||a.data?.[0]?.data||[]}catch(a){this.toast.error("Gagal memuat daftar sumber anggaran")}finally{this.isListLoading=!1}},async fetchkondisiList(){this.isListLoading=!0;try{const a=await Rv({limit:-1});this.kondisiList=a.data?.data||a.data?.[0]?.data||[]}catch(a){this.toast.error("Gagal memuat daftar kondisi")}finally{this.isListLoading=!1}},handleFotoUpload(a){const e=a.target.files[0];if(this.fotoPreviewUrl&&URL.revokeObjectURL(this.fotoPreviewUrl),!e)return this.selectedFotoFile=null,void(this.fotoPreviewUrl=null);this.selectedFotoFile=e,this.fotoPreviewUrl=URL.createObjectURL(e)},async submitForm(){this.isLoading=!0,this.errorMessage=null;const a=new FormData;a.append("record[iddesa]",this.formData.iddesa),a.append("record[idkeberadaanfisik]",this.formData.idkeberadaanfisik),a.append("record[idkondisi]",this.formData.idkondisi),a.append("record[idperolehan]",this.formData.idperolehan),a.append("record[idsumberanggaran]",this.formData.idsumberanggaran),a.append("record[kodeaset]",this.formData.kodeaset),a.append("record[nomorregister]",this.formData.nomorregister),a.append("record[namabarang]",this.formData.namabarang),a.append("record[merk]",this.formData.merk),a.append("record[ukuransilinder]",this.formData.ukuransilinder),a.append("record[bahanbakar]",this.formData.bahanbakar),a.append("record[tahunpembuatan]",this.formData.tahunpembuatan),a.append("record[nomormesin]",this.formData.nomormesin),a.append("record[nomorrangka]",this.formData.nomorrangka),a.append("record[nomorpolisi]",this.formData.nomorpolisi),a.append("record[tahunpembelian]",this.formData.tahunpembelian),a.append("record[hargapembelian]",this.formData.hargapembelian),a.append("record[keterangan]",this.formData.keterangan),this.selectedFotoFile&&a.append("upload_foto",this.selectedFotoFile);try{let e;this.isEditMode?(a.append("_method","PUT"),e=await Nv(this.vehicleToEdit.idkendaraan,a),this.toast.success("Data kendaraan berhasil diperbarui")):(e=await Iv(a),this.toast.success("Data kendaraan berhasil ditambah")),this.$emit("save-successful",e.data.data),this.closeModal()}catch(e){this.errorMessage=e.response?.data?.failed||e.response?.data?.message||"Gagal menyimpan data. Silakan coba lagi",this.toast.error("Gagal menyimpan data kendaraan")}finally{this.isLoading=!1}}}};const zC=(0,r.A)(YC,[["render",VC],["__scopeId","data-v-4cd09606"]]);var ZC=zC;const aP={class:"modal-header"},eP={class:"modal-body"},tP={key:0,class:"text-center p-5"},sP={key:1,class:"text-center p-5 text-danger"},iP={key:0,class:"text-muted"},lP={key:2,class:"vehicle-container"},nP={class:"text-center mb-4"},oP=["src"],rP={key:1,src:"https://placehold.co/150x150/EBF4FF/7F9CF5?text=Foto",alt:"Foto Default",class:"foto"},cP={class:"nama-usaha mt-3"},dP={class:"alamat-usaha"},uP={class:"detail-section"},mP={class:"row"},kP={class:"col-md-6"},hP={class:"text-content"},gP={class:"list-unstyled"},pP={class:"col-md-6"},bP={class:"detail-section"},fP={class:"row"},LP={class:"col-md-6"},yP={class:"text-content"},vP={class:"list-unstyled"},CP={class:"col-md-6"},PP={class:"text-content"},EP={class:"list-unstyled"},DP={key:0,class:"detail-section"},MP={class:"text-content"},wP={class:"modal-footer"};function FP(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",{class:"modal-overlay",onClick:e[3]||(e[3]=(...a)=>o.closeModal&&o.closeModal(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[2]||(e[2]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",aP,[e[4]||(e[4]=(0,n.Lk)("h5",{class:"modal-title"},"Detail Data Kendaraan",-1)),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",eP,[i.isLoading?((0,n.uX)(),(0,n.CE)("div",tP,e[5]||(e[5]=[(0,n.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,n.Lk)("span",{class:"visually-hidden"},"Loading...")],-1),(0,n.Lk)("p",{class:"mt-2"},"Memuat data...",-1)]))):i.error?((0,n.uX)(),(0,n.CE)("div",sP,[e[6]||(e[6]=(0,n.Lk)("i",{class:"fa fa-exclamation-triangle fa-3x mb-3"},null,-1)),e[7]||(e[7]=(0,n.Lk)("h4",null,"Terjadi Kesalahan",-1)),(0,n.Lk)("p",null,(0,k.v_)(i.error),1),i.debugMessage?((0,n.uX)(),(0,n.CE)("small",iP,"Detail: "+(0,k.v_)(i.debugMessage),1)):(0,n.Q3)("",!0)])):i.vehicle?((0,n.uX)(),(0,n.CE)("div",lP,[(0,n.Lk)("div",nP,[i.vehicle.foto?((0,n.uX)(),(0,n.CE)("img",{key:0,src:i.vehicle.foto,alt:"Foto Kendaraan",class:"foto",onerror:"this.src='https://placehold.co/150x150/EBF4FF/7F9CF5?text=Foto'"},null,8,oP)):((0,n.uX)(),(0,n.CE)("img",rP)),(0,n.Lk)("h2",cP,(0,k.v_)(i.vehicle.namabarang||"Nama Kendaraan")+" - "+(0,k.v_)(i.vehicle.nomorpolisi||"N/A"),1),(0,n.Lk)("p",dP,(0,k.v_)(i.vehicle.merk||"Merk belum diatur"),1)]),e[27]||(e[27]=(0,n.Lk)("hr",null,null,-1)),(0,n.Lk)("div",uP,[e[16]||(e[16]=(0,n.Lk)("h4",null,[(0,n.Lk)("i",{class:"fa fa-id-card-o me-2"}),(0,n.eW)("Identitas & Status Utama")],-1)),(0,n.Lk)("div",mP,[(0,n.Lk)("div",kP,[(0,n.Lk)("div",hP,[(0,n.Lk)("ul",gP,[(0,n.Lk)("li",null,[e[8]||(e[8]=(0,n.Lk)("strong",null,"Kode Aset:",-1)),(0,n.eW)(" "+(0,k.v_)(i.vehicle.kodeaset||"-"),1)]),(0,n.Lk)("li",null,[e[9]||(e[9]=(0,n.Lk)("strong",null,"Nomor Register:",-1)),(0,n.eW)(" "+(0,k.v_)(i.vehicle.nomorregister||"-"),1)]),e[12]||(e[12]=(0,n.Lk)("hr",{class:"my-2"},null,-1)),(0,n.Lk)("li",null,[e[10]||(e[10]=(0,n.Lk)("strong",null,"Nomor Rangka:",-1)),(0,n.eW)(" "+(0,k.v_)(i.vehicle.nomorrangka||"-"),1)]),(0,n.Lk)("li",null,[e[11]||(e[11]=(0,n.Lk)("strong",null,"Nomor Mesin:",-1)),(0,n.eW)(" "+(0,k.v_)(i.vehicle.nomormesin||"-"),1)])])])]),(0,n.Lk)("div",pP,[e[13]||(e[13]=(0,n.Lk)("h5",null,[(0,n.Lk)("i",{class:"fa fa-map-marker me-2"}),(0,n.eW)("Asal Desa")],-1)),(0,n.Lk)("p",null,(0,k.v_)(i.vehicle.wilayah?.namawilayah||"-"),1),e[14]||(e[14]=(0,n.Lk)("h5",{class:"mt-3"},[(0,n.Lk)("i",{class:"fa fa-wrench me-2"}),(0,n.eW)("Kondisi Kendaraan")],-1)),(0,n.Lk)("p",null,(0,k.v_)(i.vehicle.kondisi?.namakondisi||"-"),1),e[15]||(e[15]=(0,n.Lk)("h5",{class:"mt-3"},[(0,n.Lk)("i",{class:"fa fa-check-square me-2"}),(0,n.eW)("Keberadaan Fisik")],-1)),(0,n.Lk)("p",null,(0,k.v_)(i.vehicle.fisik?.namakeberadaanfisik||"-"),1)])])]),e[28]||(e[28]=(0,n.Lk)("hr",null,null,-1)),(0,n.Lk)("div",bP,[e[24]||(e[24]=(0,n.Lk)("h4",null,[(0,n.Lk)("i",{class:"fa fa-cogs me-2"}),(0,n.eW)("Spesifikasi & Riwayat Perolehan")],-1)),(0,n.Lk)("div",fP,[(0,n.Lk)("div",LP,[(0,n.Lk)("div",yP,[(0,n.Lk)("ul",vP,[(0,n.Lk)("li",null,[e[17]||(e[17]=(0,n.Lk)("strong",null,"Ukuran Silinder:",-1)),(0,n.eW)(" "+(0,k.v_)(i.vehicle.ukuransilinder?i.vehicle.ukuransilinder+" cc":"-"),1)]),(0,n.Lk)("li",null,[e[18]||(e[18]=(0,n.Lk)("strong",null,"Bahan Bakar:",-1)),(0,n.eW)(" "+(0,k.v_)(i.vehicle.bahanbakar||"-"),1)]),(0,n.Lk)("li",null,[e[19]||(e[19]=(0,n.Lk)("strong",null,"Tahun Pembuatan:",-1)),(0,n.eW)(" "+(0,k.v_)(i.vehicle.tahunpembuatan||"-"),1)])])])]),(0,n.Lk)("div",CP,[(0,n.Lk)("div",PP,[(0,n.Lk)("ul",EP,[(0,n.Lk)("li",null,[e[20]||(e[20]=(0,n.Lk)("strong",null,"Sumber Perolehan:",-1)),(0,n.eW)(" "+(0,k.v_)(i.vehicle.perolehan?.namaperolehan||"-"),1)]),(0,n.Lk)("li",null,[e[21]||(e[21]=(0,n.Lk)("strong",null,"Tahun Pembelian:",-1)),(0,n.eW)(" "+(0,k.v_)(i.vehicle.tahunpembelian||"-"),1)]),(0,n.Lk)("li",null,[e[22]||(e[22]=(0,n.Lk)("strong",null,"Harga Pembelian:",-1)),(0,n.eW)(" "+(0,k.v_)(o.formattedHargaBeli),1)]),(0,n.Lk)("li",null,[e[23]||(e[23]=(0,n.Lk)("strong",null,"Sumber Anggaran:",-1)),(0,n.eW)(" "+(0,k.v_)(i.vehicle.anggaran?.namasumberanggaran||"-"),1)])])])])])]),i.vehicle.keterangan?((0,n.uX)(),(0,n.CE)("div",DP,[e[25]||(e[25]=(0,n.Lk)("hr",null,null,-1)),e[26]||(e[26]=(0,n.Lk)("h4",null,[(0,n.Lk)("i",{class:"fa fa-info-circle me-2"}),(0,n.eW)("Keterangan Tambahan")],-1)),(0,n.Lk)("p",MP,(0,k.v_)(i.vehicle.keterangan),1)])):(0,n.Q3)("",!0)])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",wP,[(0,n.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:e[1]||(e[1]=(...a)=>o.closeModal&&o.closeModal(...a))},"Tutup")])])])}var XP={name:"DetailKendaraanModal",props:{vehicleToView:{type:Object,required:!0}},emits:["close"],data(){return{vehicle:null,isLoading:!1,error:null,debugMessage:""}},computed:{formattedHargaBeli(){if(!this.vehicle||!this.vehicle.hargapembelian)return"-";const a=parseInt(this.vehicle.hargapembelian,10);return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a)}},methods:{closeModal(){this.$emit("close")},async fetchKendaraanDetail(){const a=this.vehicleToView?.idkendaraan;if(a){this.isLoading=!0,this.error=null,this.debugMessage="";try{const e=await Vv(a),t=e.data;t&&t.length>0&&t[0].data&&t[0].data.length>0?this.vehicle=t[0].data[0]:(this.error="Data detail kendaraan tidak ditemukan atau format respons tidak sesuai.",this.debugMessage=`Struktur data yang diterima: ${JSON.stringify(e.data)}`)}catch(e){console.error("Gagal mengambil detail kendaraan:",e),this.error=e.message||"Terjadi kesalahan saat memuat data.",e.response&&(this.debugMessage=`Status: ${e.response.status} - Data: ${JSON.stringify(e.response.data)}`)}finally{this.isLoading=!1}}else this.error="ID kendaraan tidak valid atau tidak tersedia."}},mounted(){this.fetchKendaraanDetail()},watch:{vehicleToView:{handler(a,e){a?.idkendaraan!==e?.idkendaraan&&this.fetchKendaraanDetail()},deep:!0}}};const xP=(0,r.A)(XP,[["render",FP],["__scopeId","data-v-7b62b5be"]]);var TP=xP,SP={components:{AddEditVehicleModal:ZC,DetailVehicleModal:TP},data(){return{vehicles:[],kondisiList:[],isLoading:!1,sortColumn:"created_at",sortDirection:"asc",isModalVisible:!1,currentPage:1,perPage:10,totalItems:0,vehicleBeingEdited:null,isFilterVisible:!1,filters:{namabarang:"",nomorpolisi:"",namawilayah:"",idkondisi:""},isDetailModalVisible:!1,vehicleBeingViewed:null}},computed:{paginatedVehicles(){return this.vehicles},totalPages(){return this.perPage<=0?1:Math.ceil(this.totalItems/this.perPage)},pageNumbers(){const a=[],e=5;let t=Math.max(1,this.currentPage-Math.floor(e/2)),s=t+e-1;s>this.totalPages&&(s=this.totalPages,t=Math.max(1,s-e+1));for(let i=t;i<=s;i++)a.push(i);return a}},watch:{currentPage(){this.fetchVehicles()},perPage(){this.currentPage=1,this.fetchVehicles()}},async mounted(){this.toast=(0,ln.dj)(),await this.fetchVehicles(),await this.fetchConditions()},methods:{openAddModal(){this.vehicleBeingEdited=null,this.isModalVisible=!0},openEditModal(a){this.vehicleBeingEdited={...a},this.isModalVisible=!0},closeModal(){this.isModalVisible=!1,this.vehicleBeingEdited=null},openDetailModal(a){this.vehicleBeingViewed={...a},this.isDetailModalVisible=!0},closeDetailModal(){this.isDetailModalVisible=!1,this.vehicleBeingViewed=null},handleSaveSuccessful(){this.closeModal(),this.fetchVehicles()},async fetchVehicles(){this.isLoading=!0;try{const a={page:this.currentPage,limit:this.perPage,order:this.sortColumn?`${this.sortColumn} ${this.sortDirection}`:""},e=Object.entries(this.filters).filter(([,a])=>""!==a&&null!==a).map(([a,e])=>`${a}=${e}`);a.filter=e.length>0?e.join(","):"";const t=await jv(a),s=t.data?.data||t.data?.[0]?.data||[],i=t.data?.meta?.pagination||{};this.vehicles=s,this.totalItems=i.total||s.length}catch(a){console.error("Error fetching vehicles:",a),this.toast.error("Gagal memuat data kendaraan",{icon:"fa fa-times"})}finally{this.isLoading=!1}},async fetchConditions(){try{const a=await Rv({limit:-1});this.kondisiList=a.data?.data||a.data?.[0]?.data||[]}catch(a){this.toast.error("Gagal memuat daftar kondisi",{icon:"fa fa-times"})}},advancedDeleteAlert(a){this.$swal({title:"Hapus Data Kendaraan",text:"Apakah Anda yakin ingin menghapus data ini?",icon:"warning",showCancelButton:!0,confirmButtonText:'<i class="fa fa-check me-2"></i> Hapus!',confirmButtonColor:"#d33",cancelButtonText:'<i class="fa fa-times me-2"></i> Batal',cancelButtonColor:"#efefef",reverseButtons:!0}).then(async e=>{if(e.isConfirmed)try{await Uv(a),1===this.vehicles.length&&this.currentPage>1?this.currentPage--:this.fetchVehicles(),this.toast.success("Data kendaraan berhasil dihapus",{icon:"fa fa-check"})}catch(t){this.toast.error("Gagal menghapus data kendaraan",{icon:"fa fa-times"})}})},sortBy(a){this.sortColumn===a?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=a,this.sortDirection="asc"),this.fetchVehicles()},changePage(a){a>=1&&a<=this.totalPages&&(this.currentPage=a)},toggleFilterVisibility(){this.isFilterVisible=!this.isFilterVisible},applyFilters(){this.currentPage=1,this.fetchVehicles()},resetFilters(){this.filters.namabarang="",this.filters.nomorpolisi="",this.filters.namawilayah="",this.filters.idkondisi="",this.sortColumn="created_at",this.sortDirection="asc",this.currentPage=1,this.fetchVehicles()}}};const BP=(0,r.A)(SP,[["render",_v],["__scopeId","data-v-79428bfa"]]);var AP=BP,_P={components:{VehiclesTable:AP}};const jP=(0,r.A)(_P,[["render",Ry]]);var VP=jP;const IP={class:"container-fluid"},NP={class:"row"};function UP(a,e,t,s,i,l){const o=(0,n.g2)("Breadcrumbs"),r=(0,n.g2)("ItemsTable");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(o,{main:"Aset/Inventory",title:a.$route.meta.title},null,8,["title"]),(0,n.Lk)("div",IP,[(0,n.Lk)("div",NP,[(0,n.bF)(r)])])])}const RP={class:"col-sm-12"},QP={class:"card"},WP={class:"card-body"},KP={class:"d-flex justify-content-end align-items-start mb-3"},OP={class:"d-flex gap-2"},$P={key:0,class:"fa fa-angle-up me-2"},GP={key:1,class:"fa fa-angle-down me-2"},JP={key:0,class:"border p-3 mb-3 rounded filter-section"},qP={class:"row g-3"},HP={class:"col-md-3"},YP={class:"col-md-3"},zP={class:"col-md-3"},ZP={class:"col-md-3"},aE=["value"],eE={class:"d-flex justify-content-end gap-2 mt-3"},tE={class:"table-responsive signal-table"},sE={class:"table table-hover"},iE={key:0,class:"fa fa-sort-asc"},lE={key:1,class:"fa fa-sort-desc"},nE={key:2,class:"fa fa-sort"},oE={key:0,class:"fa fa-sort-asc"},rE={key:1,class:"fa fa-sort-desc"},cE={key:2,class:"fa fa-sort"},dE={key:0,class:"fa fa-sort-asc"},uE={key:1,class:"fa fa-sort-desc"},mE={key:2,class:"fa fa-sort"},kE={key:0,class:"fa fa-sort-asc"},hE={key:1,class:"fa fa-sort-desc"},gE={key:2,class:"fa fa-sort"},pE={key:0},bE={scope:"row"},fE={class:"text-muted"},LE={class:"btn-group"},yE=["onClick"],vE=["onClick"],CE=["onClick"],PE={key:0},EE={class:"d-flex flex-column flex-md-row justify-content-md-between align-items-center mt-3 px-3 pb-3"},DE={class:"mt-2"},ME={key:0,class:"text-muted"},wE={key:0,class:"d-flex align-items-center flex-wrap gap-2 mt-2"},FE={class:"pagination mb-0"},XE={key:0,class:"page-item"},xE={key:1,class:"page-item disabled"},TE=["onClick"],SE={key:2,class:"page-item disabled"},BE={key:3,class:"page-item"};function AE(a,e,t,s,i,o){const r=(0,n.g2)("add-edit-item-modal"),c=(0,n.g2)("detail-item-modal");return(0,n.uX)(),(0,n.CE)("div",RP,[i.isModalVisible?((0,n.uX)(),(0,n.Wv)(r,{key:0,"item-to-edit":i.itemBeingEdited,onClose:o.closeModal,onSaveSuccessful:o.handleSaveSuccessful},null,8,["item-to-edit","onClose","onSaveSuccessful"])):(0,n.Q3)("",!0),i.isDetailModalVisible?((0,n.uX)(),(0,n.Wv)(c,{key:1,"item-to-view":i.itemBeingViewed,onClose:o.closeDetailModal},null,8,["item-to-view","onClose"])):(0,n.Q3)("",!0),(0,n.Lk)("div",QP,[e[43]||(e[43]=(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("h3",null,"Daftar Aset Barang")],-1)),(0,n.Lk)("div",WP,[(0,n.Lk)("div",KP,[(0,n.Lk)("div",OP,[(0,n.Lk)("button",{class:"btn btn-outline-light txt-dark",onClick:e[0]||(e[0]=(...a)=>o.toggleFilterVisibility&&o.toggleFilterVisibility(...a))},[i.isFilterVisible?((0,n.uX)(),(0,n.CE)("i",$P)):((0,n.uX)(),(0,n.CE)("i",GP)),(0,n.Lk)("span",null,(0,k.v_)(i.isFilterVisible?"Sembunyikan":"Tampilkan")+" Filter",1)]),(0,n.Lk)("button",{class:"btn btn-success",onClick:e[1]||(e[1]=(...a)=>o.openAddModal&&o.openAddModal(...a))},e[16]||(e[16]=[(0,n.Lk)("i",{class:"fa fa-plus me-2"},null,-1),(0,n.Lk)("span",null," Tambah Data",-1)]))])]),i.isFilterVisible?((0,n.uX)(),(0,n.CE)("div",JP,[(0,n.Lk)("div",qP,[(0,n.Lk)("div",HP,[e[17]||(e[17]=(0,n.Lk)("label",{for:"filterItemName",class:"form-label"},"Nama Barang",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterItemName",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.filters.namabarang=a),placeholder:"Filter berdasarkan nama barang"},null,512),[[l.Jo,i.filters.namabarang]])]),(0,n.Lk)("div",YP,[e[18]||(e[18]=(0,n.Lk)("label",{for:"filterPoliceNumber",class:"form-label"},"Kode Barang",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterPoliceNumber",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=a=>i.filters.kodebarang=a),placeholder:"Filter berdasarkan kode barang"},null,512),[[l.Jo,i.filters.kodebarang]])]),(0,n.Lk)("div",zP,[e[19]||(e[19]=(0,n.Lk)("label",{for:"filterVillageName",class:"form-label"},"Nama Desa",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterVillageName",class:"form-control","onUpdate:modelValue":e[4]||(e[4]=a=>i.filters.namawilayah=a),placeholder:"Filter berdasarkan nama desa"},null,512),[[l.Jo,i.filters.namawilayah]])]),(0,n.Lk)("div",ZP,[e[21]||(e[21]=(0,n.Lk)("label",{for:"filterCondition",class:"form-label"},"Kondisi",-1)),(0,n.bo)((0,n.Lk)("select",{id:"filterCondition",class:"form-select","onUpdate:modelValue":e[5]||(e[5]=a=>i.filters.idkondisi=a)},[e[20]||(e[20]=(0,n.Lk)("option",{value:""},"Semua Kondisi",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.kondisiList,a=>((0,n.uX)(),(0,n.CE)("option",{key:a.idkondisi,value:a.idkondisi},(0,k.v_)(a.namakondisi),9,aE))),128))],512),[[l.u1,i.filters.idkondisi]])])]),(0,n.Lk)("div",eE,[(0,n.Lk)("button",{class:"btn btn-secondary",onClick:e[6]||(e[6]=(...a)=>o.resetFilters&&o.resetFilters(...a))},e[22]||(e[22]=[(0,n.Lk)("i",{class:"fa fa-refresh me-2"},null,-1),(0,n.Lk)("span",null,"Reset Filter",-1)])),(0,n.Lk)("button",{class:"btn btn-primary",onClick:e[7]||(e[7]=(...a)=>o.applyFilters&&o.applyFilters(...a))},e[23]||(e[23]=[(0,n.Lk)("i",{class:"fa fa-search me-2"},null,-1),(0,n.Lk)("span",null,"Terapkan Filter",-1)]))])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",tE,[(0,n.Lk)("table",sE,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[e[28]||(e[28]=(0,n.Lk)("th",{scope:"col"},"No",-1)),(0,n.Lk)("th",{scope:"col",onClick:e[8]||(e[8]=a=>o.sortBy("namabarang"))},[e[24]||(e[24]=(0,n.eW)(" Nama Barang / Merk ")),"namabarang"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",iE)):"namabarang"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",lE)):((0,n.uX)(),(0,n.CE)("i",nE))]),(0,n.Lk)("th",{scope:"col",onClick:e[9]||(e[9]=a=>o.sortBy("kodebarang"))},[e[25]||(e[25]=(0,n.eW)(" Kode Barang ")),"kodebarang"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",oE)):"kodebarang"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",rE)):((0,n.uX)(),(0,n.CE)("i",cE))]),(0,n.Lk)("th",{scope:"col",onClick:e[10]||(e[10]=a=>o.sortBy("namawilayah"))},[e[26]||(e[26]=(0,n.eW)(" Nama Desa ")),"namawilayah"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",dE)):"namawilayah"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",uE)):((0,n.uX)(),(0,n.CE)("i",mE))]),(0,n.Lk)("th",{scope:"col",onClick:e[11]||(e[11]=a=>o.sortBy("namakondisi"))},[e[27]||(e[27]=(0,n.eW)(" Kondisi ")),"namakondisi"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",kE)):"namakondisi"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",hE)):((0,n.uX)(),(0,n.CE)("i",gE))]),e[29]||(e[29]=(0,n.Lk)("th",{scope:"col"},"Aksi",-1))])]),(0,n.Lk)("tbody",null,[i.isLoading?((0,n.uX)(),(0,n.CE)("tr",pE,e[30]||(e[30]=[(0,n.Lk)("td",{colspan:"7",class:"text-center p-5"},[(0,n.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,n.Lk)("span",{class:"visually-hidden"},"Loading...")]),(0,n.Lk)("p",{class:"mt-2"},"Memuat data...")],-1)]))):((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.paginatedItems,(a,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:a.idbarang},[(0,n.Lk)("th",bE,(0,k.v_)((i.currentPage-1)*i.perPage+t+1),1),(0,n.Lk)("td",null,[(0,n.eW)((0,k.v_)(a.namabarang)+" ",1),e[31]||(e[31]=(0,n.Lk)("br",null,null,-1)),e[32]||(e[32]=(0,n.eW)()),(0,n.Lk)("small",fE,(0,k.v_)(a.merk),1)]),(0,n.Lk)("td",null,(0,k.v_)(a.kodebarang||"-"),1),(0,n.Lk)("td",null,(0,k.v_)(a.wilayah?.namawilayah||"-"),1),(0,n.Lk)("td",null,(0,k.v_)(a.kondisi?.namakondisi||"-"),1),(0,n.Lk)("td",null,[(0,n.Lk)("div",LE,[(0,n.Lk)("button",{class:"btn btn-info btn-sm",onClick:e=>o.openDetailModal(a),title:"Lihat Detail"},e[33]||(e[33]=[(0,n.Lk)("i",{class:"fa fa-eye"},null,-1)]),8,yE),(0,n.Lk)("button",{class:"btn btn-primary btn-sm",onClick:e=>o.openEditModal(a),title:"Ubah Data"},e[34]||(e[34]=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)]),8,vE),(0,n.Lk)("button",{class:"btn btn-danger sweet-11 btn-sm",type:"button",onClick:e=>o.advancedDeleteAlert(a.idbarang),title:"Hapus Data"},e[35]||(e[35]=[(0,n.Lk)("i",{class:"fa fa-trash"},null,-1)]),8,CE)])])]))),128)),0===o.paginatedItems.length?((0,n.uX)(),(0,n.CE)("tr",PE,e[36]||(e[36]=[(0,n.Lk)("td",{colspan:"7",class:"text-center"},"Tidak ada data yang cocok atau tersedia.",-1)]))):(0,n.Q3)("",!0)],64))])]),(0,n.Lk)("div",EE,[(0,n.Lk)("div",DE,[i.totalItems>0?((0,n.uX)(),(0,n.CE)("span",ME,[e[37]||(e[37]=(0,n.eW)(" Menampilkan ")),(0,n.Lk)("strong",null,(0,k.v_)((i.currentPage-1)*i.perPage+1),1),e[38]||(e[38]=(0,n.eW)(" - ")),(0,n.Lk)("strong",null,(0,k.v_)(Math.min(i.currentPage*i.perPage,i.totalItems)),1),e[39]||(e[39]=(0,n.eW)(" dari ")),(0,n.Lk)("strong",null,(0,k.v_)(i.totalItems),1),e[40]||(e[40]=(0,n.eW)(" data "))])):(0,n.Q3)("",!0)]),-1!==i.perPage&&o.totalPages>1?((0,n.uX)(),(0,n.CE)("nav",wE,[(0,n.Lk)("ul",FE,[(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[12]||(e[12]=a=>o.changePage(i.currentPage-1))},"Prev")],2),o.pageNumbers[0]>1?((0,n.uX)(),(0,n.CE)("li",XE,[(0,n.Lk)("button",{class:"page-link",onClick:e[13]||(e[13]=a=>o.changePage(1))},"1")])):(0,n.Q3)("",!0),o.pageNumbers[0]>2?((0,n.uX)(),(0,n.CE)("li",xE,e[41]||(e[41]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.pageNumbers,a=>((0,n.uX)(),(0,n.CE)("li",{key:a,class:(0,k.C4)(["page-item",{active:i.currentPage===a}])},[(0,n.Lk)("button",{class:"page-link",onClick:e=>o.changePage(a)},(0,k.v_)(a),9,TE)],2))),128)),o.pageNumbers.slice(-1)[0]<o.totalPages-1?((0,n.uX)(),(0,n.CE)("li",SE,e[42]||(e[42]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),o.pageNumbers.slice(-1)[0]<o.totalPages?((0,n.uX)(),(0,n.CE)("li",BE,[(0,n.Lk)("button",{class:"page-link",onClick:e[14]||(e[14]=a=>o.changePage(o.totalPages))},(0,k.v_)(o.totalPages),1)])):(0,n.Q3)("",!0),(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:i.currentPage===o.totalPages}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[15]||(e[15]=a=>o.changePage(i.currentPage+1))},"Next")],2)])])):(0,n.Q3)("",!0)])])])])}const _E=(a={})=>Na.get("",{params:{act:"barang",...a}}),jE=a=>a?Na.get("",{params:{act:"barang",key:a}}):Promise.reject(new Error("ID barang tidak tersedia.")),VE=a=>(a.append("act","barang"),Na.post("",a)),IE=(a,e)=>a?(e.append("act","barang"),e.append("key",a),Na.post("",e)):Promise.reject(new Error("ID barang tidak tersedia.")),NE=a=>a?Na.delete("",{data:{act:"barang",key:a}}):Promise.reject(new Error("ID barang tidak tersedia.")),UE={class:"modal-header"},RE={class:"modal-title"},QE={class:"modal-body"},WE={class:"row"},KE={class:"col-md-6 mb-3"},OE=["disabled"],$E={disabled:"",value:""},GE=["value"],JE={class:"col-md-6 mb-3"},qE={class:"row"},HE={class:"col-md-6 mb-3"},YE={class:"col-md-6 mb-3"},zE={class:"row"},ZE={class:"col-md-4 mb-3"},aD={class:"col-md-4 mb-3"},eD={class:"col-md-4 mb-3"},tD={class:"row"},sD={class:"col-md-4 mb-3"},iD={class:"col-md-4 mb-3"},lD={class:"col-md-4 mb-3"},nD={class:"row"},oD={class:"col-md-6 mb-3"},rD=["value"],cD={class:"col-md-6 mb-3"},dD=["value"],uD={class:"row"},mD={class:"col-md-12 mb-3"},kD=["value"],hD={class:"mb-3"},gD={class:"mb-3"},pD={class:"mt-2"},bD={key:0},fD=["src"],LD={key:1},yD=["src"],vD={key:0,class:"alert alert-danger mt-3"},CD={class:"modal-footer"},PD=["disabled"],ED={key:0,class:"spinner-border spinner-border-sm",role:"status"},DD={key:1};function MD(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",{class:"modal-overlay",onClick:e[20]||(e[20]=(...a)=>o.handleOverlayClick&&o.handleOverlayClick(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[19]||(e[19]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",UE,[(0,n.Lk)("h5",RE,(0,k.v_)(o.isEditMode?"Edit Data Barang":"Tambah Data Barang"),1),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",QE,[(0,n.Lk)("form",{onSubmit:e[16]||(e[16]=(0,l.D$)((...a)=>o.submitForm&&o.submitForm(...a),["prevent"]))},[(0,n.Lk)("div",WE,[(0,n.Lk)("div",KE,[e[21]||(e[21]=(0,n.Lk)("label",{class:"form-label"},"Nama Desa",-1)),(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":e[1]||(e[1]=a=>i.formData.iddesa=a),required:"",disabled:i.isListLoading},[(0,n.Lk)("option",$E,(0,k.v_)(i.isListLoading?"Memuat...":"Pilih Desa"),1),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.desaList,a=>((0,n.uX)(),(0,n.CE)("option",{key:a.iddesa,value:a.iddesa},(0,k.v_)(a.wilayah.namawilayah),9,GE))),128))],8,OE),[[l.u1,i.formData.iddesa]])]),(0,n.Lk)("div",JE,[e[22]||(e[22]=(0,n.Lk)("label",{class:"form-label"},"Kode Barang",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.formData.kodebarang=a),placeholder:"Masukkan kode barang",required:""},null,512),[[l.Jo,i.formData.kodebarang]])])]),(0,n.Lk)("div",qE,[(0,n.Lk)("div",HE,[e[23]||(e[23]=(0,n.Lk)("label",{class:"form-label"},"Nama Barang",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=a=>i.formData.namabarang=a),placeholder:"Contoh: Laptop",required:""},null,512),[[l.Jo,i.formData.namabarang]])]),(0,n.Lk)("div",YE,[e[24]||(e[24]=(0,n.Lk)("label",{class:"form-label"},"Nomor Register",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[4]||(e[4]=a=>i.formData.nomorregister=a),placeholder:"Masukkan nomor register"},null,512),[[l.Jo,i.formData.nomorregister]])])]),(0,n.Lk)("div",zE,[(0,n.Lk)("div",ZE,[e[25]||(e[25]=(0,n.Lk)("label",{class:"form-label"},"Merk / Tipe",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[5]||(e[5]=a=>i.formData.merk=a),placeholder:"Contoh: Dell Latitude"},null,512),[[l.Jo,i.formData.merk]])]),(0,n.Lk)("div",aD,[e[26]||(e[26]=(0,n.Lk)("label",{class:"form-label"},"Nomor Seri / Pabrik",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[6]||(e[6]=a=>i.formData.nomorseri=a),placeholder:"Masukkan nomor seri"},null,512),[[l.Jo,i.formData.nomorseri]])]),(0,n.Lk)("div",eD,[e[27]||(e[27]=(0,n.Lk)("label",{class:"form-label"},"Bahan",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[7]||(e[7]=a=>i.formData.bahan=a),placeholder:"Contoh: Plastik / Logam"},null,512),[[l.Jo,i.formData.bahan]])])]),(0,n.Lk)("div",tD,[(0,n.Lk)("div",sD,[e[28]||(e[28]=(0,n.Lk)("label",{class:"form-label"},"Ukuran / Spesifikasi",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[8]||(e[8]=a=>i.formData.ukuran=a),placeholder:"Contoh: 14 Inci"},null,512),[[l.Jo,i.formData.ukuran]])]),(0,n.Lk)("div",iD,[e[29]||(e[29]=(0,n.Lk)("label",{class:"form-label"},"Tahun Perolehan",-1)),(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control","onUpdate:modelValue":e[9]||(e[9]=a=>i.formData.tahun=a),placeholder:"YYYY",required:""},null,512),[[l.Jo,i.formData.tahun]])]),(0,n.Lk)("div",lD,[e[30]||(e[30]=(0,n.Lk)("label",{class:"form-label"},"Harga Perolehan (Rp)",-1)),(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control","onUpdate:modelValue":e[10]||(e[10]=a=>i.formData.harga=a),placeholder:"Contoh: 15000000"},null,512),[[l.Jo,i.formData.harga]])])]),(0,n.Lk)("div",nD,[(0,n.Lk)("div",oD,[e[32]||(e[32]=(0,n.Lk)("label",{class:"form-label"},"Kondisi",-1)),(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":e[11]||(e[11]=a=>i.formData.idkondisi=a),required:""},[e[31]||(e[31]=(0,n.Lk)("option",{disabled:"",value:""},"Pilih Kondisi",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.kondisiList,a=>((0,n.uX)(),(0,n.CE)("option",{key:a.idkondisi,value:a.idkondisi},(0,k.v_)(a.namakondisi),9,rD))),128))],512),[[l.u1,i.formData.idkondisi]])]),(0,n.Lk)("div",cD,[e[34]||(e[34]=(0,n.Lk)("label",{class:"form-label"},"Keberadaan Fisik",-1)),(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":e[12]||(e[12]=a=>i.formData.idkeberadaanfisik=a),required:""},[e[33]||(e[33]=(0,n.Lk)("option",{disabled:"",value:""},"Pilih Keberadaan Fisik",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.keberadaanFisikList,a=>((0,n.uX)(),(0,n.CE)("option",{key:a.idkeberadaanfisik,value:a.idkeberadaanfisik},(0,k.v_)(a.namakeberadaanfisik),9,dD))),128))],512),[[l.u1,i.formData.idkeberadaanfisik]])])]),(0,n.Lk)("div",uD,[(0,n.Lk)("div",mD,[e[36]||(e[36]=(0,n.Lk)("label",{class:"form-label"},"Sumber Anggaran",-1)),(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":e[13]||(e[13]=a=>i.formData.idsumberanggaran=a),required:""},[e[35]||(e[35]=(0,n.Lk)("option",{disabled:"",value:""},"Pilih Sumber Anggaran",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.sumberAnggaranList,a=>((0,n.uX)(),(0,n.CE)("option",{key:a.idsumberanggaran,value:a.idsumberanggaran},(0,k.v_)(a.namasumberanggaran),9,kD))),128))],512),[[l.u1,i.formData.idsumberanggaran]])])]),(0,n.Lk)("div",hD,[e[37]||(e[37]=(0,n.Lk)("label",{class:"form-label"},"Keterangan",-1)),(0,n.bo)((0,n.Lk)("textarea",{class:"form-control","onUpdate:modelValue":e[14]||(e[14]=a=>i.formData.keterangan=a),rows:"3",placeholder:"Tambahkan keterangan jika ada"},null,512),[[l.Jo,i.formData.keterangan]])]),(0,n.Lk)("div",gD,[e[38]||(e[38]=(0,n.Lk)("label",{class:"form-label"},"Upload Foto",-1)),(0,n.Lk)("input",{type:"file",class:"form-control",accept:"image/*",onChange:e[15]||(e[15]=(...a)=>o.handleFotoUpload&&o.handleFotoUpload(...a))},null,32),(0,n.Lk)("div",pD,[i.fotoPreviewUrl?((0,n.uX)(),(0,n.CE)("div",bD,[(0,n.Lk)("img",{src:i.fotoPreviewUrl,alt:"Preview Foto",class:"img-thumbnail",style:{"max-width":"150px","max-height":"150px"}},null,8,fD)])):o.isEditMode&&i.formData.foto?((0,n.uX)(),(0,n.CE)("div",LD,[(0,n.Lk)("img",{src:i.formData.foto,alt:"Foto Saat Ini",class:"img-thumbnail",style:{"max-width":"150px","max-height":"150px"}},null,8,yD)])):(0,n.Q3)("",!0)])]),i.errorMessage?((0,n.uX)(),(0,n.CE)("div",vD,(0,k.v_)(i.errorMessage),1)):(0,n.Q3)("",!0)],32)]),(0,n.Lk)("div",CD,[(0,n.Lk)("button",{type:"button",class:"btn btn-danger",onClick:e[17]||(e[17]=(...a)=>o.closeModal&&o.closeModal(...a))},"Batal"),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[18]||(e[18]=(...a)=>o.submitForm&&o.submitForm(...a)),disabled:i.isLoading},[i.isLoading?((0,n.uX)(),(0,n.CE)("span",ED)):((0,n.uX)(),(0,n.CE)("span",DD,"Simpan"))],8,PD)])])])])}const wD={iddesa:"",idkeberadaanfisik:"",idkondisi:"",idsumberanggaran:"",kodebarang:"",nomorregister:"",namabarang:"",merk:"",nomorseri:"",ukuran:"",bahan:"",tahun:"",harga:"",keterangan:"",foto:null};var FD={name:"addEditProfileModal",props:{itemToEdit:{type:Object,default:null}},data(){return{formData:{...wD},selectedFotoFile:null,fotoPreviewUrl:null,desaList:[],keberadaanFisikList:[],kondisiList:[],perolehanList:[],sumberAnggaranList:[],isListLoading:!1,isBusinessFieldsLoading:!1,isLoading:!1,errorMessage:null,toast:(0,ln.dj)()}},computed:{isEditMode(){return!!this.itemToEdit}},watch:{itemToEdit:{handler(a){a?(this.formData.iddesa=a.iddesa,this.formData.idkeberadaanfisik=a.idkeberadaanfisik,this.formData.idkondisi=a.idkondisi,this.formData.idsumberanggaran=a.idsumberanggaran,this.formData.kodebarang=a.kodebarang,this.formData.nomorregister=a.nomorregister,this.formData.namabarang=a.namabarang,this.formData.merk=a.merk,this.formData.nomorseri=a.nomorseri,this.formData.ukuran=a.ukuran,this.formData.bahan=a.bahan,this.formData.tahun=a.tahun,this.formData.harga=a.harga,this.formData.keterangan=a.keterangan,this.formData.foto=a.foto):this.formData={...wD},this.selectedFotoFile=null,this.fotoPreviewUrl=null,this.errorMessage=null},immediate:!0,deep:!0}},created(){this.fetchDesaList(),this.fetchKeberadaanFisikList(),this.fetchkondisiList(),this.fetchSumberAnggaranList()},beforeUnmount(){this.fotoPreviewUrl&&URL.revokeObjectURL(this.fotoPreviewUrl)},methods:{closeModal(){this.$emit("close")},handleOverlayClick(a){a.target===a.currentTarget&&this.closeModal()},async fetchDesaList(){this.isListLoading=!0;try{const a=await Mi({limit:-1});this.desaList=a.data?.data||a.data?.[0]?.data||[]}catch(a){this.toast.error("Gagal memuat daftar desa")}finally{this.isListLoading=!1}},async fetchKeberadaanFisikList(){this.isListLoading=!0;try{const a=await $C({limit:-1});this.keberadaanFisikList=a.data?.data||a.data?.[0]?.data||[]}catch(a){this.toast.error("Gagal memuat daftar keberadaan fisik")}finally{this.isListLoading=!1}},async fetchSumberAnggaranList(){this.isListLoading=!0;try{const a=await QC({limit:-1});this.sumberAnggaranList=a.data?.data||a.data?.[0]?.data||[]}catch(a){this.toast.error("Gagal memuat daftar sumber anggaran")}finally{this.isListLoading=!1}},async fetchkondisiList(){this.isListLoading=!0;try{const a=await Rv({limit:-1});this.kondisiList=a.data?.data||a.data?.[0]?.data||[]}catch(a){this.toast.error("Gagal memuat daftar kondisi")}finally{this.isListLoading=!1}},handleFotoUpload(a){const e=a.target.files[0];if(this.fotoPreviewUrl&&URL.revokeObjectURL(this.fotoPreviewUrl),!e)return this.selectedFotoFile=null,void(this.fotoPreviewUrl=null);this.selectedFotoFile=e,this.fotoPreviewUrl=URL.createObjectURL(e)},async submitForm(){this.isLoading=!0,this.errorMessage=null;const a=new FormData;a.append("record[iddesa]",this.formData.iddesa),a.append("record[idkeberadaanfisik]",this.formData.idkeberadaanfisik),a.append("record[idkondisi]",this.formData.idkondisi),a.append("record[idsumberanggaran]",this.formData.idsumberanggaran),a.append("record[kodebarang]",this.formData.kodebarang),a.append("record[nomorregister]",this.formData.nomorregister),a.append("record[namabarang]",this.formData.namabarang),a.append("record[merk]",this.formData.merk),a.append("record[nomorseri]",this.formData.nomorseri),a.append("record[ukuran]",this.formData.ukuran),a.append("record[bahan]",this.formData.bahan),a.append("record[tahun]",this.formData.tahun),a.append("record[harga]",this.formData.harga),a.append("record[keterangan]",this.formData.keterangan),this.selectedFotoFile&&a.append("upload_foto",this.selectedFotoFile);try{let e;this.isEditMode?(a.append("_method","PUT"),e=await IE(this.itemToEdit.idbarang,a),this.toast.success("Data barang berhasil diperbarui")):(e=await VE(a),this.toast.success("Data barang berhasil ditambah")),this.$emit("save-successful",e.data.data),this.closeModal()}catch(e){this.errorMessage=e.response?.data?.failed||e.response?.data?.message||"Gagal menyimpan data. Silakan coba lagi",this.toast.error("Gagal menyimpan data barang")}finally{this.isLoading=!1}}}};const XD=(0,r.A)(FD,[["render",MD],["__scopeId","data-v-1d9550f5"]]);var xD=XD;const TD={class:"modal-header"},SD={class:"modal-body"},BD={key:0,class:"text-center p-5"},AD={key:1,class:"text-center p-5 text-danger"},_D={key:0,class:"text-muted"},jD={key:2,class:"item-container"},VD={class:"text-center mb-4"},ID=["src"],ND={key:1,src:"https://placehold.co/150x150/EBF4FF/7F9CF5?text=Foto",alt:"Foto Default",class:"foto"},UD={class:"nama-barang mt-3"},RD={class:"merk"},QD={class:"detail-section"},WD={class:"row"},KD={class:"col-md-6"},OD={class:"text-content"},$D={class:"list-unstyled"},GD={class:"col-md-6"},JD={class:"detail-section"},qD={class:"row"},HD={class:"col-md-6"},YD={class:"text-content"},zD={class:"list-unstyled"},ZD={class:"col-md-6"},aM={class:"text-content"},eM={class:"list-unstyled"},tM={key:0,class:"detail-section"},sM={class:"text-content"},iM={class:"modal-footer"};function lM(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",{class:"modal-overlay",onClick:e[3]||(e[3]=(...a)=>o.closeModal&&o.closeModal(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[2]||(e[2]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",TD,[e[4]||(e[4]=(0,n.Lk)("h5",{class:"modal-title"},"Detail Data Barang",-1)),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",SD,[i.isLoading?((0,n.uX)(),(0,n.CE)("div",BD,e[5]||(e[5]=[(0,n.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,n.Lk)("span",{class:"visually-hidden"},"Loading...")],-1),(0,n.Lk)("p",{class:"mt-2"},"Memuat data...",-1)]))):i.error?((0,n.uX)(),(0,n.CE)("div",AD,[e[6]||(e[6]=(0,n.Lk)("i",{class:"fa fa-exclamation-triangle fa-3x mb-3"},null,-1)),e[7]||(e[7]=(0,n.Lk)("h4",null,"Terjadi Kesalahan",-1)),(0,n.Lk)("p",null,(0,k.v_)(i.error),1),i.debugMessage?((0,n.uX)(),(0,n.CE)("small",_D,"Detail: "+(0,k.v_)(i.debugMessage),1)):(0,n.Q3)("",!0)])):i.item?((0,n.uX)(),(0,n.CE)("div",jD,[(0,n.Lk)("div",VD,[i.item.foto?((0,n.uX)(),(0,n.CE)("img",{key:0,src:i.item.foto,alt:"Foto Barang",class:"foto",onerror:"this.src='https://placehold.co/150x150/EBF4FF/7F9CF5?text=Foto'"},null,8,ID)):((0,n.uX)(),(0,n.CE)("img",ND)),(0,n.Lk)("h2",UD,(0,k.v_)(i.item.namabarang||"Nama Barang")+" ("+(0,k.v_)(i.item.kodebarang||"N/A")+")",1),(0,n.Lk)("p",RD,(0,k.v_)(i.item.merk||"Merk belum diatur"),1)]),e[24]||(e[24]=(0,n.Lk)("hr",null,null,-1)),(0,n.Lk)("div",QD,[e[16]||(e[16]=(0,n.Lk)("h4",null,[(0,n.Lk)("i",{class:"fa fa-id-card-o me-2"}),(0,n.eW)("Informasi & Status Utama")],-1)),(0,n.Lk)("div",WD,[(0,n.Lk)("div",KD,[(0,n.Lk)("div",OD,[(0,n.Lk)("ul",$D,[(0,n.Lk)("li",null,[e[8]||(e[8]=(0,n.Lk)("strong",null,"Kode Barang:",-1)),(0,n.eW)(" "+(0,k.v_)(i.item.kodebarang||"-"),1)]),(0,n.Lk)("li",null,[e[9]||(e[9]=(0,n.Lk)("strong",null,"Nomor Register:",-1)),(0,n.eW)(" "+(0,k.v_)(i.item.nomorregister||"-"),1)]),e[12]||(e[12]=(0,n.Lk)("hr",{class:"my-2"},null,-1)),(0,n.Lk)("li",null,[e[10]||(e[10]=(0,n.Lk)("strong",null,"Nomor Seri / Pabrik:",-1)),(0,n.eW)(" "+(0,k.v_)(i.item.nomorseri||"-"),1)]),(0,n.Lk)("li",null,[e[11]||(e[11]=(0,n.Lk)("strong",null,"Bahan:",-1)),(0,n.eW)(" "+(0,k.v_)(i.item.bahan||"-"),1)])])])]),(0,n.Lk)("div",GD,[e[13]||(e[13]=(0,n.Lk)("h5",null,[(0,n.Lk)("i",{class:"fa fa-map-marker me-2"}),(0,n.eW)("Asal Desa")],-1)),(0,n.Lk)("p",null,(0,k.v_)(i.item.wilayah?.namawilayah||"-"),1),e[14]||(e[14]=(0,n.Lk)("h5",{class:"mt-3"},[(0,n.Lk)("i",{class:"fa fa-wrench me-2"}),(0,n.eW)("Kondisi Barang")],-1)),(0,n.Lk)("p",null,(0,k.v_)(i.item.kondisi?.namakondisi||"-"),1),e[15]||(e[15]=(0,n.Lk)("h5",{class:"mt-3"},[(0,n.Lk)("i",{class:"fa fa-check-square me-2"}),(0,n.eW)("Keberadaan Fisik")],-1)),(0,n.Lk)("p",null,(0,k.v_)(i.item.fisik?.namakeberadaanfisik||"-"),1)])])]),e[25]||(e[25]=(0,n.Lk)("hr",null,null,-1)),(0,n.Lk)("div",JD,[e[21]||(e[21]=(0,n.Lk)("h4",null,[(0,n.Lk)("i",{class:"fa fa-cogs me-2"}),(0,n.eW)("Spesifikasi & Riwayat")],-1)),(0,n.Lk)("div",qD,[(0,n.Lk)("div",HD,[(0,n.Lk)("div",YD,[(0,n.Lk)("ul",zD,[(0,n.Lk)("li",null,[e[17]||(e[17]=(0,n.Lk)("strong",null,"Ukuran / Spesifikasi:",-1)),(0,n.eW)(" "+(0,k.v_)(i.item.ukuran||"-"),1)]),(0,n.Lk)("li",null,[e[18]||(e[18]=(0,n.Lk)("strong",null,"Tahun:",-1)),(0,n.eW)(" "+(0,k.v_)(i.item.tahun||"-"),1)])])])]),(0,n.Lk)("div",ZD,[(0,n.Lk)("div",aM,[(0,n.Lk)("ul",eM,[(0,n.Lk)("li",null,[e[19]||(e[19]=(0,n.Lk)("strong",null,"Harga:",-1)),(0,n.eW)(" "+(0,k.v_)(o.formattedHarga),1)]),(0,n.Lk)("li",null,[e[20]||(e[20]=(0,n.Lk)("strong",null,"Sumber Anggaran:",-1)),(0,n.eW)(" "+(0,k.v_)(i.item.anggaran?.namasumberanggaran||"-"),1)])])])])])]),i.item.keterangan?((0,n.uX)(),(0,n.CE)("div",tM,[e[22]||(e[22]=(0,n.Lk)("hr",null,null,-1)),e[23]||(e[23]=(0,n.Lk)("h4",null,[(0,n.Lk)("i",{class:"fa fa-info-circle me-2"}),(0,n.eW)("Keterangan Tambahan")],-1)),(0,n.Lk)("p",sM,(0,k.v_)(i.item.keterangan),1)])):(0,n.Q3)("",!0)])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",iM,[(0,n.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:e[1]||(e[1]=(...a)=>o.closeModal&&o.closeModal(...a))},"Tutup")])])])}var nM={name:"DetailBarangModal",props:{itemToView:{type:Object,required:!0}},emits:["close"],data(){return{item:null,isLoading:!1,error:null,debugMessage:""}},computed:{formattedHarga(){if(!this.item||!this.item.harga)return"-";const a=parseInt(this.item.harga,10);return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a)}},methods:{closeModal(){this.$emit("close")},async fetchBarangDetail(){const a=this.itemToView?.idbarang;if(a){this.isLoading=!0,this.error=null,this.debugMessage="";try{const e=await jE(a),t=e.data;t&&t.length>0&&t[0].data&&t[0].data.length>0?this.item=t[0].data[0]:(this.error="Data detail barang tidak ditemukan atau format respons tidak sesuai.",this.debugMessage=`Struktur data yang diterima: ${JSON.stringify(e.data)}`)}catch(e){console.error("Gagal mengambil detail barang:",e),this.error=e.message||"Terjadi kesalahan saat memuat data.",e.response&&(this.debugMessage=`Status: ${e.response.status} - Data: ${JSON.stringify(e.response.data)}`)}finally{this.isLoading=!1}}else this.error="ID barang tidak valid atau tidak tersedia."}},mounted(){this.fetchBarangDetail()},watch:{itemToView:{handler(a,e){a?.idbarang!==e?.idbarang&&this.fetchBarangDetail()},deep:!0}}};const oM=(0,r.A)(nM,[["render",lM],["__scopeId","data-v-64822d12"]]);var rM=oM,cM={components:{AddEditItemModal:xD,DetailItemModal:rM},data(){return{items:[],kondisiList:[],isLoading:!1,sortColumn:"created_at",sortDirection:"asc",isModalVisible:!1,currentPage:1,perPage:10,totalItems:0,itemBeingEdited:null,isFilterVisible:!1,filters:{namabarang:"",kodebarang:"",namawilayah:"",idkondisi:""},isDetailModalVisible:!1,itemBeingViewed:null}},computed:{paginatedItems(){return this.items},totalPages(){return this.perPage<=0?1:Math.ceil(this.totalItems/this.perPage)},pageNumbers(){const a=[],e=5;let t=Math.max(1,this.currentPage-Math.floor(e/2)),s=t+e-1;s>this.totalPages&&(s=this.totalPages,t=Math.max(1,s-e+1));for(let i=t;i<=s;i++)a.push(i);return a}},watch:{currentPage(){this.fetchItems()},perPage(){this.currentPage=1,this.fetchItems()}},async mounted(){this.toast=(0,ln.dj)(),await this.fetchItems(),await this.fetchConditions()},methods:{openAddModal(){this.itemBeingEdited=null,this.isModalVisible=!0},openEditModal(a){this.itemBeingEdited={...a},this.isModalVisible=!0},closeModal(){this.isModalVisible=!1,this.itemBeingEdited=null},openDetailModal(a){this.itemBeingViewed={...a},this.isDetailModalVisible=!0},closeDetailModal(){this.isDetailModalVisible=!1,this.itemBeingViewed=null},handleSaveSuccessful(){this.closeModal(),this.fetchItems()},async fetchItems(){this.isLoading=!0;try{const a={page:this.currentPage,limit:this.perPage,order:this.sortColumn?`${this.sortColumn} ${this.sortDirection}`:""},e=Object.entries(this.filters).filter(([,a])=>""!==a&&null!==a).map(([a,e])=>`${a}=${e}`);a.filter=e.length>0?e.join(","):"";const t=await _E(a),s=t.data?.data||t.data?.[0]?.data||[],i=t.data?.meta?.pagination||{};this.items=s,this.totalItems=i.total||s.length}catch(a){console.error("Error fetching items:",a),this.toast.error("Gagal memuat data barang",{icon:"fa fa-times"})}finally{this.isLoading=!1}},async fetchConditions(){try{const a=await Rv({limit:-1});this.kondisiList=a.data?.[0]?.data||[]}catch(a){this.toast.error("Gagal memuat daftar kondisi",{icon:"fa fa-times"})}},advancedDeleteAlert(a){this.$swal({title:"Hapus Data Barang",text:"Apakah Anda yakin ingin menghapus data ini?",icon:"warning",showCancelButton:!0,confirmButtonText:'<i class="fa fa-check me-2"></i> Hapus!',confirmButtonColor:"#d33",cancelButtonText:'<i class="fa fa-times me-2"></i> Batal',cancelButtonColor:"#efefef",reverseButtons:!0}).then(async e=>{if(e.isConfirmed)try{await NE(a),1===this.items.length&&this.currentPage>1?this.currentPage--:this.fetchItems(),this.toast.success("Data barang berhasil dihapus",{icon:"fa fa-check"})}catch(t){this.toast.error("Gagal menghapus data barang",{icon:"fa fa-times"})}})},sortBy(a){this.sortColumn===a?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=a,this.sortDirection="asc"),this.fetchItems()},changePage(a){a>=1&&a<=this.totalPages&&(this.currentPage=a)},toggleFilterVisibility(){this.isFilterVisible=!this.isFilterVisible},applyFilters(){this.currentPage=1,this.fetchItems()},resetFilters(){this.filters.namabarang="",this.filters.kodebarang="",this.filters.namawilayah="",this.filters.idkondisi="",this.sortColumn="created_at",this.sortDirection="asc",this.currentPage=1,this.fetchItems()}}};const dM=(0,r.A)(cM,[["render",AE],["__scopeId","data-v-7eb8c30e"]]);var uM=dM,mM={components:{ItemsTable:uM}};const kM=(0,r.A)(mM,[["render",UP]]);var hM=kM;const gM={class:"container-fluid"},pM={class:"row"};function bM(a,e,t,s,i,l){const o=(0,n.g2)("Breadcrumbs"),r=(0,n.g2)("ProfilesTable");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(o,{main:"Badan Usaha",title:a.$route.meta.title},null,8,["title"]),(0,n.Lk)("div",gM,[(0,n.Lk)("div",pM,[(0,n.bF)(r)])])])}const fM={class:"col-sm-12"},LM={class:"card"},yM={class:"card-body"},vM={class:"d-flex justify-content-end align-items-start mb-3"},CM={class:"d-flex gap-2"},PM={key:0,class:"fa fa-angle-up me-2"},EM={key:1,class:"fa fa-angle-down me-2"},DM={key:0,class:"border p-3 mb-3 rounded filter-section"},MM={class:"row g-3"},wM={class:"col-md-3"},FM={class:"col-md-3"},XM={class:"col-md-3"},xM={class:"col-md-3"},TM=["value"],SM={class:"d-flex justify-content-end gap-2 mt-3"},BM={class:"table-responsive signal-table"},AM={class:"table table-hover"},_M={key:0,class:"fa fa-sort-asc"},jM={key:1,class:"fa fa-sort-desc"},VM={key:2,class:"fa fa-sort"},IM={key:0,class:"fa fa-sort-asc"},NM={key:1,class:"fa fa-sort-desc"},UM={key:2,class:"fa fa-sort"},RM={key:0,class:"fa fa-sort-asc"},QM={key:1,class:"fa fa-sort-desc"},WM={key:2,class:"fa fa-sort"},KM={key:0,class:"fa fa-sort-asc"},OM={key:1,class:"fa fa-sort-desc"},$M={key:2,class:"fa fa-sort"},GM={key:0},JM={scope:"row"},qM=["src"],HM={key:1,class:"text-muted"},YM={class:"btn-group"},zM=["onClick"],ZM=["onClick"],aw=["onClick"],ew={key:0},tw={class:"d-flex flex-column flex-md-row justify-content-md-between align-items-center mt-3 px-3 pb-3"},sw={class:"mt-2"},iw={key:0,class:"text-muted"},lw={key:0,class:"d-flex align-items-center flex-wrap gap-2 mt-2"},nw={class:"pagination mb-0"},ow={key:0,class:"page-item"},rw={key:1,class:"page-item disabled"},cw=["onClick"],dw={key:2,class:"page-item disabled"},uw={key:3,class:"page-item"};function mw(a,e,t,s,i,o){const r=(0,n.g2)("add-edit-profile-modal"),c=(0,n.g2)("detail-profile-modal");return(0,n.uX)(),(0,n.CE)("div",fM,[i.isModalVisible?((0,n.uX)(),(0,n.Wv)(r,{key:0,"profile-to-edit":i.profileBeingEdited,onClose:o.closeModal,onSaveSuccessful:o.handleSaveSuccessful},null,8,["profile-to-edit","onClose","onSaveSuccessful"])):(0,n.Q3)("",!0),i.isDetailModalVisible?((0,n.uX)(),(0,n.Wv)(c,{key:1,"profile-to-view":i.profileBeingViewed,onClose:o.closeDetailModal},null,8,["profile-to-view","onClose"])):(0,n.Q3)("",!0),(0,n.Lk)("div",LM,[e[42]||(e[42]=(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("h3",null,"Daftar Badan Usaha")],-1)),(0,n.Lk)("div",yM,[(0,n.Lk)("div",vM,[(0,n.Lk)("div",CM,[(0,n.Lk)("button",{class:"btn btn-outline-light txt-dark",onClick:e[0]||(e[0]=(...a)=>o.toggleFilterVisibility&&o.toggleFilterVisibility(...a))},[i.isFilterVisible?((0,n.uX)(),(0,n.CE)("i",PM)):((0,n.uX)(),(0,n.CE)("i",EM)),(0,n.Lk)("span",null,(0,k.v_)(i.isFilterVisible?"Sembunyikan":"Tampilkan")+" Filter",1)]),(0,n.Lk)("button",{class:"btn btn-success",onClick:e[1]||(e[1]=(...a)=>o.openAddModal&&o.openAddModal(...a))},e[16]||(e[16]=[(0,n.Lk)("i",{class:"fa fa-plus me-2"},null,-1),(0,n.Lk)("span",null," Tambah Data",-1)]))])]),i.isFilterVisible?((0,n.uX)(),(0,n.CE)("div",DM,[(0,n.Lk)("div",MM,[(0,n.Lk)("div",wM,[e[17]||(e[17]=(0,n.Lk)("label",{for:"filterEnterpriseName",class:"form-label"},"Nama Usaha",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterEnterpriseName",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.filters.namausaha=a),placeholder:"Filter berdasarkan nama usaha"},null,512),[[l.Jo,i.filters.namausaha]])]),(0,n.Lk)("div",FM,[e[18]||(e[18]=(0,n.Lk)("label",{for:"filterAddress",class:"form-label"},"Alamat Usaha",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterAddress",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=a=>i.filters.alamatusaha=a),placeholder:"Filter berdasarkan alamat"},null,512),[[l.Jo,i.filters.alamatusaha]])]),(0,n.Lk)("div",XM,[e[19]||(e[19]=(0,n.Lk)("label",{for:"filterVillageName",class:"form-label"},"Nama Desa",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterVillageName",class:"form-control","onUpdate:modelValue":e[4]||(e[4]=a=>i.filters.namawilayah=a),placeholder:"Filter berdasarkan nama desa"},null,512),[[l.Jo,i.filters.namawilayah]])]),(0,n.Lk)("div",xM,[e[21]||(e[21]=(0,n.Lk)("label",{for:"filterBusinessField",class:"form-label"},"Bidang Usaha",-1)),(0,n.bo)((0,n.Lk)("select",{id:"filterBusinessField",class:"form-select","onUpdate:modelValue":e[5]||(e[5]=a=>i.filters.idbidangusaha=a)},[e[20]||(e[20]=(0,n.Lk)("option",{value:""},"Semua Bidang",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.businessFields,a=>((0,n.uX)(),(0,n.CE)("option",{key:a.idbidangusaha,value:a.idbidangusaha},(0,k.v_)(a.namabidangusaha),9,TM))),128))],512),[[l.u1,i.filters.idbidangusaha]])])]),(0,n.Lk)("div",SM,[(0,n.Lk)("button",{class:"btn btn-secondary",onClick:e[6]||(e[6]=(...a)=>o.resetFilters&&o.resetFilters(...a))},e[22]||(e[22]=[(0,n.Lk)("i",{class:"fa fa-refresh me-2"},null,-1),(0,n.Lk)("span",null,"Reset Filter",-1)])),(0,n.Lk)("button",{class:"btn btn-primary",onClick:e[7]||(e[7]=(...a)=>o.applyFilters&&o.applyFilters(...a))},e[23]||(e[23]=[(0,n.Lk)("i",{class:"fa fa-search me-2"},null,-1),(0,n.Lk)("span",null,"Terapkan Filter",-1)]))])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",BM,[(0,n.Lk)("table",AM,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[e[28]||(e[28]=(0,n.Lk)("th",{scope:"col"},"No",-1)),e[29]||(e[29]=(0,n.Lk)("th",{scope:"col",style:{width:"100px"}},"Logo",-1)),(0,n.Lk)("th",{scope:"col",onClick:e[8]||(e[8]=a=>o.sortBy("namausaha"))},[e[24]||(e[24]=(0,n.eW)(" Nama Usaha ")),"namausaha"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",_M)):"namausaha"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",jM)):((0,n.uX)(),(0,n.CE)("i",VM))]),(0,n.Lk)("th",{scope:"col",onClick:e[9]||(e[9]=a=>o.sortBy("namabidangusaha"))},[e[25]||(e[25]=(0,n.eW)(" Bidang Usaha ")),"namabidangusaha"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",IM)):"namabidangusaha"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",NM)):((0,n.uX)(),(0,n.CE)("i",UM))]),(0,n.Lk)("th",{scope:"col",onClick:e[10]||(e[10]=a=>o.sortBy("namawilayah"))},[e[26]||(e[26]=(0,n.eW)(" Nama Desa ")),"namawilayah"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",RM)):"namawilayah"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",QM)):((0,n.uX)(),(0,n.CE)("i",WM))]),(0,n.Lk)("th",{scope:"col",onClick:e[11]||(e[11]=a=>o.sortBy("alamatusaha"))},[e[27]||(e[27]=(0,n.eW)(" Alamat Usaha ")),"alamatusaha"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",KM)):"alamatusaha"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",OM)):((0,n.uX)(),(0,n.CE)("i",$M))]),e[30]||(e[30]=(0,n.Lk)("th",{scope:"col"},"Aksi",-1))])]),(0,n.Lk)("tbody",null,[i.isLoading?((0,n.uX)(),(0,n.CE)("tr",GM,e[31]||(e[31]=[(0,n.Lk)("td",{colspan:"7",class:"text-center p-5"},[(0,n.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,n.Lk)("span",{class:"visually-hidden"},"Loading...")]),(0,n.Lk)("p",{class:"mt-2"},"Memuat data...")],-1)]))):((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.paginatedProfiles,(a,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:a.idusaha},[(0,n.Lk)("th",JM,(0,k.v_)((i.currentPage-1)*i.perPage+t+1),1),(0,n.Lk)("td",null,[a.logousaha?((0,n.uX)(),(0,n.CE)("img",{key:0,src:a.logousaha,alt:"Logo",style:{height:"50px",width:"auto"}},null,8,qM)):((0,n.uX)(),(0,n.CE)("span",HM,"-"))]),(0,n.Lk)("td",null,(0,k.v_)(a.namausaha||"-"),1),(0,n.Lk)("td",null,(0,k.v_)(a.bidang?.namabidangusaha||"-"),1),(0,n.Lk)("td",null,(0,k.v_)(a.wilayah?.namawilayah||"-"),1),(0,n.Lk)("td",null,(0,k.v_)(a.alamatusaha||"-"),1),(0,n.Lk)("td",null,[(0,n.Lk)("div",YM,[(0,n.Lk)("button",{class:"btn btn-info btn-sm",onClick:e=>o.openDetailModal(a)},e[32]||(e[32]=[(0,n.Lk)("i",{class:"fa fa-eye"},null,-1)]),8,zM),(0,n.Lk)("button",{class:"btn btn-primary btn-sm",onClick:e=>o.openEditModal(a),title:"Ubah Data"},e[33]||(e[33]=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)]),8,ZM),(0,n.Lk)("button",{class:"btn btn-danger sweet-11 btn-sm",type:"button",onClick:e=>o.advancedDeleteAlert(a.idusaha),title:"Hapus Data"},e[34]||(e[34]=[(0,n.Lk)("i",{class:"fa fa-trash"},null,-1)]),8,aw)])])]))),128)),0===o.paginatedProfiles.length?((0,n.uX)(),(0,n.CE)("tr",ew,e[35]||(e[35]=[(0,n.Lk)("td",{colspan:"7",class:"text-center"},"Tidak ada data yang cocok atau tersedia.",-1)]))):(0,n.Q3)("",!0)],64))])]),(0,n.Lk)("div",tw,[(0,n.Lk)("div",sw,[i.totalItems>0?((0,n.uX)(),(0,n.CE)("span",iw,[e[36]||(e[36]=(0,n.eW)(" Menampilkan ")),(0,n.Lk)("strong",null,(0,k.v_)((i.currentPage-1)*i.perPage+1),1),e[37]||(e[37]=(0,n.eW)(" - ")),(0,n.Lk)("strong",null,(0,k.v_)(Math.min(i.currentPage*i.perPage,i.totalItems)),1),e[38]||(e[38]=(0,n.eW)(" dari ")),(0,n.Lk)("strong",null,(0,k.v_)(i.totalItems),1),e[39]||(e[39]=(0,n.eW)(" data "))])):(0,n.Q3)("",!0)]),-1!==i.perPage&&o.totalPages>1?((0,n.uX)(),(0,n.CE)("nav",lw,[(0,n.Lk)("ul",nw,[(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[12]||(e[12]=a=>o.changePage(i.currentPage-1))},"Prev")],2),o.pageNumbers[0]>1?((0,n.uX)(),(0,n.CE)("li",ow,[(0,n.Lk)("button",{class:"page-link",onClick:e[13]||(e[13]=a=>o.changePage(1))},"1")])):(0,n.Q3)("",!0),o.pageNumbers[0]>2?((0,n.uX)(),(0,n.CE)("li",rw,e[40]||(e[40]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.pageNumbers,a=>((0,n.uX)(),(0,n.CE)("li",{key:a,class:(0,k.C4)(["page-item",{active:i.currentPage===a}])},[(0,n.Lk)("button",{class:"page-link",onClick:e=>o.changePage(a)},(0,k.v_)(a),9,cw)],2))),128)),o.pageNumbers.slice(-1)[0]<o.totalPages-1?((0,n.uX)(),(0,n.CE)("li",dw,e[41]||(e[41]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),o.pageNumbers.slice(-1)[0]<o.totalPages?((0,n.uX)(),(0,n.CE)("li",uw,[(0,n.Lk)("button",{class:"page-link",onClick:e[14]||(e[14]=a=>o.changePage(o.totalPages))},(0,k.v_)(o.totalPages),1)])):(0,n.Q3)("",!0),(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:i.currentPage===o.totalPages}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[15]||(e[15]=a=>o.changePage(i.currentPage+1))},"Next")],2)])])):(0,n.Q3)("",!0)])])])])}const kw=(a={})=>Na.get("",{params:{act:"badan-usaha",...a}}),hw=a=>a?Na.get("",{params:{act:"badan-usaha",key:a}}):Promise.reject(new Error("ID badan usaha tidak tersedia")),gw=a=>(a.append("act","badan-usaha"),Na.post("",a)),pw=(a,e)=>a?(e.append("act","badan-usaha"),e.append("key",a),Na.post("",e)):Promise.reject(new Error("ID badan usaha tidak tersedia")),bw=a=>a?Na.delete("",{data:{act:"badan-usaha",key:a}}):Promise.reject(new Error("ID badan usaha tidak tersedia")),fw=(a={})=>Na.get("",{params:{act:"bidang-usaha",...a}}),Lw=a=>Na.post("",{act:"bidang-usaha",record:a}),yw=(a,e)=>a?Na.put("",{act:"bidang-usaha",key:a,record:e}):Promise.reject(new Error("ID bidang usaha tidak tersedia.")),vw=a=>a?Na.delete("",{data:{act:"bidang-usaha",key:a}}):Promise.reject(new Error("ID bidang usaha tidak tersedia.")),Cw={class:"modal-header"},Pw={class:"modal-title"},Ew={class:"modal-body"},Dw={class:"mb-3"},Mw=["disabled"],ww={disabled:"",value:""},Fw=["value"],Xw={class:"mb-3"},xw=["disabled"],Tw={disabled:"",value:""},Sw=["value"],Bw={class:"mb-3"},Aw={class:"mb-3"},_w={class:"mb-3"},jw={class:"mb-3"},Vw={class:"mt-2"},Iw={key:0},Nw=["src"],Uw={key:1},Rw=["src"],Qw={key:0,class:"alert alert-danger mt-3"},Ww={class:"modal-footer"},Kw=["disabled"],Ow={key:0,class:"spinner-border spinner-border-sm",role:"status"},$w={key:1};function Gw(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",{class:"modal-overlay",onClick:e[11]||(e[11]=(...a)=>o.handleOverlayClick&&o.handleOverlayClick(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[10]||(e[10]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",Cw,[(0,n.Lk)("h5",Pw,(0,k.v_)(o.isEditMode?"Edit Data Badan Usaha":"Tambah Data Badan Usaha"),1),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",Ew,[(0,n.Lk)("form",{onSubmit:e[7]||(e[7]=(0,l.D$)((...a)=>o.submitForm&&o.submitForm(...a),["prevent"]))},[(0,n.Lk)("div",Dw,[e[12]||(e[12]=(0,n.Lk)("label",{class:"form-label"},[(0,n.eW)("Nama Desa "),(0,n.Lk)("span",{class:"text-danger"},"*")],-1)),(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":e[1]||(e[1]=a=>i.formData.iddesa=a),required:"",disabled:i.isDesaListLoading},[(0,n.Lk)("option",ww,(0,k.v_)(i.isDesaListLoading?"Memuat...":"Pilih Desa"),1),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.desaList,a=>((0,n.uX)(),(0,n.CE)("option",{key:a.iddesa,value:a.iddesa},(0,k.v_)(a.wilayah.namawilayah),9,Fw))),128))],8,Mw),[[l.u1,i.formData.iddesa]])]),(0,n.Lk)("div",Xw,[e[13]||(e[13]=(0,n.Lk)("label",{class:"form-label"},[(0,n.eW)("Bidang Usaha "),(0,n.Lk)("span",{class:"text-danger"},"*")],-1)),(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":e[2]||(e[2]=a=>i.formData.idbidangusaha=a),required:"",disabled:i.isBusinessFieldsLoading},[(0,n.Lk)("option",Tw,(0,k.v_)(i.isBusinessFieldsLoading?"Memuat...":"Pilih Bidang Usaha"),1),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.businessFields,a=>((0,n.uX)(),(0,n.CE)("option",{key:a.idbidangusaha,value:a.idbidangusaha},(0,k.v_)(a.namabidangusaha),9,Sw))),128))],8,xw),[[l.u1,i.formData.idbidangusaha]])]),(0,n.Lk)("div",Bw,[e[14]||(e[14]=(0,n.Lk)("label",{class:"form-label"},[(0,n.eW)("Nama Usaha "),(0,n.Lk)("span",{class:"text-danger"},"*")],-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=a=>i.formData.namausaha=a),placeholder:"Masukkan nama usaha",required:""},null,512),[[l.Jo,i.formData.namausaha]])]),(0,n.Lk)("div",Aw,[e[15]||(e[15]=(0,n.Lk)("label",{class:"form-label"},"Alamat Usaha",-1)),(0,n.bo)((0,n.Lk)("textarea",{class:"form-control","onUpdate:modelValue":e[4]||(e[4]=a=>i.formData.alamatusaha=a),rows:"3",placeholder:"Masukkan alamat lengkap usaha"},null,512),[[l.Jo,i.formData.alamatusaha]])]),(0,n.Lk)("div",_w,[e[16]||(e[16]=(0,n.Lk)("label",{class:"form-label"},"Deskripsi Usaha",-1)),(0,n.bo)((0,n.Lk)("textarea",{class:"form-control","onUpdate:modelValue":e[5]||(e[5]=a=>i.formData.deskripsiusaha=a),rows:"4",placeholder:"Jelaskan tentang badan usaha"},null,512),[[l.Jo,i.formData.deskripsiusaha]])]),(0,n.Lk)("div",jw,[e[17]||(e[17]=(0,n.Lk)("label",{class:"form-label"},"Upload Logo Usaha",-1)),(0,n.Lk)("input",{type:"file",class:"form-control",accept:"image/*",onChange:e[6]||(e[6]=(...a)=>o.handleLogoUpload&&o.handleLogoUpload(...a))},null,32),(0,n.Lk)("div",Vw,[i.logoPreviewUrl?((0,n.uX)(),(0,n.CE)("div",Iw,[(0,n.Lk)("img",{src:i.logoPreviewUrl,alt:"Preview Logo",class:"img-thumbnail",style:{"max-width":"150px","max-height":"150px"}},null,8,Nw)])):o.isEditMode&&i.formData.logousaha?((0,n.uX)(),(0,n.CE)("div",Uw,[(0,n.Lk)("img",{src:i.formData.logousaha,alt:"Logo Saat Ini",class:"img-thumbnail",style:{"max-width":"150px","max-height":"150px"}},null,8,Rw)])):(0,n.Q3)("",!0)])]),i.errorMessage?((0,n.uX)(),(0,n.CE)("div",Qw,(0,k.v_)(i.errorMessage),1)):(0,n.Q3)("",!0)],32)]),(0,n.Lk)("div",Ww,[(0,n.Lk)("button",{type:"button",class:"btn btn-danger",onClick:e[8]||(e[8]=(...a)=>o.closeModal&&o.closeModal(...a))},"Batal"),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[9]||(e[9]=(...a)=>o.submitForm&&o.submitForm(...a)),disabled:i.isLoading},[i.isLoading?((0,n.uX)(),(0,n.CE)("span",Ow)):((0,n.uX)(),(0,n.CE)("span",$w,"Simpan"))],8,Kw)])])])])}const Jw={iddesa:"",idbidangusaha:"",namausaha:"",alamatusaha:"",deskripsiusaha:"",logousaha:null};var qw={name:"addEditProfileModal",props:{profileToEdit:{type:Object,default:null}},data(){return{formData:{...Jw},selectedLogoFile:null,logoPreviewUrl:null,desaList:[],businessFields:[],isDesaListLoading:!1,isBusinessFieldsLoading:!1,isLoading:!1,errorMessage:null,toast:(0,ln.dj)()}},computed:{isEditMode(){return!!this.profileToEdit}},watch:{profileToEdit:{handler(a){a?(this.formData.iddesa=a.iddesa,this.formData.idbidangusaha=a.idbidangusaha,this.formData.namausaha=a.namausaha,this.formData.alamatusaha=a.alamatusaha,this.formData.deskripsiusaha=a.deskripsiusaha,this.formData.logousaha=a.logousaha):this.formData={...Jw},this.selectedLogoFile=null,this.logoPreviewUrl=null,this.errorMessage=null},immediate:!0,deep:!0}},created(){this.fetchDesaList(),this.fetchBusinessFields()},beforeUnmount(){this.logoPreviewUrl&&URL.revokeObjectURL(this.logoPreviewUrl)},methods:{closeModal(){this.$emit("close")},handleOverlayClick(a){a.target===a.currentTarget&&this.closeModal()},async fetchDesaList(){this.isDesaListLoading=!0;try{const a=await Mi({limit:-1});this.desaList=a.data?.data||a.data?.[0]?.data||[]}catch(a){this.toast.error("Gagal memuat daftar desa.")}finally{this.isDesaListLoading=!1}},async fetchBusinessFields(){this.isBusinessFieldsLoading=!0;try{const a=await fw({limit:-1});this.businessFields=a.data?.[0]?.data||[]}catch(a){this.toast.error("Gagal memuat daftar bidang usaha.")}finally{this.isBusinessFieldsLoading=!1}},handleLogoUpload(a){const e=a.target.files[0];if(this.logoPreviewUrl&&URL.revokeObjectURL(this.logoPreviewUrl),!e)return this.selectedLogoFile=null,void(this.logoPreviewUrl=null);this.selectedLogoFile=e,this.logoPreviewUrl=URL.createObjectURL(e)},async submitForm(){this.isLoading=!0,this.errorMessage=null;const a=new FormData;a.append("record[iddesa]",this.formData.iddesa),a.append("record[idbidangusaha]",this.formData.idbidangusaha),a.append("record[namausaha]",this.formData.namausaha),a.append("record[alamatusaha]",this.formData.alamatusaha),a.append("record[deskripsiusaha]",this.formData.deskripsiusaha),this.selectedLogoFile&&a.append("upload_logousaha",this.selectedLogoFile);try{let e;this.isEditMode?(a.append("_method","PUT"),e=await pw(this.profileToEdit.idusaha,a),this.toast.success("Data badan usaha berhasil diperbarui.")):(e=await gw(a),this.toast.success("Data badan usaha berhasil ditambah.")),this.$emit("save-successful",e.data.data),this.closeModal()}catch(e){this.errorMessage=e.response?.data?.failed||e.response?.data?.message||"Gagal menyimpan data. Silakan coba lagi.",this.toast.error("Gagal menyimpan data badan usaha.")}finally{this.isLoading=!1}}}};const Hw=(0,r.A)(qw,[["render",Gw],["__scopeId","data-v-22e2eb02"]]);var Yw=Hw;const zw={class:"modal-header"},Zw={class:"modal-body"},aF={key:0,class:"text-center p-5"},eF={key:1,class:"text-center p-5 text-danger"},tF={key:0,class:"text-muted"},sF={key:2,class:"profile-container"},iF={class:"text-center mb-4"},lF=["src"],nF={key:1,src:"https://placehold.co/150x150/EBF4FF/7F9CF5?text=Logo",alt:"Logo Default",class:"logo-usaha"},oF={class:"nama-usaha mt-3"},rF={class:"alamat-usaha"},cF={class:"row detail-section"},dF={class:"col-md-6"},uF={class:"col-md-6"},mF={class:"detail-section"},kF={class:"text-content"},hF={class:"modal-footer"};function gF(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",{class:"modal-overlay",onClick:e[3]||(e[3]=(...a)=>o.closeModal&&o.closeModal(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[2]||(e[2]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",zw,[e[4]||(e[4]=(0,n.Lk)("h5",{class:"modal-title"},"Detail Profil Usaha",-1)),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",Zw,[i.isLoading?((0,n.uX)(),(0,n.CE)("div",aF,e[5]||(e[5]=[(0,n.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,n.Lk)("span",{class:"visually-hidden"},"Loading...")],-1),(0,n.Lk)("p",{class:"mt-2"},"Memuat data...",-1)]))):i.error?((0,n.uX)(),(0,n.CE)("div",eF,[e[6]||(e[6]=(0,n.Lk)("i",{class:"fa fa-exclamation-triangle fa-3x mb-3"},null,-1)),e[7]||(e[7]=(0,n.Lk)("h4",null,"Terjadi Kesalahan",-1)),(0,n.Lk)("p",null,(0,k.v_)(i.error),1),i.debugMessage?((0,n.uX)(),(0,n.CE)("small",tF,"Detail: "+(0,k.v_)(i.debugMessage),1)):(0,n.Q3)("",!0)])):i.profile?((0,n.uX)(),(0,n.CE)("div",sF,[(0,n.Lk)("div",iF,[i.profile.logousaha?((0,n.uX)(),(0,n.CE)("img",{key:0,src:i.profile.logousaha,alt:"Logo Usaha",class:"logo-usaha",onerror:"this.src='https://placehold.co/150x150/EBF4FF/7F9CF5?text=Logo'"},null,8,lF)):((0,n.uX)(),(0,n.CE)("img",nF)),(0,n.Lk)("h2",oF,(0,k.v_)(i.profile.namausaha||"Nama Usaha Belum Diatur"),1),(0,n.Lk)("p",rF,(0,k.v_)(i.profile.alamatusaha||"Alamat belum diatur"),1)]),e[11]||(e[11]=(0,n.Lk)("hr",null,null,-1)),(0,n.Lk)("div",cF,[(0,n.Lk)("div",dF,[e[8]||(e[8]=(0,n.Lk)("h5",null,[(0,n.Lk)("i",{class:"fa fa-map-marker me-2"}),(0,n.eW)("Asal Desa")],-1)),(0,n.Lk)("p",null,(0,k.v_)(i.profile.wilayah?.namawilayah||"-"),1)]),(0,n.Lk)("div",uF,[e[9]||(e[9]=(0,n.Lk)("h5",null,[(0,n.Lk)("i",{class:"fa fa-briefcase me-2"}),(0,n.eW)("Bidang Usaha")],-1)),(0,n.Lk)("p",null,(0,k.v_)(i.profile.bidang?.namabidangusaha||"-"),1)])]),e[12]||(e[12]=(0,n.Lk)("hr",null,null,-1)),(0,n.Lk)("div",mF,[e[10]||(e[10]=(0,n.Lk)("h4",null,"Deskripsi Usaha",-1)),(0,n.Lk)("p",kF,(0,k.v_)(i.profile.deskripsiusaha||"Tidak ada deskripsi usaha."),1)])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",hF,[(0,n.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:e[1]||(e[1]=(...a)=>o.closeModal&&o.closeModal(...a))},"Tutup")])])])}var pF={name:"DetailUsahaModal",props:{profileToView:{type:Object,required:!0}},emits:["close"],data(){return{profile:null,isLoading:!1,error:null,debugMessage:""}},methods:{closeModal(){this.$emit("close")},async fetchUsahaProfile(){const a=this.profileToView?.idusaha;if(a){this.isLoading=!0,this.error=null,this.debugMessage="";try{const e=await hw(a),t=e.data;t&&t.length>0&&t[0].data&&t[0].data.length>0?this.profile=t[0].data[0]:(this.error="Data profil usaha tidak ditemukan atau format respons tidak sesuai.",this.debugMessage=`Struktur data yang diterima: ${JSON.stringify(t)}`)}catch(e){console.error("Gagal mengambil detail profil usaha:",e),this.error=e.message||"Terjadi kesalahan saat memuat data.",e.response&&(this.debugMessage=`Status: ${e.response.status} - Data: ${JSON.stringify(e.response.data)}`)}finally{this.isLoading=!1}}else this.error="ID badan usaha tidak valid atau tidak tersedia."}},mounted(){this.fetchUsahaProfile()},watch:{profileToView:{handler(a,e){a?.idusaha!==e?.idusaha&&this.fetchUsahaProfile()},deep:!0}}};const bF=(0,r.A)(pF,[["render",gF],["__scopeId","data-v-640f883e"]]);var fF=bF,LF={components:{AddEditProfileModal:Yw,DetailProfileModal:fF},data(){return{profiles:[],businessFields:[],isLoading:!1,sortColumn:"created_at",sortDirection:"asc",isModalVisible:!1,currentPage:1,perPage:10,totalItems:0,profileBeingEdited:null,isFilterVisible:!1,filters:{namausaha:"",alamatusaha:"",namawilayah:"",idbidangusaha:""},isDetailModalVisible:!1,profileBeingViewed:null}},computed:{paginatedProfiles(){return this.profiles},totalPages(){return this.perPage<=0?1:Math.ceil(this.totalItems/this.perPage)},pageNumbers(){const a=[],e=5;let t=Math.max(1,this.currentPage-Math.floor(e/2)),s=t+e-1;s>this.totalPages&&(s=this.totalPages,t=Math.max(1,s-e+1));for(let i=t;i<=s;i++)a.push(i);return a}},watch:{currentPage(){this.fetchProfiles()},perPage(){this.currentPage=1,this.fetchProfiles()}},async mounted(){this.toast=(0,ln.dj)(),await this.fetchProfiles(),await this.fetchBusinessFields()},methods:{openAddModal(){this.profileBeingEdited=null,this.isModalVisible=!0},openEditModal(a){this.profileBeingEdited={...a},this.isModalVisible=!0},closeModal(){this.isModalVisible=!1,this.profileBeingEdited=null},openDetailModal(a){this.profileBeingViewed={...a},this.isDetailModalVisible=!0},closeDetailModal(){this.isDetailModalVisible=!1,this.profileBeingViewed=null},handleSaveSuccessful(){this.closeModal(),this.fetchProfiles()},async fetchBusinessFields(){try{const a=await fw({limit:-1});this.businessFields=a.data?.[0]?.data||[]}catch(a){this.toast.error("Gagal memuat daftar bidang usaha")}},async fetchProfiles(){this.isLoading=!0;try{const a={act:"badan-usaha",page:this.currentPage,limit:this.perPage,order:this.sortColumn?`${this.sortColumn} ${this.sortDirection}`:"",group:""},e=Object.entries(this.filters).filter(([,a])=>""!==a&&null!==a).map(([a,e])=>`${a}=${e}`);a.filter=e.length>0?e.join(","):"";const t=await kw(a),s=t.data?.data||t.data?.[0]?.data||[],i=t.data?.meta?.pagination||t.data?.[0]?.meta?.pagination||{};this.profiles=s,this.totalItems=i.total||s.length}catch(a){console.error("Error fetching profiles:",a),this.toast.error("Gagal memuat data badan usaha.",{icon:"fa fa-times"})}finally{this.isLoading=!1}},advancedDeleteAlert(a){this.$swal({title:"Hapus Data Badan Usaha",text:"Apakah Anda yakin ingin menghapus data ini?",icon:"warning",showCancelButton:!0,confirmButtonText:'<i class="fa fa-check me-2"></i> Hapus!',confirmButtonColor:"#d33",cancelButtonText:'<i class="fa fa-times me-2"></i> Batal',cancelButtonColor:"#efefef",reverseButtons:!0}).then(async e=>{if(e.isConfirmed)try{await bw(a),1===this.profiles.length&&this.currentPage>1?this.currentPage--:this.fetchProfiles(),this.toast.success("Data badan usaha berhasil dihapus",{icon:"fa fa-check"})}catch(t){this.toast.error("Gagal menghapus data badan usaha",{icon:"fa fa-times"})}})},sortBy(a){this.sortColumn===a?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=a,this.sortDirection="asc"),this.fetchProfiles()},changePage(a){a>=1&&a<=this.totalPages&&(this.currentPage=a)},toggleFilterVisibility(){this.isFilterVisible=!this.isFilterVisible},applyFilters(){this.currentPage=1,this.fetchProfiles()},resetFilters(){this.filters.namausaha="",this.filters.alamatusaha="",this.filters.namawilayah="",this.filters.idbidangusaha="",this.sortColumn="created_at",this.sortDirection="asc",this.currentPage=1,this.fetchProfiles()}}};const yF=(0,r.A)(LF,[["render",mw],["__scopeId","data-v-17d568db"]]);var vF=yF,CF={components:{ProfilesTable:vF}};const PF=(0,r.A)(CF,[["render",bM]]);var EF=PF;const DF={class:"container-fluid"},MF={class:"row"};function wF(a,e,t,s,i,l){const o=(0,n.g2)("Breadcrumbs"),r=(0,n.g2)("ManagementsTable");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(o,{main:"Badan Usaha",title:a.$route.meta.title},null,8,["title"]),(0,n.Lk)("div",DF,[(0,n.Lk)("div",MF,[(0,n.bF)(r)])])])}const FF={class:"col-sm-12"},XF={class:"card"},xF={class:"card-body"},TF={class:"d-flex justify-content-end align-items-start mb-3"},SF={class:"d-flex gap-2"},BF={key:0,class:"fa fa-angle-up me-2"},AF={key:1,class:"fa fa-angle-down me-2"},_F={key:0,class:"border p-3 mb-3 rounded filter-section"},jF={class:"row g-3"},VF={class:"col-md-3"},IF={class:"col-md-3"},NF={class:"d-flex justify-content-end gap-2 mt-3"},UF={class:"table-responsive signal-table"},RF={class:"table table-hover"},QF={key:0,class:"fa fa-sort-asc"},WF={key:1,class:"fa fa-sort-desc"},KF={key:2,class:"fa fa-sort"},OF={key:0,class:"fa fa-sort-asc"},$F={key:1,class:"fa fa-sort-desc"},GF={key:2,class:"fa fa-sort"},JF={key:0},qF={scope:"row"},HF=["src"],YF={key:1,class:"text-muted"},zF={class:"btn-group"},ZF=["onClick"],aX=["onClick"],eX=["onClick"],tX={key:0},sX={class:"d-flex flex-column flex-md-row justify-content-md-between align-items-center mt-3 px-3 pb-3"},iX={class:"mt-2"},lX={key:0,class:"text-muted"},nX={key:0,class:"d-flex align-items-center flex-wrap gap-2 mt-2"},oX={class:"pagination mb-0"},rX={key:0,class:"page-item"},cX={key:1,class:"page-item disabled"},dX=["onClick"],uX={key:2,class:"page-item disabled"},mX={key:3,class:"page-item"};function kX(a,e,t,s,i,o){const r=(0,n.g2)("add-edit-management-modal");return(0,n.uX)(),(0,n.CE)("div",FF,[i.isModalVisible?((0,n.uX)(),(0,n.Wv)(r,{key:0,"management-to-edit":i.managementBeingEdited,onClose:o.closeModal,onSaveSuccessful:o.handleSaveSuccessful},null,8,["management-to-edit","onClose","onSaveSuccessful"])):(0,n.Q3)("",!0),(0,n.Lk)("div",XF,[e[33]||(e[33]=(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("h3",null,"Daftar Pengurus Usaha")],-1)),(0,n.Lk)("div",xF,[(0,n.Lk)("div",TF,[(0,n.Lk)("div",SF,[(0,n.Lk)("button",{class:"btn btn-outline-light txt-dark",onClick:e[0]||(e[0]=(...a)=>o.toggleFilterVisibility&&o.toggleFilterVisibility(...a))},[i.isFilterVisible?((0,n.uX)(),(0,n.CE)("i",BF)):((0,n.uX)(),(0,n.CE)("i",AF)),(0,n.Lk)("span",null,(0,k.v_)(i.isFilterVisible?"Sembunyikan":"Tampilkan")+" Filter",1)]),(0,n.Lk)("button",{class:"btn btn-success",onClick:e[1]||(e[1]=(...a)=>o.openAddModal&&o.openAddModal(...a))},e[12]||(e[12]=[(0,n.Lk)("i",{class:"fa fa-plus me-2"},null,-1),(0,n.Lk)("span",null," Tambah Data",-1)]))])]),i.isFilterVisible?((0,n.uX)(),(0,n.CE)("div",_F,[(0,n.Lk)("div",jF,[(0,n.Lk)("div",VF,[e[13]||(e[13]=(0,n.Lk)("label",{for:"filterEnterpriseName",class:"form-label"},"Nama Usaha",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterEnterpriseName",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.filters.namausaha=a),placeholder:"Filter berdasarkan nama usaha"},null,512),[[l.Jo,i.filters.namausaha]])]),(0,n.Lk)("div",IF,[e[14]||(e[14]=(0,n.Lk)("label",{for:"filterSkDate",class:"form-label"},"Tanggal SK",-1)),(0,n.bo)((0,n.Lk)("input",{type:"date",id:"filterSkDate",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=a=>i.filters.tanggal_sk=a)},null,512),[[l.Jo,i.filters.tanggal_sk]])])]),(0,n.Lk)("div",NF,[(0,n.Lk)("button",{class:"btn btn-secondary",onClick:e[4]||(e[4]=(...a)=>o.resetFilters&&o.resetFilters(...a))},e[15]||(e[15]=[(0,n.Lk)("i",{class:"fa fa-refresh me-2"},null,-1),(0,n.Lk)("span",null,"Reset Filter",-1)])),(0,n.Lk)("button",{class:"btn btn-primary",onClick:e[5]||(e[5]=(...a)=>o.applyFilters&&o.applyFilters(...a))},e[16]||(e[16]=[(0,n.Lk)("i",{class:"fa fa-search me-2"},null,-1),(0,n.Lk)("span",null,"Terapkan Filter",-1)]))])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",UF,[(0,n.Lk)("table",RF,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[e[19]||(e[19]=(0,n.Lk)("th",{scope:"col"},"No",-1)),e[20]||(e[20]=(0,n.Lk)("th",{scope:"col",style:{width:"80px"}},"Logo Usaha",-1)),(0,n.Lk)("th",{scope:"col",onClick:e[6]||(e[6]=a=>o.sortBy("namausaha"))},[e[17]||(e[17]=(0,n.eW)(" Nama Usaha ")),"namausaha"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",QF)):"namausaha"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",WF)):((0,n.uX)(),(0,n.CE)("i",KF))]),(0,n.Lk)("th",{scope:"col",onClick:e[7]||(e[7]=a=>o.sortBy("tanggal_sk"))},[e[18]||(e[18]=(0,n.eW)(" Tanggal SK ")),"tanggal_sk"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",OF)):"tanggal_sk"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",$F)):((0,n.uX)(),(0,n.CE)("i",GF))]),e[21]||(e[21]=(0,n.Lk)("th",{scope:"col"},"Aksi",-1))])]),(0,n.Lk)("tbody",null,[i.isLoading?((0,n.uX)(),(0,n.CE)("tr",JF,e[22]||(e[22]=[(0,n.Lk)("td",{colspan:"5",class:"text-center p-5"},[(0,n.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,n.Lk)("span",{class:"visually-hidden"},"Loading...")]),(0,n.Lk)("p",{class:"mt-2"},"Memuat data...")],-1)]))):((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.managements,(a,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:a.idpengurus},[(0,n.Lk)("th",qF,(0,k.v_)((i.currentPage-1)*i.perPage+t+1),1),(0,n.Lk)("td",null,[a.usaha?.logousaha?((0,n.uX)(),(0,n.CE)("img",{key:0,src:a.usaha?.logousaha,alt:"Logo Usaha",style:{height:"40px",width:"auto"}},null,8,HF)):((0,n.uX)(),(0,n.CE)("span",YF,"-"))]),(0,n.Lk)("td",null,(0,k.v_)(a.usaha?.namausaha||"-"),1),(0,n.Lk)("td",null,(0,k.v_)(a.tanggal_sk||"-"),1),(0,n.Lk)("td",null,[(0,n.Lk)("div",zF,[(0,n.Lk)("button",{class:"btn btn-info btn-sm",onClick:e=>o.openSkFile(a.filesk),title:"Lihat File SK"},e[23]||(e[23]=[(0,n.Lk)("i",{class:"fa fa-file"},null,-1)]),8,ZF),(0,n.Lk)("button",{class:"btn btn-primary btn-sm",onClick:e=>o.openEditModal(a),title:"Ubah Data"},e[24]||(e[24]=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)]),8,aX),(0,n.Lk)("button",{class:"btn btn-danger sweet-11 btn-sm",type:"button",onClick:e=>o.advancedDeleteAlert(a.idpengurus),title:"Hapus Data"},e[25]||(e[25]=[(0,n.Lk)("i",{class:"fa fa-trash"},null,-1)]),8,eX)])])]))),128)),0===o.paginatedManagements.length?((0,n.uX)(),(0,n.CE)("tr",tX,e[26]||(e[26]=[(0,n.Lk)("td",{colspan:"5",class:"text-center"},"Tidak ada data yang cocok atau tersedia.",-1)]))):(0,n.Q3)("",!0)],64))])]),(0,n.Lk)("div",sX,[(0,n.Lk)("div",iX,[i.totalItems>0?((0,n.uX)(),(0,n.CE)("span",lX,[e[27]||(e[27]=(0,n.eW)(" Menampilkan ")),(0,n.Lk)("strong",null,(0,k.v_)((i.currentPage-1)*i.perPage+1),1),e[28]||(e[28]=(0,n.eW)(" - ")),(0,n.Lk)("strong",null,(0,k.v_)(Math.min(i.currentPage*i.perPage,i.totalItems)),1),e[29]||(e[29]=(0,n.eW)(" dari ")),(0,n.Lk)("strong",null,(0,k.v_)(i.totalItems),1),e[30]||(e[30]=(0,n.eW)(" data "))])):(0,n.Q3)("",!0)]),-1!==i.perPage&&o.totalPages>1?((0,n.uX)(),(0,n.CE)("nav",nX,[(0,n.Lk)("ul",oX,[(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[8]||(e[8]=a=>o.changePage(i.currentPage-1))},"Prev")],2),o.pageNumbers[0]>1?((0,n.uX)(),(0,n.CE)("li",rX,[(0,n.Lk)("button",{class:"page-link",onClick:e[9]||(e[9]=a=>o.changePage(1))},"1")])):(0,n.Q3)("",!0),o.pageNumbers[0]>2?((0,n.uX)(),(0,n.CE)("li",cX,e[31]||(e[31]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.pageNumbers,a=>((0,n.uX)(),(0,n.CE)("li",{key:a,class:(0,k.C4)(["page-item",{active:i.currentPage===a}])},[(0,n.Lk)("button",{class:"page-link",onClick:e=>o.changePage(a)},(0,k.v_)(a),9,dX)],2))),128)),o.pageNumbers.slice(-1)[0]<o.totalPages-1?((0,n.uX)(),(0,n.CE)("li",uX,e[32]||(e[32]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),o.pageNumbers.slice(-1)[0]<o.totalPages?((0,n.uX)(),(0,n.CE)("li",mX,[(0,n.Lk)("button",{class:"page-link",onClick:e[10]||(e[10]=a=>o.changePage(o.totalPages))},(0,k.v_)(o.totalPages),1)])):(0,n.Q3)("",!0),(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:i.currentPage===o.totalPages}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[11]||(e[11]=a=>o.changePage(i.currentPage+1))},"Next")],2)])])):(0,n.Q3)("",!0)])])])])}const hX=(a={})=>Na.get("",{params:{act:"pengurus-usaha",...a}}),gX=a=>(a.append("act","pengurus-usaha"),Na.post("",a)),pX=(a,e)=>a?(e.append("act","pengurus-usaha"),e.append("key",a),Na.post("",e)):Promise.reject(new Error("ID pengurus usaha tidak tersedia.")),bX=a=>a?Na.delete("",{data:{act:"pengurus-usaha",key:a}}):Promise.reject(new Error("ID pengurus usaha tidak tersedia.")),fX={class:"modal-header"},LX={class:"modal-title"},yX={class:"modal-body"},vX={class:"mb-3"},CX=["disabled"],PX={disabled:"",value:""},EX=["value"],DX={class:"mb-3"},MX={class:"mb-3"},wX={key:0,class:"mt-2"},FX=["href"],XX={key:1,class:"mt-2"},xX={key:0,class:"alert alert-danger mt-3"},TX={class:"modal-footer"},SX=["disabled"],BX={key:0,class:"spinner-border spinner-border-sm",role:"status"},AX={key:1};function _X(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",{class:"modal-overlay",onClick:e[8]||(e[8]=(...a)=>o.handleOverlayClick&&o.handleOverlayClick(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[7]||(e[7]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",fX,[(0,n.Lk)("h5",LX,(0,k.v_)(o.isEditMode?"Edit Data Pengurus Usaha":"Tambah Data Pengurus Usaha"),1),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",yX,[(0,n.Lk)("form",{onSubmit:e[4]||(e[4]=(0,l.D$)((...a)=>o.submitForm&&o.submitForm(...a),["prevent"]))},[(0,n.Lk)("div",vX,[e[9]||(e[9]=(0,n.Lk)("label",{class:"form-label"},"Nama Usaha",-1)),(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":e[1]||(e[1]=a=>i.formData.idusaha=a),required:"",disabled:i.isUsahaListLoading},[(0,n.Lk)("option",PX,(0,k.v_)(i.isUsahaListLoading?"Memuat...":"Pilih Usaha"),1),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.usahaList,a=>((0,n.uX)(),(0,n.CE)("option",{key:a.idusaha,value:a.idusaha},(0,k.v_)(a.namausaha),9,EX))),128))],8,CX),[[l.u1,i.formData.idusaha]])]),(0,n.Lk)("div",DX,[e[10]||(e[10]=(0,n.Lk)("label",{class:"form-label"},"Tanggal SK",-1)),(0,n.bo)((0,n.Lk)("input",{type:"date",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.formData.tanggal_sk=a),required:""},null,512),[[l.Jo,i.formData.tanggal_sk]])]),(0,n.Lk)("div",MX,[e[13]||(e[13]=(0,n.Lk)("label",{class:"form-label"},"Upload File SK",-1)),(0,n.Lk)("input",{type:"file",class:"form-control",accept:".pdf,.doc,.docx,image/*",onChange:e[3]||(e[3]=(...a)=>o.handleFileUpload&&o.handleFileUpload(...a))},null,32),o.isEditMode&&i.formData.filesk&&!i.selectedSkFile?((0,n.uX)(),(0,n.CE)("div",wX,[e[11]||(e[11]=(0,n.eW)(" File saat ini: ")),(0,n.Lk)("a",{href:i.formData.filesk,target:"_blank",rel:"noopener noreferrer"},"Lihat File",8,FX)])):(0,n.Q3)("",!0),i.skFileName?((0,n.uX)(),(0,n.CE)("div",XX,[e[12]||(e[12]=(0,n.eW)(" File baru: ")),(0,n.Lk)("strong",null,(0,k.v_)(i.skFileName),1)])):(0,n.Q3)("",!0)]),i.errorMessage?((0,n.uX)(),(0,n.CE)("div",xX,(0,k.v_)(i.errorMessage),1)):(0,n.Q3)("",!0)],32)]),(0,n.Lk)("div",TX,[(0,n.Lk)("button",{type:"button",class:"btn btn-danger",onClick:e[5]||(e[5]=(...a)=>o.closeModal&&o.closeModal(...a))},"Batal"),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[6]||(e[6]=(...a)=>o.submitForm&&o.submitForm(...a)),disabled:i.isLoading},[i.isLoading?((0,n.uX)(),(0,n.CE)("span",BX)):((0,n.uX)(),(0,n.CE)("span",AX,"Simpan"))],8,SX)])])])])}const jX={idusaha:"",tanggal_sk:"",filesk:null};var VX={name:"addEditManagementModal",props:{managementToEdit:{type:Object,default:null}},data(){return{formData:{...jX},selectedSkFile:null,skFileName:"",usahaList:[],isUsahaListLoading:!1,isLoading:!1,errorMessage:null,toast:(0,ln.dj)()}},computed:{isEditMode(){return!!this.managementToEdit}},watch:{managementToEdit:{handler(a){a?(this.formData.idusaha=a.idusaha,this.formData.tanggal_sk=a.tanggal_sk,this.formData.filesk=a.filesk):this.formData={...jX},this.selectedSkFile=null,this.skFileName="",this.errorMessage=null},immediate:!0,deep:!0}},created(){this.fetchUsahaList()},methods:{closeModal(){this.$emit("close")},handleOverlayClick(a){a.target===a.currentTarget&&this.closeModal()},async fetchUsahaList(){this.isUsahaListLoading=!0;try{const a=await kw({limit:-1});this.usahaList=a.data?.data||a.data?.[0]?.data||[]}catch(a){this.toast.error("Gagal memuat daftar usaha")}finally{this.isUsahaListLoading=!1}},handleFileUpload(a){const e=a.target.files[0];if(!e)return this.selectedSkFile=null,void(this.skFileName="");this.selectedSkFile=e,this.skFileName=e.name},async submitForm(){this.isLoading=!0,this.errorMessage=null;const a=new FormData;a.append("record[idusaha]",this.formData.idusaha),a.append("record[tanggal_sk]",this.formData.tanggal_sk),this.selectedSkFile&&a.append("upload_filesk",this.selectedSkFile);try{let e;this.isEditMode?(a.append("_method","PUT"),e=await pX(this.managementToEdit.idpengurus,a),this.toast.success("Data pengurus usaha berhasil diperbarui")):(e=await gX(a),this.toast.success("Data pengurus usaha berhasil ditambah")),this.$emit("save-successful",e.data.data),this.closeModal()}catch(e){this.errorMessage=e.response?.data?.failed||e.response?.data?.message||"Gagal menyimpan data. Silakan coba lagi",this.toast.error("Gagal menyimpan data pengurus usaha")}finally{this.isLoading=!1}}}};const IX=(0,r.A)(VX,[["render",_X],["__scopeId","data-v-3c911186"]]);var NX=IX,UX={components:{AddEditManagementModal:NX},data(){return{managements:[],isLoading:!1,sortColumn:"created_at",sortDirection:"asc",isModalVisible:!1,currentPage:1,perPage:10,totalItems:0,managementBeingEdited:null,isFilterVisible:!1,filters:{namausaha:"",tanggal_sk:""}}},computed:{paginatedManagements(){return this.managements},totalPages(){return this.perPage<=0?1:Math.ceil(this.totalItems/this.perPage)},pageNumbers(){const a=[],e=5;let t=Math.max(1,this.currentPage-Math.floor(e/2)),s=t+e-1;s>this.totalPages&&(s=this.totalPages,t=Math.max(1,s-e+1));for(let i=t;i<=s;i++)a.push(i);return a}},watch:{currentPage(){this.fetchManagements()},perPage(){this.currentPage=1,this.fetchManagements()}},async mounted(){this.toast=(0,ln.dj)(),await this.fetchManagements()},methods:{openAddModal(){this.managementBeingEdited=null,this.isModalVisible=!0},openEditModal(a){this.managementBeingEdited={...a},this.isModalVisible=!0},closeModal(){this.isModalVisible=!1,this.managementBeingEdited=null},openSkFile(a){a?window.open(a,"_blank"):this.toast.info("Tidak ada file SK yang tersedia.",{icon:"fa fa-info-circle"})},handleSaveSuccessful(){this.closeModal(),this.fetchManagements()},async fetchManagements(){this.isLoading=!0;try{const a={act:"pengurus-usaha",page:this.currentPage,limit:this.perPage,order:this.sortColumn?`${this.sortColumn} ${this.sortDirection}`:"",group:""},e=Object.entries(this.filters).filter(([,a])=>""!==a&&null!==a).map(([a,e])=>`${a}=${e}`);e.length>0?a.filter=e.join(","):a.filter="";const t=await hX(a),s=t.data?.data||t.data?.[0]?.data||[],i=t.data?.meta?.pagination||t.data?.[0]?.meta?.pagination||{};this.managements=s,this.totalItems=i.total||s.length}catch(a){console.error("Error fetching managements:",a),this.toast.error("Gagal memuat data pengurus usaha",{icon:"fa fa-times"})}finally{this.isLoading=!1}},advancedDeleteAlert(a){this.$swal({title:"Hapus Data Pengurus Usaha",text:"Apakah Anda yakin ingin menghapus data ini?",icon:"warning",showCancelButton:!0,confirmButtonText:'<i class="fa fa-check me-2"></i> Hapus!',confirmButtonColor:"#d33",cancelButtonText:'<i class="fa fa-times me-2"></i> Batal',cancelButtonColor:"#efefef",reverseButtons:!0}).then(async e=>{if(e.isConfirmed)try{await bX(a),1===this.managements.length&&this.currentPage>1?this.currentPage--:this.fetchManagements(),this.toast.success("Data pengurus usaha berhasil dihapus",{icon:"fa fa-check"})}catch(t){this.toast.error("Gagal menghapus data pengurus usaha",{icon:"fa fa-times"})}})},sortBy(a){this.sortColumn===a?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=a,this.sortDirection="asc"),this.fetchManagements()},changePage(a){a>=1&&a<=this.totalPages&&(this.currentPage=a)},toggleFilterVisibility(){this.isFilterVisible=!this.isFilterVisible},applyFilters(){this.currentPage=1,this.fetchManagements()},resetFilters(){this.filters.namadesa="",this.filters.tahunawal="",this.filters.tahunakhir="",this.filters.tanggal_sk="",this.sortColumn="created_at",this.sortDirection="desc",this.currentPage=1,this.fetchManagements()}}};const RX=(0,r.A)(UX,[["render",kX],["__scopeId","data-v-f1ffa856"]]);var QX=RX,WX={components:{ManagementsTable:QX}};const KX=(0,r.A)(WX,[["render",wF]]);var OX=KX;const $X={class:"container-fluid"},GX={class:"row"};function JX(a,e,t,s,i,l){const o=(0,n.g2)("Breadcrumbs"),r=(0,n.g2)("ReportTable");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(o,{main:"Badan Usaha",title:a.$route.meta.title},null,8,["title"]),(0,n.Lk)("div",$X,[(0,n.Lk)("div",GX,[(0,n.bF)(r)])])])}const qX={class:"col-sm-12"},HX={class:"card"},YX={class:"card-body"},zX={class:"d-flex justify-content-end align-items-start mb-3"},ZX={class:"d-flex gap-2"},ax={key:0,class:"fa fa-angle-up me-2"},ex={key:1,class:"fa fa-angle-down me-2"},tx={key:0,class:"border p-3 mb-3 rounded filter-section"},sx={class:"row g-3"},ix={class:"col-md-3"},lx={class:"col-md-3"},nx={class:"col-md-3"},ox={class:"col-md-3"},rx={class:"d-flex justify-content-end gap-2 mt-3"},cx={class:"table-responsive signal-table"},dx={class:"table table-hover"},ux={key:0,class:"fa fa-sort-asc"},mx={key:1,class:"fa fa-sort-desc"},kx={key:2,class:"fa fa-sort"},hx={key:0,class:"fa fa-sort-asc"},gx={key:1,class:"fa fa-sort-desc"},px={key:2,class:"fa fa-sort"},bx={key:0,class:"fa fa-sort-asc"},fx={key:1,class:"fa fa-sort-desc"},Lx={key:2,class:"fa fa-sort"},yx={key:0,class:"fa fa-sort-asc"},vx={key:1,class:"fa fa-sort-desc"},Cx={key:2,class:"fa fa-sort"},Px={key:0},Ex={scope:"row"},Dx=["src"],Mx={key:1,class:"text-muted"},wx={class:"btn-group"},Fx=["onClick"],Xx=["onClick"],xx=["onClick"],Tx={key:0},Sx={class:"d-flex flex-column flex-md-row justify-content-md-between align-items-center mt-3 px-3 pb-3"},Bx={class:"mt-2"},Ax={key:0,class:"text-muted"},_x={key:0,class:"d-flex align-items-center flex-wrap gap-2 mt-2"},jx={class:"pagination mb-0"},Vx={key:0,class:"page-item"},Ix={key:1,class:"page-item disabled"},Nx=["onClick"],Ux={key:2,class:"page-item disabled"},Rx={key:3,class:"page-item"};function Qx(a,e,t,s,i,o){const r=(0,n.g2)("add-edit-report-modal");return(0,n.uX)(),(0,n.CE)("div",qX,[i.isModalVisible?((0,n.uX)(),(0,n.Wv)(r,{key:0,"report-to-edit":i.reportBeingEdited,onClose:o.closeModal,onSaveSuccessful:o.handleSaveSuccessful},null,8,["report-to-edit","onClose","onSaveSuccessful"])):(0,n.Q3)("",!0),(0,n.Lk)("div",HX,[e[41]||(e[41]=(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("h3",null,"Daftar Laporan Usaha")],-1)),(0,n.Lk)("div",YX,[(0,n.Lk)("div",zX,[(0,n.Lk)("div",ZX,[(0,n.Lk)("button",{class:"btn btn-outline-light txt-dark",onClick:e[0]||(e[0]=(...a)=>o.toggleFilterVisibility&&o.toggleFilterVisibility(...a))},[i.isFilterVisible?((0,n.uX)(),(0,n.CE)("i",ax)):((0,n.uX)(),(0,n.CE)("i",ex)),(0,n.Lk)("span",null,(0,k.v_)(i.isFilterVisible?"Sembunyikan":"Tampilkan")+" Filter",1)]),(0,n.Lk)("button",{class:"btn btn-success",onClick:e[1]||(e[1]=(...a)=>o.openAddModal&&o.openAddModal(...a))},e[16]||(e[16]=[(0,n.Lk)("i",{class:"fa fa-plus me-2"},null,-1),(0,n.Lk)("span",null," Tambah Data",-1)]))])]),i.isFilterVisible?((0,n.uX)(),(0,n.CE)("div",tx,[(0,n.Lk)("div",sx,[(0,n.Lk)("div",ix,[e[17]||(e[17]=(0,n.Lk)("label",{for:"filterUsahaName",class:"form-label"},"Nama Usaha",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterUsahaName",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.filters.namausaha=a),placeholder:"filter berdasarkan nama dokumen"},null,512),[[l.Jo,i.filters.namausaha]])]),(0,n.Lk)("div",lx,[e[18]||(e[18]=(0,n.Lk)("label",{for:"filterPeriodName",class:"form-label"},"Nama Periode laporan",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterPeriodName",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=a=>i.filters.namaperiodelaporan=a),placeholder:"Filter berdasarkan nama periode laporan"},null,512),[[l.Jo,i.filters.namaperiodelaporan]])]),(0,n.Lk)("div",nx,[e[19]||(e[19]=(0,n.Lk)("label",{for:"filterDate",class:"form-label"},"Tanggal Laporan",-1)),(0,n.bo)((0,n.Lk)("input",{type:"date",id:"filterDate",class:"form-control","onUpdate:modelValue":e[4]||(e[4]=a=>i.filters.tanggallaporan=a),placeholder:"Filter berdasarkan nama desa"},null,512),[[l.Jo,i.filters.tanggallaporan]])]),(0,n.Lk)("div",ox,[e[20]||(e[20]=(0,n.Lk)("label",{for:"filterVillageName",class:"form-label"},"Nama Desa",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterVillageName",class:"form-control","onUpdate:modelValue":e[5]||(e[5]=a=>i.filters.namawilayah=a),placeholder:"Filter berdasarkan nama desa"},null,512),[[l.Jo,i.filters.namawilayah]])])]),(0,n.Lk)("div",rx,[(0,n.Lk)("button",{class:"btn btn-secondary",onClick:e[6]||(e[6]=(...a)=>o.resetFilters&&o.resetFilters(...a))},e[21]||(e[21]=[(0,n.Lk)("i",{class:"fa fa-refresh me-2"},null,-1),(0,n.Lk)("span",null,"Reset Filter",-1)])),(0,n.Lk)("button",{class:"btn btn-primary",onClick:e[7]||(e[7]=(...a)=>o.applyFilters&&o.applyFilters(...a))},e[22]||(e[22]=[(0,n.Lk)("i",{class:"fa fa-search me-2"},null,-1),(0,n.Lk)("span",null,"Terapkan Filter",-1)]))])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",cx,[(0,n.Lk)("table",dx,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[e[27]||(e[27]=(0,n.Lk)("th",{scope:"col"},"No",-1)),e[28]||(e[28]=(0,n.Lk)("th",{scope:"col",style:{width:"80px"}},"Logo Usaha",-1)),(0,n.Lk)("th",{scope:"col",onClick:e[8]||(e[8]=a=>o.sortBy("namausaha"))},[e[23]||(e[23]=(0,n.eW)(" Nama Usaha ")),"namausaha"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",ux)):"namausaha"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",mx)):((0,n.uX)(),(0,n.CE)("i",kx))]),(0,n.Lk)("th",{scope:"col",onClick:e[9]||(e[9]=a=>o.sortBy("namaperiodelaporan"))},[e[24]||(e[24]=(0,n.eW)(" Nama Periode Laporan ")),"namaperiodelaporan"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",hx)):"namaperiodelaporan"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",gx)):((0,n.uX)(),(0,n.CE)("i",px))]),(0,n.Lk)("th",{scope:"col",onClick:e[10]||(e[10]=a=>o.sortBy("tanggallaporan"))},[e[25]||(e[25]=(0,n.eW)(" Tanggal Laporan ")),"tanggallaporan"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",bx)):"tanggallaporan"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",fx)):((0,n.uX)(),(0,n.CE)("i",Lx))]),(0,n.Lk)("th",{scope:"col",onClick:e[11]||(e[11]=a=>o.sortBy("namawilayah"))},[e[26]||(e[26]=(0,n.eW)(" Nama Desa ")),"namawilayah"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",yx)):"namawilayah"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",vx)):((0,n.uX)(),(0,n.CE)("i",Cx))]),e[29]||(e[29]=(0,n.Lk)("th",{scope:"col"},"Aksi",-1))])]),(0,n.Lk)("tbody",null,[i.isLoading?((0,n.uX)(),(0,n.CE)("tr",Px,e[30]||(e[30]=[(0,n.Lk)("td",{colspan:"7",class:"text-center p-5"},[(0,n.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,n.Lk)("span",{class:"visually-hidden"},"Loading...")]),(0,n.Lk)("p",{class:"mt-2"},"Memuat data...")],-1)]))):((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.reports,(a,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:a.iddokumen},[(0,n.Lk)("th",Ex,(0,k.v_)((i.currentPage-1)*i.perPage+t+1),1),(0,n.Lk)("td",null,[a.usaha?.logousaha?((0,n.uX)(),(0,n.CE)("img",{key:0,src:a.usaha?.logousaha,alt:"Logo",style:{height:"50px",width:"auto"}},null,8,Dx)):((0,n.uX)(),(0,n.CE)("span",Mx,"-"))]),(0,n.Lk)("td",null,(0,k.v_)(a.usaha?.namausaha||"-"),1),(0,n.Lk)("td",null,(0,k.v_)(a.periode?.namaperiodelaporan||"-"),1),(0,n.Lk)("td",null,(0,k.v_)(o.formatTanggal(a.tanggallaporan)||"-"),1),(0,n.Lk)("td",null,(0,k.v_)(a.wilayah?.namawilayah||"-"),1),(0,n.Lk)("td",null,[(0,n.Lk)("div",wx,[(0,n.Lk)("button",{class:"btn btn-info btn-sm",onClick:e=>o.openFile(a.filelaporan),title:"Lihat Dokumen"},e[31]||(e[31]=[(0,n.Lk)("i",{class:"fa fa-file"},null,-1)]),8,Fx),(0,n.Lk)("button",{class:"btn btn-primary btn-sm",onClick:e=>o.openEditModal(a),title:"Ubah Data"},e[32]||(e[32]=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)]),8,Xx),(0,n.Lk)("button",{class:"btn btn-danger sweet-11 btn-sm",type:"button",onClick:e=>o.advancedDeleteAlert(a.iddokumen),title:"Hapus Data"},e[33]||(e[33]=[(0,n.Lk)("i",{class:"fa fa-trash"},null,-1)]),8,xx)])])]))),128)),0===i.reports.length?((0,n.uX)(),(0,n.CE)("tr",Tx,e[34]||(e[34]=[(0,n.Lk)("td",{colspan:"7",class:"text-center"},"Tidak ada data yang cocok atau tersedia.",-1)]))):(0,n.Q3)("",!0)],64))])]),(0,n.Lk)("div",Sx,[(0,n.Lk)("div",Bx,[i.totalItems>0?((0,n.uX)(),(0,n.CE)("span",Ax,[e[35]||(e[35]=(0,n.eW)(" Menampilkan ")),(0,n.Lk)("strong",null,(0,k.v_)((i.currentPage-1)*i.perPage+1),1),e[36]||(e[36]=(0,n.eW)(" - ")),(0,n.Lk)("strong",null,(0,k.v_)(Math.min(i.currentPage*i.perPage,i.totalItems)),1),e[37]||(e[37]=(0,n.eW)(" dari ")),(0,n.Lk)("strong",null,(0,k.v_)(i.totalItems),1),e[38]||(e[38]=(0,n.eW)(" data "))])):(0,n.Q3)("",!0)]),-1!==i.perPage&&o.totalPages>1?((0,n.uX)(),(0,n.CE)("nav",_x,[(0,n.Lk)("ul",jx,[(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[12]||(e[12]=a=>o.changePage(i.currentPage-1))},"Prev")],2),o.pageNumbers[0]>1?((0,n.uX)(),(0,n.CE)("li",Vx,[(0,n.Lk)("button",{class:"page-link",onClick:e[13]||(e[13]=a=>o.changePage(1))},"1")])):(0,n.Q3)("",!0),o.pageNumbers[0]>2?((0,n.uX)(),(0,n.CE)("li",Ix,e[39]||(e[39]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.pageNumbers,a=>((0,n.uX)(),(0,n.CE)("li",{key:a,class:(0,k.C4)(["page-item",{active:i.currentPage===a}])},[(0,n.Lk)("button",{class:"page-link",onClick:e=>o.changePage(a)},(0,k.v_)(a),9,Nx)],2))),128)),o.pageNumbers.slice(-1)[0]<o.totalPages-1?((0,n.uX)(),(0,n.CE)("li",Ux,e[40]||(e[40]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),o.pageNumbers.slice(-1)[0]<o.totalPages?((0,n.uX)(),(0,n.CE)("li",Rx,[(0,n.Lk)("button",{class:"page-link",onClick:e[14]||(e[14]=a=>o.changePage(o.totalPages))},(0,k.v_)(o.totalPages),1)])):(0,n.Q3)("",!0),(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:i.currentPage===o.totalPages}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[15]||(e[15]=a=>o.changePage(i.currentPage+1))},"Next")],2)])])):(0,n.Q3)("",!0)])])])])}const Wx=(a={})=>Na.get("",{params:{act:"laporan-usaha",...a}}),Kx=a=>(a.append("act","laporan-usaha"),Na.post("",a)),Ox=(a,e)=>a?(e.append("act","laporan-usaha"),e.append("key",a),Na.post("",e)):Promise.reject(new Error("ID laporan usaha tidak tersedia.")),$x=a=>a?Na.delete("",{data:{act:"laporan-usaha",key:a}}):Promise.reject(new Error("ID laporan usaha tidak tersedia.")),Gx={class:"modal-header"},Jx={class:"modal-title"},qx={class:"modal-body"},Hx={class:"mb-3"},Yx=["disabled"],zx={disabled:"",value:""},Zx=["value"],aT={class:"mb-3"},eT=["disabled"],tT={disabled:"",value:""},sT=["value"],iT={class:"row"},lT={class:"col-md-6 mb-3"},nT={class:"col-md-6 mb-3"},oT={key:0,class:"mt-2"},rT=["href"],cT={key:1,class:"mt-2"},dT={key:0,class:"alert alert-danger mt-3"},uT={class:"modal-footer"},mT=["disabled"],kT={key:0,class:"spinner-border spinner-border-sm",role:"status"},hT={key:1};function gT(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",{class:"modal-overlay",onClick:e[9]||(e[9]=(...a)=>o.handleOverlayClick&&o.handleOverlayClick(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[8]||(e[8]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",Gx,[(0,n.Lk)("h5",Jx,(0,k.v_)(o.isEditMode?"Edit Data Laporan Usaha":"Tambah Data Laporan Usaha"),1),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",qx,[(0,n.Lk)("form",{onSubmit:e[5]||(e[5]=(0,l.D$)((...a)=>o.submitForm&&o.submitForm(...a),["prevent"]))},[(0,n.Lk)("div",Hx,[e[10]||(e[10]=(0,n.Lk)("label",{class:"form-label"},"Nama Usaha",-1)),(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":e[1]||(e[1]=a=>i.formData.idusaha=a),required:"",disabled:i.isListLoading},[(0,n.Lk)("option",zx,(0,k.v_)(i.isListLoading?"Memuat...":"Pilih Nama Usaha"),1),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.usahaList,a=>((0,n.uX)(),(0,n.CE)("option",{key:a.idusaha,value:a.idusaha},(0,k.v_)(a.namausaha),9,Zx))),128))],8,Yx),[[l.u1,i.formData.idusaha]])]),(0,n.Lk)("div",aT,[e[11]||(e[11]=(0,n.Lk)("label",{class:"form-label"},"Periode Laporan",-1)),(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":e[2]||(e[2]=a=>i.formData.idperiodelaporan=a),required:"",disabled:i.isListLoading},[(0,n.Lk)("option",tT,(0,k.v_)(i.isListLoading?"Memuat...":"Pilih Periode Laporan"),1),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.reportPeriodeList,a=>((0,n.uX)(),(0,n.CE)("option",{key:a.idperiodelaporan,value:a.idperiodelaporan},(0,k.v_)(a.namaperiodelaporan),9,sT))),128))],8,eT),[[l.u1,i.formData.idperiodelaporan]])]),(0,n.Lk)("div",iT,[(0,n.Lk)("div",lT,[e[12]||(e[12]=(0,n.Lk)("label",{class:"form-label"},"Tanggal Laporan",-1)),(0,n.bo)((0,n.Lk)("input",{type:"date",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=a=>i.formData.tanggallaporan=a),required:""},null,512),[[l.Jo,i.formData.tanggallaporan]])]),(0,n.Lk)("div",nT,[e[15]||(e[15]=(0,n.Lk)("label",{class:"form-label"},"Upload File Laporan",-1)),(0,n.Lk)("input",{type:"file",class:"form-control",accept:".pdf,.doc,.docx,image/*",onChange:e[4]||(e[4]=(...a)=>o.handleFileUpload&&o.handleFileUpload(...a))},null,32),o.isEditMode&&i.formData.filelaporan&&!a.selectedFile?((0,n.uX)(),(0,n.CE)("div",oT,[e[13]||(e[13]=(0,n.eW)(" File saat ini: ")),(0,n.Lk)("a",{href:i.formData.filelaporan,target:"_blank",rel:"noopener noreferrer"},"Lihat File",8,rT)])):(0,n.Q3)("",!0),a.FileName?((0,n.uX)(),(0,n.CE)("div",cT,[e[14]||(e[14]=(0,n.eW)(" File baru: ")),(0,n.Lk)("strong",null,(0,k.v_)(a.FileName),1)])):(0,n.Q3)("",!0)])]),i.errorMessage?((0,n.uX)(),(0,n.CE)("div",dT,(0,k.v_)(i.errorMessage),1)):(0,n.Q3)("",!0)],32)]),(0,n.Lk)("div",uT,[(0,n.Lk)("button",{type:"button",class:"btn btn-danger",onClick:e[6]||(e[6]=(...a)=>o.closeModal&&o.closeModal(...a))},"Batal"),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[7]||(e[7]=(...a)=>o.submitForm&&o.submitForm(...a)),disabled:i.isLoading},[i.isLoading?((0,n.uX)(),(0,n.CE)("span",kT)):((0,n.uX)(),(0,n.CE)("span",hT,"Simpan"))],8,mT)])])])])}const pT=(a={})=>Na.get("",{params:{act:"periode-laporan-usaha",...a}}),bT=a=>Na.post("",{act:"periode-laporan-usaha",record:a}),fT=(a,e)=>a?Na.put("",{act:"periode-laporan-usaha",key:a,record:e}):Promise.reject(new Error("ID periode laporan usaha tidak tersedia.")),LT=a=>a?Na.delete("",{data:{act:"periode-laporan-usaha",key:a}}):Promise.reject(new Error("ID periode laporan usaha tidak tersedia.")),yT={selectedFile:null,FileName:"",idperiodelaporan:"",idusaha:"",tanggallaporan:"",file:null};var vT={name:"addEditReportModal",props:{reportToEdit:{type:Object,default:null}},data(){return{formData:{...yT},documentTypeList:[],desaList:[],isListLoading:!1,isLoading:!1,errorMessage:null,toast:(0,ln.dj)()}},computed:{isEditMode(){return!!this.reportToEdit}},watch:{reportToEdit:{handler(a){a?(this.formData.idperiodelaporan=a.idperiodelaporan,this.formData.idusaha=a.idusaha,this.formData.tanggallaporan=a.tanggallaporan,this.formData.filelaporan=a.filelaporan):this.formData={...yT},this.selectedFile=null,this.FileName="",this.errorMessage=null},immediate:!0,deep:!0}},async created(){await this.fetchUsahaList(),await this.fetchPeriodeList()},methods:{closeModal(){this.$emit("close")},handleOverlayClick(a){a.target===a.currentTarget&&this.closeModal()},async fetchUsahaList(){this.isListLoading=!0;try{const a=await kw({limit:-1});this.usahaList=a.data?.data||a.data?.[0]?.data||[]}catch(a){this.toast.error("Gagal memuat daftar badan usaha")}finally{this.isListLoading=!1}},async fetchPeriodeList(){this.isListLoading=!0;try{const a=await pT({limit:-1});this.reportPeriodeList=a.data?.data||a.data?.[0]?.data||[]}catch(a){this.toast.error("Gagal memuat daftar periode laporan usaha")}finally{this.isListLoading=!1}},handleFileUpload(a){const e=a.target.files[0];if(!e)return this.selectedFile=null,void(this.FileName="");this.selectedFile=e,this.FileName=e.name},async submitForm(){this.isLoading=!0,this.errorMessage=null;const a=new FormData;a.append("record[idperiodelaporan]",this.formData.idperiodelaporan),a.append("record[idusaha]",this.formData.idusaha),a.append("record[tanggallaporan]",this.formData.tanggallaporan),this.selectedFile&&a.append("upload_filelaporan",this.selectedFile);try{let e;this.isEditMode?(a.append("_method","PUT"),e=await Ox(this.reportToEdit.idlaporanusaha,a),this.toast.success("Data laporan usaha berhasil diperbarui")):(e=await Kx(a),this.toast.success("Data laporan usaha berhasil ditambah")),this.$emit("save-successful",e.data.data),this.closeModal()}catch(e){this.errorMessage=e.response?.data?.failed||e.response?.data?.message||"Gagal menyimpan data. Silakan coba lagi",this.toast.error("Gagal menyimpan data laporan usaha")}finally{this.isLoading=!1}}}};const CT=(0,r.A)(vT,[["render",gT],["__scopeId","data-v-69b27c02"]]);var PT=CT,ET={components:{AddEditReportModal:PT},data(){return{reports:[],isLoading:!1,sortColumn:"created_at",sortDirection:"asc",isModalVisible:!1,currentPage:1,perPage:10,totalItems:0,reportBeingEdited:null,isFilterVisible:!1,filters:{namaperiodelaporan:"",namausaha:"",tanggallaporan:"",namawilayah:""}}},computed:{totalPages(){return this.perPage<=0?1:Math.ceil(this.totalItems/this.perPage)},pageNumbers(){const a=[],e=5;let t=Math.max(1,this.currentPage-Math.floor(e/2)),s=t+e-1;s>this.totalPages&&(s=this.totalPages,t=Math.max(1,s-e+1));for(let i=t;i<=s;i++)a.push(i);return a}},watch:{currentPage(){this.fetchReports()},perPage(){this.currentPage=1,this.fetchReports()}},async mounted(){this.toast=(0,ln.dj)(),await this.fetchReports()},methods:{openAddModal(){this.reportBeingEdited=null,this.isModalVisible=!0},openEditModal(a){this.reportBeingEdited={...a},this.isModalVisible=!0},closeModal(){this.isModalVisible=!1,this.reportBeingEdited=null},openFile(a){a?window.open(a,"_blank"):this.toast.info("Tidak ada file laporan usaha yang tersedia",{icon:"fa fa-info-circle"})},handleSaveSuccessful(){this.closeModal(),this.fetchReports()},async fetchReports(){this.isLoading=!0;try{const a={act:"laporan-usaha",page:this.currentPage,limit:this.perPage,order:this.sortColumn?`${this.sortColumn} ${this.sortDirection}`:"",group:""},e=Object.entries(this.filters).filter(([,a])=>""!==a&&null!==a).map(([a,e])=>`${a}=${e}`);e.length>0?a.filter=e.join(","):a.filter="";const t=await Wx(a),s=t.data?.data||t.data?.[0]?.data||[],i=t.data?.meta?.pagination||t.data?.[0]?.meta?.pagination||{};this.reports=s,this.totalItems=i.total||s.length}catch(a){console.error("Error fetching reports:",a),this.toast.error("Gagal memuat data laporan usaha",{icon:"fa fa-times"})}finally{this.isLoading=!1}},formatTanggal(a){if(!a)return null;const e={day:"numeric",month:"long",year:"numeric"};return new Date(a).toLocaleDateString("id-ID",e)},advancedDeleteAlert(a){this.$swal({title:"Hapus Data Laporan Usaha",text:"Apakah Anda yakin ingin menghapus data ini?",icon:"warning",showCancelButton:!0,confirmButtonText:'<i class="fa fa-check me-2"></i> Hapus!',confirmButtonColor:"#d33",cancelButtonText:'<i class="fa fa-times me-2"></i> Batal',cancelButtonColor:"#efefef",reverseButtons:!0}).then(async e=>{if(e.isConfirmed)try{await $x(a),1===this.reports.length&&this.currentPage>1?this.currentPage--:this.fetchReports(),this.toast.success("Data laporan usaha berhasil dihapus",{icon:"fa fa-check"})}catch(t){this.toast.error("Gagal menghapus data laporan usaha",{icon:"fa fa-times"})}})},sortBy(a){this.sortColumn===a?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=a,this.sortDirection="asc"),this.fetchReports()},changePage(a){a>=1&&a<=this.totalPages&&(this.currentPage=a)},toggleFilterVisibility(){this.isFilterVisible=!this.isFilterVisible},applyFilters(){this.currentPage=1,this.fetchReports()},resetFilters(){this.filters.namadokumen="",this.filters.idjenisdokumen="",this.filters.tahun_terbit="",this.filters.namawilayah="",this.currentPage=1,this.fetchReports()}}};const DT=(0,r.A)(ET,[["render",Qx],["__scopeId","data-v-ac17e9c0"]]);var MT=DT,wT={components:{ReportTable:MT}};const FT=(0,r.A)(wT,[["render",JX]]);var XT=FT;const xT={class:"container-fluid"},TT={class:"row"};function ST(a,e,t,s,i,l){const o=(0,n.g2)("Breadcrumbs"),r=(0,n.g2)("ArticleTable");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(o,{main:"Website",title:a.$route.meta.title},null,8,["title"]),(0,n.Lk)("div",xT,[(0,n.Lk)("div",TT,[(0,n.bF)(r)])])])}const BT={class:"col-sm-12"},AT={class:"card"},_T={class:"card-body"},jT={class:"d-flex justify-content-end align-items-start mb-3"},VT={class:"d-flex gap-2"},IT={key:0,class:"fa fa-angle-up me-2"},NT={key:1,class:"fa fa-angle-down me-2"},UT={key:0,class:"border p-3 mb-3 rounded filter-section"},RT={class:"row g-3"},QT={class:"col-md-3"},WT={class:"col-md-3"},KT=["value"],OT={class:"col-md-3"},$T={class:"col-md-3"},GT={class:"d-flex justify-content-end gap-2 mt-3"},JT={class:"table-responsive signal-table"},qT={class:"table table-hover"},HT={key:0,class:"fa fa-sort-asc"},YT={key:1,class:"fa fa-sort-desc"},zT={key:2,class:"fa fa-sort"},ZT={key:0,class:"fa fa-sort-asc"},aS={key:1,class:"fa fa-sort-desc"},eS={key:2,class:"fa fa-sort"},tS={key:0,class:"fa fa-sort-asc"},sS={key:1,class:"fa fa-sort-desc"},iS={key:2,class:"fa fa-sort"},lS={key:0,class:"fa fa-sort-asc"},nS={key:1,class:"fa fa-sort-desc"},oS={key:2,class:"fa fa-sort"},rS={key:0},cS={scope:"row"},dS={class:"btn-group"},uS=["onClick"],mS=["onClick"],kS=["onClick"],hS={key:0},gS={class:"d-flex flex-column flex-md-row justify-content-md-between align-items-center mt-3 px-3 pb-3"},pS={class:"mt-2"},bS={key:0,class:"text-muted"},fS={key:0,class:"d-flex align-items-center flex-wrap gap-2 mt-2"},LS={class:"pagination mb-0"},yS={key:0,class:"page-item"},vS={key:1,class:"page-item disabled"},CS=["onClick"],PS={key:2,class:"page-item disabled"},ES={key:3,class:"page-item"};function DS(a,e,t,s,i,o){const r=(0,n.g2)("add-edit-article-modal"),c=(0,n.g2)("detail-article-modal");return(0,n.uX)(),(0,n.CE)("div",BT,[i.isModalVisible?((0,n.uX)(),(0,n.Wv)(r,{key:0,"article-to-edit":i.articleBeingEdited,onClose:o.closeModal,onSaveSuccessful:o.handleSaveSuccessful},null,8,["article-to-edit","onClose","onSaveSuccessful"])):(0,n.Q3)("",!0),i.isDetailModalVisible?((0,n.uX)(),(0,n.Wv)(c,{key:1,"article-to-view":i.articleBeingViewed,onClose:o.closeDetailModal},null,8,["article-to-view","onClose"])):(0,n.Q3)("",!0),(0,n.Lk)("div",AT,[e[41]||(e[41]=(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("h3",null,"Daftar Artikel")],-1)),(0,n.Lk)("div",_T,[(0,n.Lk)("div",jT,[(0,n.Lk)("div",VT,[(0,n.Lk)("button",{class:"btn btn-outline-light txt-dark",onClick:e[0]||(e[0]=(...a)=>o.toggleFilterVisibility&&o.toggleFilterVisibility(...a))},[i.isFilterVisible?((0,n.uX)(),(0,n.CE)("i",IT)):((0,n.uX)(),(0,n.CE)("i",NT)),(0,n.Lk)("span",null,(0,k.v_)(i.isFilterVisible?"Sembunyikan":"Tampilkan")+" Filter",1)]),(0,n.Lk)("button",{class:"btn btn-success",onClick:e[1]||(e[1]=(...a)=>o.openAddModal&&o.openAddModal(...a))},e[16]||(e[16]=[(0,n.Lk)("i",{class:"fa fa-plus me-2"},null,-1),(0,n.Lk)("span",null," Tambah Artikel",-1)]))])]),i.isFilterVisible?((0,n.uX)(),(0,n.CE)("div",UT,[(0,n.Lk)("div",RT,[(0,n.Lk)("div",QT,[e[17]||(e[17]=(0,n.Lk)("label",{for:"filterTitle",class:"form-label"},"Judul Artikel",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterTitle",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.filters.judul=a),placeholder:"Filter berdasarkan judul"},null,512),[[l.Jo,i.filters.judul]])]),(0,n.Lk)("div",WT,[e[19]||(e[19]=(0,n.Lk)("label",{for:"filterCategory",class:"form-label"},"Kategori Artikel",-1)),(0,n.bo)((0,n.Lk)("select",{id:"filterCategory",class:"form-select","onUpdate:modelValue":e[3]||(e[3]=a=>i.filters.idkategoriartikel=a)},[e[18]||(e[18]=(0,n.Lk)("option",{value:""},"Semua Kategori",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.categoryList,a=>((0,n.uX)(),(0,n.CE)("option",{key:a.idkategoriartikel,value:a.idkategoriartikel},(0,k.v_)(a.namakategoriartikel),9,KT))),128))],512),[[l.u1,i.filters.idkategoriartikel]])]),(0,n.Lk)("div",OT,[e[20]||(e[20]=(0,n.Lk)("label",{for:"filterDate",class:"form-label"},"Tanggal dibuat",-1)),(0,n.bo)((0,n.Lk)("input",{type:"date",id:"filterDate",class:"form-control","onUpdate:modelValue":e[4]||(e[4]=a=>i.filters.created_at=a)},null,512),[[l.Jo,i.filters.created_at]])]),(0,n.Lk)("div",$T,[e[21]||(e[21]=(0,n.Lk)("label",{for:"filterVillage",class:"form-label"},"Nama Desa",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterVillage",class:"form-control","onUpdate:modelValue":e[5]||(e[5]=a=>i.filters.namawilayah=a),placeholder:"Filter berdasarkan nama desa"},null,512),[[l.Jo,i.filters.namawilayah]])])]),(0,n.Lk)("div",GT,[(0,n.Lk)("button",{class:"btn btn-secondary",onClick:e[6]||(e[6]=(...a)=>o.resetFilters&&o.resetFilters(...a))},e[22]||(e[22]=[(0,n.Lk)("i",{class:"fa fa-refresh me-2"},null,-1),(0,n.Lk)("span",null,"Reset Filter",-1)])),(0,n.Lk)("button",{class:"btn btn-primary",onClick:e[7]||(e[7]=(...a)=>o.applyFilters&&o.applyFilters(...a))},e[23]||(e[23]=[(0,n.Lk)("i",{class:"fa fa-search me-2"},null,-1),(0,n.Lk)("span",null,"Terapkan Filter",-1)]))])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",JT,[(0,n.Lk)("table",qT,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[e[28]||(e[28]=(0,n.Lk)("th",{scope:"col"},"No",-1)),(0,n.Lk)("th",{scope:"col",onClick:e[8]||(e[8]=a=>o.sortBy("judul"))},[e[24]||(e[24]=(0,n.eW)(" Judul Artikel ")),"judul"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",HT)):"judul"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",YT)):((0,n.uX)(),(0,n.CE)("i",zT))]),(0,n.Lk)("th",{scope:"col",onClick:e[9]||(e[9]=a=>o.sortBy("idkategoriartikel"))},[e[25]||(e[25]=(0,n.eW)(" Kategori ")),"idkategoriartikel"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",ZT)):"idkategoriartikel"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",aS)):((0,n.uX)(),(0,n.CE)("i",eS))]),(0,n.Lk)("th",{scope:"col",onClick:e[10]||(e[10]=a=>o.sortBy("namawilayah"))},[e[26]||(e[26]=(0,n.eW)(" Nama Desa ")),"namawilayah"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",tS)):"namawilayah"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",sS)):((0,n.uX)(),(0,n.CE)("i",iS))]),(0,n.Lk)("th",{scope:"col",onClick:e[11]||(e[11]=a=>o.sortBy("created_at"))},[e[27]||(e[27]=(0,n.eW)(" Tanggal Dibuat ")),"created_at"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",lS)):"created_at"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",nS)):((0,n.uX)(),(0,n.CE)("i",oS))]),e[29]||(e[29]=(0,n.Lk)("th",{scope:"col"},"Aksi",-1))])]),(0,n.Lk)("tbody",null,[i.isLoading?((0,n.uX)(),(0,n.CE)("tr",rS,e[30]||(e[30]=[(0,n.Lk)("td",{colspan:"6",class:"text-center p-5"},[(0,n.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,n.Lk)("span",{class:"visually-hidden"},"Loading...")]),(0,n.Lk)("p",{class:"mt-2"},"Memuat data...")],-1)]))):((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.articles,(a,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:a.idartikel},[(0,n.Lk)("th",cS,(0,k.v_)((i.currentPage-1)*i.perPage+t+1),1),(0,n.Lk)("td",null,(0,k.v_)(a.judul||"-"),1),(0,n.Lk)("td",null,(0,k.v_)(a.kategoriartikel?.nama_kategori_artikel||"-"),1),(0,n.Lk)("td",null,(0,k.v_)(a.wilayah?.namawilayah||"-"),1),(0,n.Lk)("td",null,(0,k.v_)(o.formatDate(a.created_at)),1),(0,n.Lk)("td",null,[(0,n.Lk)("div",dS,[(0,n.Lk)("button",{class:"btn btn-info btn-sm",onClick:e=>o.openDetailModal(a),title:"Lihat Data"},e[31]||(e[31]=[(0,n.Lk)("i",{class:"fa fa-eye"},null,-1)]),8,uS),(0,n.Lk)("button",{class:"btn btn-primary btn-sm",onClick:e=>o.openEditModal(a),title:"Ubah Data"},e[32]||(e[32]=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)]),8,mS),(0,n.Lk)("button",{class:"btn btn-danger sweet-11 btn-sm",type:"button",onClick:e=>o.advancedDeleteAlert(a.idartikel),title:"Hapus Data"},e[33]||(e[33]=[(0,n.Lk)("i",{class:"fa fa-trash"},null,-1)]),8,kS)])])]))),128)),0===i.articles.length?((0,n.uX)(),(0,n.CE)("tr",hS,e[34]||(e[34]=[(0,n.Lk)("td",{colspan:"6",class:"text-center"},"Tidak ada data yang cocok atau tersedia.",-1)]))):(0,n.Q3)("",!0)],64))])]),(0,n.Lk)("div",gS,[(0,n.Lk)("div",pS,[i.totalItems>0?((0,n.uX)(),(0,n.CE)("span",bS,[e[35]||(e[35]=(0,n.eW)(" Menampilkan ")),(0,n.Lk)("strong",null,(0,k.v_)((i.currentPage-1)*i.perPage+1),1),e[36]||(e[36]=(0,n.eW)(" - ")),(0,n.Lk)("strong",null,(0,k.v_)(Math.min(i.currentPage*i.perPage,i.totalItems)),1),e[37]||(e[37]=(0,n.eW)(" dari ")),(0,n.Lk)("strong",null,(0,k.v_)(i.totalItems),1),e[38]||(e[38]=(0,n.eW)(" data "))])):(0,n.Q3)("",!0)]),-1!==i.perPage&&o.totalPages>1?((0,n.uX)(),(0,n.CE)("nav",fS,[(0,n.Lk)("ul",LS,[(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[12]||(e[12]=a=>o.changePage(i.currentPage-1))},"Prev")],2),o.pageNumbers[0]>1?((0,n.uX)(),(0,n.CE)("li",yS,[(0,n.Lk)("button",{class:"page-link",onClick:e[13]||(e[13]=a=>o.changePage(1))},"1")])):(0,n.Q3)("",!0),o.pageNumbers[0]>2?((0,n.uX)(),(0,n.CE)("li",vS,e[39]||(e[39]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.pageNumbers,a=>((0,n.uX)(),(0,n.CE)("li",{key:a,class:(0,k.C4)(["page-item",{active:i.currentPage===a}])},[(0,n.Lk)("button",{class:"page-link",onClick:e=>o.changePage(a)},(0,k.v_)(a),9,CS)],2))),128)),o.pageNumbers.slice(-1)[0]<o.totalPages-1?((0,n.uX)(),(0,n.CE)("li",PS,e[40]||(e[40]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),o.pageNumbers.slice(-1)[0]<o.totalPages?((0,n.uX)(),(0,n.CE)("li",ES,[(0,n.Lk)("button",{class:"page-link",onClick:e[14]||(e[14]=a=>o.changePage(o.totalPages))},(0,k.v_)(o.totalPages),1)])):(0,n.Q3)("",!0),(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:i.currentPage===o.totalPages}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[15]||(e[15]=a=>o.changePage(i.currentPage+1))},"Next")],2)])])):(0,n.Q3)("",!0)])])])])}const MS=(a={})=>Na.get("",{params:{act:"artikel",...a}}),wS=a=>a?Na.get("",{params:{act:"artikel",key:a}}):Promise.reject(new Error("ID artikel tidak tersedia")),FS=a=>(a.append("act","artikel"),Na.post("",a)),XS=(a,e)=>a?(e.append("act","artikel"),e.append("key",a),Na.post("",e)):Promise.reject(new Error("ID artikel tidak tersedia")),xS=a=>a?Na.delete("",{data:{act:"artikel",key:a}}):Promise.reject(new Error("ID artikel tidak tersedia")),TS=(a={})=>Na.get("",{params:{act:"kategori-artikel",...a}}),SS=a=>a?Na.delete("",{data:{act:"kategori-artikel",key:a}}):Promise.reject(new Error("ID kategori artikel tidak tersedia")),BS={class:"modal-header"},AS={class:"modal-title"},_S={class:"modal-body"},jS={class:"mb-3"},VS={class:"mb-3"},IS={class:"mb-3"},NS={class:"mb-3"},US=["disabled"],RS={disabled:"",value:""},QS=["value"],WS={class:"mb-3"},KS=["disabled"],OS={disabled:"",value:""},$S=["value"],GS={class:"mb-3"},JS={class:"mt-2"},qS={key:0},HS=["src"],YS={key:1},zS=["src"],ZS={class:"mb-3"},aB={key:0,class:"alert alert-danger mt-3"},eB={class:"modal-footer"},tB=["disabled"],sB={key:0,class:"spinner-border spinner-border-sm",role:"status"},iB={key:1};function lB(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",{class:"modal-overlay",onClick:e[12]||(e[12]=(...a)=>o.handleOverlayClick&&o.handleOverlayClick(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[11]||(e[11]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",BS,[(0,n.Lk)("h5",AS,(0,k.v_)(o.isEditMode?"Edit Data Artikel":"Tambah Data Artikel"),1),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",_S,[(0,n.Lk)("form",{onSubmit:e[8]||(e[8]=(0,l.D$)((...a)=>o.submitForm&&o.submitForm(...a),["prevent"]))},[(0,n.Lk)("div",jS,[e[13]||(e[13]=(0,n.Lk)("label",{class:"form-label"},"Penerbit",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=a=>i.publisherName=a),disabled:""},null,512),[[l.Jo,i.publisherName]])]),(0,n.Lk)("div",VS,[e[14]||(e[14]=(0,n.Lk)("label",{class:"form-label"},"Judul Artikel",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.formData.judul=a),required:""},null,512),[[l.Jo,i.formData.judul]])]),(0,n.Lk)("div",IS,[e[15]||(e[15]=(0,n.Lk)("label",{class:"form-label"},"Slug",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=a=>o.generatedSlug=a),disabled:""},null,512),[[l.Jo,o.generatedSlug]])]),(0,n.Lk)("div",NS,[e[16]||(e[16]=(0,n.Lk)("label",{class:"form-label"},"Desa",-1)),(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":e[4]||(e[4]=a=>i.formData.iddesa=a),required:"",disabled:i.isListLoading},[(0,n.Lk)("option",RS,(0,k.v_)(i.isListLoading?"Memuat...":"Pilih Desa"),1),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.desaList,a=>((0,n.uX)(),(0,n.CE)("option",{key:a.iddesa,value:a.iddesa},(0,k.v_)(a.wilayah.namawilayah),9,QS))),128))],8,US),[[l.u1,i.formData.iddesa]])]),(0,n.Lk)("div",WS,[e[17]||(e[17]=(0,n.Lk)("label",{class:"form-label"},"Kategori Artikel",-1)),(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":e[5]||(e[5]=a=>i.formData.idkategoriartikel=a),required:"",disabled:i.isListLoading},[(0,n.Lk)("option",OS,(0,k.v_)(i.isListLoading?"Memuat...":"Pilih Kategori Artikel"),1),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.categoryList,a=>((0,n.uX)(),(0,n.CE)("option",{key:a.idkategoriartikel,value:a.idkategoriartikel},(0,k.v_)(a.namakategoriartikel),9,$S))),128))],8,KS),[[l.u1,i.formData.idkategoriartikel]])]),(0,n.Lk)("div",GS,[e[18]||(e[18]=(0,n.Lk)("label",{class:"form-label"},"Upload Gambar",-1)),(0,n.Lk)("input",{type:"file",class:"form-control",accept:"image/*",onChange:e[6]||(e[6]=(...a)=>o.handleGambarUpload&&o.handleGambarUpload(...a))},null,32),(0,n.Lk)("div",JS,[i.gambarPreviewUrl?((0,n.uX)(),(0,n.CE)("div",qS,[(0,n.Lk)("img",{src:i.gambarPreviewUrl,alt:"Preview Gambar",class:"img-thumbnail",style:{"max-width":"150px","max-height":"150px"}},null,8,HS)])):o.isEditMode&&i.formData.gambar?((0,n.uX)(),(0,n.CE)("div",YS,[(0,n.Lk)("img",{src:i.formData.gambar,alt:"Gambar Saat Ini",class:"img-thumbnail",style:{"max-width":"150px","max-height":"150px"}},null,8,zS)])):(0,n.Q3)("",!0)])]),(0,n.Lk)("div",ZS,[e[19]||(e[19]=(0,n.Lk)("label",{class:"form-label"},"Konten",-1)),(0,n.bo)((0,n.Lk)("textarea",{class:"form-control",rows:"5","onUpdate:modelValue":e[7]||(e[7]=a=>i.formData.konten=a),placeholder:"Tulis konten artikel di sini",required:""},null,512),[[l.Jo,i.formData.konten]])]),i.errorMessage?((0,n.uX)(),(0,n.CE)("div",aB,(0,k.v_)(i.errorMessage),1)):(0,n.Q3)("",!0)],32)]),(0,n.Lk)("div",eB,[(0,n.Lk)("button",{type:"button",class:"btn btn-danger",onClick:e[9]||(e[9]=(...a)=>o.closeModal&&o.closeModal(...a))},"Batal"),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[10]||(e[10]=(...a)=>o.submitForm&&o.submitForm(...a)),disabled:i.isLoading},[i.isLoading?((0,n.uX)(),(0,n.CE)("span",sB)):((0,n.uX)(),(0,n.CE)("span",iB,"Simpan"))],8,tB)])])])])}const nB={judul:"",slug:"",idkategoriartikel:"",konten:"",iddesa:"",idpengguna:"",gambar:null};var oB={name:"addEditArticleModal",props:{articleToEdit:{type:Object,default:null}},data(){return{formData:{...nB},publisherName:"Memuat...",selectedFile:null,gambarPreviewUrl:null,categoryList:[],desaList:[],isListLoading:!1,isLoading:!1,errorMessage:null,toast:(0,ln.dj)()}},computed:{isEditMode(){return!!this.articleToEdit},generatedSlug(){return this.formData.judul?this.formData.judul.toLowerCase().trim().replace(/\s+/g,"-").replace(/[^\w-]+/g,""):""}},watch:{articleToEdit:{async handler(a){this.selectedFile=null,this.errorMessage=null,this.gambarPreviewUrl=null,a?(this.formData={judul:a.judul,slug:a.slug,idkategoriartikel:a.idkategoriartikel,konten:a.konten,iddesa:a.iddesa,idpengguna:a.idpengguna,gambar:a.gambar},this.publisherName=a.pengguna?.nama||"-"):(this.formData={...nB},await this.fetchCurrentUser())},immediate:!0,deep:!0}},async created(){await this.fetchDesaList(),await this.fetchCategoryList()},methods:{closeModal(){this.$emit("close")},handleOverlayClick(a){a.target===a.currentTarget&&this.closeModal()},async fetchCurrentUser(){const a=JSON.parse(localStorage.getItem("User"))||{},e=a.id_pengguna,t=a.token;if(e&&t){this.formData.idpengguna=e;try{const a=await Aa.A.get("/api/api",{params:{act:"users",key:e},headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}}),s=a.data?.[0]?.data?.[0];this.publisherName=s?.name||"Pengguna tidak ditemukan"}catch(s){console.error("Gagal mengambil nama user:",s),this.toast.error("Gagal memuat nama penerbit."),this.publisherName="Nama Gagal Dimuat"}}else this.publisherName="Tidak ada sesi login",this.formData.idpengguna=""},async fetchDesaList(){this.isListLoading=!0;try{const a=await Mi({limit:-1});this.desaList=a.data?.data||a.data?.[0]?.data||[]}catch(a){this.toast.error("Gagal memuat daftar desa")}finally{this.isListLoading=!1}},async fetchCategoryList(){this.isListLoading=!0;try{const a=await TS({limit:-1});this.categoryList=a.data?.data||a.data?.[0]?.data||[]}catch(a){this.toast.error("Gagal memuat daftar kategori artikel")}finally{this.isListLoading=!1}},handleGambarUpload(a){const e=a.target.files[0];if(!e)return this.selectedFile=null,void(this.gambarPreviewUrl=null);e.type.startsWith("image/")?(this.selectedFile=e,this.gambarPreviewUrl=URL.createObjectURL(e)):(this.selectedFile=null,this.gambarPreviewUrl=null,this.toast.error("File yang dipilih harus berupa gambar."),a.target.value="")},async submitForm(){if(this.isLoading=!0,this.errorMessage=null,!this.formData.idpengguna)return this.errorMessage="Data penerbit tidak valid. Mohon muat ulang halaman.",void(this.isLoading=!1);const a=new FormData;a.append("record[judul]",this.formData.judul),a.append("record[slug]",this.generatedSlug),a.append("record[idkategoriartikel]",this.formData.idkategoriartikel),a.append("record[konten]",this.formData.konten||""),a.append("record[iddesa]",this.formData.iddesa),a.append("record[idpengguna]",this.formData.idpengguna),this.selectedFile&&a.append("upload_gambar",this.selectedFile);try{let e;this.isEditMode?(a.append("_method","PUT"),e=await XS(this.articleToEdit.idartikel,a),this.toast.success("Data artikel berhasil diperbarui")):(e=await FS(a),this.toast.success("Data artikel berhasil ditambah")),this.$emit("save-successful",e.data.data),this.closeModal()}catch(e){this.errorMessage=e.response?.data?.failed||e.response?.data?.message||"Gagal menyimpan data. Coba lagi",this.toast.error("Gagal menyimpan data artikel")}finally{this.isLoading=!1}}}};const rB=(0,r.A)(oB,[["render",lB],["__scopeId","data-v-6acd8b8e"]]);var cB=rB;const dB={class:"modal-header"},uB={class:"modal-body"},mB={key:0,class:"text-center p-5"},kB={key:1,class:"text-center p-5 text-danger"},hB={key:2,class:"article-container"},gB={class:"article-title mb-3"},pB={class:"article-meta mb-4"},bB=["src"],fB={class:"detail-section"},LB=["innerHTML"],yB={class:"modal-footer"};function vB(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",{class:"modal-overlay",onClick:e[3]||(e[3]=(...a)=>o.closeModal&&o.closeModal(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[2]||(e[2]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",dB,[e[4]||(e[4]=(0,n.Lk)("h5",{class:"modal-title"},"Detail Artikel",-1)),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",uB,[i.isLoading?((0,n.uX)(),(0,n.CE)("div",mB,e[5]||(e[5]=[(0,n.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,n.Lk)("span",{class:"visually-hidden"},"Loading...")],-1),(0,n.Lk)("p",{class:"mt-2"},"Memuat data...",-1)]))):i.error?((0,n.uX)(),(0,n.CE)("div",kB,[e[6]||(e[6]=(0,n.Lk)("i",{class:"fa fa-exclamation-triangle fa-3x mb-3"},null,-1)),e[7]||(e[7]=(0,n.Lk)("h4",null,"Terjadi Kesalahan",-1)),(0,n.Lk)("p",null,(0,k.v_)(i.error),1)])):i.article?((0,n.uX)(),(0,n.CE)("div",hB,[(0,n.Lk)("h2",gB,(0,k.v_)(i.article.judul||"Judul Belum Tersedia"),1),(0,n.Lk)("div",pB,[(0,n.Lk)("span",null,[e[8]||(e[8]=(0,n.Lk)("i",{class:"fa fa-user me-2"},null,-1)),(0,n.eW)(" "+(0,k.v_)(i.article.pengguna?.nama||"Penulis tidak diketahui"),1)]),e[12]||(e[12]=(0,n.Lk)("span",{class:"mx-2"},"|",-1)),(0,n.Lk)("span",null,[e[9]||(e[9]=(0,n.Lk)("i",{class:"fa fa-tag me-2"},null,-1)),(0,n.eW)(" "+(0,k.v_)(i.article.kategoriartikel?.nama_kategori_artikel||"Kategori tidak diketahui"),1)]),e[13]||(e[13]=(0,n.Lk)("span",{class:"mx-2"},"|",-1)),(0,n.Lk)("span",null,[e[10]||(e[10]=(0,n.Lk)("i",{class:"fa fa-link me-2"},null,-1)),(0,n.eW)(" "+(0,k.v_)(i.article.slug||"Slug tidak tersedia"),1)]),e[14]||(e[14]=(0,n.Lk)("span",{class:"mx-2"},"|",-1)),(0,n.Lk)("span",null,[e[11]||(e[11]=(0,n.Lk)("i",{class:"fa fa-calendar me-2"},null,-1)),(0,n.eW)(" "+(0,k.v_)(i.article.created_at?new Date(i.article.created_at).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}):"-"),1)])]),i.article.gambar?((0,n.uX)(),(0,n.CE)("img",{key:0,src:i.article.gambar,alt:"Gambar Artikel",class:"article-image img-fluid rounded mb-4"},null,8,bB)):(0,n.Q3)("",!0),(0,n.Lk)("div",fB,[e[15]||(e[15]=(0,n.Lk)("h4",null,[(0,n.Lk)("i",{class:"fa fa-file-text-o me-2"}),(0,n.eW)("Konten Artikel")],-1)),(0,n.Lk)("div",{class:"text-content",innerHTML:i.article.konten||"Belum ada konten."},null,8,LB)])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",yB,[(0,n.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:e[1]||(e[1]=(...a)=>o.closeModal&&o.closeModal(...a))},"Tutup")])])])}var CB={name:"DetailArticleModal",props:{articleToView:{type:Object,default:()=>null}},emits:["close"],data(){return{article:null,isLoading:!1,error:null}},methods:{closeModal(){this.$emit("close")},async fetchArticleDetail(){const a=this.articleToView?.idartikel;if(a){this.isLoading=!0,this.error=null,this.article=null;try{const e=await wS(a),t=e.data;Array.isArray(t)&&t.length>0&&t[0]&&Array.isArray(t[0].data)&&t[0].data.length>0?this.article=t[0].data[0]:(this.error="Data artikel tidak ditemukan atau format respons tidak sesuai.",console.warn(`Struktur data yang diterima untuk ID ${a}:`,t))}catch(e){console.error("Gagal mengambil detail artikel:",e),this.error=e.message||"Terjadi kesalahan saat memuat data."}finally{this.isLoading=!1}}else this.error="ID artikel tidak valid dari data yang diterima."}},mounted(){this.fetchArticleDetail()},watch:{articleToView:{handler(a,e){a?.idartikel!==e?.idartikel&&this.fetchArticleDetail()},deep:!0}}};const PB=(0,r.A)(CB,[["render",vB],["__scopeId","data-v-4b92b02e"]]);var EB=PB,DB={components:{AddEditArticleModal:cB,DetailArticleModal:EB},data(){return{articles:[],categoryList:[],isLoading:!1,sortColumn:"created_at",sortDirection:"asc",isModalVisible:!1,currentPage:1,perPage:10,totalItems:0,articleBeingEdited:null,isFilterVisible:!1,filters:{judul:"",idkategoriartikel:"",created_at:"",namawilayah:""},isDetailModalVisible:!1,articleBeingViewed:null}},computed:{totalPages(){return this.perPage<=0?1:Math.ceil(this.totalItems/this.perPage)},pageNumbers(){const a=[],e=5;let t=Math.max(1,this.currentPage-Math.floor(e/2)),s=t+e-1;s>this.totalPages&&(s=this.totalPages,t=Math.max(1,s-e+1));for(let i=t;i<=s;i++)a.push(i);return a}},watch:{currentPage(){this.fetchArticles()},perPage(){this.currentPage=1,this.fetchArticles()}},async mounted(){this.toast=(0,ln.dj)(),await this.fetchCategoriesForFilter(),await this.fetchArticles()},methods:{formatDate(a){if(!a)return"-";try{return new Date(a).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"})}catch(e){return a.split(" ")[0]}},openAddModal(){this.articleBeingEdited=null,this.isModalVisible=!0},openEditModal(a){this.articleBeingEdited={...a},this.isModalVisible=!0},closeModal(){this.isModalVisible=!1,this.articleBeingEdited=null},openDetailModal(a){this.articleBeingViewed={...a},this.isDetailModalVisible=!0},closeDetailModal(){this.isDetailModalVisible=!1,this.articleBeingViewed=null},handleSaveSuccessful(){this.closeModal(),this.fetchArticles()},async fetchCategoriesForFilter(){try{const a=await TS({limit:-1});this.categoryList=a.data?.data||a.data?.[0]?.data||[]}catch(a){this.toast.error("Gagal memuat daftar kategori artikel.")}},async fetchArticles(){this.isLoading=!0;try{const a={act:"artikel",page:this.currentPage,limit:this.perPage,order:this.sortColumn?`${this.sortColumn} ${this.sortDirection}`:"",group:""},e=Object.entries(this.filters).filter(([,a])=>""!==a&&null!==a).map(([a,e])=>`${a}=${e}`);e.length>0?a.filter=e.join(","):a.filter="";const t=await MS(a),s=t.data?.data||t.data?.[0]?.data||[],i=t.data?.meta?.pagination||t.data?.[0]?.meta?.pagination||{};this.articles=s,this.totalItems=i.total||0}catch(a){console.error("Error fetching articles:",a),this.toast.error("Gagal memuat data artikel",{icon:"fa fa-times"})}finally{this.isLoading=!1}},advancedDeleteAlert(a){this.$swal({title:"Hapus Data Artikel",text:"Apakah Anda yakin ingin menghapus data ini?",icon:"warning",showCancelButton:!0,confirmButtonText:'<i class="fa fa-check me-2"></i> Hapus!',confirmButtonColor:"#d33",cancelButtonText:'<i class="fa fa-times me-2"></i> Batal',cancelButtonColor:"#efefef",reverseButtons:!0}).then(async e=>{if(e.isConfirmed)try{await xS(a),1===this.articles.length&&this.currentPage>1?this.currentPage--:this.fetchArticles(),this.toast.success("Data artikel berhasil dihapus",{icon:"fa fa-check"})}catch(t){this.toast.error("Gagal menghapus data artikel",{icon:"fa fa-times"})}})},sortBy(a){this.sortColumn===a?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=a,this.sortDirection="asc"),this.fetchArticles()},changePage(a){a>=1&&a<=this.totalPages&&(this.currentPage=a)},toggleFilterVisibility(){this.isFilterVisible=!this.isFilterVisible},applyFilters(){this.currentPage=1,this.fetchArticles()},resetFilters(){this.filters.judul="",this.filters.idkategoriartikel="",this.filters.namawilayah="",this.filters.created_at="",this.currentPage=1,this.fetchArticles()}}};const MB=(0,r.A)(DB,[["render",DS],["__scopeId","data-v-32fb99f8"]]);var wB=MB,FB={components:{ArticleTable:wB}};const XB=(0,r.A)(FB,[["render",ST]]);var xB=XB;const TB={class:"container-fluid"},SB={class:"row"};function BB(a,e,t,s,i,l){const o=(0,n.g2)("Breadcrumbs"),r=(0,n.g2)("ArticleCategoryTable");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(o,{main:"Website",title:a.$route.meta.title},null,8,["title"]),(0,n.Lk)("div",TB,[(0,n.Lk)("div",SB,[(0,n.bF)(r)])])])}const AB={class:"col-sm-12"},_B={class:"card"},jB={class:"card-body"},VB={class:"d-flex justify-content-end align-items-start mb-3"},IB={class:"d-flex gap-2"},NB={key:0,class:"fa fa-angle-up me-2"},UB={key:1,class:"fa fa-angle-down me-2"},RB={key:0,class:"border p-3 mb-3 rounded filter-section"},QB={class:"row g-3"},WB={class:"col-md-3"},KB={class:"col-md-3"},OB={class:"d-flex justify-content-end gap-2 mt-3"},$B={class:"table-responsive signal-table"},GB={class:"table table-hover"},JB={key:0,class:"fa fa-sort-asc"},qB={key:1,class:"fa fa-sort-desc"},HB={key:2,class:"fa fa-sort"},YB={key:0,class:"fa fa-sort-asc"},zB={key:1,class:"fa fa-sort-desc"},ZB={key:2,class:"fa fa-sort"},aA={key:0},eA={scope:"row"},tA={class:"btn-group"},sA=["onClick"],iA=["onClick"],lA={key:0},nA={class:"d-flex flex-column flex-md-row justify-content-md-between align-items-center mt-3 px-3 pb-3"},oA={class:"mt-2"},rA={key:0,class:"text-muted"},cA={key:0,class:"d-flex align-items-center flex-wrap gap-2 mt-2"},dA={class:"pagination mb-0"},uA={key:0,class:"page-item"},mA={key:1,class:"page-item disabled"},kA=["onClick"],hA={key:2,class:"page-item disabled"},gA={key:3,class:"page-item"};function pA(a,e,t,s,i,o){const r=(0,n.g2)("add-edit-articleCategory-modal");return(0,n.uX)(),(0,n.CE)("div",AB,[i.isModalVisible?((0,n.uX)(),(0,n.Wv)(r,{key:0,"articleCategory-to-edit":i.articleCategoryBeingEdited,onClose:o.closeModal,onSaveSuccessful:o.handleSaveSuccessful},null,8,["articleCategory-to-edit","onClose","onSaveSuccessful"])):(0,n.Q3)("",!0),(0,n.Lk)("div",_B,[e[31]||(e[31]=(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("h3",null,"Daftar Kategori Artikel")],-1)),(0,n.Lk)("div",jB,[(0,n.Lk)("div",VB,[(0,n.Lk)("div",IB,[(0,n.Lk)("button",{class:"btn btn-outline-light txt-dark",onClick:e[0]||(e[0]=(...a)=>o.toggleFilterVisibility&&o.toggleFilterVisibility(...a))},[i.isFilterVisible?((0,n.uX)(),(0,n.CE)("i",NB)):((0,n.uX)(),(0,n.CE)("i",UB)),(0,n.Lk)("span",null,(0,k.v_)(i.isFilterVisible?"Sembunyikan":"Tampilkan")+" Filter",1)]),(0,n.Lk)("button",{class:"btn btn-success",onClick:e[1]||(e[1]=(...a)=>o.openAddModal&&o.openAddModal(...a))},e[12]||(e[12]=[(0,n.Lk)("i",{class:"fa fa-plus me-2"},null,-1),(0,n.Lk)("span",null," Tambah Data",-1)]))])]),i.isFilterVisible?((0,n.uX)(),(0,n.CE)("div",RB,[(0,n.Lk)("div",QB,[(0,n.Lk)("div",WB,[e[13]||(e[13]=(0,n.Lk)("label",{for:"filterArticleCategoryName",class:"form-label"},"Nama Kategori Artikel",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterArticleCategoryName",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.filters.namakategoriartikel=a),placeholder:"Filter berdasarkan nama kategori"},null,512),[[l.Jo,i.filters.namakategoriartikel]])]),(0,n.Lk)("div",KB,[e[14]||(e[14]=(0,n.Lk)("label",{for:"filterVillageName",class:"form-label"},"Nama Desa",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterVillageName",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=a=>i.filters.namawilayah=a),placeholder:"Filter berdasarkan nama desa"},null,512),[[l.Jo,i.filters.namawilayah]])])]),(0,n.Lk)("div",OB,[(0,n.Lk)("button",{class:"btn btn-secondary",onClick:e[4]||(e[4]=(...a)=>o.resetFilters&&o.resetFilters(...a))},e[15]||(e[15]=[(0,n.Lk)("i",{class:"fa fa-refresh me-2"},null,-1),(0,n.Lk)("span",null,"Reset Filter",-1)])),(0,n.Lk)("button",{class:"btn btn-primary",onClick:e[5]||(e[5]=(...a)=>o.applyFilters&&o.applyFilters(...a))},e[16]||(e[16]=[(0,n.Lk)("i",{class:"fa fa-search me-2"},null,-1),(0,n.Lk)("span",null,"Terapkan Filter",-1)]))])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",$B,[(0,n.Lk)("table",GB,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[e[19]||(e[19]=(0,n.Lk)("th",{scope:"col"},"No",-1)),(0,n.Lk)("th",{scope:"col",onClick:e[6]||(e[6]=a=>o.sortBy("namausaha"))},[e[17]||(e[17]=(0,n.eW)(" Nama Kategori ")),"namausaha"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",JB)):"namausaha"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",qB)):((0,n.uX)(),(0,n.CE)("i",HB))]),(0,n.Lk)("th",{scope:"col",onClick:e[7]||(e[7]=a=>o.sortBy("namawilayah"))},[e[18]||(e[18]=(0,n.eW)(" Nama Desa ")),"namawilayah"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",YB)):"namawilayah"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",zB)):((0,n.uX)(),(0,n.CE)("i",ZB))]),e[20]||(e[20]=(0,n.Lk)("th",{scope:"col"},"Aksi",-1))])]),(0,n.Lk)("tbody",null,[i.isLoading?((0,n.uX)(),(0,n.CE)("tr",aA,e[21]||(e[21]=[(0,n.Lk)("td",{colspan:"5",class:"text-center p-5"},[(0,n.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,n.Lk)("span",{class:"visually-hidden"},"Loading...")]),(0,n.Lk)("p",{class:"mt-2"},"Memuat data...")],-1)]))):((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.articleCategories,(a,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:a.idkategoriartikel},[(0,n.Lk)("th",eA,(0,k.v_)((i.currentPage-1)*i.perPage+t+1),1),(0,n.Lk)("td",null,(0,k.v_)(a.namakategoriartikel||"-"),1),(0,n.Lk)("td",null,(0,k.v_)(a.wilayah.namawilayah||"-"),1),(0,n.Lk)("td",null,[(0,n.Lk)("div",tA,[(0,n.Lk)("button",{class:"btn btn-primary btn-sm",onClick:e=>o.openEditModal(a),title:"Ubah Data"},e[22]||(e[22]=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)]),8,sA),(0,n.Lk)("button",{class:"btn btn-danger sweet-11 btn-sm",type:"button",onClick:e=>o.advancedDeleteAlert(a.idkategoriartikel),title:"Hapus Data"},e[23]||(e[23]=[(0,n.Lk)("i",{class:"fa fa-trash"},null,-1)]),8,iA)])])]))),128)),0===o.paginatedArticleCategories.length?((0,n.uX)(),(0,n.CE)("tr",lA,e[24]||(e[24]=[(0,n.Lk)("td",{colspan:"5",class:"text-center"},"Tidak ada data yang cocok atau tersedia.",-1)]))):(0,n.Q3)("",!0)],64))])]),(0,n.Lk)("div",nA,[(0,n.Lk)("div",oA,[i.totalItems>0?((0,n.uX)(),(0,n.CE)("span",rA,[e[25]||(e[25]=(0,n.eW)(" Menampilkan ")),(0,n.Lk)("strong",null,(0,k.v_)((i.currentPage-1)*i.perPage+1),1),e[26]||(e[26]=(0,n.eW)(" - ")),(0,n.Lk)("strong",null,(0,k.v_)(Math.min(i.currentPage*i.perPage,i.totalItems)),1),e[27]||(e[27]=(0,n.eW)(" dari ")),(0,n.Lk)("strong",null,(0,k.v_)(i.totalItems),1),e[28]||(e[28]=(0,n.eW)(" data "))])):(0,n.Q3)("",!0)]),-1!==i.perPage&&o.totalPages>1?((0,n.uX)(),(0,n.CE)("nav",cA,[(0,n.Lk)("ul",dA,[(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[8]||(e[8]=a=>o.changePage(i.currentPage-1))},"Prev")],2),o.pageNumbers[0]>1?((0,n.uX)(),(0,n.CE)("li",uA,[(0,n.Lk)("button",{class:"page-link",onClick:e[9]||(e[9]=a=>o.changePage(1))},"1")])):(0,n.Q3)("",!0),o.pageNumbers[0]>2?((0,n.uX)(),(0,n.CE)("li",mA,e[29]||(e[29]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.pageNumbers,a=>((0,n.uX)(),(0,n.CE)("li",{key:a,class:(0,k.C4)(["page-item",{active:i.currentPage===a}])},[(0,n.Lk)("button",{class:"page-link",onClick:e=>o.changePage(a)},(0,k.v_)(a),9,kA)],2))),128)),o.pageNumbers.slice(-1)[0]<o.totalPages-1?((0,n.uX)(),(0,n.CE)("li",hA,e[30]||(e[30]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),o.pageNumbers.slice(-1)[0]<o.totalPages?((0,n.uX)(),(0,n.CE)("li",gA,[(0,n.Lk)("button",{class:"page-link",onClick:e[10]||(e[10]=a=>o.changePage(o.totalPages))},(0,k.v_)(o.totalPages),1)])):(0,n.Q3)("",!0),(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:i.currentPage===o.totalPages}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[11]||(e[11]=a=>o.changePage(i.currentPage+1))},"Next")],2)])])):(0,n.Q3)("",!0)])])])])}const bA={class:"modal-header"},fA={class:"modal-title"},LA={class:"modal-body"},yA={class:"col-md-8 mb-3"},vA={class:"mb-3"},CA=["disabled"],PA={disabled:"",value:""},EA=["value"],DA={key:0,class:"alert alert-danger mt-3"},MA={class:"modal-footer"},wA=["disabled"],FA={key:0,class:"spinner-border spinner-border-sm",role:"status"},XA={key:1};function xA(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",{class:"modal-overlay",onClick:e[7]||(e[7]=(...a)=>o.handleOverlayClick&&o.handleOverlayClick(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[6]||(e[6]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",bA,[(0,n.Lk)("h5",fA,(0,k.v_)(o.isEditMode?"Edit Data Kategori Artikel":"Tambah Data Kategori Artikel"),1),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",LA,[(0,n.Lk)("form",{onSubmit:e[3]||(e[3]=(0,l.D$)((...a)=>o.submitForm&&o.submitForm(...a),["prevent"]))},[(0,n.Lk)("div",yA,[e[8]||(e[8]=(0,n.Lk)("label",{class:"form-label"},"Nama Kategori Artikel",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=a=>i.formData.namakategoriartikel=a),placeholder:"Masukkan nama kategori artikell",required:""},null,512),[[l.Jo,i.formData.namakategoriartikel]])]),(0,n.Lk)("div",vA,[e[9]||(e[9]=(0,n.Lk)("label",{class:"form-label"},"Nama Desa",-1)),(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":e[2]||(e[2]=a=>i.formData.iddesa=a),required:"",disabled:i.isDesaListLoading},[(0,n.Lk)("option",PA,(0,k.v_)(i.isDesaListLoading?"Memuat...":"Pilih Desa"),1),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.desaList,a=>((0,n.uX)(),(0,n.CE)("option",{key:a.iddesa,value:a.iddesa},(0,k.v_)(a.wilayah.namawilayah),9,EA))),128))],8,CA),[[l.u1,i.formData.iddesa]])]),i.errorMessage?((0,n.uX)(),(0,n.CE)("div",DA,(0,k.v_)(i.errorMessage),1)):(0,n.Q3)("",!0)],32)]),(0,n.Lk)("div",MA,[(0,n.Lk)("button",{type:"button",class:"btn btn-danger",onClick:e[4]||(e[4]=(...a)=>o.closeModal&&o.closeModal(...a))},"Batal"),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[5]||(e[5]=(...a)=>o.submitForm&&o.submitForm(...a)),disabled:i.isLoading},[i.isLoading?((0,n.uX)(),(0,n.CE)("span",FA)):((0,n.uX)(),(0,n.CE)("span",XA,"Simpan"))],8,wA)])])])])}const TA=(a={})=>Na.get("",{params:{act:"jenis-dokumen",...a}}),SA=a=>(a.append("act","jenis-dokumen"),Na.post("",a)),BA=(a,e)=>a?(e.append("act","jenis-dokumen"),e.append("key",a),Na.post("",e)):Promise.reject(new Error("ID jenis dokumen tidak tersedia")),AA=a=>a?Na.delete("",{data:{act:"jenis-dokumen",key:a}}):Promise.reject(new Error("ID jenis dokumen tidak tersedia")),_A={iddesa:"",namakategoriartikel:""};var jA={name:"addEditArticleCategoryModal",props:{articleCategoryToEdit:{type:Object,default:null}},data(){return{formData:{..._A},desaList:[],isDesaListLoading:!1,isLoading:!1,errorMessage:null,toast:(0,ln.dj)()}},computed:{isEditMode(){return!!this.articleCategoryToEdit}},watch:{articleCategoryToEdit:{handler(a){a?(this.formData.iddesa=a.id_desa||a.iddesa||"",this.formData.namakategoriartikel=a.namakategoriartikel):this.formData={..._A},this.errorMessage=null},immediate:!0,deep:!0}},created(){this.fetchDesaList()},methods:{closeModal(){this.$emit("close")},handleOverlayClick(a){a.target===a.currentTarget&&this.closeModal()},async fetchDesaList(){this.isDesaListLoading=!0;try{const a=await Mi({limit:-1});this.desaList=a.data?.data||a.data?.[0]?.data||[]}catch(a){this.toast.error("Gagal memuat daftar desa")}finally{this.isDesaListLoading=!1}},async submitForm(){this.isLoading=!0,this.errorMessage=null;const a=new FormData;a.append("record[namakategoriartikel]",this.formData.namakategoriartikel),a.append("record[id_desa]",this.formData.iddesa);try{let e;this.isEditMode?(a.append("_method","PUT"),e=await(0,i.updateArticleCategory)(this.articleCategoryToEdit.idkategoriartikel,a),this.toast.success("Data kategori artikel berhasil diperbarui")):(e=await(0,i.addArticleCategory)(a),this.toast.success("Data kategori artikel berhasil ditambah")),this.$emit("save-successful",e.data.data),this.closeModal()}catch(e){this.errorMessage=e.response?.data?.failed||e.response?.data?.message||"Gagal menyimpan data. Silakan coba lagi",this.toast.error("Gagal menyimpan data kategori artikel")}finally{this.isLoading=!1}}}};const VA=(0,r.A)(jA,[["render",xA],["__scopeId","data-v-cf683faa"]]);var IA=VA,NA={components:{AddEditArticleCategoryModal:IA},data(){return{articleCategories:[],isLoading:!1,sortColumn:"created_at",sortDirection:"asc",isModalVisible:!1,currentPage:1,perPage:10,totalItems:0,articleCategoryBeingEdited:null,isFilterVisible:!1,filters:{namakategoriartikel:"",namawilayah:""}}},computed:{paginatedArticleCategories(){return this.articleCategories},totalPages(){return this.perPage<=0?1:Math.ceil(this.totalItems/this.perPage)},pageNumbers(){const a=[],e=5;let t=Math.max(1,this.currentPage-Math.floor(e/2)),s=t+e-1;s>this.totalPages&&(s=this.totalPages,t=Math.max(1,s-e+1));for(let i=t;i<=s;i++)a.push(i);return a}},watch:{currentPage(){this.fetchArticleCategories()},perPage(){this.currentPage=1,this.fetchArticleCategories()}},async mounted(){this.toast=(0,ln.dj)(),await this.fetchArticleCategories()},methods:{openAddModal(){this.articleCategoryBeingEdited=null,this.isModalVisible=!0},openEditModal(a){this.articleCategoryBeingEdited={...a},this.isModalVisible=!0},closeModal(){this.isModalVisible=!1,this.articleCategoryBeingEdited=null},openSkFile(a){a?window.open(a,"_blank"):this.toast.info("Tidak ada file SK yang tersedia.",{icon:"fa fa-info-circle"})},handleSaveSuccessful(){this.closeModal(),this.fetchArticleCategories()},async fetchArticleCategories(){this.isLoading=!0;try{const a={act:"kategori-artikel",page:this.currentPage,limit:this.perPage,order:this.sortColumn?`${this.sortColumn} ${this.sortDirection}`:"",group:""},e=Object.entries(this.filters).filter(([,a])=>""!==a&&null!==a).map(([a,e])=>`${a}=${e}`);e.length>0?a.filter=e.join(","):a.filter="";const t=await TS(a),s=t.data?.data||t.data?.[0]?.data||[],i=t.data?.meta?.pagination||t.data?.[0]?.meta?.pagination||{};this.articleCategories=s,this.totalItems=i.total||s.length}catch(a){console.error("Error fetching articleCategories:",a),this.toast.error("Gagal memuat data kategori artikel",{icon:"fa fa-times"})}finally{this.isLoading=!1}},advancedDeleteAlert(a){this.$swal({title:"Hapus Data Kategori Artikel",text:"Apakah Anda yakin ingin menghapus data ini?",icon:"warning",showCancelButton:!0,confirmButtonText:'<i class="fa fa-check me-2"></i> Hapus!',confirmButtonColor:"#d33",cancelButtonText:'<i class="fa fa-times me-2"></i> Batal',cancelButtonColor:"#efefef",reverseButtons:!0}).then(async e=>{if(e.isConfirmed)try{await SS(a),1===this.articleCategories.length&&this.currentPage>1?this.currentPage--:this.fetchArticleCategories(),this.toast.success("Data kategori artikel berhasil dihapus",{icon:"fa fa-check"})}catch(t){this.toast.error("Gagal menghapus data kategori artikel",{icon:"fa fa-times"})}})},sortBy(a){this.sortColumn===a?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=a,this.sortDirection="asc"),this.fetchArticleCategories()},changePage(a){a>=1&&a<=this.totalPages&&(this.currentPage=a)},toggleFilterVisibility(){this.isFilterVisible=!this.isFilterVisible},applyFilters(){this.currentPage=1,this.fetchArticleCategories()},resetFilters(){this.filters.namadesa="",this.filters.tahunawal="",this.filters.tahunakhir="",this.filters.tanggal_sk="",this.sortColumn="created_at",this.sortDirection="desc",this.currentPage=1,this.fetchArticleCategories()}}};const UA=(0,r.A)(NA,[["render",pA],["__scopeId","data-v-85df1060"]]);var RA=UA,QA={components:{ArticleCategoryTable:RA}};const WA=(0,r.A)(QA,[["render",BB]]);var KA=WA;const OA={class:"container-fluid"},$A={class:"row"};function GA(a,e,t,s,i,l){const o=(0,n.g2)("Breadcrumbs"),r=(0,n.g2)("DocumentTable");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(o,{main:"Website",title:a.$route.meta.title},null,8,["title"]),(0,n.Lk)("div",OA,[(0,n.Lk)("div",$A,[(0,n.bF)(r)])])])}const JA={class:"col-sm-12"},qA={class:"card"},HA={class:"card-body"},YA={class:"d-flex justify-content-end align-items-start mb-3"},zA={class:"d-flex gap-2"},ZA={key:0,class:"fa fa-angle-up me-2"},a_={key:1,class:"fa fa-angle-down me-2"},e_={key:0,class:"border p-3 mb-3 rounded filter-section"},t_={class:"row g-3"},s_={class:"col-md-3"},i_={class:"col-md-3"},l_=["value"],n_={class:"col-md-3"},o_={class:"col-md-3"},r_={class:"d-flex justify-content-end gap-2 mt-3"},c_={class:"table-responsive signal-table"},d_={class:"table table-hover"},u_={key:0,class:"fa fa-sort-asc"},m_={key:1,class:"fa fa-sort-desc"},k_={key:2,class:"fa fa-sort"},h_={key:0,class:"fa fa-sort-asc"},g_={key:1,class:"fa fa-sort-desc"},p_={key:2,class:"fa fa-sort"},b_={key:0,class:"fa fa-sort-asc"},f_={key:1,class:"fa fa-sort-desc"},L_={key:2,class:"fa fa-sort"},y_={key:0,class:"fa fa-sort-asc"},v_={key:1,class:"fa fa-sort-desc"},C_={key:2,class:"fa fa-sort"},P_={key:0},E_={scope:"row"},D_={class:"btn-group"},M_=["onClick"],w_=["onClick"],F_=["onClick"],X_={key:0},x_={class:"d-flex flex-column flex-md-row justify-content-md-between align-items-center mt-3 px-3 pb-3"},T_={class:"mt-2"},S_={key:0,class:"text-muted"},B_={key:0,class:"d-flex align-items-center flex-wrap gap-2 mt-2"},A_={class:"pagination mb-0"},__={key:0,class:"page-item"},j_={key:1,class:"page-item disabled"},V_=["onClick"],I_={key:2,class:"page-item disabled"},N_={key:3,class:"page-item"};function U_(a,e,t,s,i,o){const r=(0,n.g2)("add-edit-document-modal");return(0,n.uX)(),(0,n.CE)("div",JA,[i.isModalVisible?((0,n.uX)(),(0,n.Wv)(r,{key:0,"document-to-edit":i.documentBeingEdited,onClose:o.closeModal,onSaveSuccessful:o.handleSaveSuccessful},null,8,["document-to-edit","onClose","onSaveSuccessful"])):(0,n.Q3)("",!0),(0,n.Lk)("div",qA,[e[42]||(e[42]=(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("h3",null,"Daftar Dokumen")],-1)),(0,n.Lk)("div",HA,[(0,n.Lk)("div",YA,[(0,n.Lk)("div",zA,[(0,n.Lk)("button",{class:"btn btn-outline-light txt-dark",onClick:e[0]||(e[0]=(...a)=>o.toggleFilterVisibility&&o.toggleFilterVisibility(...a))},[i.isFilterVisible?((0,n.uX)(),(0,n.CE)("i",ZA)):((0,n.uX)(),(0,n.CE)("i",a_)),(0,n.Lk)("span",null,(0,k.v_)(i.isFilterVisible?"Sembunyikan":"Tampilkan")+" Filter",1)]),(0,n.Lk)("button",{class:"btn btn-success",onClick:e[1]||(e[1]=(...a)=>o.openAddModal&&o.openAddModal(...a))},e[16]||(e[16]=[(0,n.Lk)("i",{class:"fa fa-plus me-2"},null,-1),(0,n.Lk)("span",null," Tambah Data",-1)]))])]),i.isFilterVisible?((0,n.uX)(),(0,n.CE)("div",e_,[(0,n.Lk)("div",t_,[(0,n.Lk)("div",s_,[e[17]||(e[17]=(0,n.Lk)("label",{for:"filterDocumentName",class:"form-label"},"Nama Dokumen",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterDocumentName",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.filters.namadokumen=a),placeholder:"filter berdasarkan nama dokumen"},null,512),[[l.Jo,i.filters.namadokumen]])]),(0,n.Lk)("div",i_,[e[19]||(e[19]=(0,n.Lk)("label",{for:"filterDocumentType",class:"form-label"},"Jenis Dokumen",-1)),(0,n.bo)((0,n.Lk)("select",{id:"filterDocumentType",class:"form-select","onUpdate:modelValue":e[3]||(e[3]=a=>i.filters.idjenisdokumen=a)},[e[18]||(e[18]=(0,n.Lk)("option",{value:""},"Semua Jenis",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.documentTypes,a=>((0,n.uX)(),(0,n.CE)("option",{key:a.idjenisdokumen,value:a.idjenisdokumen},(0,k.v_)(a.namajenisdokumen),9,l_))),128))],512),[[l.u1,i.filters.idjenisdokumen]])]),(0,n.Lk)("div",n_,[e[20]||(e[20]=(0,n.Lk)("label",{for:"filterYear",class:"form-label"},"Tahun Terbit",-1)),(0,n.bo)((0,n.Lk)("input",{type:"number",id:"filterYear",class:"form-control","onUpdate:modelValue":e[4]||(e[4]=a=>i.filters.tahun_terbit=a),placeholder:"Filter berdasarkan tahun terbit"},null,512),[[l.Jo,i.filters.tahun_terbit]])]),(0,n.Lk)("div",o_,[e[21]||(e[21]=(0,n.Lk)("label",{for:"filterVillage",class:"form-label"},"Nama Desa",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterVillage",class:"form-control","onUpdate:modelValue":e[5]||(e[5]=a=>i.filters.namawilayah=a),placeholder:"Filter berdasarkan nama desa"},null,512),[[l.Jo,i.filters.namawilayah]])])]),(0,n.Lk)("div",r_,[(0,n.Lk)("button",{class:"btn btn-secondary",onClick:e[6]||(e[6]=(...a)=>o.resetFilters&&o.resetFilters(...a))},e[22]||(e[22]=[(0,n.Lk)("i",{class:"fa fa-refresh me-2"},null,-1),(0,n.Lk)("span",null,"Reset Filter",-1)])),(0,n.Lk)("button",{class:"btn btn-primary",onClick:e[7]||(e[7]=(...a)=>o.applyFilters&&o.applyFilters(...a))},e[23]||(e[23]=[(0,n.Lk)("i",{class:"fa fa-search me-2"},null,-1),(0,n.Lk)("span",null,"Terapkan Filter",-1)]))])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",c_,[(0,n.Lk)("table",d_,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[e[28]||(e[28]=(0,n.Lk)("th",{scope:"col"},"No",-1)),(0,n.Lk)("th",{scope:"col",onClick:e[8]||(e[8]=a=>o.sortBy("namadokumen"))},[e[24]||(e[24]=(0,n.eW)(" Nama Dokumen ")),"namadokumen"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",u_)):"namadokumen"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",m_)):((0,n.uX)(),(0,n.CE)("i",k_))]),(0,n.Lk)("th",{scope:"col",onClick:e[9]||(e[9]=a=>o.sortBy("namajenisdokumen"))},[e[25]||(e[25]=(0,n.eW)(" Jenis Dokumen ")),"namajenisdokumen"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",h_)):"namajenisdokumen"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",g_)):((0,n.uX)(),(0,n.CE)("i",p_))]),(0,n.Lk)("th",{scope:"col",onClick:e[10]||(e[10]=a=>o.sortBy("tahun_terbit"))},[e[26]||(e[26]=(0,n.eW)(" Tahun Terbit ")),"tahun_terbit"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",b_)):"tahun_terbit"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",f_)):((0,n.uX)(),(0,n.CE)("i",L_))]),(0,n.Lk)("th",{scope:"col",onClick:e[11]||(e[11]=a=>o.sortBy("namawilayah"))},[e[27]||(e[27]=(0,n.eW)(" Nama Desa ")),"namawilayah"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",y_)):"namawilayah"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",v_)):((0,n.uX)(),(0,n.CE)("i",C_))]),e[29]||(e[29]=(0,n.Lk)("th",{scope:"col"},"Deskripsi",-1)),e[30]||(e[30]=(0,n.Lk)("th",{scope:"col"},"Aksi",-1))])]),(0,n.Lk)("tbody",null,[i.isLoading?((0,n.uX)(),(0,n.CE)("tr",P_,e[31]||(e[31]=[(0,n.Lk)("td",{colspan:"7",class:"text-center p-5"},[(0,n.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,n.Lk)("span",{class:"visually-hidden"},"Loading...")]),(0,n.Lk)("p",{class:"mt-2"},"Memuat data...")],-1)]))):((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.documents,(a,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:a.iddokumen},[(0,n.Lk)("th",E_,(0,k.v_)((i.currentPage-1)*i.perPage+t+1),1),(0,n.Lk)("td",null,(0,k.v_)(a.namadokumen||"-"),1),(0,n.Lk)("td",null,(0,k.v_)(a.jenisdokumen?.namajenisdokumen||"-"),1),(0,n.Lk)("td",null,(0,k.v_)(a.tahun_terbit||"-"),1),(0,n.Lk)("td",null,(0,k.v_)(a.wilayah?.namawilayah||"-"),1),(0,n.Lk)("td",null,(0,k.v_)(a.deskripsi||"-"),1),(0,n.Lk)("td",null,[(0,n.Lk)("div",D_,[(0,n.Lk)("button",{class:"btn btn-info btn-sm",onClick:e=>o.openFile(a.dokumen),title:"Lihat Dokumen"},e[32]||(e[32]=[(0,n.Lk)("i",{class:"fa fa-file"},null,-1)]),8,M_),(0,n.Lk)("button",{class:"btn btn-primary btn-sm",onClick:e=>o.openEditModal(a),title:"Ubah Data"},e[33]||(e[33]=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)]),8,w_),(0,n.Lk)("button",{class:"btn btn-danger sweet-11 btn-sm",type:"button",onClick:e=>o.advancedDeleteAlert(a.iddokumen),title:"Hapus Data"},e[34]||(e[34]=[(0,n.Lk)("i",{class:"fa fa-trash"},null,-1)]),8,F_)])])]))),128)),0===i.documents.length?((0,n.uX)(),(0,n.CE)("tr",X_,e[35]||(e[35]=[(0,n.Lk)("td",{colspan:"7",class:"text-center"},"Tidak ada data yang cocok atau tersedia.",-1)]))):(0,n.Q3)("",!0)],64))])]),(0,n.Lk)("div",x_,[(0,n.Lk)("div",T_,[i.totalItems>0?((0,n.uX)(),(0,n.CE)("span",S_,[e[36]||(e[36]=(0,n.eW)(" Menampilkan ")),(0,n.Lk)("strong",null,(0,k.v_)((i.currentPage-1)*i.perPage+1),1),e[37]||(e[37]=(0,n.eW)(" - ")),(0,n.Lk)("strong",null,(0,k.v_)(Math.min(i.currentPage*i.perPage,i.totalItems)),1),e[38]||(e[38]=(0,n.eW)(" dari ")),(0,n.Lk)("strong",null,(0,k.v_)(i.totalItems),1),e[39]||(e[39]=(0,n.eW)(" data "))])):(0,n.Q3)("",!0)]),-1!==i.perPage&&o.totalPages>1?((0,n.uX)(),(0,n.CE)("nav",B_,[(0,n.Lk)("ul",A_,[(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[12]||(e[12]=a=>o.changePage(i.currentPage-1))},"Prev")],2),o.pageNumbers[0]>1?((0,n.uX)(),(0,n.CE)("li",__,[(0,n.Lk)("button",{class:"page-link",onClick:e[13]||(e[13]=a=>o.changePage(1))},"1")])):(0,n.Q3)("",!0),o.pageNumbers[0]>2?((0,n.uX)(),(0,n.CE)("li",j_,e[40]||(e[40]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.pageNumbers,a=>((0,n.uX)(),(0,n.CE)("li",{key:a,class:(0,k.C4)(["page-item",{active:i.currentPage===a}])},[(0,n.Lk)("button",{class:"page-link",onClick:e=>o.changePage(a)},(0,k.v_)(a),9,V_)],2))),128)),o.pageNumbers.slice(-1)[0]<o.totalPages-1?((0,n.uX)(),(0,n.CE)("li",I_,e[41]||(e[41]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),o.pageNumbers.slice(-1)[0]<o.totalPages?((0,n.uX)(),(0,n.CE)("li",N_,[(0,n.Lk)("button",{class:"page-link",onClick:e[14]||(e[14]=a=>o.changePage(o.totalPages))},(0,k.v_)(o.totalPages),1)])):(0,n.Q3)("",!0),(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:i.currentPage===o.totalPages}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[15]||(e[15]=a=>o.changePage(i.currentPage+1))},"Next")],2)])])):(0,n.Q3)("",!0)])])])])}const R_=(a={})=>Na.get("",{params:{act:"dokumen",...a}}),Q_=a=>(a.append("act","dokumen"),Na.post("",a)),W_=(a,e)=>a?(e.append("act","dokumen"),e.append("key",a),Na.post("",e)):Promise.reject(new Error("ID dokumen tidak tersedia")),K_=a=>a?Na.delete("",{data:{act:"dokumen",key:a}}):Promise.reject(new Error("ID dokumen tidak tersedia")),O_={class:"modal-header"},$_={class:"modal-title"},G_={class:"modal-body"},J_={class:"mb-3"},q_=["disabled"],H_={disabled:"",value:""},Y_=["value"],z_={class:"mb-3"},Z_={class:"mb-3"},aj=["disabled"],ej={disabled:"",value:""},tj=["value"],sj={class:"mb-3"},ij={class:"mb-3"},lj={key:0,class:"mt-2"},nj=["href"],oj={key:1,class:"mt-2"},rj={class:"mb-3"},cj={key:0,class:"alert alert-danger mt-3"},dj={class:"modal-footer"},uj=["disabled"],mj={key:0,class:"spinner-border spinner-border-sm",role:"status"},kj={key:1};function hj(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",{class:"modal-overlay",onClick:e[11]||(e[11]=(...a)=>o.handleOverlayClick&&o.handleOverlayClick(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[10]||(e[10]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",O_,[(0,n.Lk)("h5",$_,(0,k.v_)(o.isEditMode?"Edit Data Dokumen":"Tambah Data Dokumen"),1),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",G_,[(0,n.Lk)("form",{onSubmit:e[7]||(e[7]=(0,l.D$)((...a)=>o.submitForm&&o.submitForm(...a),["prevent"]))},[(0,n.Lk)("div",J_,[e[12]||(e[12]=(0,n.Lk)("label",{class:"form-label"},"Desa",-1)),(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":e[1]||(e[1]=a=>i.formData.iddesa=a),required:"",disabled:i.isListLoading},[(0,n.Lk)("option",H_,(0,k.v_)(i.isListLoading?"Memuat...":"Pilih Desa"),1),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.desaList,a=>((0,n.uX)(),(0,n.CE)("option",{key:a.iddesa,value:a.iddesa},(0,k.v_)(a.wilayah.namawilayah),9,Y_))),128))],8,q_),[[l.u1,i.formData.iddesa]])]),(0,n.Lk)("div",z_,[e[13]||(e[13]=(0,n.Lk)("label",{class:"form-label"},"Nama Dokumen",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.formData.namadokumen=a),required:""},null,512),[[l.Jo,i.formData.namadokumen]])]),(0,n.Lk)("div",Z_,[e[14]||(e[14]=(0,n.Lk)("label",{class:"form-label"},"Jenis Dokumen",-1)),(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":e[3]||(e[3]=a=>i.formData.idjenisdokumen=a),required:"",disabled:i.isListLoading},[(0,n.Lk)("option",ej,(0,k.v_)(i.isListLoading?"Memuat...":"Pilih Jenis Dokumen"),1),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.documentTypeList,a=>((0,n.uX)(),(0,n.CE)("option",{key:a.idjenisdokumen,value:a.idjenisdokumen},(0,k.v_)(a.namajenisdokumen),9,tj))),128))],8,aj),[[l.u1,i.formData.idjenisdokumen]])]),(0,n.Lk)("div",sj,[e[15]||(e[15]=(0,n.Lk)("label",{class:"form-label"},"Tahun Terbit",-1)),(0,n.bo)((0,n.Lk)("input",{type:"number",class:"form-control","onUpdate:modelValue":e[4]||(e[4]=a=>i.formData.tahun_terbit=a),placeholder:"YYYY",required:""},null,512),[[l.Jo,i.formData.tahun_terbit]])]),(0,n.Lk)("div",ij,[e[18]||(e[18]=(0,n.Lk)("label",{class:"form-label"},"Upload File",-1)),(0,n.Lk)("input",{type:"file",class:"form-control",accept:".pdf,.doc,.docx,image/*",onChange:e[5]||(e[5]=(...a)=>o.handleFileUpload&&o.handleFileUpload(...a))},null,32),o.isEditMode&&i.formData.dokumen&&!a.selectedFile?((0,n.uX)(),(0,n.CE)("div",lj,[e[16]||(e[16]=(0,n.eW)(" File saat ini: ")),(0,n.Lk)("a",{href:i.formData.dokumen,target:"_blank",rel:"noopener noreferrer"},"Lihat File",8,nj)])):(0,n.Q3)("",!0),a.FileName?((0,n.uX)(),(0,n.CE)("div",oj,[e[17]||(e[17]=(0,n.eW)(" File baru: ")),(0,n.Lk)("strong",null,(0,k.v_)(a.FileName),1)])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",rj,[e[19]||(e[19]=(0,n.Lk)("label",{class:"form-label"},"Deskripsi",-1)),(0,n.bo)((0,n.Lk)("textarea",{class:"form-control",rows:"3","onUpdate:modelValue":e[6]||(e[6]=a=>i.formData.deskripsi=a),placeholder:"Jelaskan tentang dokumen tersebut",required:""},null,512),[[l.Jo,i.formData.deskripsi]])]),i.errorMessage?((0,n.uX)(),(0,n.CE)("div",cj,(0,k.v_)(i.errorMessage),1)):(0,n.Q3)("",!0)],32)]),(0,n.Lk)("div",dj,[(0,n.Lk)("button",{type:"button",class:"btn btn-danger",onClick:e[8]||(e[8]=(...a)=>o.closeModal&&o.closeModal(...a))},"Batal"),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[9]||(e[9]=(...a)=>o.submitForm&&o.submitForm(...a)),disabled:i.isLoading},[i.isLoading?((0,n.uX)(),(0,n.CE)("span",mj)):((0,n.uX)(),(0,n.CE)("span",kj,"Simpan"))],8,uj)])])])])}const gj={selectedFile:null,FileName:"",namadokumen:"",idjenisdokumen:"",deskripsi:"",tahun_terbit:"",iddesa:"",file:null};var pj={name:"addEditDocumentModal",props:{documentToEdit:{type:Object,default:null}},data(){return{formData:{...gj},documentTypeList:[],desaList:[],isListLoading:!1,isLoading:!1,errorMessage:null,toast:(0,ln.dj)()}},computed:{isEditMode(){return!!this.documentToEdit}},watch:{documentToEdit:{handler(a){a?(this.formData.namadokumen=a.namadokumen,this.formData.idjenisdokumen=a.idjenisdokumen,this.formData.deskripsi=a.deskripsi,this.formData.tahun_terbit=a.tahun_terbit,this.formData.iddesa=a.iddesa,this.formData.dokumen=a.dokumen):this.formData={...gj},this.selectedFile=null,this.FileName="",this.errorMessage=null},immediate:!0,deep:!0}},async created(){await this.fetchDesaList(),await this.fetchTypeList()},methods:{closeModal(){this.$emit("close")},handleOverlayClick(a){a.target===a.currentTarget&&this.closeModal()},async fetchDesaList(){this.isListLoading=!0;try{const a=await Mi({limit:-1});this.desaList=a.data?.data||a.data?.[0]?.data||[]}catch(a){this.toast.error("Gagal memuat daftar desa")}finally{this.isListLoading=!1}},async fetchTypeList(){this.isListLoading=!0;try{const a=await TA({limit:-1});this.documentTypeList=a.data?.data||a.data?.[0]?.data||[]}catch(a){this.toast.error("Gagal memuat daftar jenis dokumen")}finally{this.isListLoading=!1}},handleFileUpload(a){const e=a.target.files[0];if(!e)return this.selectedFile=null,void(this.FileName="");this.selectedFile=e,this.FileName=e.name},async submitForm(){this.isLoading=!0,this.errorMessage=null;const a=new FormData;a.append("record[namadokumen]",this.formData.namadokumen),a.append("record[idjenisdokumen]",this.formData.idjenisdokumen),a.append("record[deskripsi]",this.formData.deskripsi||""),a.append("record[tahun_terbit]",this.formData.tahun_terbit),a.append("record[iddesa]",this.formData.iddesa),this.selectedFile&&a.append("upload_dokumen",this.selectedFile);try{let e;this.isEditMode?(a.append("_method","PUT"),e=await W_(this.documentToEdit.iddokumen,a),this.toast.success("Data dokumen berhasil diperbarui")):(e=await Q_(a),this.toast.success("Data dokumen berhasil ditambah")),this.$emit("save-successful",e.data.data),this.closeModal()}catch(e){this.errorMessage=e.response?.data?.failed||e.response?.data?.message||"Gagal menyimpan data. Silakan coba lagi",this.toast.error("Gagal menyimpan data dokumen")}finally{this.isLoading=!1}}}};const bj=(0,r.A)(pj,[["render",hj],["__scopeId","data-v-5ba047da"]]);var fj=bj,Lj={components:{AddEditDocumentModal:fj},data(){return{documents:[],documentTypes:[],isLoading:!1,sortColumn:"created_at",sortDirection:"asc",isModalVisible:!1,currentPage:1,perPage:10,totalItems:0,documentBeingEdited:null,isFilterVisible:!1,filters:{namadokumen:"",idjenisdokumen:"",tahun_terbit:"",namawilayah:""}}},computed:{totalPages(){return this.perPage<=0?1:Math.ceil(this.totalItems/this.perPage)},pageNumbers(){const a=[],e=5;let t=Math.max(1,this.currentPage-Math.floor(e/2)),s=t+e-1;s>this.totalPages&&(s=this.totalPages,t=Math.max(1,s-e+1));for(let i=t;i<=s;i++)a.push(i);return a}},watch:{currentPage(){this.fetchDocuments()},perPage(){this.currentPage=1,this.fetchDocuments()}},async mounted(){this.toast=(0,ln.dj)(),await this.fetchDocumentTypesForFilter(),await this.fetchDocuments()},methods:{openAddModal(){this.documentBeingEdited=null,this.isModalVisible=!0},openEditModal(a){this.documentBeingEdited={...a},this.isModalVisible=!0},closeModal(){this.isModalVisible=!1,this.documentBeingEdited=null},openFile(a){a?window.open(a,"_blank"):this.toast.info("Tidak ada file dokumen yang tersedia",{icon:"fa fa-info-circle"})},handleSaveSuccessful(){this.closeModal(),this.fetchDocuments()},async fetchDocumentTypesForFilter(){try{const a=await TA({limit:-1});this.documentTypes=a.data?.data||a.data?.[0]?.data||[]}catch(a){this.toast.error("Gagal memuat daftar jenis dokumen untuk filter.")}},async fetchDocuments(){this.isLoading=!0;try{const a={act:"dokumen",page:this.currentPage,limit:this.perPage,order:this.sortColumn?`${this.sortColumn} ${this.sortDirection}`:"",group:""},e=Object.entries(this.filters).filter(([,a])=>""!==a&&null!==a).map(([a,e])=>`${a}=${e}`);e.length>0?a.filter=e.join(","):a.filter="";const t=await R_(a),s=t.data?.data||t.data?.[0]?.data||[],i=t.data?.meta?.pagination||t.data?.[0]?.meta?.pagination||{};this.documents=s,this.totalItems=i.total||s.length}catch(a){console.error("Error fetching documents:",a),this.toast.error("Gagal memuat data dokumen",{icon:"fa fa-times"})}finally{this.isLoading=!1}},advancedDeleteAlert(a){this.$swal({title:"Hapus Data Dokumen",text:"Apakah Anda yakin ingin menghapus data ini?",icon:"warning",showCancelButton:!0,confirmButtonText:'<i class="fa fa-check me-2"></i> Hapus!',confirmButtonColor:"#d33",cancelButtonText:'<i class="fa fa-times me-2"></i> Batal',cancelButtonColor:"#efefef",reverseButtons:!0}).then(async e=>{if(e.isConfirmed)try{await K_(a),1===this.documents.length&&this.currentPage>1?this.currentPage--:this.fetchDocuments(),this.toast.success("Data dokumen berhasil dihapus",{icon:"fa fa-check"})}catch(t){this.toast.error("Gagal menghapus data dokumen",{icon:"fa fa-times"})}})},sortBy(a){this.sortColumn===a?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=a,this.sortDirection="asc"),this.fetchDocuments()},changePage(a){a>=1&&a<=this.totalPages&&(this.currentPage=a)},toggleFilterVisibility(){this.isFilterVisible=!this.isFilterVisible},applyFilters(){this.currentPage=1,this.fetchDocuments()},resetFilters(){this.filters.namadokumen="",this.filters.idjenisdokumen="",this.filters.tahun_terbit="",this.filters.namawilayah="",this.currentPage=1,this.fetchDocuments()}}};const yj=(0,r.A)(Lj,[["render",U_],["__scopeId","data-v-2132ea08"]]);var vj=yj,Cj={components:{DocumentTable:vj}};const Pj=(0,r.A)(Cj,[["render",GA]]);var Ej=Pj;const Dj={class:"container-fluid"},Mj={class:"row"};function wj(a,e,t,s,i,l){const o=(0,n.g2)("Breadcrumbs"),r=(0,n.g2)("DocumentTypesTable");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(o,{main:"Website",title:a.$route.meta.title},null,8,["title"]),(0,n.Lk)("div",Dj,[(0,n.Lk)("div",Mj,[(0,n.bF)(r)])])])}const Fj={class:"col-sm-12"},Xj={class:"card"},xj={class:"card-body"},Tj={class:"d-flex justify-content-end align-items-start mb-3"},Sj={class:"d-flex gap-2"},Bj={key:0,class:"fa fa-angle-up me-2"},Aj={key:1,class:"fa fa-angle-down me-2"},_j={key:0,class:"border p-3 mb-3 rounded filter-section"},jj={class:"row g-3"},Vj={class:"col-md-3"},Ij={class:"d-flex justify-content-end gap-2 mt-3"},Nj={class:"table-responsive signal-table"},Uj={class:"table table-hover"},Rj={key:0,class:"fa fa-sort-asc"},Qj={key:1,class:"fa fa-sort-desc"},Wj={key:2,class:"fa fa-sort"},Kj={key:0},Oj={scope:"row"},$j={class:"btn-group"},Gj=["onClick"],Jj=["onClick"],qj={key:0},Hj={class:"d-flex flex-column flex-md-row justify-content-md-between align-items-center mt-3 px-3 pb-3"},Yj={class:"mt-2"},zj={key:0,class:"text-muted"},Zj={key:0,class:"d-flex align-items-center flex-wrap gap-2 mt-2"},aV={class:"pagination mb-0"},eV={key:0,class:"page-item"},tV={key:1,class:"page-item disabled"},sV=["onClick"],iV={key:2,class:"page-item disabled"},lV={key:3,class:"page-item"};function nV(a,e,t,s,i,o){const r=(0,n.g2)("add-edit-documentType-modal");return(0,n.uX)(),(0,n.CE)("div",Fj,[i.isModalVisible?((0,n.uX)(),(0,n.Wv)(r,{key:0,"documentType-to-edit":i.documentTypeBeingEdited,onClose:o.closeModal,onSaveSuccessful:o.handleSaveSuccessful},null,8,["documentType-to-edit","onClose","onSaveSuccessful"])):(0,n.Q3)("",!0),(0,n.Lk)("div",Xj,[e[27]||(e[27]=(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("h3",null,"Daftar Kategori Artikel")],-1)),(0,n.Lk)("div",xj,[(0,n.Lk)("div",Tj,[(0,n.Lk)("div",Sj,[(0,n.Lk)("button",{class:"btn btn-outline-light txt-dark",onClick:e[0]||(e[0]=(...a)=>o.toggleFilterVisibility&&o.toggleFilterVisibility(...a))},[i.isFilterVisible?((0,n.uX)(),(0,n.CE)("i",Bj)):((0,n.uX)(),(0,n.CE)("i",Aj)),(0,n.Lk)("span",null,(0,k.v_)(i.isFilterVisible?"Sembunyikan":"Tampilkan")+" Filter",1)]),(0,n.Lk)("button",{class:"btn btn-success",onClick:e[1]||(e[1]=(...a)=>o.openAddModal&&o.openAddModal(...a))},e[10]||(e[10]=[(0,n.Lk)("i",{class:"fa fa-plus me-2"},null,-1),(0,n.Lk)("span",null," Tambah Data",-1)]))])]),i.isFilterVisible?((0,n.uX)(),(0,n.CE)("div",_j,[(0,n.Lk)("div",jj,[(0,n.Lk)("div",Vj,[e[11]||(e[11]=(0,n.Lk)("label",{for:"filterDocumentTypeName",class:"form-label"},"Nama Jenis Dokumen",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterDocumentTypeName",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.filters.namajenisdokumen=a),placeholder:"Filter berdasarkan nama jenis dokumen"},null,512),[[l.Jo,i.filters.namajenisdokumen]])])]),(0,n.Lk)("div",Ij,[(0,n.Lk)("button",{class:"btn btn-secondary",onClick:e[3]||(e[3]=(...a)=>o.resetFilters&&o.resetFilters(...a))},e[12]||(e[12]=[(0,n.Lk)("i",{class:"fa fa-refresh me-2"},null,-1),(0,n.Lk)("span",null,"Reset Filter",-1)])),(0,n.Lk)("button",{class:"btn btn-primary",onClick:e[4]||(e[4]=(...a)=>o.applyFilters&&o.applyFilters(...a))},e[13]||(e[13]=[(0,n.Lk)("i",{class:"fa fa-search me-2"},null,-1),(0,n.Lk)("span",null,"Terapkan Filter",-1)]))])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",Nj,[(0,n.Lk)("table",Uj,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[e[15]||(e[15]=(0,n.Lk)("th",{scope:"col"},"No",-1)),(0,n.Lk)("th",{scope:"col",onClick:e[5]||(e[5]=a=>o.sortBy("namajenisdokumen"))},[e[14]||(e[14]=(0,n.eW)(" Nama Jenis Dokumen ")),"namajenisdokumen"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",Rj)):"namajenisdokumen"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",Qj)):((0,n.uX)(),(0,n.CE)("i",Wj))]),e[16]||(e[16]=(0,n.Lk)("th",{scope:"col"},"Aksi",-1))])]),(0,n.Lk)("tbody",null,[i.isLoading?((0,n.uX)(),(0,n.CE)("tr",Kj,e[17]||(e[17]=[(0,n.Lk)("td",{colspan:"5",class:"text-center p-5"},[(0,n.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,n.Lk)("span",{class:"visually-hidden"},"Loading...")]),(0,n.Lk)("p",{class:"mt-2"},"Memuat data...")],-1)]))):((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.documentTypes,(a,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:a.idjenisdokumen},[(0,n.Lk)("th",Oj,(0,k.v_)((i.currentPage-1)*i.perPage+t+1),1),(0,n.Lk)("td",null,(0,k.v_)(a.namajenisdokumen||"-"),1),(0,n.Lk)("td",null,[(0,n.Lk)("div",$j,[(0,n.Lk)("button",{class:"btn btn-primary btn-sm",onClick:e=>o.openEditModal(a),title:"Ubah Data"},e[18]||(e[18]=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)]),8,Gj),(0,n.Lk)("button",{class:"btn btn-danger sweet-11 btn-sm",type:"button",onClick:e=>o.advancedDeleteAlert(a.idjenisdokumen),title:"Hapus Data"},e[19]||(e[19]=[(0,n.Lk)("i",{class:"fa fa-trash"},null,-1)]),8,Jj)])])]))),128)),0===o.paginatedDocumentTypes.length?((0,n.uX)(),(0,n.CE)("tr",qj,e[20]||(e[20]=[(0,n.Lk)("td",{colspan:"5",class:"text-center"},"Tidak ada data yang cocok atau tersedia.",-1)]))):(0,n.Q3)("",!0)],64))])]),(0,n.Lk)("div",Hj,[(0,n.Lk)("div",Yj,[i.totalItems>0?((0,n.uX)(),(0,n.CE)("span",zj,[e[21]||(e[21]=(0,n.eW)(" Menampilkan ")),(0,n.Lk)("strong",null,(0,k.v_)((i.currentPage-1)*i.perPage+1),1),e[22]||(e[22]=(0,n.eW)(" - ")),(0,n.Lk)("strong",null,(0,k.v_)(Math.min(i.currentPage*i.perPage,i.totalItems)),1),e[23]||(e[23]=(0,n.eW)(" dari ")),(0,n.Lk)("strong",null,(0,k.v_)(i.totalItems),1),e[24]||(e[24]=(0,n.eW)(" data "))])):(0,n.Q3)("",!0)]),-1!==i.perPage&&o.totalPages>1?((0,n.uX)(),(0,n.CE)("nav",Zj,[(0,n.Lk)("ul",aV,[(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[6]||(e[6]=a=>o.changePage(i.currentPage-1))},"Prev")],2),o.pageNumbers[0]>1?((0,n.uX)(),(0,n.CE)("li",eV,[(0,n.Lk)("button",{class:"page-link",onClick:e[7]||(e[7]=a=>o.changePage(1))},"1")])):(0,n.Q3)("",!0),o.pageNumbers[0]>2?((0,n.uX)(),(0,n.CE)("li",tV,e[25]||(e[25]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.pageNumbers,a=>((0,n.uX)(),(0,n.CE)("li",{key:a,class:(0,k.C4)(["page-item",{active:i.currentPage===a}])},[(0,n.Lk)("button",{class:"page-link",onClick:e=>o.changePage(a)},(0,k.v_)(a),9,sV)],2))),128)),o.pageNumbers.slice(-1)[0]<o.totalPages-1?((0,n.uX)(),(0,n.CE)("li",iV,e[26]||(e[26]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),o.pageNumbers.slice(-1)[0]<o.totalPages?((0,n.uX)(),(0,n.CE)("li",lV,[(0,n.Lk)("button",{class:"page-link",onClick:e[8]||(e[8]=a=>o.changePage(o.totalPages))},(0,k.v_)(o.totalPages),1)])):(0,n.Q3)("",!0),(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:i.currentPage===o.totalPages}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[9]||(e[9]=a=>o.changePage(i.currentPage+1))},"Next")],2)])])):(0,n.Q3)("",!0)])])])])}const oV={class:"modal-header"},rV={class:"modal-title"},cV={class:"modal-body"},dV={class:"mb-3"},uV={key:0,class:"alert alert-danger mt-3"},mV={class:"modal-footer"},kV=["disabled"],hV={key:0,class:"spinner-border spinner-border-sm",role:"status"},gV={key:1};function pV(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",{class:"modal-overlay",onClick:e[6]||(e[6]=(...a)=>o.handleOverlayClick&&o.handleOverlayClick(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[5]||(e[5]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",oV,[(0,n.Lk)("h5",rV,(0,k.v_)(o.isEditMode?"Edit Data Jenis Dokumen":"Tambah Data Jenis Dokumen"),1),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",cV,[(0,n.Lk)("form",{onSubmit:e[2]||(e[2]=(0,l.D$)((...a)=>o.submitForm&&o.submitForm(...a),["prevent"]))},[(0,n.Lk)("div",dV,[e[7]||(e[7]=(0,n.Lk)("label",{class:"form-label"},"Nama Jenis Dokumen",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=a=>i.formData.namajenisdokumen=a),placeholder:"Masukkan nama jenis dokumen",required:""},null,512),[[l.Jo,i.formData.namajenisdokumen]])]),i.errorMessage?((0,n.uX)(),(0,n.CE)("div",uV,(0,k.v_)(i.errorMessage),1)):(0,n.Q3)("",!0)],32)]),(0,n.Lk)("div",mV,[(0,n.Lk)("button",{type:"button",class:"btn btn-danger",onClick:e[3]||(e[3]=(...a)=>o.closeModal&&o.closeModal(...a))},"Batal"),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[4]||(e[4]=(...a)=>o.submitForm&&o.submitForm(...a)),disabled:i.isLoading},[i.isLoading?((0,n.uX)(),(0,n.CE)("span",hV)):((0,n.uX)(),(0,n.CE)("span",gV,"Simpan"))],8,kV)])])])])}const bV={namajenisdokumen:""};var fV={name:"addEditArticleCategoryModal",props:{documentTypeToEdit:{type:Object,default:null}},data(){return{formData:{...bV},isLoading:!1,errorMessage:null,toast:(0,ln.dj)()}},computed:{isEditMode(){return!!this.documentTypeToEdit}},watch:{documentTypeToEdit:{handler(a){a?this.formData.namajenisdokumen=a.namajenisdokumen:this.formData={...bV},this.errorMessage=null},immediate:!0,deep:!0}},methods:{closeModal(){this.$emit("close")},handleOverlayClick(a){a.target===a.currentTarget&&this.closeModal()},async submitForm(){this.isLoading=!0,this.errorMessage=null;const a=new FormData;a.append("record[namajenisdokumen]",this.formData.namajenisdokumen);try{let e;this.isEditMode?(a.append("_method","PUT"),e=await BA(this.documentTypeToEdit.idjenisdokumen,a),this.toast.success("Data jenis dokumen berhasil diperbarui")):(e=await SA(a),this.toast.success("Data jenis dokumen berhasil ditambah")),this.$emit("save-successful",e.data.data),this.closeModal()}catch(e){this.errorMessage=e.response?.data?.failed||e.response?.data?.message||"Gagal menyimpan data. Silakan coba lagi",this.toast.error("Gagal menyimpan data jenis dokumen")}finally{this.isLoading=!1}}}};const LV=(0,r.A)(fV,[["render",pV],["__scopeId","data-v-b0442b4c"]]);var yV=LV,vV={components:{AddEditDocumentTypeModal:yV},data(){return{documentTypes:[],isLoading:!1,sortColumn:"created_at",sortDirection:"asc",isModalVisible:!1,currentPage:1,perPage:10,totalItems:0,documentTypeBeingEdited:null,isFilterVisible:!1,filters:{namajenisdokumen:""}}},computed:{paginatedDocumentTypes(){return this.documentTypes},totalPages(){return this.perPage<=0?1:Math.ceil(this.totalItems/this.perPage)},pageNumbers(){const a=[],e=5;let t=Math.max(1,this.currentPage-Math.floor(e/2)),s=t+e-1;s>this.totalPages&&(s=this.totalPages,t=Math.max(1,s-e+1));for(let i=t;i<=s;i++)a.push(i);return a}},watch:{currentPage(){this.fetchDocumentTypes()},perPage(){this.currentPage=1,this.fetchDocumentTypes()}},async mounted(){this.toast=(0,ln.dj)(),await this.fetchDocumentTypes()},methods:{openAddModal(){this.documentTypeBeingEdited=null,this.isModalVisible=!0},openEditModal(a){this.documentTypeBeingEdited={...a},this.isModalVisible=!0},closeModal(){this.isModalVisible=!1,this.documentTypeBeingEdited=null},handleSaveSuccessful(){this.closeModal(),this.fetchDocumentTypes()},async fetchDocumentTypes(){this.isLoading=!0;try{const a={act:"jenis-dokumen",page:this.currentPage,limit:this.perPage,order:this.sortColumn?`${this.sortColumn} ${this.sortDirection}`:"",group:""},e=Object.entries(this.filters).filter(([,a])=>""!==a&&null!==a).map(([a,e])=>`${a}=${e}`);e.length>0?a.filter=e.join(","):a.filter="";const t=await TA(a),s=t.data?.data||t.data?.[0]?.data||[],i=t.data?.meta?.pagination||t.data?.[0]?.meta?.pagination||{};this.documentTypes=s,this.totalItems=i.total||s.length}catch(a){console.error("Error fetching document types:",a),this.toast.error("Gagal memuat data jenis dokumen",{icon:"fa fa-times"})}finally{this.isLoading=!1}},advancedDeleteAlert(a){this.$swal({title:"Hapus Data Jenis Dokumen",text:"Apakah Anda yakin ingin menghapus data ini?",icon:"warning",showCancelButton:!0,confirmButtonText:'<i class="fa fa-check me-2"></i> Hapus!',confirmButtonColor:"#d33",cancelButtonText:'<i class="fa fa-times me-2"></i> Batal',cancelButtonColor:"#efefef",reverseButtons:!0}).then(async e=>{if(e.isConfirmed)try{await AA(a),1===this.documentTypes.length&&this.currentPage>1?this.currentPage--:this.fetchDocumentTypes(),this.toast.success("Data jenis dokumen berhasil dihapus",{icon:"fa fa-check"})}catch(t){this.toast.error("Gagal menghapus data jenis dokumen",{icon:"fa fa-times"})}})},sortBy(a){this.sortColumn===a?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=a,this.sortDirection="asc"),this.fetchDocumentTypes()},changePage(a){a>=1&&a<=this.totalPages&&(this.currentPage=a)},toggleFilterVisibility(){this.isFilterVisible=!this.isFilterVisible},applyFilters(){this.currentPage=1,this.fetchDocumentTypes()},resetFilters(){this.filters.namajenisdokumen="",this.currentPage=1,this.fetchDocumentTypes()}}};const CV=(0,r.A)(vV,[["render",nV],["__scopeId","data-v-5c3ae7fa"]]);var PV=CV,EV={components:{DocumentTypesTable:PV}};const DV=(0,r.A)(EV,[["render",wj]]);var MV=DV;const wV={class:"container-fluid"},FV={class:"row"};function XV(a,e,t,s,i,l){const o=(0,n.g2)("Breadcrumbs"),r=(0,n.g2)("BannerTable");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(o,{main:"Banner",title:a.$route.meta.title},null,8,["title"]),(0,n.Lk)("div",wV,[(0,n.Lk)("div",FV,[(0,n.bF)(r)])])])}const xV={class:"col-sm-12"},TV={class:"image-modal-header"},SV={class:"image-modal-body"},BV=["src"],AV={class:"image-modal-footer"},_V={class:"card"},jV={class:"card-body"},VV={class:"d-flex justify-content-end align-items-start mb-3"},IV={class:"d-flex gap-2"},NV={key:0,class:"fa fa-angle-up me-2"},UV={key:1,class:"fa fa-angle-down me-2"},RV={key:0,class:"border p-3 mb-3 rounded filter-section"},QV={class:"row g-3"},WV={class:"col-md-4"},KV={class:"col-md-4"},OV={class:"d-flex justify-content-end gap-2 mt-3"},$V={class:"table-responsive signal-table"},GV={class:"table table-hover"},JV={key:0,class:"fa fa-sort-asc"},qV={key:1,class:"fa fa-sort-desc"},HV={key:2,class:"fa fa-sort"},YV={key:0,class:"fa fa-sort-asc"},zV={key:1,class:"fa fa-sort-desc"},ZV={key:2,class:"fa fa-sort"},aI={key:0},eI={scope:"row"},tI=["src","onClick"],sI={key:1,class:"text-muted"},iI={class:"btn-group"},lI=["onClick"],nI=["onClick"],oI={key:0},rI={class:"d-flex flex-column flex-md-row justify-content-md-between align-items-center mt-3 px-3 pb-3"},cI={class:"mt-2"},dI={key:0,class:"text-muted"},uI={key:0,class:"d-flex align-items-center flex-wrap gap-2 mt-2"},mI={class:"pagination mb-0"},kI={key:0,class:"page-item"},hI={key:1,class:"page-item disabled"},gI=["onClick"],pI={key:2,class:"page-item disabled"},bI={key:3,class:"page-item"};function fI(a,e,t,s,i,o){const r=(0,n.g2)("add-edit-banner-modal");return(0,n.uX)(),(0,n.CE)("div",xV,[i.isModalVisible?((0,n.uX)(),(0,n.Wv)(r,{key:0,"banner-to-edit":i.bannerBeingEdited,onClose:o.closeModal,onSaveSuccessful:o.handleSaveSuccessful},null,8,["banner-to-edit","onClose","onSaveSuccessful"])):(0,n.Q3)("",!0),i.isImageModalVisible?((0,n.uX)(),(0,n.CE)("div",{key:1,class:"image-modal-overlay",onClick:e[7]||(e[7]=(...a)=>o.closeImageModal&&o.closeImageModal(...a))},[(0,n.Lk)("div",{class:"image-modal-content",onClick:e[6]||(e[6]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",TV,[e[20]||(e[20]=(0,n.Lk)("h5",{class:"image-modal-title"},"Pratinjau Gambar",-1)),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeImageModal&&o.closeImageModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",SV,[(0,n.Lk)("img",{src:i.selectedImageUrl,style:(0,k.Tr)(o.imageStyle),alt:"Pratinjau Banner",onMousedown:e[1]||(e[1]=(...a)=>o.startDrag&&o.startDrag(...a)),onTouchstart:e[2]||(e[2]=(...a)=>o.startDrag&&o.startDrag(...a)),draggable:"false"},null,44,BV)]),(0,n.Lk)("div",AV,[(0,n.Lk)("button",{class:"btn btn-outline-secondary btn-sm",onClick:e[3]||(e[3]=(...a)=>o.zoomOut&&o.zoomOut(...a)),title:"Perkecil"},e[21]||(e[21]=[(0,n.Lk)("i",{class:"fa fa-search-minus"},null,-1)])),(0,n.Lk)("button",{class:"btn btn-outline-secondary btn-sm",onClick:e[4]||(e[4]=(...a)=>o.resetZoom&&o.resetZoom(...a)),title:"Reset Zoom"},e[22]||(e[22]=[(0,n.Lk)("i",{class:"fa fa-refresh"},null,-1)])),(0,n.Lk)("button",{class:"btn btn-outline-secondary btn-sm",onClick:e[5]||(e[5]=(...a)=>o.zoomIn&&o.zoomIn(...a)),title:"Perbesar"},e[23]||(e[23]=[(0,n.Lk)("i",{class:"fa fa-search-plus"},null,-1)]))])])])):(0,n.Q3)("",!0),(0,n.Lk)("div",_V,[e[44]||(e[44]=(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("h3",null,"Daftar Banner")],-1)),(0,n.Lk)("div",jV,[(0,n.Lk)("div",VV,[(0,n.Lk)("div",IV,[(0,n.Lk)("button",{class:"btn btn-outline-light txt-dark",onClick:e[8]||(e[8]=(...a)=>o.toggleFilterVisibility&&o.toggleFilterVisibility(...a))},[i.isFilterVisible?((0,n.uX)(),(0,n.CE)("i",NV)):((0,n.uX)(),(0,n.CE)("i",UV)),(0,n.Lk)("span",null,(0,k.v_)(i.isFilterVisible?"Sembunyikan":"Tampilkan")+" Filter",1)]),(0,n.Lk)("button",{class:"btn btn-success",onClick:e[9]||(e[9]=(...a)=>o.openAddModal&&o.openAddModal(...a))},e[24]||(e[24]=[(0,n.Lk)("i",{class:"fa fa-plus me-2"},null,-1),(0,n.Lk)("span",null," Tambah Data",-1)]))])]),i.isFilterVisible?((0,n.uX)(),(0,n.CE)("div",RV,[(0,n.Lk)("div",QV,[(0,n.Lk)("div",WV,[e[25]||(e[25]=(0,n.Lk)("label",{for:"filterBannerName",class:"form-label"},"Nama Banner",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterBannerName",class:"form-control","onUpdate:modelValue":e[10]||(e[10]=a=>i.filters.namabanner=a),placeholder:"Filter berdasarkan nama banner"},null,512),[[l.Jo,i.filters.namabanner]])]),(0,n.Lk)("div",KV,[e[26]||(e[26]=(0,n.Lk)("label",{for:"filterVillageName",class:"form-label"},"Nama Desa",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterVillageName",class:"form-control","onUpdate:modelValue":e[11]||(e[11]=a=>i.filters.namawilayah=a),placeholder:"Filter berdasarkan nama desa"},null,512),[[l.Jo,i.filters.namawilayah]])])]),(0,n.Lk)("div",OV,[(0,n.Lk)("button",{class:"btn btn-secondary",onClick:e[12]||(e[12]=(...a)=>o.resetFilters&&o.resetFilters(...a))},e[27]||(e[27]=[(0,n.Lk)("i",{class:"fa fa-refresh me-2"},null,-1),(0,n.Lk)("span",null,"Reset Filter",-1)])),(0,n.Lk)("button",{class:"btn btn-primary",onClick:e[13]||(e[13]=(...a)=>o.applyFilters&&o.applyFilters(...a))},e[28]||(e[28]=[(0,n.Lk)("i",{class:"fa fa-search me-2"},null,-1),(0,n.Lk)("span",null,"Terapkan Filter",-1)]))])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",$V,[(0,n.Lk)("table",GV,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[e[31]||(e[31]=(0,n.Lk)("th",{scope:"col"},"No",-1)),(0,n.Lk)("th",{scope:"col",onClick:e[14]||(e[14]=a=>o.sortBy("namabanner"))},[e[29]||(e[29]=(0,n.eW)(" Nama Banner ")),"namabanner"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",JV)):"namabanner"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",qV)):((0,n.uX)(),(0,n.CE)("i",HV))]),e[32]||(e[32]=(0,n.Lk)("th",{scope:"col",style:{width:"200px"}},"Gambar",-1)),(0,n.Lk)("th",{scope:"col",onClick:e[15]||(e[15]=a=>o.sortBy("namawilayah"))},[e[30]||(e[30]=(0,n.eW)(" Nama Desa ")),"namawilayah"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",YV)):"namawilayah"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",zV)):((0,n.uX)(),(0,n.CE)("i",ZV))]),e[33]||(e[33]=(0,n.Lk)("th",{scope:"col"},"Aksi",-1))])]),(0,n.Lk)("tbody",null,[i.isLoading?((0,n.uX)(),(0,n.CE)("tr",aI,e[34]||(e[34]=[(0,n.Lk)("td",{colspan:"5",class:"text-center p-5"},[(0,n.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,n.Lk)("span",{class:"visually-hidden"},"Loading...")]),(0,n.Lk)("p",{class:"mt-2"},"Memuat data...")],-1)]))):((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.banner,(a,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:a.idbanner},[(0,n.Lk)("th",eI,(0,k.v_)((i.currentPage-1)*i.perPage+t+1),1),(0,n.Lk)("td",null,(0,k.v_)(a.namabanner||"-"),1),(0,n.Lk)("td",null,[a.gambar?((0,n.uX)(),(0,n.CE)("img",{key:0,src:a.gambar,alt:"Gambar",style:{height:"50px",width:"auto",cursor:"pointer"},onClick:e=>o.openImageModal(a.gambar)},null,8,tI)):((0,n.uX)(),(0,n.CE)("span",sI,"-"))]),(0,n.Lk)("td",null,(0,k.v_)(a.wilayah.namawilayah||"-"),1),(0,n.Lk)("td",null,[(0,n.Lk)("div",iI,[(0,n.Lk)("button",{class:"btn btn-primary btn-sm",onClick:e=>o.openEditModal(a),title:"Ubah Data"},e[35]||(e[35]=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)]),8,lI),(0,n.Lk)("button",{class:"btn btn-danger sweet-11 btn-sm",type:"button",onClick:e=>o.advancedDeleteAlert(a.idbanner),title:"Hapus Data"},e[36]||(e[36]=[(0,n.Lk)("i",{class:"fa fa-trash"},null,-1)]),8,nI)])])]))),128)),0===o.paginatedBanner.length?((0,n.uX)(),(0,n.CE)("tr",oI,e[37]||(e[37]=[(0,n.Lk)("td",{colspan:"5",class:"text-center"},"Tidak ada data yang cocok atau tersedia.",-1)]))):(0,n.Q3)("",!0)],64))])]),(0,n.Lk)("div",rI,[(0,n.Lk)("div",cI,[i.totalItems>0?((0,n.uX)(),(0,n.CE)("span",dI,[e[38]||(e[38]=(0,n.eW)(" Menampilkan ")),(0,n.Lk)("strong",null,(0,k.v_)((i.currentPage-1)*i.perPage+1),1),e[39]||(e[39]=(0,n.eW)(" - ")),(0,n.Lk)("strong",null,(0,k.v_)(Math.min(i.currentPage*i.perPage,i.totalItems)),1),e[40]||(e[40]=(0,n.eW)(" dari ")),(0,n.Lk)("strong",null,(0,k.v_)(i.totalItems),1),e[41]||(e[41]=(0,n.eW)(" data "))])):(0,n.Q3)("",!0)]),-1!==i.perPage&&o.totalPages>1?((0,n.uX)(),(0,n.CE)("nav",uI,[(0,n.Lk)("ul",mI,[(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[16]||(e[16]=a=>o.changePage(i.currentPage-1))},"Prev")],2),o.pageNumbers[0]>1?((0,n.uX)(),(0,n.CE)("li",kI,[(0,n.Lk)("button",{class:"page-link",onClick:e[17]||(e[17]=a=>o.changePage(1))},"1")])):(0,n.Q3)("",!0),o.pageNumbers[0]>2?((0,n.uX)(),(0,n.CE)("li",hI,e[42]||(e[42]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.pageNumbers,a=>((0,n.uX)(),(0,n.CE)("li",{key:a,class:(0,k.C4)(["page-item",{active:i.currentPage===a}])},[(0,n.Lk)("button",{class:"page-link",onClick:e=>o.changePage(a)},(0,k.v_)(a),9,gI)],2))),128)),o.pageNumbers.slice(-1)[0]<o.totalPages-1?((0,n.uX)(),(0,n.CE)("li",pI,e[43]||(e[43]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),o.pageNumbers.slice(-1)[0]<o.totalPages?((0,n.uX)(),(0,n.CE)("li",bI,[(0,n.Lk)("button",{class:"page-link",onClick:e[18]||(e[18]=a=>o.changePage(o.totalPages))},(0,k.v_)(o.totalPages),1)])):(0,n.Q3)("",!0),(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:i.currentPage===o.totalPages}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[19]||(e[19]=a=>o.changePage(i.currentPage+1))},"Next")],2)])])):(0,n.Q3)("",!0)])])])])}const LI=(a={})=>Na.get("",{params:{act:"banner",...a}}),yI=a=>(a.append("act","banner"),Na.post("",a)),vI=(a,e)=>a?(e.append("act","banner"),e.append("key",a),Na.post("",e)):Promise.reject(new Error("ID banner tidak tersedia.")),CI=a=>a?Na.delete("",{data:{act:"banner",key:a}}):Promise.reject(new Error("ID banner tidak tersedia.")),PI={class:"modal-header"},EI={class:"modal-title"},DI={class:"modal-body"},MI={class:"mb-3"},wI={class:"mb-3"},FI=["disabled"],XI={disabled:"",value:""},xI=["value"],TI={class:"mb-3"},SI={class:"mt-2"},BI={key:0},AI=["src"],_I={key:1},jI=["src"],VI={key:0,class:"alert alert-danger mt-3"},II={class:"modal-footer"},NI=["disabled"],UI={key:0,class:"spinner-border spinner-border-sm",role:"status"},RI={key:1};function QI(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",{class:"modal-overlay",onClick:e[8]||(e[8]=(...a)=>o.handleOverlayClick&&o.handleOverlayClick(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[7]||(e[7]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",PI,[(0,n.Lk)("h5",EI,(0,k.v_)(o.isEditMode?"Edit Data Banner":"Tambah Data Banner"),1),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",DI,[(0,n.Lk)("form",{onSubmit:e[4]||(e[4]=(0,l.D$)((...a)=>o.submitForm&&o.submitForm(...a),["prevent"]))},[(0,n.Lk)("div",MI,[e[9]||(e[9]=(0,n.Lk)("label",{class:"form-label"},"Nama Banner",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=a=>i.formData.namabanner=a),placeholder:"Masukkan nama banner",required:""},null,512),[[l.Jo,i.formData.namabanner]])]),(0,n.Lk)("div",wI,[e[10]||(e[10]=(0,n.Lk)("label",{class:"form-label"},"Nama Desa",-1)),(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":e[2]||(e[2]=a=>i.formData.iddesa=a),required:"",disabled:i.isListLoading},[(0,n.Lk)("option",XI,(0,k.v_)(i.isListLoading?"Memuat...":"Pilih Desa"),1),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.desaList,a=>((0,n.uX)(),(0,n.CE)("option",{key:a.iddesa,value:a.iddesa},(0,k.v_)(a.wilayah.namawilayah),9,xI))),128))],8,FI),[[l.u1,i.formData.iddesa]])]),(0,n.Lk)("div",TI,[e[11]||(e[11]=(0,n.Lk)("label",{class:"form-label"},"Upload Gambar",-1)),(0,n.Lk)("input",{type:"file",class:"form-control",accept:"image/*",onChange:e[3]||(e[3]=(...a)=>o.handleGambarUpload&&o.handleGambarUpload(...a))},null,32),(0,n.Lk)("div",SI,[i.gambarPreviewUrl?((0,n.uX)(),(0,n.CE)("div",BI,[(0,n.Lk)("img",{src:i.gambarPreviewUrl,alt:"Preview Gambar",class:"img-thumbnail",style:{"max-width":"150px","max-height":"150px"}},null,8,AI)])):o.isEditMode&&i.formData.gambar?((0,n.uX)(),(0,n.CE)("div",_I,[(0,n.Lk)("img",{src:i.formData.gambar,alt:"Gambar Saat Ini",class:"img-thumbnail",style:{"max-width":"150px","max-height":"150px"}},null,8,jI)])):(0,n.Q3)("",!0)])]),i.errorMessage?((0,n.uX)(),(0,n.CE)("div",VI,(0,k.v_)(i.errorMessage),1)):(0,n.Q3)("",!0)],32)]),(0,n.Lk)("div",II,[(0,n.Lk)("button",{type:"button",class:"btn btn-danger",onClick:e[5]||(e[5]=(...a)=>o.closeModal&&o.closeModal(...a))},"Batal"),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[6]||(e[6]=(...a)=>o.submitForm&&o.submitForm(...a)),disabled:i.isLoading},[i.isLoading?((0,n.uX)(),(0,n.CE)("span",UI)):((0,n.uX)(),(0,n.CE)("span",RI,"Simpan"))],8,NI)])])])])}const WI={iddesa:"",namabanner:"",gambar:null};var KI={name:"addEditBannerModal",props:{bannerToEdit:{type:Object,default:null}},data(){return{formData:{...WI},selectedGambarFile:null,gambarPreviewUrl:null,desaList:[],isListLoading:!1,isLoading:!1,errorMessage:null,toast:(0,ln.dj)()}},computed:{isEditMode(){return!!this.bannerToEdit}},watch:{bannerToEdit:{handler(a){a?(this.formData.iddesa=a.iddesa,this.formData.namabanner=a.namabanner):this.formData={...WI},this.errorMessage=null},immediate:!0,deep:!0}},created(){this.fetchDesaList()},beforeUnmount(){this.gambarPreviewUrl&&URL.revokeObjectURL(this.gambarPreviewUrl)},methods:{closeModal(){this.$emit("close")},handleOverlayClick(a){a.target===a.currentTarget&&this.closeModal()},async fetchDesaList(){this.isListLoading=!0;try{const a=await Mi({limit:-1});this.desaList=a.data?.data||a.data?.[0]?.data||[]}catch(a){this.toast.error("Gagal memuat daftar desa")}finally{this.isListLoading=!1}},handleGambarUpload(a){const e=a.target.files[0];if(this.gambarPreviewUrl&&URL.revokeObjectURL(this.gambarPreviewUrl),!e)return this.selectedGambarFile=null,void(this.gambarPreviewUrl=null);this.selectedGambarFile=e,this.gambarPreviewUrl=URL.createObjectURL(e)},async submitForm(){this.isLoading=!0,this.errorMessage=null;const a=new FormData;a.append("record[namabanner]",this.formData.namabanner),a.append("record[iddesa]",this.formData.iddesa),this.selectedGambarFile&&a.append("upload_gambar",this.selectedGambarFile);try{let e;this.isEditMode?(a.append("_method","PUT"),e=await vI(this.bannerToEdit.idbanner,a),this.toast.success("Data banner berhasil diperbarui")):(e=await yI(a),this.toast.success("Data banner berhasil ditambah")),this.$emit("save-successful",e.data.data),this.closeModal()}catch(e){this.errorMessage=e.response?.data?.failed||e.response?.data?.message||"Gagal menyimpan data. Silakan coba lagi",this.toast.error("Gagal menyimpan data banner")}finally{this.isLoading=!1}}}};const OI=(0,r.A)(KI,[["render",QI],["__scopeId","data-v-24576808"]]);var $I=OI,GI={components:{AddEditBannerModal:$I},data(){return{banner:[],isLoading:!1,sortColumn:"created_at",sortDirection:"asc",isModalVisible:!1,currentPage:1,perPage:10,totalItems:0,bannerBeingEdited:null,isFilterVisible:!1,filters:{namabanner:"",namawilayah:""},isImageModalVisible:!1,selectedImageUrl:"",imageZoomLevel:1,isDragging:!1,startX:0,startY:0,translateX:0,translateY:0}},computed:{paginatedBanner(){return this.banner},totalPages(){return this.perPage<=0?1:Math.ceil(this.totalItems/this.perPage)},pageNumbers(){const a=[],e=5;let t=Math.max(1,this.currentPage-Math.floor(e/2)),s=t+e-1;s>this.totalPages&&(s=this.totalPages,t=Math.max(1,s-e+1));for(let i=t;i<=s;i++)a.push(i);return a},imageStyle(){return{transform:`scale(${this.imageZoomLevel}) translate(${this.translateX}px, ${this.translateY}px)`,transition:this.isDragging?"none":"transform 0.2s ease-in-out",maxWidth:"100%",maxHeight:"100%",cursor:this.isDragging?"grabbing":"grab"}}},watch:{currentPage(){this.fetchBanner()},perPage(){this.currentPage=1,this.fetchBanner()}},async mounted(){this.toast=(0,ln.dj)(),await this.fetchBanner()},methods:{openAddModal(){this.bannerBeingEdited=null,this.isModalVisible=!0},openEditModal(a){this.bannerBeingEdited={...a},this.isModalVisible=!0},closeModal(){this.isModalVisible=!1,this.bannerBeingEdited=null},handleSaveSuccessful(){this.closeModal(),this.fetchBanner()},openImageModal(a){this.selectedImageUrl=a,this.isImageModalVisible=!0},closeImageModal(){this.isImageModalVisible=!1,this.resetZoom(),this.selectedImageUrl=""},zoomIn(){this.imageZoomLevel+=.1},zoomOut(){this.imageZoomLevel>.2&&(this.imageZoomLevel-=.1)},resetZoom(){this.imageZoomLevel=1,this.translateX=0,this.translateY=0},startDrag(a){a.preventDefault(),this.isDragging=!0;const e="touchstart"===a.type?a.touches[0].clientX:a.clientX,t="touchstart"===a.type?a.touches[0].clientY:a.clientY;this.startX=e-this.translateX,this.startY=t-this.translateY,window.addEventListener("mousemove",this.onDrag),window.addEventListener("mouseup",this.stopDrag),window.addEventListener("touchmove",this.onDrag,{passive:!1}),window.addEventListener("touchend",this.stopDrag)},onDrag(a){if(!this.isDragging)return;"touchmove"===a.type&&a.preventDefault();const e="touchmove"===a.type?a.touches[0].clientX:a.clientX,t="touchmove"===a.type?a.touches[0].clientY:a.clientY;this.translateX=e-this.startX,this.translateY=t-this.startY},stopDrag(){this.isDragging=!1,window.removeEventListener("mousemove",this.onDrag),window.removeEventListener("mouseup",this.stopDrag),window.removeEventListener("touchmove",this.onDrag),window.removeEventListener("touchend",this.stopDrag)},async fetchBanner(){this.isLoading=!0;try{const a={act:"banner",page:this.currentPage,limit:this.perPage,order:this.sortColumn?`${this.sortColumn} ${this.sortDirection}`:"",group:""},e=Object.entries(this.filters).filter(([,a])=>""!==a&&null!==a).map(([a,e])=>`${a}=${e}`);e.length>0?a.filter=e.join(","):a.filter="";const t=await LI(a),s=t.data?.data||t.data?.[0]?.data||[],i=t.data?.meta?.pagination||t.data?.[0]?.meta?.pagination||{};this.banner=s,this.totalItems=i.total||s.length}catch(a){console.error("Error fetching banner:",a),this.toast.error("Gagal memuat data banner",{icon:"fa fa-times"})}finally{this.isLoading=!1}},advancedDeleteAlert(a){this.$swal({title:"Hapus Data Banner",text:"Apakah Anda yakin ingin menghapus data ini?",icon:"warning",showCancelButton:!0,confirmButtonText:'<i class="fa fa-check me-2"></i> Hapus!',confirmButtonColor:"#d33",cancelButtonText:'<i class="fa fa-times me-2"></i> Batal',cancelButtonColor:"#efefef",reverseButtons:!0}).then(async e=>{if(e.isConfirmed)try{await CI(a),1===this.banner.length&&this.currentPage>1?this.currentPage--:this.fetchBanner(),this.toast.success("Data banner berhasil dihapus",{icon:"fa fa-check"})}catch(t){this.toast.error("Gagal menghapus data banner",{icon:"fa fa-times"})}})},sortBy(a){this.sortColumn===a?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=a,this.sortDirection="asc"),this.fetchBanner()},changePage(a){a>=1&&a<=this.totalPages&&(this.currentPage=a)},toggleFilterVisibility(){this.isFilterVisible=!this.isFilterVisible},applyFilters(){this.currentPage=1,this.fetchBanner()},resetFilters(){this.filters.namabanner="",this.filters.namawilayah="",this.sortColumn="created_at",this.sortDirection="asc",this.currentPage=1,this.fetchBanner()}}};const JI=(0,r.A)(GI,[["render",fI],["__scopeId","data-v-069f20dd"]]);var qI=JI,HI={components:{BannerTable:qI}};const YI=(0,r.A)(HI,[["render",XV]]);var zI=YI;const ZI={class:"container-fluid"},aN={class:"row"};function eN(a,e,t,s,i,l){const o=(0,n.g2)("Breadcrumbs"),r=(0,n.g2)("ServicesTable");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(o,{title:a.$route.meta.title},null,8,["title"]),(0,n.Lk)("div",ZI,[(0,n.Lk)("div",aN,[(0,n.bF)(r)])])])}const tN={class:"col-sm-12"},sN={class:"card"},iN={class:"card-body"},lN={class:"d-flex justify-content-end align-items-start mb-3"},nN={class:"d-flex gap-2"},oN={key:0,class:"fa fa-angle-up me-2"},rN={key:1,class:"fa fa-angle-down me-2"},cN={key:0,class:"border p-3 mb-3 rounded filter-section"},dN={class:"row g-3"},uN={class:"col-md-3"},mN={class:"col-md-3"},kN={class:"d-flex justify-content-end gap-2 mt-3"},hN={class:"table-responsive signal-table"},gN={class:"table table-hover"},pN={key:0,class:"fa fa-sort-asc"},bN={key:1,class:"fa fa-sort-desc"},fN={key:2,class:"fa fa-sort"},LN={key:0,class:"fa fa-sort-asc"},yN={key:1,class:"fa fa-sort-desc"},vN={key:2,class:"fa fa-sort"},CN={key:0},PN={scope:"row"},EN={class:"btn-group"},DN=["onClick"],MN=["onClick"],wN=["onClick"],FN={key:0},XN={class:"d-flex flex-column flex-md-row justify-content-md-between align-items-center mt-3 px-3 pb-3"},xN={class:"mt-2"},TN={key:0,class:"text-muted"},SN={key:0,class:"d-flex align-items-center flex-wrap gap-2 mt-2"},BN={class:"pagination mb-0"},AN={key:0,class:"page-item"},_N={key:1,class:"page-item disabled"},jN=["onClick"],VN={key:2,class:"page-item disabled"},IN={key:3,class:"page-item"};function NN(a,e,t,s,i,o){const r=(0,n.g2)("add-edit-service-modal"),c=(0,n.g2)("detail-service-modal");return(0,n.uX)(),(0,n.CE)("div",tN,[i.isModalVisible?((0,n.uX)(),(0,n.Wv)(r,{key:0,"service-to-edit":i.serviceBeingEdited,onClose:o.closeModal,onSaveSuccessful:o.handleSaveSuccessful},null,8,["service-to-edit","onClose","onSaveSuccessful"])):(0,n.Q3)("",!0),i.isDetailModalVisible?((0,n.uX)(),(0,n.Wv)(c,{key:1,"service-to-view":i.serviceBeingViewed,onClose:o.closeDetailModal},null,8,["service-to-view","onClose"])):(0,n.Q3)("",!0),(0,n.Lk)("div",sN,[e[32]||(e[32]=(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("h3",null,"Daftar Layanan")],-1)),(0,n.Lk)("div",iN,[(0,n.Lk)("div",lN,[(0,n.Lk)("div",nN,[(0,n.Lk)("button",{class:"btn btn-outline-light txt-dark",onClick:e[0]||(e[0]=(...a)=>o.toggleFilterVisibility&&o.toggleFilterVisibility(...a))},[i.isFilterVisible?((0,n.uX)(),(0,n.CE)("i",oN)):((0,n.uX)(),(0,n.CE)("i",rN)),(0,n.Lk)("span",null,(0,k.v_)(i.isFilterVisible?"Sembunyikan":"Tampilkan")+" Filter",1)]),(0,n.Lk)("button",{class:"btn btn-success",onClick:e[1]||(e[1]=(...a)=>o.openAddModal&&o.openAddModal(...a))},e[12]||(e[12]=[(0,n.Lk)("i",{class:"fa fa-plus me-2"},null,-1),(0,n.Lk)("span",null," Tambah Data",-1)]))])]),i.isFilterVisible?((0,n.uX)(),(0,n.CE)("div",cN,[(0,n.Lk)("div",dN,[(0,n.Lk)("div",uN,[e[13]||(e[13]=(0,n.Lk)("label",{for:"filterName",class:"form-label"},"Nama Layanan",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterName",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.filters.namalayanan=a),placeholder:"Filter berdasarkan nama layanan"},null,512),[[l.Jo,i.filters.namalayanan]])]),(0,n.Lk)("div",mN,[e[14]||(e[14]=(0,n.Lk)("label",{for:"filterVillageName",class:"form-label"},"Nama Desa",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterVillageName",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=a=>i.filters.namawilayah=a),placeholder:"Filter berdasarkan nama desa"},null,512),[[l.Jo,i.filters.namawilayah]])])]),(0,n.Lk)("div",kN,[(0,n.Lk)("button",{class:"btn btn-secondary",onClick:e[4]||(e[4]=(...a)=>o.resetFilters&&o.resetFilters(...a))},e[15]||(e[15]=[(0,n.Lk)("i",{class:"fa fa-refresh me-2"},null,-1),(0,n.Lk)("span",null,"Reset Filter",-1)])),(0,n.Lk)("button",{class:"btn btn-primary",onClick:e[5]||(e[5]=(...a)=>o.applyFilters&&o.applyFilters(...a))},e[16]||(e[16]=[(0,n.Lk)("i",{class:"fa fa-search me-2"},null,-1),(0,n.Lk)("span",null,"Terapkan Filter",-1)]))])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",hN,[(0,n.Lk)("table",gN,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[e[19]||(e[19]=(0,n.Lk)("th",{scope:"col"},"No",-1)),(0,n.Lk)("th",{scope:"col",onClick:e[6]||(e[6]=a=>o.sortBy("namalayanan"))},[e[17]||(e[17]=(0,n.eW)(" Nama Layanan ")),"namalayanan"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",pN)):"namalayanan"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",bN)):((0,n.uX)(),(0,n.CE)("i",fN))]),(0,n.Lk)("th",{scope:"col",onClick:e[7]||(e[7]=a=>o.sortBy("namawilayah"))},[e[18]||(e[18]=(0,n.eW)(" Nama Desa ")),"namawilayah"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",LN)):"namawilayah"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",yN)):((0,n.uX)(),(0,n.CE)("i",vN))]),e[20]||(e[20]=(0,n.Lk)("th",{scope:"col"},"Aksi",-1))])]),(0,n.Lk)("tbody",null,[i.isLoading?((0,n.uX)(),(0,n.CE)("tr",CN,e[21]||(e[21]=[(0,n.Lk)("td",{colspan:"7",class:"text-center p-5"},[(0,n.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,n.Lk)("span",{class:"visually-hidden"},"Loading...")]),(0,n.Lk)("p",{class:"mt-2"},"Memuat data...")],-1)]))):((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.paginatedServices,(a,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:a.idusaha},[(0,n.Lk)("th",PN,(0,k.v_)((i.currentPage-1)*i.perPage+t+1),1),(0,n.Lk)("td",null,(0,k.v_)(a.namalayanan||"-"),1),(0,n.Lk)("td",null,(0,k.v_)(a.wilayah?.namawilayah||"-"),1),(0,n.Lk)("td",null,[(0,n.Lk)("div",EN,[(0,n.Lk)("button",{class:"btn btn-info btn-sm",onClick:e=>o.openDetailModal(a),title:"Lihat Data"},e[22]||(e[22]=[(0,n.Lk)("i",{class:"fa fa-eye"},null,-1)]),8,DN),(0,n.Lk)("button",{class:"btn btn-primary btn-sm",onClick:e=>o.openEditModal(a),title:"Ubah Data"},e[23]||(e[23]=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)]),8,MN),(0,n.Lk)("button",{class:"btn btn-danger sweet-11 btn-sm",type:"button",onClick:e=>o.advancedDeleteAlert(a.idusaha),title:"Hapus Data"},e[24]||(e[24]=[(0,n.Lk)("i",{class:"fa fa-trash"},null,-1)]),8,wN)])])]))),128)),0===o.paginatedServices.length?((0,n.uX)(),(0,n.CE)("tr",FN,e[25]||(e[25]=[(0,n.Lk)("td",{colspan:"7",class:"text-center"},"Tidak ada data yang cocok atau tersedia.",-1)]))):(0,n.Q3)("",!0)],64))])]),(0,n.Lk)("div",XN,[(0,n.Lk)("div",xN,[i.totalItems>0?((0,n.uX)(),(0,n.CE)("span",TN,[e[26]||(e[26]=(0,n.eW)(" Menampilkan ")),(0,n.Lk)("strong",null,(0,k.v_)((i.currentPage-1)*i.perPage+1),1),e[27]||(e[27]=(0,n.eW)(" - ")),(0,n.Lk)("strong",null,(0,k.v_)(Math.min(i.currentPage*i.perPage,i.totalItems)),1),e[28]||(e[28]=(0,n.eW)(" dari ")),(0,n.Lk)("strong",null,(0,k.v_)(i.totalItems),1),e[29]||(e[29]=(0,n.eW)(" data "))])):(0,n.Q3)("",!0)]),-1!==i.perPage&&o.totalPages>1?((0,n.uX)(),(0,n.CE)("nav",SN,[(0,n.Lk)("ul",BN,[(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[8]||(e[8]=a=>o.changePage(i.currentPage-1))},"Prev")],2),o.pageNumbers[0]>1?((0,n.uX)(),(0,n.CE)("li",AN,[(0,n.Lk)("button",{class:"page-link",onClick:e[9]||(e[9]=a=>o.changePage(1))},"1")])):(0,n.Q3)("",!0),o.pageNumbers[0]>2?((0,n.uX)(),(0,n.CE)("li",_N,e[30]||(e[30]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.pageNumbers,a=>((0,n.uX)(),(0,n.CE)("li",{key:a,class:(0,k.C4)(["page-item",{active:i.currentPage===a}])},[(0,n.Lk)("button",{class:"page-link",onClick:e=>o.changePage(a)},(0,k.v_)(a),9,jN)],2))),128)),o.pageNumbers.slice(-1)[0]<o.totalPages-1?((0,n.uX)(),(0,n.CE)("li",VN,e[31]||(e[31]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),o.pageNumbers.slice(-1)[0]<o.totalPages?((0,n.uX)(),(0,n.CE)("li",IN,[(0,n.Lk)("button",{class:"page-link",onClick:e[10]||(e[10]=a=>o.changePage(o.totalPages))},(0,k.v_)(o.totalPages),1)])):(0,n.Q3)("",!0),(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:i.currentPage===o.totalPages}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[11]||(e[11]=a=>o.changePage(i.currentPage+1))},"Next")],2)])])):(0,n.Q3)("",!0)])])])])}const UN=(a={})=>Na.get("",{params:{act:"layanan",...a}}),RN=a=>a?Na.get("",{params:{act:"layanan",key:a}}):Promise.reject(new Error("ID layanan tidak tersedia.")),QN=a=>(a.append("act","layanan"),Na.post("",a)),WN=(a,e)=>a?(e.append("act","layanan"),e.append("key",a),Na.post("",e)):Promise.reject(new Error("ID layanan tidak tersedia.")),KN=a=>a?Na.delete("",{data:{act:"layanan",key:a}}):Promise.reject(new Error("ID layanan tidak tersedia.")),ON={class:"modal-header"},$N={class:"modal-title"},GN={class:"modal-body"},JN={class:"mb-3"},qN={class:"mb-3"},HN=["disabled"],YN={disabled:"",value:""},zN=["value"],ZN={class:"mb-3"},aU={class:"mb-3"},eU={key:0,class:"alert alert-danger mt-3"},tU={class:"modal-footer"},sU=["disabled"],iU={key:0,class:"spinner-border spinner-border-sm",role:"status"},lU={key:1};function nU(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",{class:"modal-overlay",onClick:e[9]||(e[9]=(...a)=>o.handleOverlayClick&&o.handleOverlayClick(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[8]||(e[8]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",ON,[(0,n.Lk)("h5",$N,(0,k.v_)(o.isEditMode?"Edit Data Layanan":"Tambah Data Layanan"),1),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",GN,[(0,n.Lk)("form",{onSubmit:e[5]||(e[5]=(0,l.D$)((...a)=>o.submitForm&&o.submitForm(...a),["prevent"]))},[(0,n.Lk)("div",JN,[e[10]||(e[10]=(0,n.Lk)("label",{class:"form-label"},"Nama Layanan",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=a=>i.formData.namalayanan=a),placeholder:"Masukkan nama layanan",required:""},null,512),[[l.Jo,i.formData.namalayanan]])]),(0,n.Lk)("div",qN,[e[11]||(e[11]=(0,n.Lk)("label",{class:"form-label"},"Nama Desa",-1)),(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":e[2]||(e[2]=a=>i.formData.iddesa=a),required:"",disabled:i.isDesaListLoading},[(0,n.Lk)("option",YN,(0,k.v_)(i.isDesaListLoading?"Memuat...":"Pilih Desa"),1),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.desaList,a=>((0,n.uX)(),(0,n.CE)("option",{key:a.iddesa,value:a.iddesa},(0,k.v_)(a.wilayah.namawilayah),9,zN))),128))],8,HN),[[l.u1,i.formData.iddesa]])]),(0,n.Lk)("div",ZN,[e[12]||(e[12]=(0,n.Lk)("label",{class:"form-label"},"Persyaratan",-1)),(0,n.bo)((0,n.Lk)("textarea",{class:"form-control","onUpdate:modelValue":e[3]||(e[3]=a=>i.formData.persyaratan=a),placeholder:"Masukkan persyaratan layanan",rows:"4",required:""},null,512),[[l.Jo,i.formData.persyaratan]])]),(0,n.Lk)("div",aU,[e[13]||(e[13]=(0,n.Lk)("label",{class:"form-label"},"Tahapan",-1)),(0,n.bo)((0,n.Lk)("textarea",{class:"form-control","onUpdate:modelValue":e[4]||(e[4]=a=>i.formData.tahapan=a),placeholder:"Masukkan tahapan layanan",rows:"4",required:""},null,512),[[l.Jo,i.formData.tahapan]])]),i.errorMessage?((0,n.uX)(),(0,n.CE)("div",eU,(0,k.v_)(i.errorMessage),1)):(0,n.Q3)("",!0)],32)]),(0,n.Lk)("div",tU,[(0,n.Lk)("button",{type:"button",class:"btn btn-danger",onClick:e[6]||(e[6]=(...a)=>o.closeModal&&o.closeModal(...a))},"Batal"),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[7]||(e[7]=(...a)=>o.submitForm&&o.submitForm(...a)),disabled:i.isLoading},[i.isLoading?((0,n.uX)(),(0,n.CE)("span",iU)):((0,n.uX)(),(0,n.CE)("span",lU,"Simpan"))],8,sU)])])])])}const oU={iddesa:"",namalayanan:"",persyaratan:"",tahapan:""};var rU={name:"addEditServiceModal",props:{serviceToEdit:{type:Object,default:null}},data(){return{formData:{...oU},desaList:[],isDesaListLoading:!1,isLoading:!1,errorMessage:null,toast:(0,ln.dj)()}},computed:{isEditMode(){return!!this.serviceToEdit}},watch:{serviceToEdit:{handler(a){a?(this.formData.iddesa=a.iddesa,this.formData.judul=a.judul,this.formData.konten=a.konten,this.formData.gambar=a.gambar):this.formData={...oU},this.errorMessage=null},immediate:!0,deep:!0}},created(){this.fetchDesaList()},methods:{closeModal(){this.$emit("close")},handleOverlayClick(a){a.target===a.currentTarget&&this.closeModal()},async fetchDesaList(){this.isDesaListLoading=!0;try{const a=await Mi({limit:-1});this.desaList=a.data?.data||a.data?.[0]?.data||[]}catch(a){this.toast.error("Gagal memuat daftar desa")}finally{this.isDesaListLoading=!1}},async submitForm(){this.isLoading=!0,this.errorMessage=null;const a=new FormData;a.append("record[iddesa]",this.formData.iddesa),a.append("record[namalayanan]",this.formData.namalayanan),a.append("record[persyaratan]",this.formData.persyaratan),a.append("record[tahapan]",this.formData.tahapan);try{let e;this.isEditMode?(a.append("_method","PUT"),e=await WN(this.serviceToEdit.idlayanan,a),this.toast.success("Data layanan berhasil diperbarui")):(e=await QN(a),this.toast.success("Data layanan berhasil ditambah")),this.$emit("save-successful",e.data.data),this.closeModal()}catch(e){this.errorMessage=e.response?.data?.failed||e.response?.data?.message||"Gagal menyimpan data. Silakan coba lagi",this.toast.error("Gagal menyimpan data layanan")}finally{this.isLoading=!1}}}};const cU=(0,r.A)(rU,[["render",nU],["__scopeId","data-v-69bcb21e"]]);var dU=cU;const uU={class:"modal-header"},mU={class:"modal-body"},kU={key:0,class:"text-center p-5"},hU={key:1,class:"text-center p-5 text-danger"},gU={key:0,class:"text-muted"},pU={key:2,class:"profile-container"},bU={class:"text-center mb-4"},fU={class:"profile-title mt-3"},LU={class:"profile-subtitle"},yU={class:"detail-section"},vU={class:"detail-section"},CU={class:"text-content"},PU={class:"detail-section"},EU={class:"text-content"},DU={class:"modal-footer"};function MU(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",{class:"modal-overlay",onClick:e[3]||(e[3]=(...a)=>o.closeModal&&o.closeModal(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[2]||(e[2]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",uU,[e[4]||(e[4]=(0,n.Lk)("h5",{class:"modal-title"},"Detail Layanan",-1)),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",mU,[i.isLoading?((0,n.uX)(),(0,n.CE)("div",kU,e[5]||(e[5]=[(0,n.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,n.Lk)("span",{class:"visually-hidden"},"Loading...")],-1),(0,n.Lk)("p",{class:"mt-2"},"Memuat data...",-1)]))):i.error?((0,n.uX)(),(0,n.CE)("div",hU,[e[6]||(e[6]=(0,n.Lk)("i",{class:"fa fa-exclamation-triangle fa-3x mb-3"},null,-1)),e[7]||(e[7]=(0,n.Lk)("h4",null,"Terjadi Kesalahan",-1)),(0,n.Lk)("p",null,(0,k.v_)(i.error),1),i.debugMessage?((0,n.uX)(),(0,n.CE)("small",gU,"Detail: "+(0,k.v_)(i.debugMessage),1)):(0,n.Q3)("",!0)])):i.profile?((0,n.uX)(),(0,n.CE)("div",pU,[(0,n.Lk)("div",bU,[(0,n.Lk)("h2",fU,(0,k.v_)(i.profile.namalayanan||"Judul Belum Tersedia"),1),(0,n.Lk)("p",LU,[e[8]||(e[8]=(0,n.Lk)("i",{class:"fa fa-map-marker me-2"},null,-1)),(0,n.eW)(" "+(0,k.v_)(i.profile.wilayah?.namawilayah||"Lokasi tidak diketahui"),1)])]),e[12]||(e[12]=(0,n.Lk)("hr",null,null,-1)),(0,n.Lk)("div",yU,[e[9]||(e[9]=(0,n.Lk)("h5",null,[(0,n.Lk)("i",{class:"fa fa-calendar me-2"}),(0,n.eW)("Diterbitkan pada")],-1)),(0,n.Lk)("p",null,(0,k.v_)(i.profile.created_at?new Date(i.profile.created_at).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}):"-"),1)]),e[13]||(e[13]=(0,n.Lk)("hr",null,null,-1)),(0,n.Lk)("div",vU,[e[10]||(e[10]=(0,n.Lk)("h4",null,[(0,n.Lk)("i",{class:"fa fa-file-text-o me-2"}),(0,n.eW)("Persyaratan")],-1)),(0,n.Lk)("p",CU,(0,k.v_)(i.profile.persyaratan||"Belum ada persyaratan yang ditentukan."),1)]),e[14]||(e[14]=(0,n.Lk)("hr",null,null,-1)),(0,n.Lk)("div",PU,[e[11]||(e[11]=(0,n.Lk)("h4",null,[(0,n.Lk)("i",{class:"fa fa-list-ol me-2"}),(0,n.eW)("Tahapan")],-1)),(0,n.Lk)("p",EU,(0,k.v_)(i.profile.tahapan||"Belum ada tahapan yang ditentukan."),1)])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",DU,[(0,n.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:e[1]||(e[1]=(...a)=>o.closeModal&&o.closeModal(...a))},"Tutup")])])])}var wU={name:"DetailServiceModal",props:{serviceToView:{type:Object,required:!0}},emits:["close"],data(){return{profile:null,isLoading:!1,error:null,debugMessage:""}},methods:{closeModal(){this.$emit("close")},async fetchServiceDetail(){const a=this.serviceToView?.idlayanan;if(a){this.isLoading=!0,this.error=null,this.debugMessage="";try{const e=await RN(a),t=e.data;Array.isArray(t)&&t.length>0&&t[0].data&&Array.isArray(t[0].data)&&t[0].data.length>0?this.profile=t[0].data[0]:(this.error="Data layanan tidak ditemukan atau format respons tidak sesuai.",this.debugMessage=`Struktur data yang diterima: ${JSON.stringify(t)}`)}catch(e){console.error("Gagal mengambil detail layanan:",e),this.error=e.message||"Terjadi kesalahan saat memuat data.",e.response&&(this.debugMessage=`Status: ${e.response.status} - Data: ${JSON.stringify(e.response.data)}`)}finally{this.isLoading=!1}}else this.error="ID layanan tidak valid atau tidak tersedia."}},mounted(){this.fetchServiceDetail()},watch:{serviceToView:{handler(a,e){a?.idlayanan!==e?.idlayanan&&this.fetchServiceDetail()},deep:!0}}};const FU=(0,r.A)(wU,[["render",MU],["__scopeId","data-v-492c516e"]]);var XU=FU,xU={components:{AddEditServiceModal:dU,DetailServiceModal:XU},data(){return{services:[],isLoading:!1,sortColumn:"created_at",sortDirection:"asc",isModalVisible:!1,currentPage:1,perPage:10,totalItems:0,serviceBeingEdited:null,isFilterVisible:!1,filters:{namalayanan:"",namawilayah:""},isDetailModalVisible:!1,serviceBeingViewed:null}},computed:{paginatedServices(){return this.services},totalPages(){return this.perPage<=0?1:Math.ceil(this.totalItems/this.perPage)},pageNumbers(){const a=[],e=5;let t=Math.max(1,this.currentPage-Math.floor(e/2)),s=t+e-1;s>this.totalPages&&(s=this.totalPages,t=Math.max(1,s-e+1));for(let i=t;i<=s;i++)a.push(i);return a}},watch:{currentPage(){this.fetchServices()},perPage(){this.currentPage=1,this.fetchServices()}},async mounted(){this.toast=(0,ln.dj)(),await this.fetchServices()},methods:{openAddModal(){this.serviceBeingEdited=null,this.isModalVisible=!0},openEditModal(a){this.serviceBeingEdited={...a},this.isModalVisible=!0},closeModal(){this.isModalVisible=!1,this.serviceBeingEdited=null},openDetailModal(a){this.serviceBeingViewed={...a},this.isDetailModalVisible=!0},closeDetailModal(){this.isDetailModalVisible=!1,this.serviceBeingViewed=null},handleSaveSuccessful(){this.closeModal(),this.fetchServices()},async fetchServices(){this.isLoading=!0;try{const a={act:"layanan",page:this.currentPage,limit:this.perPage,order:this.sortColumn?`${this.sortColumn} ${this.sortDirection}`:"",group:""},e=Object.entries(this.filters).filter(([,a])=>""!==a&&null!==a).map(([a,e])=>`${a}=${e}`);a.filter=e.length>0?e.join(","):"";const t=await UN(a),s=t.data?.data||t.data?.[0]?.data||[],i=t.data?.meta?.pagination||t.data?.[0]?.meta?.pagination||{};this.services=s,this.totalItems=i.total||s.length}catch(a){console.error("Error fetching services:",a),this.toast.error("Gagal memuat data layanan",{icon:"fa fa-times"})}finally{this.isLoading=!1}},advancedDeleteAlert(a){this.$swal({title:"Hapus Data Layanan",text:"Apakah Anda yakin ingin menghapus data ini?",icon:"warning",showCancelButton:!0,confirmButtonText:'<i class="fa fa-check me-2"></i> Hapus!',confirmButtonColor:"#d33",cancelButtonText:'<i class="fa fa-times me-2"></i> Batal',cancelButtonColor:"#efefef",reverseButtons:!0}).then(async e=>{if(e.isConfirmed)try{await KN(a),1===this.services.length&&this.currentPage>1?this.currentPage--:this.fetchServices(),this.toast.success("Data layanan berhasil dihapus",{icon:"fa fa-check"})}catch(t){this.toast.error("Gagal menghapus data layanan",{icon:"fa fa-times"})}})},sortBy(a){this.sortColumn===a?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=a,this.sortDirection="asc"),this.fetchServices()},changePage(a){a>=1&&a<=this.totalPages&&(this.currentPage=a)},toggleFilterVisibility(){this.isFilterVisible=!this.isFilterVisible},applyFilters(){this.currentPage=1,this.fetchServices()},resetFilters(){this.filters.judul="",this.filters.namawilayah="",this.sortColumn="created_at",this.sortDirection="asc",this.currentPage=1,this.fetchServices()}}};const TU=(0,r.A)(xU,[["render",NN],["__scopeId","data-v-450abba8"]]);var SU=TU,BU={components:{ServicesTable:SU}};const AU=(0,r.A)(BU,[["render",eN]]);var _U=AU;const jU={class:"container-fluid"},VU={class:"row"};function IU(a,e,t,s,i,l){const o=(0,n.g2)("Breadcrumbs"),r=(0,n.g2)("NoticesTable");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(o,{title:a.$route.meta.title},null,8,["title"]),(0,n.Lk)("div",jU,[(0,n.Lk)("div",VU,[(0,n.bF)(r)])])])}const NU={class:"col-sm-12"},UU={class:"card"},RU={class:"card-body"},QU={class:"d-flex justify-content-end align-items-start mb-3"},WU={class:"d-flex gap-2"},KU={key:0,class:"fa fa-angle-up me-2"},OU={key:1,class:"fa fa-angle-down me-2"},$U={key:0,class:"border p-3 mb-3 rounded filter-section"},GU={class:"row g-3"},JU={class:"col-md-3"},qU={class:"col-md-3"},HU={class:"col-md-3"},YU={class:"d-flex justify-content-end gap-2 mt-3"},zU={class:"table-responsive signal-table"},ZU={class:"table table-hover"},aR={key:0,class:"fa fa-sort-asc"},eR={key:1,class:"fa fa-sort-desc"},tR={key:2,class:"fa fa-sort"},sR={key:0,class:"fa fa-sort-asc"},iR={key:1,class:"fa fa-sort-desc"},lR={key:2,class:"fa fa-sort"},nR={key:0,class:"fa fa-sort-asc"},oR={key:1,class:"fa fa-sort-desc"},rR={key:2,class:"fa fa-sort"},cR={key:0},dR={scope:"row"},uR={class:"btn-group"},mR=["onClick"],kR=["onClick"],hR=["onClick"],gR={key:0},pR={class:"d-flex flex-column flex-md-row justify-content-md-between align-items-center mt-3 px-3 pb-3"},bR={class:"mt-2"},fR={key:0,class:"text-muted"},LR={key:0,class:"d-flex align-items-center flex-wrap gap-2 mt-2"},yR={class:"pagination mb-0"},vR={key:0,class:"page-item"},CR={key:1,class:"page-item disabled"},PR=["onClick"],ER={key:2,class:"page-item disabled"},DR={key:3,class:"page-item"};function MR(a,e,t,s,i,o){const r=(0,n.g2)("add-edit-notice-modal"),c=(0,n.g2)("detail-notice-modal");return(0,n.uX)(),(0,n.CE)("div",NU,[i.isModalVisible?((0,n.uX)(),(0,n.Wv)(r,{key:0,"notice-to-edit":i.noticeBeingEdited,onClose:o.closeModal,onSaveSuccessful:o.handleSaveSuccessful},null,8,["notice-to-edit","onClose","onSaveSuccessful"])):(0,n.Q3)("",!0),i.isDetailModalVisible?((0,n.uX)(),(0,n.Wv)(c,{key:1,"notice-to-view":i.noticeBeingViewed,onClose:o.closeDetailModal},null,8,["notice-to-view","onClose"])):(0,n.Q3)("",!0),(0,n.Lk)("div",UU,[e[36]||(e[36]=(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("h3",null,"Daftar Pengumuman")],-1)),(0,n.Lk)("div",RU,[(0,n.Lk)("div",QU,[(0,n.Lk)("div",WU,[(0,n.Lk)("button",{class:"btn btn-outline-light txt-dark",onClick:e[0]||(e[0]=(...a)=>o.toggleFilterVisibility&&o.toggleFilterVisibility(...a))},[i.isFilterVisible?((0,n.uX)(),(0,n.CE)("i",KU)):((0,n.uX)(),(0,n.CE)("i",OU)),(0,n.Lk)("span",null,(0,k.v_)(i.isFilterVisible?"Sembunyikan":"Tampilkan")+" Filter",1)]),(0,n.Lk)("button",{class:"btn btn-success",onClick:e[1]||(e[1]=(...a)=>o.openAddModal&&o.openAddModal(...a))},e[14]||(e[14]=[(0,n.Lk)("i",{class:"fa fa-plus me-2"},null,-1),(0,n.Lk)("span",null," Tambah Data",-1)]))])]),i.isFilterVisible?((0,n.uX)(),(0,n.CE)("div",$U,[(0,n.Lk)("div",GU,[(0,n.Lk)("div",JU,[e[15]||(e[15]=(0,n.Lk)("label",{for:"filterName",class:"form-label"},"Judul",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterName",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.filters.judul=a),placeholder:"Filter berdasarkan judul"},null,512),[[l.Jo,i.filters.judul]])]),(0,n.Lk)("div",qU,[e[16]||(e[16]=(0,n.Lk)("label",{for:"filterAddress",class:"form-label"},"Konten",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterAddress",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=a=>i.filters.konten=a),placeholder:"Filter berdasarkan konten"},null,512),[[l.Jo,i.filters.konten]])]),(0,n.Lk)("div",HU,[e[17]||(e[17]=(0,n.Lk)("label",{for:"filterVillageName",class:"form-label"},"Nama Desa",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterVillageName",class:"form-control","onUpdate:modelValue":e[4]||(e[4]=a=>i.filters.namawilayah=a),placeholder:"Filter berdasarkan nama desa"},null,512),[[l.Jo,i.filters.namawilayah]])])]),(0,n.Lk)("div",YU,[(0,n.Lk)("button",{class:"btn btn-secondary",onClick:e[5]||(e[5]=(...a)=>o.resetFilters&&o.resetFilters(...a))},e[18]||(e[18]=[(0,n.Lk)("i",{class:"fa fa-refresh me-2"},null,-1),(0,n.Lk)("span",null,"Reset Filter",-1)])),(0,n.Lk)("button",{class:"btn btn-primary",onClick:e[6]||(e[6]=(...a)=>o.applyFilters&&o.applyFilters(...a))},e[19]||(e[19]=[(0,n.Lk)("i",{class:"fa fa-search me-2"},null,-1),(0,n.Lk)("span",null,"Terapkan Filter",-1)]))])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",zU,[(0,n.Lk)("table",ZU,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[e[23]||(e[23]=(0,n.Lk)("th",{scope:"col"},"No",-1)),(0,n.Lk)("th",{scope:"col",onClick:e[7]||(e[7]=a=>o.sortBy("judul"))},[e[20]||(e[20]=(0,n.eW)(" Judul ")),"judul"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",aR)):"judul"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",eR)):((0,n.uX)(),(0,n.CE)("i",tR))]),(0,n.Lk)("th",{scope:"col",onClick:e[8]||(e[8]=a=>o.sortBy("konten"))},[e[21]||(e[21]=(0,n.eW)(" Konten ")),"konten"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",sR)):"konten"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",iR)):((0,n.uX)(),(0,n.CE)("i",lR))]),(0,n.Lk)("th",{scope:"col",onClick:e[9]||(e[9]=a=>o.sortBy("namawilayah"))},[e[22]||(e[22]=(0,n.eW)(" Nama Desa ")),"namawilayah"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",nR)):"namawilayah"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",oR)):((0,n.uX)(),(0,n.CE)("i",rR))]),e[24]||(e[24]=(0,n.Lk)("th",{scope:"col"},"Aksi",-1))])]),(0,n.Lk)("tbody",null,[i.isLoading?((0,n.uX)(),(0,n.CE)("tr",cR,e[25]||(e[25]=[(0,n.Lk)("td",{colspan:"7",class:"text-center p-5"},[(0,n.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,n.Lk)("span",{class:"visually-hidden"},"Loading...")]),(0,n.Lk)("p",{class:"mt-2"},"Memuat data...")],-1)]))):((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.paginatedNotices,(a,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:a.idusaha},[(0,n.Lk)("th",dR,(0,k.v_)((i.currentPage-1)*i.perPage+t+1),1),(0,n.Lk)("td",null,(0,k.v_)(a.judul||"-"),1),(0,n.Lk)("td",null,(0,k.v_)(a.konten||"-"),1),(0,n.Lk)("td",null,(0,k.v_)(a.wilayah?.namawilayah||"-"),1),(0,n.Lk)("td",null,[(0,n.Lk)("div",uR,[(0,n.Lk)("button",{class:"btn btn-info btn-sm",onClick:e=>o.openDetailModal(a)},e[26]||(e[26]=[(0,n.Lk)("i",{class:"fa fa-eye"},null,-1)]),8,mR),(0,n.Lk)("button",{class:"btn btn-primary btn-sm",onClick:e=>o.openEditModal(a),title:"Ubah Data"},e[27]||(e[27]=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)]),8,kR),(0,n.Lk)("button",{class:"btn btn-danger sweet-11 btn-sm",type:"button",onClick:e=>o.advancedDeleteAlert(a.idusaha),title:"Hapus Data"},e[28]||(e[28]=[(0,n.Lk)("i",{class:"fa fa-trash"},null,-1)]),8,hR)])])]))),128)),0===o.paginatedNotices.length?((0,n.uX)(),(0,n.CE)("tr",gR,e[29]||(e[29]=[(0,n.Lk)("td",{colspan:"7",class:"text-center"},"Tidak ada data yang cocok atau tersedia.",-1)]))):(0,n.Q3)("",!0)],64))])]),(0,n.Lk)("div",pR,[(0,n.Lk)("div",bR,[i.totalItems>0?((0,n.uX)(),(0,n.CE)("span",fR,[e[30]||(e[30]=(0,n.eW)(" Menampilkan ")),(0,n.Lk)("strong",null,(0,k.v_)((i.currentPage-1)*i.perPage+1),1),e[31]||(e[31]=(0,n.eW)(" - ")),(0,n.Lk)("strong",null,(0,k.v_)(Math.min(i.currentPage*i.perPage,i.totalItems)),1),e[32]||(e[32]=(0,n.eW)(" dari ")),(0,n.Lk)("strong",null,(0,k.v_)(i.totalItems),1),e[33]||(e[33]=(0,n.eW)(" data "))])):(0,n.Q3)("",!0)]),-1!==i.perPage&&o.totalPages>1?((0,n.uX)(),(0,n.CE)("nav",LR,[(0,n.Lk)("ul",yR,[(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[10]||(e[10]=a=>o.changePage(i.currentPage-1))},"Prev")],2),o.pageNumbers[0]>1?((0,n.uX)(),(0,n.CE)("li",vR,[(0,n.Lk)("button",{class:"page-link",onClick:e[11]||(e[11]=a=>o.changePage(1))},"1")])):(0,n.Q3)("",!0),o.pageNumbers[0]>2?((0,n.uX)(),(0,n.CE)("li",CR,e[34]||(e[34]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.pageNumbers,a=>((0,n.uX)(),(0,n.CE)("li",{key:a,class:(0,k.C4)(["page-item",{active:i.currentPage===a}])},[(0,n.Lk)("button",{class:"page-link",onClick:e=>o.changePage(a)},(0,k.v_)(a),9,PR)],2))),128)),o.pageNumbers.slice(-1)[0]<o.totalPages-1?((0,n.uX)(),(0,n.CE)("li",ER,e[35]||(e[35]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),o.pageNumbers.slice(-1)[0]<o.totalPages?((0,n.uX)(),(0,n.CE)("li",DR,[(0,n.Lk)("button",{class:"page-link",onClick:e[12]||(e[12]=a=>o.changePage(o.totalPages))},(0,k.v_)(o.totalPages),1)])):(0,n.Q3)("",!0),(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:i.currentPage===o.totalPages}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[13]||(e[13]=a=>o.changePage(i.currentPage+1))},"Next")],2)])])):(0,n.Q3)("",!0)])])])])}const wR=(a={})=>Na.get("",{params:{act:"pengumuman",...a}}),FR=a=>a?Na.get("",{params:{act:"pengumuman",key:a}}):Promise.reject(new Error("ID pengumuman tidak tersedia.")),XR=a=>(a.append("act","pengumuman"),Na.post("",a)),xR=(a,e)=>a?(e.append("act","pengumuman"),e.append("key",a),Na.post("",e)):Promise.reject(new Error("ID pengumuman tidak tersedia.")),TR=a=>a?Na.delete("",{data:{act:"pengumuman",key:a}}):Promise.reject(new Error("ID pengumuman tidak tersedia.")),SR={class:"modal-header"},BR={class:"modal-title"},AR={class:"modal-body"},_R={class:"mb-3"},jR=["disabled"],VR={disabled:"",value:""},IR=["value"],NR={class:"mb-3"},UR={class:"mb-3"},RR={class:"mb-3"},QR={class:"mt-2"},WR={key:0},KR=["src"],OR={key:1},$R=["src"],GR={key:0,class:"alert alert-danger mt-3"},JR={class:"modal-footer"},qR=["disabled"],HR={key:0,class:"spinner-border spinner-border-sm",role:"status"},YR={key:1};function zR(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",{class:"modal-overlay",onClick:e[9]||(e[9]=(...a)=>o.handleOverlayClick&&o.handleOverlayClick(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[8]||(e[8]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",SR,[(0,n.Lk)("h5",BR,(0,k.v_)(o.isEditMode?"Edit Data Pengumuman":"Tambah Data Pengumuman"),1),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",AR,[(0,n.Lk)("form",{onSubmit:e[5]||(e[5]=(0,l.D$)((...a)=>o.submitForm&&o.submitForm(...a),["prevent"]))},[(0,n.Lk)("div",_R,[e[10]||(e[10]=(0,n.Lk)("label",{class:"form-label"},"Nama Desa",-1)),(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":e[1]||(e[1]=a=>i.formData.iddesa=a),required:"",disabled:i.isDesaListLoading},[(0,n.Lk)("option",VR,(0,k.v_)(i.isDesaListLoading?"Memuat...":"Pilih Desa"),1),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.desaList,a=>((0,n.uX)(),(0,n.CE)("option",{key:a.iddesa,value:a.iddesa},(0,k.v_)(a.wilayah.namawilayah),9,IR))),128))],8,jR),[[l.u1,i.formData.iddesa]])]),(0,n.Lk)("div",NR,[e[11]||(e[11]=(0,n.Lk)("label",{class:"form-label"},"Judul",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.formData.judul=a),placeholder:"Masukkan judul",required:""},null,512),[[l.Jo,i.formData.judul]])]),(0,n.Lk)("div",UR,[e[12]||(e[12]=(0,n.Lk)("label",{class:"form-label"},"Konten",-1)),(0,n.bo)((0,n.Lk)("textarea",{class:"form-control","onUpdate:modelValue":e[3]||(e[3]=a=>i.formData.konten=a),placeholder:"Masukkan isi konten",rows:"3",required:""},null,512),[[l.Jo,i.formData.konten]])]),(0,n.Lk)("div",RR,[e[13]||(e[13]=(0,n.Lk)("label",{class:"form-label"},"Upload Gambar",-1)),(0,n.Lk)("input",{type:"file",class:"form-control",accept:"image/*",onChange:e[4]||(e[4]=(...a)=>o.handleGambarUpload&&o.handleGambarUpload(...a))},null,32),(0,n.Lk)("div",QR,[i.gambarPreviewUrl?((0,n.uX)(),(0,n.CE)("div",WR,[(0,n.Lk)("img",{src:i.gambarPreviewUrl,alt:"Preview Logo",class:"img-thumbnail",style:{"max-width":"150px","max-height":"150px"}},null,8,KR)])):o.isEditMode&&i.formData.gambar?((0,n.uX)(),(0,n.CE)("div",OR,[(0,n.Lk)("img",{src:i.formData.gambar,alt:"Logo Saat Ini",class:"img-thumbnail",style:{"max-width":"150px","max-height":"150px"}},null,8,$R)])):(0,n.Q3)("",!0)])]),i.errorMessage?((0,n.uX)(),(0,n.CE)("div",GR,(0,k.v_)(i.errorMessage),1)):(0,n.Q3)("",!0)],32)]),(0,n.Lk)("div",JR,[(0,n.Lk)("button",{type:"button",class:"btn btn-danger",onClick:e[6]||(e[6]=(...a)=>o.closeModal&&o.closeModal(...a))},"Batal"),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[7]||(e[7]=(...a)=>o.submitForm&&o.submitForm(...a)),disabled:i.isLoading},[i.isLoading?((0,n.uX)(),(0,n.CE)("span",HR)):((0,n.uX)(),(0,n.CE)("span",YR,"Simpan"))],8,qR)])])])])}const ZR={iddesa:"",judul:"",konten:"",gambar:null};var aQ={name:"addEditNoticeModal",props:{noticeToEdit:{type:Object,default:null}},data(){return{formData:{...ZR},selectedGambarFile:null,gambarPreviewUrl:null,desaList:[],isDesaListLoading:!1,isLoading:!1,errorMessage:null,toast:(0,ln.dj)()}},computed:{isEditMode(){return!!this.noticeToEdit}},watch:{noticeToEdit:{handler(a){a?(this.formData.iddesa=a.iddesa,this.formData.judul=a.judul,this.formData.konten=a.konten,this.formData.gambar=a.gambar):this.formData={...ZR},this.selectedGambarFile=null,this.gambarPreviewUrl=null,this.errorMessage=null},immediate:!0,deep:!0}},created(){this.fetchDesaList()},beforeUnmount(){this.gambarPreviewUrl&&URL.revokeObjectURL(this.gambarPreviewUrl)},methods:{closeModal(){this.$emit("close")},handleOverlayClick(a){a.target===a.currentTarget&&this.closeModal()},async fetchDesaList(){this.isDesaListLoading=!0;try{const a=await Mi({limit:-1});this.desaList=a.data?.data||a.data?.[0]?.data||[]}catch(a){this.toast.error("Gagal memuat daftar desa.")}finally{this.isDesaListLoading=!1}},handleGambarUpload(a){const e=a.target.files[0];if(this.gambarPreviewUrl&&URL.revokeObjectURL(this.gambarPreviewUrl),!e)return this.selectedGambarFile=null,void(this.gambarPreviewUrl=null);this.selectedGambarFile=e,this.gambarPreviewUrl=URL.createObjectURL(e)},async submitForm(){this.isLoading=!0,this.errorMessage=null;const a=new FormData;a.append("record[iddesa]",this.formData.iddesa),a.append("record[judul]",this.formData.judul),a.append("record[konten]",this.formData.konten),this.selectedGambarFile&&a.append("upload_gambar",this.selectedGambarFile);try{let e;this.isEditMode?(a.append("_method","PUT"),e=await xR(this.noticeToEdit.idpengumuman,a),this.toast.success("Data pengumuman berhasil diperbarui")):(e=await XR(a),this.toast.success("Data pengumuman berhasil ditambah")),this.$emit("save-successful",e.data.data),this.closeModal()}catch(e){this.errorMessage=e.response?.data?.failed||e.response?.data?.message||"Gagal menyimpan data. Silakan coba lagi",this.toast.error("Gagal menyimpan data pengumuman")}finally{this.isLoading=!1}}}};const eQ=(0,r.A)(aQ,[["render",zR],["__scopeId","data-v-428c2368"]]);var tQ=eQ;const sQ={class:"modal-header"},iQ={class:"modal-body"},lQ={key:0,class:"text-center p-5"},nQ={key:1,class:"text-center p-5 text-danger"},oQ={key:0,class:"text-muted"},rQ={key:2,class:"profile-container"},cQ={class:"text-center mb-4"},dQ=["src"],uQ={key:1,src:"https://placehold.co/400x200/EBF4FF/7F9CF5?text=Gambar",alt:"Gambar Default",class:"featured-image"},mQ={class:"profile-title mt-3"},kQ={class:"profile-subtitle"},hQ={class:"detail-section"},gQ={class:"detail-section"},pQ={class:"text-content"},bQ={class:"modal-footer"};function fQ(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",{class:"modal-overlay",onClick:e[3]||(e[3]=(...a)=>o.closeModal&&o.closeModal(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[2]||(e[2]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",sQ,[e[4]||(e[4]=(0,n.Lk)("h5",{class:"modal-title"},"Detail Pengumuman",-1)),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",iQ,[i.isLoading?((0,n.uX)(),(0,n.CE)("div",lQ,e[5]||(e[5]=[(0,n.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,n.Lk)("span",{class:"visually-hidden"},"Loading...")],-1),(0,n.Lk)("p",{class:"mt-2"},"Memuat data...",-1)]))):i.error?((0,n.uX)(),(0,n.CE)("div",nQ,[e[6]||(e[6]=(0,n.Lk)("i",{class:"fa fa-exclamation-triangle fa-3x mb-3"},null,-1)),e[7]||(e[7]=(0,n.Lk)("h4",null,"Terjadi Kesalahan",-1)),(0,n.Lk)("p",null,(0,k.v_)(i.error),1),i.debugMessage?((0,n.uX)(),(0,n.CE)("small",oQ,"Detail: "+(0,k.v_)(i.debugMessage),1)):(0,n.Q3)("",!0)])):i.profile?((0,n.uX)(),(0,n.CE)("div",rQ,[(0,n.Lk)("div",cQ,[i.profile.gambar?((0,n.uX)(),(0,n.CE)("img",{key:0,src:i.profile.gambar,alt:"Gambar Pengumuman",class:"featured-image",onerror:"this.src='https://placehold.co/400x200/EBF4FF/7F9CF5?text=Gambar'"},null,8,dQ)):((0,n.uX)(),(0,n.CE)("img",uQ)),(0,n.Lk)("h2",mQ,(0,k.v_)(i.profile.judul||"Judul Belum Tersedia"),1),(0,n.Lk)("p",kQ,[e[8]||(e[8]=(0,n.Lk)("i",{class:"fa fa-map-marker me-2"},null,-1)),(0,n.eW)(" "+(0,k.v_)(i.profile.wilayah?.namawilayah||"Lokasi tidak diketahui"),1)])]),e[11]||(e[11]=(0,n.Lk)("hr",null,null,-1)),(0,n.Lk)("div",hQ,[e[9]||(e[9]=(0,n.Lk)("h5",null,[(0,n.Lk)("i",{class:"fa fa-calendar me-2"}),(0,n.eW)("Diterbitkan pada")],-1)),(0,n.Lk)("p",null,(0,k.v_)(i.profile.created_at?new Date(i.profile.created_at).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"}):"-"),1)]),e[12]||(e[12]=(0,n.Lk)("hr",null,null,-1)),(0,n.Lk)("div",gQ,[e[10]||(e[10]=(0,n.Lk)("h4",null,"Isi Pengumuman",-1)),(0,n.Lk)("p",pQ,(0,k.v_)(i.profile.konten||"Tidak ada konten untuk ditampilkan."),1)])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",bQ,[(0,n.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:e[1]||(e[1]=(...a)=>o.closeModal&&o.closeModal(...a))},"Tutup")])])])}var LQ={name:"DetailNoticeModal",props:{noticeToView:{type:Object,required:!0}},emits:["close"],data(){return{profile:null,isLoading:!1,error:null,debugMessage:""}},methods:{closeModal(){this.$emit("close")},async fetchNoticeDetail(){const a=this.noticeToView?.idpengumuman;if(a){this.isLoading=!0,this.error=null,this.debugMessage="";try{const e=await FR(a),t=e.data;Array.isArray(t)&&t.length>0&&t[0]&&Array.isArray(t[0].data)&&t[0].data.length>0?this.profile=t[0].data[0]:(this.error="Data pengumuman tidak ditemukan atau format respons tidak sesuai.",this.debugMessage=`Struktur data yang diterima: ${JSON.stringify(t)}`)}catch(e){console.error("Gagal mengambil detail pengumuman:",e),this.error=e.message||"Terjadi kesalahan saat memuat data.",e.response&&(this.debugMessage=`Status: ${e.response.status} - Data: ${JSON.stringify(e.response.data)}`)}finally{this.isLoading=!1}}else this.error="ID pengumuman tidak valid atau tidak tersedia."}},mounted(){this.fetchNoticeDetail()},watch:{noticeToView:{handler(a,e){a?.idpengumuman!==e?.idpengumuman&&this.fetchNoticeDetail()},deep:!0}}};const yQ=(0,r.A)(LQ,[["render",fQ],["__scopeId","data-v-fab7f0b8"]]);var vQ=yQ,CQ={components:{AddEditNoticeModal:tQ,DetailNoticeModal:vQ},data(){return{notices:[],isLoading:!1,sortColumn:"created_at",sortDirection:"asc",isModalVisible:!1,currentPage:1,perPage:10,totalItems:0,noticeBeingEdited:null,isFilterVisible:!1,filters:{judul:"",konten:"",namawilayah:""},isDetailModalVisible:!1,noticeBeingViewed:null}},computed:{paginatedNotices(){return this.notices},totalPages(){return this.perPage<=0?1:Math.ceil(this.totalItems/this.perPage)},pageNumbers(){const a=[],e=5;let t=Math.max(1,this.currentPage-Math.floor(e/2)),s=t+e-1;s>this.totalPages&&(s=this.totalPages,t=Math.max(1,s-e+1));for(let i=t;i<=s;i++)a.push(i);return a}},watch:{currentPage(){this.fetchNotices()},perPage(){this.currentPage=1,this.fetchNotices()}},async mounted(){this.toast=(0,ln.dj)(),await this.fetchNotices()},methods:{openAddModal(){this.noticeBeingEdited=null,this.isModalVisible=!0},openEditModal(a){this.noticeBeingEdited={...a},this.isModalVisible=!0},closeModal(){this.isModalVisible=!1,this.noticeBeingEdited=null},openDetailModal(a){this.noticeBeingViewed={...a},this.isDetailModalVisible=!0},closeDetailModal(){this.isDetailModalVisible=!1,this.noticeBeingViewed=null},handleSaveSuccessful(){this.closeModal(),this.fetchNotices()},async fetchNotices(){this.isLoading=!0;try{const a={act:"pengumuman",page:this.currentPage,limit:this.perPage,order:this.sortColumn?`${this.sortColumn} ${this.sortDirection}`:"",group:""},e=Object.entries(this.filters).filter(([,a])=>""!==a&&null!==a).map(([a,e])=>`${a}=${e}`);a.filter=e.length>0?e.join(","):"";const t=await wR(a),s=t.data?.data||t.data?.[0]?.data||[],i=t.data?.meta?.pagination||t.data?.[0]?.meta?.pagination||{};this.notices=s,this.totalItems=i.total||s.length}catch(a){console.error("Error fetching notices:",a),this.toast.error("Gagal memuat data pengumuman",{icon:"fa fa-times"})}finally{this.isLoading=!1}},advancedDeleteAlert(a){this.$swal({title:"Hapus Data Pengumuman",text:"Apakah Anda yakin ingin menghapus data ini?",icon:"warning",showCancelButton:!0,confirmButtonText:'<i class="fa fa-check me-2"></i> Hapus!',confirmButtonColor:"#d33",cancelButtonText:'<i class="fa fa-times me-2"></i> Batal',cancelButtonColor:"#efefef",reverseButtons:!0}).then(async e=>{if(e.isConfirmed)try{await TR(a),1===this.notices.length&&this.currentPage>1?this.currentPage--:this.fetchNotices(),this.toast.success("Data pengumuman berhasil dihapus",{icon:"fa fa-check"})}catch(t){this.toast.error("Gagal menghapus data pengumuman",{icon:"fa fa-times"})}})},sortBy(a){this.sortColumn===a?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=a,this.sortDirection="asc"),this.fetchNotices()},changePage(a){a>=1&&a<=this.totalPages&&(this.currentPage=a)},toggleFilterVisibility(){this.isFilterVisible=!this.isFilterVisible},applyFilters(){this.currentPage=1,this.fetchNotices()},resetFilters(){this.filters.judul="",this.filters.konten="",this.filters.namawilayah="",this.sortColumn="created_at",this.sortDirection="asc",this.currentPage=1,this.fetchNotices()}}};const PQ=(0,r.A)(CQ,[["render",MR],["__scopeId","data-v-6ad2540e"]]);var EQ=PQ,DQ={components:{NoticesTable:EQ}};const MQ=(0,r.A)(DQ,[["render",IU]]);var wQ=MQ;const FQ={class:"container-fluid"},XQ={class:"row"};function xQ(a,e,t,s,i,l){const o=(0,n.g2)("Breadcrumbs"),r=(0,n.g2)("LinksTable");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(o,{main:"Link Terkait",title:a.$route.meta.title},null,8,["title"]),(0,n.Lk)("div",FQ,[(0,n.Lk)("div",XQ,[(0,n.bF)(r)])])])}const TQ={class:"col-sm-12"},SQ={class:"card"},BQ={class:"card-body"},AQ={class:"d-flex justify-content-end align-items-start mb-3"},_Q={class:"d-flex gap-2"},jQ={key:0,class:"fa fa-angle-up me-2"},VQ={key:1,class:"fa fa-angle-down me-2"},IQ={key:0,class:"border p-3 mb-3 rounded filter-section"},NQ={class:"row g-3"},UQ={class:"col-md-3"},RQ={class:"col-md-3"},QQ={class:"d-flex justify-content-end gap-2 mt-3"},WQ={class:"table-responsive signal-table"},KQ={class:"table table-hover"},OQ={key:0,class:"fa fa-sort-asc"},$Q={key:1,class:"fa fa-sort-desc"},GQ={key:2,class:"fa fa-sort"},JQ={key:0,class:"fa fa-sort-asc"},qQ={key:1,class:"fa fa-sort-desc"},HQ={key:2,class:"fa fa-sort"},YQ={key:0},zQ={scope:"row"},ZQ=["src"],aW={key:1,class:"text-muted"},eW={class:"btn-group"},tW=["onClick"],sW=["onClick"],iW={key:0},lW={class:"d-flex flex-column flex-md-row justify-content-md-between align-items-center mt-3 px-3 pb-3"},nW={class:"mt-2"},oW={key:0,class:"text-muted"},rW={key:0,class:"d-flex align-items-center flex-wrap gap-2 mt-2"},cW={class:"pagination mb-0"},dW={key:0,class:"page-item"},uW={key:1,class:"page-item disabled"},mW=["onClick"],kW={key:2,class:"page-item disabled"},hW={key:3,class:"page-item"};function gW(a,e,t,s,i,o){const r=(0,n.g2)("add-edit-link-modal");return(0,n.uX)(),(0,n.CE)("div",TQ,[i.isModalVisible?((0,n.uX)(),(0,n.Wv)(r,{key:0,"link-to-edit":i.linkBeingEdited,onClose:o.closeModal,onSaveSuccessful:o.handleSaveSuccessful},null,8,["link-to-edit","onClose","onSaveSuccessful"])):(0,n.Q3)("",!0),(0,n.Lk)("div",SQ,[e[33]||(e[33]=(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("h3",null,"Daftar Link Terkait")],-1)),(0,n.Lk)("div",BQ,[(0,n.Lk)("div",AQ,[(0,n.Lk)("div",_Q,[(0,n.Lk)("button",{class:"btn btn-outline-light txt-dark",onClick:e[0]||(e[0]=(...a)=>o.toggleFilterVisibility&&o.toggleFilterVisibility(...a))},[i.isFilterVisible?((0,n.uX)(),(0,n.CE)("i",jQ)):((0,n.uX)(),(0,n.CE)("i",VQ)),(0,n.Lk)("span",null,(0,k.v_)(i.isFilterVisible?"Sembunyikan":"Tampilkan")+" Filter",1)]),(0,n.Lk)("button",{class:"btn btn-success",onClick:e[1]||(e[1]=(...a)=>o.openAddModal&&o.openAddModal(...a))},e[12]||(e[12]=[(0,n.Lk)("i",{class:"fa fa-plus me-2"},null,-1),(0,n.Lk)("span",null," Tambah Data",-1)]))])]),i.isFilterVisible?((0,n.uX)(),(0,n.CE)("div",IQ,[(0,n.Lk)("div",NQ,[(0,n.Lk)("div",UQ,[e[13]||(e[13]=(0,n.Lk)("label",{for:"filterNameLink",class:"form-label"},"Nama Link",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterNameLink",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.filters.nama=a),placeholder:"Filter berdasarkan nama"},null,512),[[l.Jo,i.filters.nama]])]),(0,n.Lk)("div",RQ,[e[14]||(e[14]=(0,n.Lk)("label",{for:"filterVillageName",class:"form-label"},"Nama Desa",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterVillageName",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=a=>i.filters.namawilayah=a),placeholder:"Filter berdasarkan nama desa"},null,512),[[l.Jo,i.filters.namawilayah]])])]),(0,n.Lk)("div",QQ,[(0,n.Lk)("button",{class:"btn btn-secondary",onClick:e[4]||(e[4]=(...a)=>o.resetFilters&&o.resetFilters(...a))},e[15]||(e[15]=[(0,n.Lk)("i",{class:"fa fa-refresh me-2"},null,-1),(0,n.Lk)("span",null,"Reset Filter",-1)])),(0,n.Lk)("button",{class:"btn btn-primary",onClick:e[5]||(e[5]=(...a)=>o.applyFilters&&o.applyFilters(...a))},e[16]||(e[16]=[(0,n.Lk)("i",{class:"fa fa-search me-2"},null,-1),(0,n.Lk)("span",null,"Terapkan Filter",-1)]))])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",WQ,[(0,n.Lk)("table",KQ,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[e[19]||(e[19]=(0,n.Lk)("th",{scope:"col"},"No",-1)),e[20]||(e[20]=(0,n.Lk)("th",{scope:"col",style:{width:"100px"}},"Logo",-1)),(0,n.Lk)("th",{scope:"col",onClick:e[6]||(e[6]=a=>o.sortBy("nama"))},[e[17]||(e[17]=(0,n.eW)(" Nama ")),"nama"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",OQ)):"nama"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",$Q)):((0,n.uX)(),(0,n.CE)("i",GQ))]),e[21]||(e[21]=(0,n.Lk)("th",{scope:"col"},"URL",-1)),(0,n.Lk)("th",{scope:"col",onClick:e[7]||(e[7]=a=>o.sortBy("namawilayah"))},[e[18]||(e[18]=(0,n.eW)(" Nama Desa ")),"namawilayah"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",JQ)):"namawilayah"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",qQ)):((0,n.uX)(),(0,n.CE)("i",HQ))]),e[22]||(e[22]=(0,n.Lk)("th",{scope:"col"},"Aksi",-1))])]),(0,n.Lk)("tbody",null,[i.isLoading?((0,n.uX)(),(0,n.CE)("tr",YQ,e[23]||(e[23]=[(0,n.Lk)("td",{colspan:"6",class:"text-center p-5"},[(0,n.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,n.Lk)("span",{class:"visually-hidden"},"Loading...")]),(0,n.Lk)("p",{class:"mt-2"},"Memuat data...")],-1)]))):((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.paginatedLinks,(a,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:a.idlink},[(0,n.Lk)("th",zQ,(0,k.v_)((i.currentPage-1)*i.perPage+t+1),1),(0,n.Lk)("td",null,[a.logolink?((0,n.uX)(),(0,n.CE)("img",{key:0,src:a.logolink,alt:"Logo",style:{height:"50px",width:"auto"}},null,8,ZQ)):((0,n.uX)(),(0,n.CE)("span",aW,"-"))]),(0,n.Lk)("td",null,(0,k.v_)(a.nama||"-"),1),(0,n.Lk)("td",null,(0,k.v_)(a.url||"-"),1),(0,n.Lk)("td",null,(0,k.v_)(a.wilayah?.namawilayah||"-"),1),(0,n.Lk)("td",null,[(0,n.Lk)("div",eW,[(0,n.Lk)("button",{class:"btn btn-primary btn-sm",onClick:e=>o.openEditModal(a),title:"Ubah Data"},e[24]||(e[24]=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)]),8,tW),(0,n.Lk)("button",{class:"btn btn-danger sweet-11 btn-sm",type:"button",onClick:e=>o.advancedDeleteAlert(a.idlink),title:"Hapus Data"},e[25]||(e[25]=[(0,n.Lk)("i",{class:"fa fa-trash"},null,-1)]),8,sW)])])]))),128)),0===o.paginatedLinks.length?((0,n.uX)(),(0,n.CE)("tr",iW,e[26]||(e[26]=[(0,n.Lk)("td",{colspan:"6",class:"text-center"},"Tidak ada data yang cocok atau tersedia.",-1)]))):(0,n.Q3)("",!0)],64))])]),(0,n.Lk)("div",lW,[(0,n.Lk)("div",nW,[i.totalItems>0?((0,n.uX)(),(0,n.CE)("span",oW,[e[27]||(e[27]=(0,n.eW)(" Menampilkan ")),(0,n.Lk)("strong",null,(0,k.v_)((i.currentPage-1)*i.perPage+1),1),e[28]||(e[28]=(0,n.eW)(" - ")),(0,n.Lk)("strong",null,(0,k.v_)(Math.min(i.currentPage*i.perPage,i.totalItems)),1),e[29]||(e[29]=(0,n.eW)(" dari ")),(0,n.Lk)("strong",null,(0,k.v_)(i.totalItems),1),e[30]||(e[30]=(0,n.eW)(" data "))])):(0,n.Q3)("",!0)]),-1!==i.perPage&&o.totalPages>1?((0,n.uX)(),(0,n.CE)("nav",rW,[(0,n.Lk)("ul",cW,[(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[8]||(e[8]=a=>o.changePage(i.currentPage-1))},"Prev")],2),o.pageNumbers[0]>1?((0,n.uX)(),(0,n.CE)("li",dW,[(0,n.Lk)("button",{class:"page-link",onClick:e[9]||(e[9]=a=>o.changePage(1))},"1")])):(0,n.Q3)("",!0),o.pageNumbers[0]>2?((0,n.uX)(),(0,n.CE)("li",uW,e[31]||(e[31]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.pageNumbers,a=>((0,n.uX)(),(0,n.CE)("li",{key:a,class:(0,k.C4)(["page-item",{active:i.currentPage===a}])},[(0,n.Lk)("button",{class:"page-link",onClick:e=>o.changePage(a)},(0,k.v_)(a),9,mW)],2))),128)),o.pageNumbers.slice(-1)[0]<o.totalPages-1?((0,n.uX)(),(0,n.CE)("li",kW,e[32]||(e[32]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),o.pageNumbers.slice(-1)[0]<o.totalPages?((0,n.uX)(),(0,n.CE)("li",hW,[(0,n.Lk)("button",{class:"page-link",onClick:e[10]||(e[10]=a=>o.changePage(o.totalPages))},(0,k.v_)(o.totalPages),1)])):(0,n.Q3)("",!0),(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:i.currentPage===o.totalPages}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[11]||(e[11]=a=>o.changePage(i.currentPage+1))},"Next")],2)])])):(0,n.Q3)("",!0)])])])])}const pW=(a={})=>Na.get("",{params:{act:"link-terkait",...a}}),bW=a=>(a.append("act","link-terkait"),Na.post("",a)),fW=(a,e)=>a?(e.append("act","link-terkait"),e.append("key",a),Na.post("",e)):Promise.reject(new Error("ID link terkait tidak tersedia.")),LW=a=>a?Na.delete("",{data:{act:"link-terkait",key:a}}):Promise.reject(new Error("ID link terkait tidak tersedia.")),yW={class:"modal-header"},vW={class:"modal-title"},CW={class:"modal-body"},PW={class:"mb-3"},EW=["disabled"],DW={disabled:"",value:""},MW=["value"],wW={class:"mb-3"},FW={class:"mb-3"},XW={class:"mb-3"},xW={class:"mt-2"},TW={key:0},SW=["src"],BW={key:1},AW=["src"],_W={key:0,class:"alert alert-danger mt-3"},jW={class:"modal-footer"},VW=["disabled"],IW={key:0,class:"spinner-border spinner-border-sm",role:"status"},NW={key:1};function UW(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",{class:"modal-overlay",onClick:e[9]||(e[9]=(...a)=>o.handleOverlayClick&&o.handleOverlayClick(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[8]||(e[8]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",yW,[(0,n.Lk)("h5",vW,(0,k.v_)(o.isEditMode?"Edit Data Link Terkait":"Tambah Data Link Terkait"),1),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",CW,[(0,n.Lk)("form",{onSubmit:e[5]||(e[5]=(0,l.D$)((...a)=>o.submitForm&&o.submitForm(...a),["prevent"]))},[(0,n.Lk)("div",PW,[e[10]||(e[10]=(0,n.Lk)("label",{class:"form-label"},"Nama Desa",-1)),(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":e[1]||(e[1]=a=>i.formData.iddesa=a),required:"",disabled:i.isDesaListLoading},[(0,n.Lk)("option",DW,(0,k.v_)(i.isDesaListLoading?"Memuat...":"Pilih Desa"),1),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.desaList,a=>((0,n.uX)(),(0,n.CE)("option",{key:a.iddesa,value:a.iddesa},(0,k.v_)(a.wilayah.namawilayah),9,MW))),128))],8,EW),[[l.u1,i.formData.iddesa]])]),(0,n.Lk)("div",wW,[e[11]||(e[11]=(0,n.Lk)("label",{class:"form-label"},"Nama Link",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.formData.nama=a),placeholder:"Masukkan nama link",required:""},null,512),[[l.Jo,i.formData.nama]])]),(0,n.Lk)("div",FW,[e[12]||(e[12]=(0,n.Lk)("label",{class:"form-label"},"URL",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=a=>i.formData.url=a),placeholder:"Masukkan alamat url terkait"},null,512),[[l.Jo,i.formData.url]])]),(0,n.Lk)("div",XW,[e[13]||(e[13]=(0,n.Lk)("label",{class:"form-label"},"Upload Logo",-1)),(0,n.Lk)("input",{type:"file",class:"form-control",accept:"image/*",onChange:e[4]||(e[4]=(...a)=>o.handleLogoUpload&&o.handleLogoUpload(...a))},null,32),(0,n.Lk)("div",xW,[i.logoPreviewUrl?((0,n.uX)(),(0,n.CE)("div",TW,[(0,n.Lk)("img",{src:i.logoPreviewUrl,alt:"Preview Logo",class:"img-thumbnail",style:{"max-width":"150px","max-height":"150px"}},null,8,SW)])):o.isEditMode&&i.formData.logolink?((0,n.uX)(),(0,n.CE)("div",BW,[(0,n.Lk)("img",{src:i.formData.logolink,alt:"Logo Saat Ini",class:"img-thumbnail",style:{"max-width":"150px","max-height":"150px"}},null,8,AW)])):(0,n.Q3)("",!0)])]),i.errorMessage?((0,n.uX)(),(0,n.CE)("div",_W,(0,k.v_)(i.errorMessage),1)):(0,n.Q3)("",!0)],32)]),(0,n.Lk)("div",jW,[(0,n.Lk)("button",{type:"button",class:"btn btn-danger",onClick:e[6]||(e[6]=(...a)=>o.closeModal&&o.closeModal(...a))},"Batal"),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[7]||(e[7]=(...a)=>o.submitForm&&o.submitForm(...a)),disabled:i.isLoading},[i.isLoading?((0,n.uX)(),(0,n.CE)("span",IW)):((0,n.uX)(),(0,n.CE)("span",NW,"Simpan"))],8,VW)])])])])}const RW={iddesa:"",nama:"",url:"",logolink:null};var QW={name:"addEditLinkModal",props:{linkToEdit:{type:Object,default:null}},data(){return{formData:{...RW},selectedLogoFile:null,logoPreviewUrl:null,desaList:[],isDesaListLoading:!1,isLoading:!1,errorMessage:null,toast:(0,ln.dj)()}},computed:{isEditMode(){return!!this.linkToEdit}},watch:{linkToEdit:{handler(a){a?(this.formData.iddesa=a.iddesa,this.formData.nama=a.nama,this.formData.url=a.url,this.formData.logolink=a.logolink):this.formData={...RW},this.selectedLogoFile=null,this.logoPreviewUrl=null,this.errorMessage=null},immediate:!0,deep:!0}},created(){this.fetchDesaList()},beforeUnmount(){this.logoPreviewUrl&&URL.revokeObjectURL(this.logoPreviewUrl)},methods:{closeModal(){this.$emit("close")},handleOverlayClick(a){a.target===a.currentTarget&&this.closeModal()},async fetchDesaList(){this.isDesaListLoading=!0;try{const a=await Mi({limit:-1});this.desaList=a.data?.data||a.data?.[0]?.data||[]}catch(a){this.toast.error("Gagal memuat daftar desa")}finally{this.isDesaListLoading=!1}},handleLogoUpload(a){const e=a.target.files[0];if(this.logoPreviewUrl&&URL.revokeObjectURL(this.logoPreviewUrl),!e)return this.selectedLogoFile=null,void(this.logoPreviewUrl=null);this.selectedLogoFile=e,this.logoPreviewUrl=URL.createObjectURL(e)},async submitForm(){this.isLoading=!0,this.errorMessage=null;const a=new FormData;a.append("record[iddesa]",this.formData.iddesa),a.append("record[nama]",this.formData.nama),a.append("record[url]",this.formData.url),this.selectedLogoFile&&a.append("upload_logolink",this.selectedLogoFile);try{let e;this.isEditMode?(a.append("_method","PUT"),e=await fW(this.linkToEdit.idlink,a),this.toast.success("Data link terkait berhasil diperbarui")):(e=await bW(a),this.toast.success("Data link terkait berhasil ditambah")),this.$emit("save-successful",e.data.data),this.closeModal()}catch(e){this.errorMessage=e.response?.data?.failed||e.response?.data?.message||"Gagal menyimpan data. Silakan coba lagi",this.toast.error("Gagal menyimpan data link terkait")}finally{this.isLoading=!1}}}};const WW=(0,r.A)(QW,[["render",UW],["__scopeId","data-v-3c864e78"]]);var KW=WW,OW={components:{AddEditLinkModal:KW},data(){return{links:[],isLoading:!1,sortColumn:"created_at",sortDirection:"asc",isModalVisible:!1,currentPage:1,perPage:10,totalItems:0,linkBeingEdited:null,isFilterVisible:!1,filters:{nama:"",namawilayah:""}}},computed:{paginatedLinks(){return this.links},totalPages(){return this.perPage<=0?1:Math.ceil(this.totalItems/this.perPage)},pageNumbers(){const a=[],e=5;let t=Math.max(1,this.currentPage-Math.floor(e/2)),s=t+e-1;s>this.totalPages&&(s=this.totalPages,t=Math.max(1,s-e+1));for(let i=t;i<=s;i++)a.push(i);return a}},watch:{currentPage(){this.fetchLinks()},perPage(){this.currentPage=1,this.fetchLinks()}},async mounted(){this.toast=(0,ln.dj)(),await this.fetchLinks()},methods:{openAddModal(){this.linkBeingEdited=null,this.isModalVisible=!0},openEditModal(a){this.linkBeingEdited={...a},this.isModalVisible=!0},closeModal(){this.isModalVisible=!1,this.linkBeingEdited=null},handleSaveSuccessful(){this.closeModal(),this.fetchLinks()},async fetchLinks(){this.isLoading=!0;try{const a={act:"link-terkait",page:this.currentPage,limit:this.perPage,order:this.sortColumn?`${this.sortColumn} ${this.sortDirection}`:"",group:""},e=Object.entries(this.filters).filter(([,a])=>""!==a&&null!==a).map(([a,e])=>`${a}=${e}`);a.filter=e.length>0?e.join(","):"";const t=await pW(a),s=t.data?.data||t.data?.[0]?.data||[],i=t.data?.meta?.pagination||t.data?.[0]?.meta?.pagination||{};this.links=s,this.totalItems=i.total||s.length}catch(a){console.error("Error fetching related links:",a),this.toast.error("Gagal memuat data link terkait",{icon:"fa fa-times"})}finally{this.isLoading=!1}},advancedDeleteAlert(a){this.$swal({title:"Hapus Data Link Terkait",text:"Apakah Anda yakin ingin menghapus data ini?",icon:"warning",showCancelButton:!0,confirmButtonText:'<i class="fa fa-check me-2"></i> Hapus!',confirmButtonColor:"#d33",cancelButtonText:'<i class="fa fa-times me-2"></i> Batal',cancelButtonColor:"#efefef",reverseButtons:!0}).then(async e=>{if(e.isConfirmed)try{await LW(a),1===this.links.length&&this.currentPage>1?this.currentPage--:this.fetchLinks(),this.toast.success("Data link terkait berhasil dihapus",{icon:"fa fa-check"})}catch(t){this.toast.error("Gagal menghapus data link terkait",{icon:"fa fa-times"})}})},sortBy(a){this.sortColumn===a?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=a,this.sortDirection="asc"),this.fetchLinks()},changePage(a){a>=1&&a<=this.totalPages&&(this.currentPage=a)},toggleFilterVisibility(){this.isFilterVisible=!this.isFilterVisible},applyFilters(){this.currentPage=1,this.fetchLinks()},resetFilters(){this.filters.namausaha="",this.filters.alamatusaha="",this.filters.namawilayah="",this.filters.idbidangusaha="",this.sortColumn="created_at",this.sortDirection="asc",this.currentPage=1,this.fetchLinks()}}};const $W=(0,r.A)(OW,[["render",gW],["__scopeId","data-v-7e771526"]]);var GW=$W,JW={components:{LinksTable:GW}};const qW=(0,r.A)(JW,[["render",xQ]]);var HW=qW;const YW={class:"container-fluid"},zW={class:"row"};function ZW(a,e,t,s,i,l){const o=(0,n.g2)("Breadcrumbs"),r=(0,n.g2)("UserTable");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(o,{main:"Umum",title:a.$route.meta.title},null,8,["title"]),(0,n.Lk)("div",YW,[(0,n.Lk)("div",zW,[(0,n.bF)(r)])])])}const aK={class:"col-sm-12"},eK={class:"card"},tK={class:"card-body"},sK={class:"d-flex justify-content-end align-items-start mb-3"},iK={class:"d-flex gap-2"},lK={key:0,class:"fa fa-angle-up me-2"},nK={key:1,class:"fa fa-angle-down me-2"},oK={key:0,class:"border p-3 mb-3 rounded filter-section"},rK={class:"row g-3"},cK={class:"col-md-4"},dK={class:"col-md-4"},uK={class:"d-flex justify-content-end gap-2 mt-3"},mK={class:"table-responsive signal-table"},kK={class:"table table-hover"},hK={key:0,class:"fa fa-sort-asc"},gK={key:1,class:"fa fa-sort-desc"},pK={key:2,class:"fa fa-sort"},bK={key:0,class:"fa fa-sort-asc"},fK={key:1,class:"fa fa-sort-desc"},LK={key:2,class:"fa fa-sort"},yK={key:0,class:"fa fa-sort-asc"},vK={key:1,class:"fa fa-sort-desc"},CK={key:2,class:"fa fa-sort"},PK={key:0,class:"fa fa-sort-asc"},EK={key:1,class:"fa fa-sort-desc"},DK={key:2,class:"fa fa-sort"},MK={key:0},wK={scope:"row"},FK={class:"btn-group"},XK=["onClick"],xK=["onClick"],TK=["onClick"],SK={key:0},BK={class:"d-flex flex-column flex-md-row justify-content-md-between align-items-center mt-3 px-3 pb-3"},AK={class:"mt-2"},_K={key:0,class:"text-muted"},jK={key:0,class:"d-flex align-items-center flex-wrap gap-2 mt-2"},VK={class:"pagination mb-0"},IK={key:0,class:"page-item"},NK={key:1,class:"page-item disabled"},UK=["onClick"],RK={key:2,class:"page-item disabled"},QK={key:3,class:"page-item"};function WK(a,e,t,s,i,o){const r=(0,n.g2)("add-edit-user-modal"),c=(0,n.g2)("detail-user-modal");return(0,n.uX)(),(0,n.CE)("div",aK,[i.isModalVisible?((0,n.uX)(),(0,n.Wv)(r,{key:0,"user-to-edit":i.userBeingEdited,onClose:o.closeModal,onSaveSuccessful:o.handleSaveSuccessful},null,8,["user-to-edit","onClose","onSaveSuccessful"])):(0,n.Q3)("",!0),i.isDetailModalVisible?((0,n.uX)(),(0,n.Wv)(c,{key:1,"user-to-view":i.userBeingViewed,onClose:o.closeDetailModal},null,8,["user-to-view","onClose"])):(0,n.Q3)("",!0),(0,n.Lk)("div",eK,[e[36]||(e[36]=(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("h3",null,"Daftar Pengguna")],-1)),(0,n.Lk)("div",tK,[(0,n.Lk)("div",sK,[(0,n.Lk)("div",iK,[(0,n.Lk)("button",{class:"btn btn-outline-light txt-dark",onClick:e[0]||(e[0]=(...a)=>o.toggleFilterVisibility&&o.toggleFilterVisibility(...a))},[i.isFilterVisible?((0,n.uX)(),(0,n.CE)("i",lK)):((0,n.uX)(),(0,n.CE)("i",nK)),(0,n.Lk)("span",null,(0,k.v_)(i.isFilterVisible?"Sembunyikan":"Tampilkan")+" Filter",1)]),(0,n.Lk)("button",{class:"btn btn-success",onClick:e[1]||(e[1]=(...a)=>o.openAddModal&&o.openAddModal(...a))},e[14]||(e[14]=[(0,n.Lk)("i",{class:"fa fa-plus me-2"},null,-1),(0,n.Lk)("span",null," Tambah Pengguna",-1)]))])]),i.isFilterVisible?((0,n.uX)(),(0,n.CE)("div",oK,[(0,n.Lk)("div",rK,[(0,n.Lk)("div",cK,[e[15]||(e[15]=(0,n.Lk)("label",{for:"filterName",class:"form-label"},"Nama Pengguna",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterName",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.filters.name=a),placeholder:"Filter berdasarkan nama"},null,512),[[l.Jo,i.filters.name]])]),(0,n.Lk)("div",dK,[e[16]||(e[16]=(0,n.Lk)("label",{for:"filterEmail",class:"form-label"},"Email",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterEmail",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=a=>i.filters.email=a),placeholder:"Filter berdasarkan email"},null,512),[[l.Jo,i.filters.email]])])]),(0,n.Lk)("div",uK,[(0,n.Lk)("button",{class:"btn btn-secondary",onClick:e[4]||(e[4]=(...a)=>o.resetFilters&&o.resetFilters(...a))},e[17]||(e[17]=[(0,n.Lk)("i",{class:"fa fa-refresh me-2"},null,-1),(0,n.Lk)("span",null,"Reset Filter",-1)])),(0,n.Lk)("button",{class:"btn btn-primary",onClick:e[5]||(e[5]=(...a)=>o.applyFilters&&o.applyFilters(...a))},e[18]||(e[18]=[(0,n.Lk)("i",{class:"fa fa-search me-2"},null,-1),(0,n.Lk)("span",null,"Terapkan Filter",-1)]))])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",mK,[(0,n.Lk)("table",kK,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[e[23]||(e[23]=(0,n.Lk)("th",{scope:"col"},"No",-1)),(0,n.Lk)("th",{scope:"col",onClick:e[6]||(e[6]=a=>o.sortBy("name"))},[e[19]||(e[19]=(0,n.eW)(" Nama ")),"name"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",hK)):"name"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",gK)):((0,n.uX)(),(0,n.CE)("i",pK))]),(0,n.Lk)("th",{scope:"col",onClick:e[7]||(e[7]=a=>o.sortBy("email"))},[e[20]||(e[20]=(0,n.eW)(" Email ")),"email"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",bK)):"email"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",fK)):((0,n.uX)(),(0,n.CE)("i",LK))]),(0,n.Lk)("th",{scope:"col",onClick:e[8]||(e[8]=a=>o.sortBy("telp"))},[e[21]||(e[21]=(0,n.eW)(" No. Telepon ")),"telp"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",yK)):"telp"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",vK)):((0,n.uX)(),(0,n.CE)("i",CK))]),(0,n.Lk)("th",{scope:"col",onClick:e[9]||(e[9]=a=>o.sortBy("role_name"))},[e[22]||(e[22]=(0,n.eW)(" Role ")),"role_name"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",PK)):"role_name"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",EK)):((0,n.uX)(),(0,n.CE)("i",DK))]),e[24]||(e[24]=(0,n.Lk)("th",{scope:"col"},"Aksi",-1))])]),(0,n.Lk)("tbody",null,[i.isLoading?((0,n.uX)(),(0,n.CE)("tr",MK,e[25]||(e[25]=[(0,n.Lk)("td",{colspan:"6",class:"text-center p-5"},[(0,n.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,n.Lk)("span",{class:"visually-hidden"},"Loading...")]),(0,n.Lk)("p",{class:"mt-2"},"Memuat data...")],-1)]))):((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.paginatedUsers,(a,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:a.user_id},[(0,n.Lk)("th",wK,(0,k.v_)((i.currentPage-1)*i.perPage+t+1),1),(0,n.Lk)("td",null,(0,k.v_)(a.name||"-"),1),(0,n.Lk)("td",null,(0,k.v_)(a.email||"-"),1),(0,n.Lk)("td",null,(0,k.v_)(a.telp||"-"),1),(0,n.Lk)("td",null,(0,k.v_)(a.roles?a.roles.role_name:"-"),1),(0,n.Lk)("td",null,[(0,n.Lk)("div",FK,[(0,n.Lk)("button",{class:"btn btn-info btn-sm",onClick:e=>o.openDetailModal(a),title:"Lihat Detail"},e[26]||(e[26]=[(0,n.Lk)("i",{class:"fa fa-eye"},null,-1)]),8,XK),(0,n.Lk)("button",{class:"btn btn-primary btn-sm",onClick:e=>o.openEditModal(a),title:"Ubah Data"},e[27]||(e[27]=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)]),8,xK),(0,n.Lk)("button",{class:"btn btn-danger sweet-11 btn-sm",type:"button",onClick:e=>o.advancedDeleteAlert(a.user_id),title:"Hapus Data"},e[28]||(e[28]=[(0,n.Lk)("i",{class:"fa fa-trash"},null,-1)]),8,TK)])])]))),128)),0===o.paginatedUsers.length?((0,n.uX)(),(0,n.CE)("tr",SK,e[29]||(e[29]=[(0,n.Lk)("td",{colspan:"6",class:"text-center"},"Tidak ada data yang cocok atau tersedia.",-1)]))):(0,n.Q3)("",!0)],64))])]),(0,n.Lk)("div",BK,[(0,n.Lk)("div",AK,[i.totalItems>0?((0,n.uX)(),(0,n.CE)("span",_K,[e[30]||(e[30]=(0,n.eW)(" Menampilkan ")),(0,n.Lk)("strong",null,(0,k.v_)((i.currentPage-1)*i.perPage+1),1),e[31]||(e[31]=(0,n.eW)(" - ")),(0,n.Lk)("strong",null,(0,k.v_)(Math.min(i.currentPage*i.perPage,i.totalItems)),1),e[32]||(e[32]=(0,n.eW)(" dari ")),(0,n.Lk)("strong",null,(0,k.v_)(i.totalItems),1),e[33]||(e[33]=(0,n.eW)(" data "))])):(0,n.Q3)("",!0)]),-1!==i.perPage&&o.totalPages>1?((0,n.uX)(),(0,n.CE)("nav",jK,[(0,n.Lk)("ul",VK,[(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[10]||(e[10]=a=>o.changePage(i.currentPage-1))},"Prev")],2),o.pageNumbers[0]>1?((0,n.uX)(),(0,n.CE)("li",IK,[(0,n.Lk)("button",{class:"page-link",onClick:e[11]||(e[11]=a=>o.changePage(1))},"1")])):(0,n.Q3)("",!0),o.pageNumbers[0]>2?((0,n.uX)(),(0,n.CE)("li",NK,e[34]||(e[34]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.pageNumbers,a=>((0,n.uX)(),(0,n.CE)("li",{key:a,class:(0,k.C4)(["page-item",{active:i.currentPage===a}])},[(0,n.Lk)("button",{class:"page-link",onClick:e=>o.changePage(a)},(0,k.v_)(a),9,UK)],2))),128)),o.pageNumbers.slice(-1)[0]<o.totalPages-1?((0,n.uX)(),(0,n.CE)("li",RK,e[35]||(e[35]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),o.pageNumbers.slice(-1)[0]<o.totalPages?((0,n.uX)(),(0,n.CE)("li",QK,[(0,n.Lk)("button",{class:"page-link",onClick:e[12]||(e[12]=a=>o.changePage(o.totalPages))},(0,k.v_)(o.totalPages),1)])):(0,n.Q3)("",!0),(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:i.currentPage===o.totalPages}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[13]||(e[13]=a=>o.changePage(i.currentPage+1))},"Next")],2)])])):(0,n.Q3)("",!0)])])])])}const KK=(a={})=>Na.get("",{params:{act:"users",...a}}),OK=a=>a?Na.get("",{params:{act:"users",key:a}}):Promise.reject(new Error("ID users tidak disediakan.")),$K=a=>(a.append("act","users"),Na.post("",a)),GK=(a,e)=>a?(e.append("act","users"),e.append("key",a),Na.post("",e)):Promise.reject(new Error("ID users tidak tersedia.")),JK=a=>a?Na.delete("",{data:{act:"users",key:a}}):Promise.reject(new Error("ID users tidak tersedia.")),qK={class:"modal-header"},HK={class:"modal-title"},YK={class:"modal-body"},zK={class:"mb-3"},ZK={class:"mb-3"},aO={class:"mb-3"},eO={class:"form-input position-relative"},tO=["type","required"],sO={key:0,class:"form-text text-muted"},iO={class:"mb-3"},lO={class:"form-input position-relative"},nO=["type","required"],oO={class:"mb-3"},rO=["disabled"],cO={disabled:"",value:""},dO=["value"],uO={class:"mb-3"},mO={class:"row"},kO={class:"col-md-6 mb-3"},hO={class:"col-md-6 mb-3"},gO={class:"mb-3"},pO={class:"mb-3"},bO={class:"mb-3"},fO={class:"mt-2"},LO={key:0},yO=["src"],vO={key:1},CO=["src"],PO={key:0,class:"alert alert-danger mt-3"},EO={class:"modal-footer"},DO=["disabled"],MO={key:0,class:"spinner-border spinner-border-sm",role:"status"},wO={key:1};function FO(a,e,t,s,i,o){const r=(0,n.g2)("vue-feather");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",{class:"modal-overlay",onClick:e[18]||(e[18]=(...a)=>o.handleOverlayClick&&o.handleOverlayClick(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[17]||(e[17]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",qK,[(0,n.Lk)("h5",HK,(0,k.v_)(o.isEditMode?"Edit Data User":"Tambah Data User"),1),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",YK,[(0,n.Lk)("form",{onSubmit:e[14]||(e[14]=(0,l.D$)((...a)=>o.submitForm&&o.submitForm(...a),["prevent"]))},[(0,n.Lk)("div",zK,[e[19]||(e[19]=(0,n.Lk)("label",{class:"form-label"},"Nama Lengkap",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=a=>i.formData.name=a),placeholder:"Masukkan nama lengkap",required:""},null,512),[[l.Jo,i.formData.name]])]),(0,n.Lk)("div",ZK,[e[20]||(e[20]=(0,n.Lk)("label",{class:"form-label"},"Email",-1)),(0,n.bo)((0,n.Lk)("input",{type:"email",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.formData.email=a),placeholder:"Masukkan email",required:""},null,512),[[l.Jo,i.formData.email]])]),(0,n.Lk)("div",aO,[e[21]||(e[21]=(0,n.Lk)("label",{class:"col-form-label"},"Password",-1)),(0,n.Lk)("div",eO,[(0,n.bo)((0,n.Lk)("input",{type:i.passwordFieldType,class:"form-control pe-5","onUpdate:modelValue":e[3]||(e[3]=a=>i.formData.password=a),placeholder:"*********",required:!o.isEditMode},null,8,tO),[[l.hp,i.formData.password]]),(0,n.Lk)("span",{class:"position-absolute end-0 top-50 translate-middle-y me-3",style:{cursor:"pointer"},onClick:e[4]||(e[4]=(...a)=>o.togglePasswordVisibility&&o.togglePasswordVisibility(...a))},[(0,n.bF)(r,{type:"password"===i.passwordFieldType?"eye":"eye-off"},null,8,["type"])])]),o.isEditMode?((0,n.uX)(),(0,n.CE)("small",sO,"Kosongkan jika tidak ingin mengubah password.")):(0,n.Q3)("",!0)]),(0,n.Lk)("div",iO,[e[22]||(e[22]=(0,n.Lk)("label",{class:"col-form-label"},"Konfirmasi Password",-1)),(0,n.Lk)("div",lO,[(0,n.bo)((0,n.Lk)("input",{type:i.confirmPasswordFieldType,class:"form-control pe-5","onUpdate:modelValue":e[5]||(e[5]=a=>i.formData.confirm_password=a),placeholder:"*********",required:""!==i.formData.password},null,8,nO),[[l.hp,i.formData.confirm_password]]),(0,n.Lk)("span",{class:"position-absolute end-0 top-50 translate-middle-y me-3",style:{cursor:"pointer"},onClick:e[6]||(e[6]=(...a)=>o.toggleConfirmPasswordVisibility&&o.toggleConfirmPasswordVisibility(...a))},[(0,n.bF)(r,{type:"password"===i.confirmPasswordFieldType?"eye":"eye-off"},null,8,["type"])])])]),(0,n.Lk)("div",oO,[e[23]||(e[23]=(0,n.Lk)("label",{class:"form-label"},"Role",-1)),(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":e[7]||(e[7]=a=>i.formData.idlevel=a),required:"",disabled:i.isListLoading},[(0,n.Lk)("option",cO,(0,k.v_)(i.isListLoading?"Memuat...":"Pilih Role"),1),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.roleList,a=>((0,n.uX)(),(0,n.CE)("option",{key:a.idlevel,value:a.idlevel},(0,k.v_)(a.namalevel),9,dO))),128))],8,rO),[[l.u1,i.formData.idlevel]])]),(0,n.Lk)("div",uO,[e[25]||(e[25]=(0,n.Lk)("label",{class:"form-label"},"Gender",-1)),(0,n.bo)((0,n.Lk)("select",{class:"form-select","onUpdate:modelValue":e[8]||(e[8]=a=>i.formData.gender=a)},e[24]||(e[24]=[(0,n.Lk)("option",{value:"",disabled:""},"Pilih Gender",-1),(0,n.Lk)("option",{value:"L"},"Laki-laki",-1),(0,n.Lk)("option",{value:"P"},"Perempuan",-1)]),512),[[l.u1,i.formData.gender]])]),(0,n.Lk)("div",mO,[(0,n.Lk)("div",kO,[e[26]||(e[26]=(0,n.Lk)("label",{class:"form-label"},"Tempat Lahir",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[9]||(e[9]=a=>i.formData.pob=a),placeholder:"Tempat lahir"},null,512),[[l.Jo,i.formData.pob]])]),(0,n.Lk)("div",hO,[e[27]||(e[27]=(0,n.Lk)("label",{class:"form-label"},"Tanggal Lahir",-1)),(0,n.bo)((0,n.Lk)("input",{type:"date",class:"form-control","onUpdate:modelValue":e[10]||(e[10]=a=>i.formData.dob=a)},null,512),[[l.Jo,i.formData.dob]])])]),(0,n.Lk)("div",gO,[e[28]||(e[28]=(0,n.Lk)("label",{class:"form-label"},"No. Telepon",-1)),(0,n.bo)((0,n.Lk)("input",{type:"tel",class:"form-control","onUpdate:modelValue":e[11]||(e[11]=a=>i.formData.telp=a),placeholder:"Masukkan nomor telepon"},null,512),[[l.Jo,i.formData.telp]])]),(0,n.Lk)("div",pO,[e[29]||(e[29]=(0,n.Lk)("label",{class:"form-label"},"Alamat",-1)),(0,n.bo)((0,n.Lk)("textarea",{class:"form-control","onUpdate:modelValue":e[12]||(e[12]=a=>i.formData.address=a),rows:"3",placeholder:"Masukkan alamat"},null,512),[[l.Jo,i.formData.address]])]),(0,n.Lk)("div",bO,[e[30]||(e[30]=(0,n.Lk)("label",{class:"form-label"},"Upload Foto",-1)),(0,n.Lk)("input",{type:"file",class:"form-control",accept:"image/*",onChange:e[13]||(e[13]=(...a)=>o.handlePhotoUpload&&o.handlePhotoUpload(...a))},null,32),(0,n.Lk)("div",fO,[i.photoPreviewUrl?((0,n.uX)(),(0,n.CE)("div",LO,[(0,n.Lk)("img",{src:i.photoPreviewUrl,alt:"Preview Foto",class:"img-thumbnail",style:{"max-width":"150px","max-height":"150px"}},null,8,yO)])):o.isEditMode&&i.formData.photo?((0,n.uX)(),(0,n.CE)("div",vO,[(0,n.Lk)("img",{src:i.formData.photo,alt:"Foto Saat Ini",class:"img-thumbnail",style:{"max-width":"150px","max-height":"150px"}},null,8,CO)])):(0,n.Q3)("",!0)])]),i.errorMessage?((0,n.uX)(),(0,n.CE)("div",PO,(0,k.v_)(i.errorMessage),1)):(0,n.Q3)("",!0)],32)]),(0,n.Lk)("div",EO,[(0,n.Lk)("button",{type:"button",class:"btn btn-danger",onClick:e[15]||(e[15]=(...a)=>o.closeModal&&o.closeModal(...a))},"Batal"),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[16]||(e[16]=(...a)=>o.submitForm&&o.submitForm(...a)),disabled:i.isLoading},[i.isLoading?((0,n.uX)(),(0,n.CE)("span",MO)):((0,n.uX)(),(0,n.CE)("span",wO,"Simpan"))],8,DO)])])])])}const XO=(a={})=>Na.get("",{params:{act:"roles",...a}}),xO=a=>Na.post("",{act:"roles",record:a}),TO=(a,e)=>a?Na.put("",{act:"roles",key:a,record:e}):Promise.reject(new Error("ID roles tidak tersedia.")),SO=a=>a?Na.delete("",{data:{act:"roles",key:a}}):Promise.reject(new Error("ID roles tidak tersedia.")),BO={name:"",email:"",password:"",confirm_password:"",idlevel:"",gender:"",pob:"",dob:"",telp:"",address:"",photo:null};var AO={name:"AddEditUserModal",props:{userToEdit:{type:Object,default:null}},data(){return{formData:{...BO},selectedPhotoFile:null,photoPreviewUrl:null,roleList:[],isListLoading:!1,isLoading:!1,errorMessage:null,toast:(0,ln.dj)(),passwordFieldType:"password",confirmPasswordFieldType:"password"}},computed:{isEditMode(){return!!this.userToEdit}},watch:{userToEdit:{handler(a){a?(this.formData={...BO,...a},this.formData.password="",this.formData.confirm_password=""):this.formData={...BO},this.errorMessage=null,this.selectedPhotoFile=null,this.photoPreviewUrl=null},immediate:!0,deep:!0}},created(){this.fetchRoleList()},beforeUnmount(){this.photoPreviewUrl&&URL.revokeObjectURL(this.photoPreviewUrl)},methods:{closeModal(){this.$emit("close")},handleOverlayClick(a){a.target===a.currentTarget&&this.closeModal()},async fetchRoleList(){this.isListLoading=!0;try{const a=await XO({limit:-1});this.roleList=a.data?.data||a.data?.[0]?.data||[]}catch(a){this.toast.error("Gagal memuat daftar role")}finally{this.isListLoading=!1}},handlePhotoUpload(a){const e=a.target.files[0];if(this.photoPreviewUrl&&URL.revokeObjectURL(this.photoPreviewUrl),!e)return this.selectedPhotoFile=null,void(this.photoPreviewUrl=null);this.selectedPhotoFile=e,this.photoPreviewUrl=URL.createObjectURL(e)},togglePasswordVisibility(){this.passwordFieldType="password"===this.passwordFieldType?"text":"password"},toggleConfirmPasswordVisibility(){this.confirmPasswordFieldType="password"===this.confirmPasswordFieldType?"text":"password"},async submitForm(){if(this.errorMessage=null,this.formData.password!==this.formData.confirm_password)return this.errorMessage="Password dan Konfirmasi Password tidak cocok.",void this.toast.error("Password tidak cocok!");this.isLoading=!0;const a=new FormData;a.append("record[name]",this.formData.name),a.append("record[email]",this.formData.email),a.append("record[idlevel]",this.formData.idlevel),a.append("record[gender]",this.formData.gender),a.append("record[pob]",this.formData.pob),a.append("record[dob]",this.formData.dob),a.append("record[telp]",this.formData.telp),a.append("record[address]",this.formData.address),this.formData.password&&a.append("record[password]",this.formData.password),this.selectedPhotoFile&&a.append("upload_photo",this.selectedPhotoFile);try{let e;this.isEditMode?(a.append("_method","PUT"),e=await GK(this.userToEdit.user_id,a),this.toast.success("Data pengguna berhasil diperbarui")):(e=await $K(a),this.toast.success("Data pengguna berhasil ditambah")),this.$emit("save-successful",e.data.data),this.closeModal()}catch(e){this.errorMessage=e.response?.data?.failed||e.response?.data?.message||"Gagal menyimpan data. Silakan coba lagi",this.toast.error("Gagal menyimpan data pengguna")}finally{this.isLoading=!1}}}};const _O=(0,r.A)(AO,[["render",FO],["__scopeId","data-v-7ac9f7d0"]]);var jO=_O;const VO={class:"modal-header"},IO={class:"modal-body"},NO={key:0,class:"text-center p-5"},UO={key:1,class:"text-center p-5 text-danger"},RO={key:0,class:"text-muted"},QO={key:2,class:"user-details-container"},WO={class:"profile-header text-center"},KO=["src"],OO={key:1,src:"https://placehold.co/150/EBF4FF/7F9CF5?text=Foto",alt:"Foto Default",class:"profile-photo"},$O={class:"user-name mt-3"},GO={class:"user-role"},JO={class:"profile-details"},qO={class:"detail-item mb-3"},HO={class:"detail-item mb-3"},YO={class:"detail-item mb-3"},zO={class:"detail-item mb-3"},ZO={class:"detail-item mb-3"},a$={class:"address-text"},e$={class:"detail-item"},t$={class:"modal-footer"};function s$(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",{class:"modal-overlay",onClick:e[3]||(e[3]=(...a)=>o.closeModal&&o.closeModal(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[2]||(e[2]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",VO,[e[4]||(e[4]=(0,n.Lk)("h5",{class:"modal-title"},"Detail Pengguna",-1)),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",IO,[i.isLoading?((0,n.uX)(),(0,n.CE)("div",NO,e[5]||(e[5]=[(0,n.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,n.Lk)("span",{class:"visually-hidden"},"Loading...")],-1),(0,n.Lk)("p",{class:"mt-2"},"Memuat data...",-1)]))):i.error?((0,n.uX)(),(0,n.CE)("div",UO,[e[6]||(e[6]=(0,n.Lk)("i",{class:"fa fa-exclamation-triangle fa-3x mb-3"},null,-1)),e[7]||(e[7]=(0,n.Lk)("h4",null,"Terjadi Kesalahan",-1)),(0,n.Lk)("p",null,(0,k.v_)(i.error),1),i.debugMessage?((0,n.uX)(),(0,n.CE)("small",RO,"Detail: "+(0,k.v_)(i.debugMessage),1)):(0,n.Q3)("",!0)])):i.userDetail?((0,n.uX)(),(0,n.CE)("div",QO,[(0,n.Lk)("div",WO,[i.userDetail.photo?((0,n.uX)(),(0,n.CE)("img",{key:0,src:i.userDetail.photo,alt:"Foto Pengguna",class:"profile-photo",onerror:"this.src='https://placehold.co/150/EBF4FF/7F9CF5?text=Foto'"},null,8,KO)):((0,n.uX)(),(0,n.CE)("img",OO)),(0,n.Lk)("h3",$O,(0,k.v_)(i.userDetail.name||"Nama Tidak Tersedia"),1),(0,n.Lk)("p",GO,(0,k.v_)(i.userDetail.roles?.role_name||"Role tidak diketahui"),1)]),e[14]||(e[14]=(0,n.Lk)("hr",{class:"my-4"},null,-1)),(0,n.Lk)("div",JO,[(0,n.Lk)("div",qO,[e[8]||(e[8]=(0,n.Lk)("h5",null,[(0,n.Lk)("i",{class:"fa fa-envelope me-2"}),(0,n.eW)("Email")],-1)),(0,n.Lk)("p",null,(0,k.v_)(i.userDetail.email||"-"),1)]),(0,n.Lk)("div",HO,[e[9]||(e[9]=(0,n.Lk)("h5",null,[(0,n.Lk)("i",{class:"fa fa-phone me-2"}),(0,n.eW)("Telepon")],-1)),(0,n.Lk)("p",null,(0,k.v_)(i.userDetail.telp||"-"),1)]),(0,n.Lk)("div",YO,[e[10]||(e[10]=(0,n.Lk)("h5",null,[(0,n.Lk)("i",{class:"fa fa-venus-mars me-2"}),(0,n.eW)("Jenis Kelamin")],-1)),(0,n.Lk)("p",null,(0,k.v_)(o.formattedGender),1)]),(0,n.Lk)("div",zO,[e[11]||(e[11]=(0,n.Lk)("h5",null,[(0,n.Lk)("i",{class:"fa fa-birthday-cake me-2"}),(0,n.eW)("Tempat & Tanggal Lahir")],-1)),(0,n.Lk)("p",null,(0,k.v_)(i.userDetail.pob||"-")+", "+(0,k.v_)(o.formattedDob),1)]),(0,n.Lk)("div",ZO,[e[12]||(e[12]=(0,n.Lk)("h5",null,[(0,n.Lk)("i",{class:"fa fa-map-marker me-2"}),(0,n.eW)("Alamat")],-1)),(0,n.Lk)("p",a$,(0,k.v_)(i.userDetail.address||"-"),1)]),(0,n.Lk)("div",e$,[e[13]||(e[13]=(0,n.Lk)("h5",null,[(0,n.Lk)("i",{class:"fa fa-calendar-check-o me-2"}),(0,n.eW)("Bergabung Sejak")],-1)),(0,n.Lk)("p",null,(0,k.v_)(o.formattedCreatedAt),1)])])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",t$,[(0,n.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:e[1]||(e[1]=(...a)=>o.closeModal&&o.closeModal(...a))},"Tutup")])])])}var i$={name:"DetailUserModal",props:{userToView:{type:Object,required:!0}},emits:["close"],data(){return{userDetail:null,isLoading:!1,error:null,debugMessage:""}},computed:{formattedGender(){return this.userDetail&&this.userDetail.gender?"L"===this.userDetail.gender.toUpperCase()||"LAKI-LAKI"===this.userDetail.gender.toUpperCase()?"Laki-laki":"P"===this.userDetail.gender.toUpperCase()||"PEREMPUAN"===this.userDetail.gender.toUpperCase()?"Perempuan":this.userDetail.gender:"-"},formattedDob(){if(!this.userDetail||!this.userDetail.dob)return"-";try{return new Date(this.userDetail.dob).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"})}catch(a){return this.userDetail.dob}},formattedCreatedAt(){if(!this.userDetail||!this.userDetail.created_at)return"-";try{return new Date(this.userDetail.created_at).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"})}catch(a){return this.userDetail.created_at}}},methods:{closeModal(){this.$emit("close")},async fetchUserDetail(){const a=this.userToView?.user_id;if(a){this.isLoading=!0,this.error=null,this.debugMessage="";try{const e=await OK(a),t=e.data;Array.isArray(t)&&t.length>0&&t[0]&&Array.isArray(t[0].data)&&t[0].data.length>0?this.userDetail=t[0].data[0]:(this.error="Data pengguna tidak ditemukan atau format respons tidak sesuai.",this.debugMessage=`Struktur data yang diterima: ${JSON.stringify(t)}`)}catch(e){console.error("Gagal mengambil detail pengguna:",e),this.error=e.message||"Terjadi kesalahan saat memuat data.",e.response&&(this.debugMessage=`Status: ${e.response.status} - Data: ${JSON.stringify(e.response.data)}`)}finally{this.isLoading=!1}}else this.error="ID user tidak valid atau tidak tersedia."}},mounted(){this.fetchUserDetail()},watch:{userToView:{handler(a,e){a?.user_id!==e?.user_id&&this.fetchUserDetail()},deep:!0}}};const l$=(0,r.A)(i$,[["render",s$],["__scopeId","data-v-2c41de24"]]);var n$=l$,o$={components:{AddEditUserModal:jO,DetailUserModal:n$},data(){return{users:[],isLoading:!1,sortColumn:"created_at",sortDirection:"asc",isModalVisible:!1,currentPage:1,perPage:20,totalItems:0,userBeingEdited:null,isFilterVisible:!1,filters:{name:"",email:""},isDetailModalVisible:!1,userBeingViewed:null}},computed:{paginatedUsers(){return this.users},totalPages(){return this.perPage<=0?1:Math.ceil(this.totalItems/this.perPage)},pageNumbers(){const a=[],e=5;let t=Math.max(1,this.currentPage-Math.floor(e/2)),s=t+e-1;s>this.totalPages&&(s=this.totalPages,t=Math.max(1,s-e+1));for(let i=t;i<=s;i++)a.push(i);return a}},watch:{currentPage(){this.fetchUsers()},perPage(){this.currentPage=1,this.fetchUsers()}},async mounted(){this.toast=(0,ln.dj)(),await this.fetchUsers()},methods:{openAddModal(){this.userBeingEdited=null,this.isModalVisible=!0},openEditModal(a){this.userBeingEdited={...a},this.isModalVisible=!0},closeModal(){this.isModalVisible=!1,this.userBeingEdited=null},openDetailModal(a){this.userBeingViewed={...a},this.isDetailModalVisible=!0},closeDetailModal(){this.isDetailModalVisible=!1,this.userBeingViewed=null},handleSaveSuccessful(){this.closeModal(),this.fetchUsers()},async fetchUsers(){this.isLoading=!0;try{const a={page:this.currentPage,limit:this.perPage,order:this.sortColumn?`${this.sortColumn} ${this.sortDirection}`:"",group:""},e=Object.entries(this.filters).filter(([,a])=>""!==a&&null!==a).map(([a,e])=>`${a}=${e}`);e.length>0?a.filter=e.join(","):a.filter="";const t=await KK(a),s=t.data?.data||t.data?.[0]?.data||[],i=t.data?.meta?.pagination||t.data?.[0]?.meta?.pagination||{};this.users=s,this.totalItems=i.total||0}catch(a){console.error("Error fetching users:",a),this.toast.error("Gagal memuat data pengguna.",{icon:"fa fa-times"})}finally{this.isLoading=!1}},advancedDeleteAlert(a){this.$swal({title:"Hapus Data Pengguna",text:"Apakah Anda yakin ingin menghapus data ini?",icon:"warning",showCancelButton:!0,confirmButtonText:'<i class="fa fa-check me-2"></i> Hapus!',confirmButtonColor:"#d33",cancelButtonText:'<i class="fa fa-times me-2"></i> Batal',cancelButtonColor:"#efefef",reverseButtons:!0}).then(async e=>{if(e.isConfirmed)try{await JK(a),1===this.users.length&&this.currentPage>1?this.currentPage--:this.fetchUsers(),this.toast.success("Data pengguna berhasil dihapus",{icon:"fa fa-check"})}catch(t){this.toast.error("Gagal menghapus data pengguna",{icon:"fa fa-times"})}})},sortBy(a){this.sortColumn===a?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=a,this.sortDirection="asc"),this.fetchUsers()},changePage(a){a>=1&&a<=this.totalPages&&(this.currentPage=a)},toggleFilterVisibility(){this.isFilterVisible=!this.isFilterVisible},applyFilters(){this.currentPage=1,this.fetchUsers()},resetFilters(){this.filters.name="",this.filters.email="",this.sortColumn="created_at",this.sortDirection="asc",this.currentPage=1,this.fetchUsers()}}};const r$=(0,r.A)(o$,[["render",WK],["__scopeId","data-v-1bfe0b86"]]);var c$=r$,d$={components:{UserTable:c$}};const u$=(0,r.A)(d$,[["render",ZW]]);var m$=u$;const k$={class:"container-fluid"},h$={class:"row"};function g$(a,e,t,s,i,l){const o=(0,n.g2)("Breadcrumbs"),r=(0,n.g2)("RegionsTable");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(o,{main:"Kependudukan",title:a.$route.meta.title},null,8,["title"]),(0,n.Lk)("div",k$,[(0,n.Lk)("div",h$,[(0,n.bF)(r)])])])}const p$={class:"col-sm-12"},b$={class:"card"},f$={class:"card-body"},L$={class:"d-flex justify-content-end align-items-start mb-3"},y$={class:"d-flex gap-2"},v$={key:0,class:"fa fa-angle-up me-2"},C$={key:1,class:"fa fa-angle-down me-2"},P$={key:0,class:"border p-3 mb-3 rounded filter-section"},E$={class:"row g-3"},D$={class:"col-md-4"},M$={class:"col-md-4"},w$={class:"col-md-4"},F$={class:"d-flex justify-content-end gap-2 mt-3"},X$={class:"table-responsive signal-table"},x$={class:"table table-hover"},T$={key:0,class:"fa fa-sort-asc"},S$={key:1,class:"fa fa-sort-desc"},B$={key:2,class:"fa fa-sort"},A$={key:0,class:"fa fa-sort-asc"},_$={key:1,class:"fa fa-sort-desc"},j$={key:2,class:"fa fa-sort"},V$={key:0,class:"fa fa-sort-asc"},I$={key:1,class:"fa fa-sort-desc"},N$={key:2,class:"fa fa-sort"},U$={scope:"row"},R$={class:"btn-group"},Q$=["onClick"],W$=["onClick"],K$={key:0},O$={class:"d-flex flex-column flex-md-row justify-content-md-between align-items-center mt-3 px-3 pb-3"},$$={class:"mt-2"},G$={key:0,class:"text-muted"},J$={key:0,class:"d-flex align-items-center flex-wrap gap-2 mt-2"},q$={class:"pagination mb-0"},H$={key:0,class:"page-item"},Y$={key:1,class:"page-item disabled"},z$=["onClick"],Z$={key:2,class:"page-item disabled"},aG={key:3,class:"page-item"};function eG(a,e,t,s,i,o){const r=(0,n.g2)("add-edit-region-modal");return(0,n.uX)(),(0,n.CE)("div",p$,[i.isModalVisible?((0,n.uX)(),(0,n.Wv)(r,{key:0,"region-to-edit":i.regionBeingEdited,onClose:o.closeModal,onSaveSuccessful:o.handleSaveSuccessful},null,8,["region-to-edit","onClose","onSaveSuccessful"])):(0,n.Q3)("",!0),(0,n.Lk)("div",b$,[e[35]||(e[35]=(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("h3",null,"Daftar Wilayah")],-1)),(0,n.Lk)("div",f$,[(0,n.Lk)("div",L$,[(0,n.Lk)("div",y$,[(0,n.Lk)("button",{class:"btn btn-outline-light txt-dark",onClick:e[0]||(e[0]=(...a)=>o.toggleFilterVisibility&&o.toggleFilterVisibility(...a))},[i.isFilterVisible?((0,n.uX)(),(0,n.CE)("i",v$)):((0,n.uX)(),(0,n.CE)("i",C$)),(0,n.Lk)("span",null,(0,k.v_)(i.isFilterVisible?"Sembunyikan":"Tampilkan")+" Filter",1)]),(0,n.Lk)("button",{class:"btn btn-success",onClick:e[1]||(e[1]=(...a)=>o.openAddModal&&o.openAddModal(...a))},e[14]||(e[14]=[(0,n.Lk)("i",{class:"fa fa-plus me-2"},null,-1),(0,n.Lk)("span",null," Tambah Data",-1)]))])]),i.isFilterVisible?((0,n.uX)(),(0,n.CE)("div",P$,[(0,n.Lk)("div",E$,[(0,n.Lk)("div",D$,[e[15]||(e[15]=(0,n.Lk)("label",{for:"filterCode",class:"form-label"},"Kode Wilayah",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterCode",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.filters.region_code=a),placeholder:"Filter berdasarkan kode wilayah"},null,512),[[l.Jo,i.filters.region_code]])]),(0,n.Lk)("div",M$,[e[16]||(e[16]=(0,n.Lk)("label",{for:"filterName",class:"form-label"},"Nama Wilayah",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterName",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=a=>i.filters.region_name=a),placeholder:"Filter berdasarkan nama wilayah"},null,512),[[l.Jo,i.filters.region_name]])]),(0,n.Lk)("div",w$,[e[18]||(e[18]=(0,n.Lk)("label",{for:"filterType",class:"form-label"},"Tipe Wilayah",-1)),(0,n.bo)((0,n.Lk)("select",{id:"filterType",class:"form-select","onUpdate:modelValue":e[4]||(e[4]=a=>i.filters.region_type=a)},e[17]||(e[17]=[(0,n.Fv)('<option value="" data-v-5ca2a340>Semua Tipe</option><option value="A" data-v-5ca2a340>A</option><option value="B" data-v-5ca2a340>B</option><option value="C" data-v-5ca2a340>C</option><option value="D" data-v-5ca2a340>D</option>',5)]),512),[[l.u1,i.filters.region_type]])])]),(0,n.Lk)("div",F$,[(0,n.Lk)("button",{class:"btn btn-secondary",onClick:e[5]||(e[5]=(...a)=>o.resetFilters&&o.resetFilters(...a))},e[19]||(e[19]=[(0,n.Lk)("i",{class:"fa fa-refresh me-2"},null,-1),(0,n.Lk)("span",null,"Reset Filter",-1)])),(0,n.Lk)("button",{class:"btn btn-primary",onClick:e[6]||(e[6]=(...a)=>o.applyFilters&&o.applyFilters(...a))},e[20]||(e[20]=[(0,n.Lk)("i",{class:"fa fa-search me-2"},null,-1),(0,n.Lk)("span",null,"Terapkan Filter",-1)]))])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",X$,[(0,n.Lk)("table",x$,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[e[24]||(e[24]=(0,n.Lk)("th",{scope:"col"},"No",-1)),(0,n.Lk)("th",{scope:"col",onClick:e[7]||(e[7]=a=>o.sortBy("region_code"))},[e[21]||(e[21]=(0,n.eW)(" Kode Wilayah ")),"region_code"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",T$)):"region_code"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",S$)):((0,n.uX)(),(0,n.CE)("i",B$))]),(0,n.Lk)("th",{scope:"col",onClick:e[8]||(e[8]=a=>o.sortBy("region_name"))},[e[22]||(e[22]=(0,n.eW)(" Nama Wilayah ")),"region_name"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",A$)):"region_name"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",_$)):((0,n.uX)(),(0,n.CE)("i",j$))]),(0,n.Lk)("th",{scope:"col",onClick:e[9]||(e[9]=a=>o.sortBy("region_type"))},[e[23]||(e[23]=(0,n.eW)(" Tipe Wilayah ")),"region_type"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",V$)):"region_type"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",I$)):((0,n.uX)(),(0,n.CE)("i",N$))]),e[25]||(e[25]=(0,n.Lk)("th",{scope:"col"},"Aksi",-1))])]),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.paginatedRegions,(a,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:a.region_id},[(0,n.Lk)("th",U$,(0,k.v_)((i.currentPage-1)*i.perPage+t+1),1),(0,n.Lk)("td",null,(0,k.v_)(a.region_code),1),(0,n.Lk)("td",null,(0,k.v_)(a.region_name),1),(0,n.Lk)("td",null,(0,k.v_)(a.region_type),1),(0,n.Lk)("td",null,[(0,n.Lk)("div",R$,[(0,n.Lk)("button",{class:"btn btn-primary btn-sm",onClick:e=>o.openEditModal(a)},e[26]||(e[26]=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)]),8,Q$),(0,n.Lk)("button",{class:"btn btn-danger sweet-11 btn-sm",type:"button",onClick:e=>o.advancedDeleteAlert(a.region_id)},e[27]||(e[27]=[(0,n.Lk)("i",{class:"fa fa-trash"},null,-1)]),8,W$)])])]))),128)),0===o.paginatedRegions.length?((0,n.uX)(),(0,n.CE)("tr",K$,e[28]||(e[28]=[(0,n.Lk)("td",{colspan:"5",class:"text-center"},"Tidak ada data yang cocok atau tersedia.",-1)]))):(0,n.Q3)("",!0)])]),(0,n.Lk)("div",O$,[(0,n.Lk)("div",$$,[i.totalItems>0?((0,n.uX)(),(0,n.CE)("span",G$,[e[29]||(e[29]=(0,n.eW)(" Menampilkan ")),(0,n.Lk)("strong",null,(0,k.v_)((i.currentPage-1)*i.perPage+1),1),e[30]||(e[30]=(0,n.eW)(" - ")),(0,n.Lk)("strong",null,(0,k.v_)(Math.min(i.currentPage*i.perPage,i.totalItems)),1),e[31]||(e[31]=(0,n.eW)(" dari ")),(0,n.Lk)("strong",null,(0,k.v_)(i.totalItems),1),e[32]||(e[32]=(0,n.eW)(" data "))])):(0,n.Q3)("",!0)]),-1!==i.perPage&&o.totalPages>1?((0,n.uX)(),(0,n.CE)("nav",J$,[(0,n.Lk)("ul",q$,[(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[10]||(e[10]=a=>o.changePage(i.currentPage-1))},"Prev")],2),o.pageNumbers[0]>1?((0,n.uX)(),(0,n.CE)("li",H$,[(0,n.Lk)("button",{class:"page-link",onClick:e[11]||(e[11]=a=>o.changePage(1))},"1")])):(0,n.Q3)("",!0),o.pageNumbers[0]>2?((0,n.uX)(),(0,n.CE)("li",Y$,e[33]||(e[33]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.pageNumbers,a=>((0,n.uX)(),(0,n.CE)("li",{key:a,class:(0,k.C4)(["page-item",{active:i.currentPage===a}])},[(0,n.Lk)("button",{class:"page-link",onClick:e=>o.changePage(a)},(0,k.v_)(a),9,z$)],2))),128)),o.pageNumbers.slice(-1)[0]<o.totalPages-1?((0,n.uX)(),(0,n.CE)("li",Z$,e[34]||(e[34]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),o.pageNumbers.slice(-1)[0]<o.totalPages?((0,n.uX)(),(0,n.CE)("li",aG,[(0,n.Lk)("button",{class:"page-link",onClick:e[12]||(e[12]=a=>o.changePage(o.totalPages))},(0,k.v_)(o.totalPages),1)])):(0,n.Q3)("",!0),(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:i.currentPage===o.totalPages}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[13]||(e[13]=a=>o.changePage(i.currentPage+1))},"Next")],2)])])):(0,n.Q3)("",!0)])])])])}const tG={class:"modal-header"},sG={class:"modal-title"},iG={class:"modal-body"},lG={class:"mb-3"},nG={class:"mb-3"},oG={class:"mb-3"},rG={key:0,class:"alert alert-danger mt-3"},cG={class:"modal-footer"},dG=["disabled"],uG={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},mG={key:1};function kG(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",{class:"modal-overlay",onClick:e[8]||(e[8]=(...a)=>o.handleOverlayClick&&o.handleOverlayClick(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[7]||(e[7]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",tG,[(0,n.Lk)("h5",sG,(0,k.v_)(o.isEditMode?"Edit Data Wilayah":"Tambah Wilayah Baru"),1),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",iG,[(0,n.Lk)("form",{onSubmit:e[4]||(e[4]=(0,l.D$)((...a)=>o.submitForm&&o.submitForm(...a),["prevent"]))},[(0,n.Lk)("div",lG,[e[9]||(e[9]=(0,n.Lk)("label",{for:"regionCode",class:"form-label"},"Kode Wilayah",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",placeholder:"Masukkan kode wilayah",id:"regionCode","onUpdate:modelValue":e[1]||(e[1]=a=>i.formData.region_code=a),required:""},null,512),[[l.Jo,i.formData.region_code]])]),(0,n.Lk)("div",nG,[e[10]||(e[10]=(0,n.Lk)("label",{for:"regionName",class:"form-label"},"Nama Wilayah",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"regionName",placeholder:"Masukkan nama wilayah","onUpdate:modelValue":e[2]||(e[2]=a=>i.formData.region_name=a),required:""},null,512),[[l.Jo,i.formData.region_name]])]),(0,n.Lk)("div",oG,[e[12]||(e[12]=(0,n.Lk)("label",{for:"regionType",class:"form-label"},"Tipe Wilayah",-1)),(0,n.bo)((0,n.Lk)("select",{class:"form-select",id:"regionType","onUpdate:modelValue":e[3]||(e[3]=a=>i.formData.region_type=a),required:""},e[11]||(e[11]=[(0,n.Lk)("option",{value:"",disabled:""},"Pilih tipe wilayah...",-1),(0,n.Lk)("option",null,"A",-1),(0,n.Lk)("option",null,"B",-1),(0,n.Lk)("option",null,"C",-1),(0,n.Lk)("option",null,"D",-1)]),512),[[l.u1,i.formData.region_type]])]),i.errorMessage?((0,n.uX)(),(0,n.CE)("div",rG,(0,k.v_)(i.errorMessage),1)):(0,n.Q3)("",!0)],32)]),(0,n.Lk)("div",cG,[(0,n.Lk)("button",{type:"button",class:"btn btn-danger",onClick:e[5]||(e[5]=(...a)=>o.closeModal&&o.closeModal(...a))},"Batal"),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[6]||(e[6]=(...a)=>o.submitForm&&o.submitForm(...a)),disabled:i.isLoading},[i.isLoading?((0,n.uX)(),(0,n.CE)("span",uG)):((0,n.uX)(),(0,n.CE)("span",mG,"Simpan"))],8,dG)])])])}var hG={name:"editRegionModal",props:{regionToEdit:{type:Object,default:null}},created(){this.toast=(0,ln.dj)()},data(){return{formData:{region_code:"",region_name:"",region_type:""},isLoading:!1,errorMessage:null}},computed:{isEditMode(){return!!this.regionToEdit}},watch:{regionToEdit:{handler(a){this.formData=a?{...a}:{region_code:"",region_name:"",region_type:""},this.errorMessage=null},immediate:!0}},methods:{closeModal(){this.$emit("close")},handleOverlayClick(a){a.target===a.currentTarget&&this.closeModal()},async submitForm(){this.errorMessage=null;const{region_code:a,region_name:e,region_type:t}=this.formData;if(a&&e&&t){this.isLoading=!0;try{this.isEditMode?(await Zl(this.regionToEdit.region_id,this.formData),this.toast.success("Data wilayah berhasil diperbarui",{icon:"fa fa-check"})):(await zl(this.formData),this.toast.success("Data wilayah berhasil ditambah",{icon:"fa fa-check"})),this.$emit("save-successful"),this.closeModal()}catch(s){console.error("Error occurred:",s),this.errorMessage=s.response?.data?.message||"Gagal menyimpan data.",this.toast.error("Gagal menyimpan data wilayah",{icon:"fa fa-times"})}finally{this.isLoading=!1}}else this.errorMessage="Semua field wajib diisi."}}};const gG=(0,r.A)(hG,[["render",kG],["__scopeId","data-v-40474f6a"]]);var pG=gG,bG={components:{AddEditRegionModal:pG},data(){return{regions:[],sortColumn:"",sortDirection:"asc",isModalVisible:!1,currentPage:1,perPage:20,totalItems:0,regionBeingEdited:null,jumpPage:1,isFilterVisible:!1,filters:{region_code:"",region_name:"",region_type:""}}},computed:{paginatedRegions(){return this.regions},totalPages(){return this.perPage<=0?1:Math.ceil(this.totalItems/this.perPage)},pageNumbers(){const a=[],e=5;let t=Math.max(1,this.currentPage-Math.floor(e/2)),s=t+e-1;s>this.totalPages&&(s=this.totalPages,t=Math.max(1,s-e+1));for(let i=t;i<=s;i++)a.push(i);return a}},watch:{currentPage(){this.fetchRegions(),this.jumpPage=this.currentPage},perPage(){this.currentPage=1,this.fetchRegions()}},async mounted(){this.toast=(0,ln.dj)(),await this.fetchRegions()},methods:{openAddModal(){this.regionBeingEdited=null,this.isModalVisible=!0},openEditModal(a){this.regionBeingEdited={...a},this.isModalVisible=!0},closeModal(){this.isModalVisible=!1,this.regionBeingEdited=null},handleSaveSuccessful(){this.closeModal(),this.fetchRegions()},async fetchRegions(){try{const a={act:"regions",page:this.currentPage,limit:this.perPage,order:this.sortColumn?`${this.sortColumn} ${this.sortDirection}`:"",group:""},e=Object.entries(this.filters).filter(([a,e])=>""!==e).map(([a,e])=>`${a}=${e}`);e.length>0?a.filter=e.join(","):a.filter="";const t=await Hl(a),s=t.data?.data||t.data?.[0]?.data||[],i=t.data?.[0]?.meta?.pagination||{};this.regions=s,this.totalItems=i.total||s.length}catch(a){console.error("Error fetching regions:",a),this.$swal({icon:"error",title:"Oops...",text:"Gagal memuat data wilayah. Silakan coba lagi nanti."})}},advancedDeleteAlert(a){this.$swal({title:"Hapus Data Wilayah",text:"Apakah Anda yakin ingin menghapus data ini?",icon:"warning",showCancelButton:!0,confirmButtonText:'<i class="fa fa-check me-2"></i> Hapus!',confirmButtonColor:"#d33",cancelButtonText:'<i class="fa fa-times me-2"></i> Batal',cancelButtonColor:"#efefef",reverseButtons:!0}).then(async e=>{if(e.isConfirmed)try{await an(a),1===this.regions.length&&this.currentPage>1?this.currentPage--:this.fetchRegions(),this.toast.success("Data wilayah berhasil dihapus",{icon:"fa fa-check"})}catch(t){this.toast.error("Gagal menghapus data wilayah",{icon:"fa fa-times"})}})},sortBy(a){this.sortColumn===a?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=a,this.sortDirection="asc"),this.fetchRegions()},changePage(a){a>=1&&a<=this.totalPages&&(this.currentPage=a)},toggleFilterVisibility(){this.isFilterVisible=!this.isFilterVisible},applyFilters(){this.currentPage=1,this.fetchRegions()},resetFilters(){this.filters.region_code="",this.filters.region_name="",this.filters.region_type="",this.currentPage=1,this.sortColumn="",this.sortDirection="asc",this.fetchRegions()}}};const fG=(0,r.A)(bG,[["render",eG],["__scopeId","data-v-5ca2a340"]]);var LG=fG,yG={components:{RegionsTable:LG}};const vG=(0,r.A)(yG,[["render",g$]]);var CG=vG;const PG={class:"container-fluid"},EG={class:"row"};function DG(a,e,t,s,i,l){const o=(0,n.g2)("Breadcrumbs"),r=(0,n.g2)("RolesTable");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(o,{main:"Umum",title:a.$route.meta.title},null,8,["title"]),(0,n.Lk)("div",PG,[(0,n.Lk)("div",EG,[(0,n.bF)(r)])])])}const MG={class:"col-sm-12"},wG={class:"card"},FG={class:"card-body"},XG={class:"d-flex justify-content-end align-items-start mb-3"},xG={class:"d-flex gap-2"},TG={key:0,class:"fa fa-angle-up me-2"},SG={key:1,class:"fa fa-angle-down me-2"},BG={key:0,class:"border p-3 mb-3 rounded filter-section"},AG={class:"row g-3"},_G={class:"col-md-3"},jG={class:"d-flex justify-content-end gap-2 mt-3"},VG={class:"table-responsive signal-table"},IG={class:"table table-hover"},NG={key:0,class:"fa fa-sort-asc"},UG={key:1,class:"fa fa-sort-desc"},RG={key:2,class:"fa fa-sort"},QG={key:0},WG={scope:"row"},KG={class:"btn-group"},OG=["onClick"],$G=["onClick"],GG={key:0},JG={class:"d-flex flex-column flex-md-row justify-content-md-between align-items-center mt-3 px-3 pb-3"},qG={class:"mt-2"},HG={key:0,class:"text-muted"},YG={key:0,class:"d-flex align-items-center flex-wrap gap-2 mt-2"},zG={class:"pagination mb-0"},ZG={key:0,class:"page-item"},aJ={key:1,class:"page-item disabled"},eJ=["onClick"],tJ={key:2,class:"page-item disabled"},sJ={key:3,class:"page-item"};function iJ(a,e,t,s,i,o){const r=(0,n.g2)("add-edit-role-modal");return(0,n.uX)(),(0,n.CE)("div",MG,[i.isModalVisible?((0,n.uX)(),(0,n.Wv)(r,{key:0,"role-to-edit":i.roleBeingEdited,onClose:o.closeModal,onSaveSuccessful:o.handleSaveSuccessful},null,8,["role-to-edit","onClose","onSaveSuccessful"])):(0,n.Q3)("",!0),(0,n.Lk)("div",wG,[e[27]||(e[27]=(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("h3",null,"Daftar Role")],-1)),(0,n.Lk)("div",FG,[(0,n.Lk)("div",XG,[(0,n.Lk)("div",xG,[(0,n.Lk)("button",{class:"btn btn-outline-light txt-dark",onClick:e[0]||(e[0]=(...a)=>o.toggleFilterVisibility&&o.toggleFilterVisibility(...a))},[i.isFilterVisible?((0,n.uX)(),(0,n.CE)("i",TG)):((0,n.uX)(),(0,n.CE)("i",SG)),(0,n.Lk)("span",null,(0,k.v_)(i.isFilterVisible?"Sembunyikan":"Tampilkan")+" Filter",1)]),(0,n.Lk)("button",{class:"btn btn-success",onClick:e[1]||(e[1]=(...a)=>o.openAddModal&&o.openAddModal(...a))},e[10]||(e[10]=[(0,n.Lk)("i",{class:"fa fa-plus me-2"},null,-1),(0,n.Lk)("span",null," Tambah Data",-1)]))])]),i.isFilterVisible?((0,n.uX)(),(0,n.CE)("div",BG,[(0,n.Lk)("div",AG,[(0,n.Lk)("div",_G,[e[11]||(e[11]=(0,n.Lk)("label",{for:"filterRoleName",class:"form-label"},"Nama Role",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterRoleName",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.filters.namalevel=a),placeholder:"Filter berdasarkan nama role"},null,512),[[l.Jo,i.filters.namalevel]])])]),(0,n.Lk)("div",jG,[(0,n.Lk)("button",{class:"btn btn-secondary",onClick:e[3]||(e[3]=(...a)=>o.resetFilters&&o.resetFilters(...a))},e[12]||(e[12]=[(0,n.Lk)("i",{class:"fa fa-refresh me-2"},null,-1),(0,n.Lk)("span",null,"Reset Filter",-1)])),(0,n.Lk)("button",{class:"btn btn-primary",onClick:e[4]||(e[4]=(...a)=>o.applyFilters&&o.applyFilters(...a))},e[13]||(e[13]=[(0,n.Lk)("i",{class:"fa fa-search me-2"},null,-1),(0,n.Lk)("span",null,"Terapkan Filter",-1)]))])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",VG,[(0,n.Lk)("table",IG,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[e[15]||(e[15]=(0,n.Lk)("th",{scope:"col"},"No",-1)),(0,n.Lk)("th",{scope:"col",onClick:e[5]||(e[5]=a=>o.sortBy("namalevel"))},[e[14]||(e[14]=(0,n.eW)(" Nama Role ")),"namalevel"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",NG)):"namalevel"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",UG)):((0,n.uX)(),(0,n.CE)("i",RG))]),e[16]||(e[16]=(0,n.Lk)("th",{scope:"col"},"Aksi",-1))])]),(0,n.Lk)("tbody",null,[i.isLoading?((0,n.uX)(),(0,n.CE)("tr",QG,e[17]||(e[17]=[(0,n.Lk)("td",{colspan:"5",class:"text-center p-5"},[(0,n.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,n.Lk)("span",{class:"visually-hidden"},"Loading...")]),(0,n.Lk)("p",{class:"mt-2"},"Memuat data...")],-1)]))):((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.roleList,(a,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:a.idlevel},[(0,n.Lk)("th",WG,(0,k.v_)((i.currentPage-1)*i.perPage+t+1),1),(0,n.Lk)("td",null,(0,k.v_)(a.namalevel||"-"),1),(0,n.Lk)("td",null,[(0,n.Lk)("div",KG,[(0,n.Lk)("button",{class:"btn btn-primary btn-sm",onClick:e=>o.openEditModal(a),title:"Ubah Data"},e[18]||(e[18]=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)]),8,OG),(0,n.Lk)("button",{class:"btn btn-danger sweet-11 btn-sm",type:"button",onClick:e=>o.advancedDeleteAlert(a.idlevel),title:"Hapus Data"},e[19]||(e[19]=[(0,n.Lk)("i",{class:"fa fa-trash"},null,-1)]),8,$G)])])]))),128)),0===o.paginatedRoles.length?((0,n.uX)(),(0,n.CE)("tr",GG,e[20]||(e[20]=[(0,n.Lk)("td",{colspan:"5",class:"text-center"},"Tidak ada data yang cocok atau tersedia.",-1)]))):(0,n.Q3)("",!0)],64))])]),(0,n.Lk)("div",JG,[(0,n.Lk)("div",qG,[i.totalItems>0?((0,n.uX)(),(0,n.CE)("span",HG,[e[21]||(e[21]=(0,n.eW)(" Menampilkan ")),(0,n.Lk)("strong",null,(0,k.v_)((i.currentPage-1)*i.perPage+1),1),e[22]||(e[22]=(0,n.eW)(" - ")),(0,n.Lk)("strong",null,(0,k.v_)(Math.min(i.currentPage*i.perPage,i.totalItems)),1),e[23]||(e[23]=(0,n.eW)(" dari ")),(0,n.Lk)("strong",null,(0,k.v_)(i.totalItems),1),e[24]||(e[24]=(0,n.eW)(" data "))])):(0,n.Q3)("",!0)]),-1!==i.perPage&&o.totalPages>1?((0,n.uX)(),(0,n.CE)("nav",YG,[(0,n.Lk)("ul",zG,[(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[6]||(e[6]=a=>o.changePage(i.currentPage-1))},"Prev")],2),o.pageNumbers[0]>1?((0,n.uX)(),(0,n.CE)("li",ZG,[(0,n.Lk)("button",{class:"page-link",onClick:e[7]||(e[7]=a=>o.changePage(1))},"1")])):(0,n.Q3)("",!0),o.pageNumbers[0]>2?((0,n.uX)(),(0,n.CE)("li",aJ,e[25]||(e[25]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.pageNumbers,a=>((0,n.uX)(),(0,n.CE)("li",{key:a,class:(0,k.C4)(["page-item",{active:i.currentPage===a}])},[(0,n.Lk)("button",{class:"page-link",onClick:e=>o.changePage(a)},(0,k.v_)(a),9,eJ)],2))),128)),o.pageNumbers.slice(-1)[0]<o.totalPages-1?((0,n.uX)(),(0,n.CE)("li",tJ,e[26]||(e[26]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),o.pageNumbers.slice(-1)[0]<o.totalPages?((0,n.uX)(),(0,n.CE)("li",sJ,[(0,n.Lk)("button",{class:"page-link",onClick:e[8]||(e[8]=a=>o.changePage(o.totalPages))},(0,k.v_)(o.totalPages),1)])):(0,n.Q3)("",!0),(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:i.currentPage===o.totalPages}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[9]||(e[9]=a=>o.changePage(i.currentPage+1))},"Next")],2)])])):(0,n.Q3)("",!0)])])])])}const lJ={class:"modal-header"},nJ={class:"modal-title"},oJ={class:"modal-body"},rJ={class:"col mb-3"},cJ={key:0,class:"alert alert-danger mt-3"},dJ={class:"modal-footer"},uJ=["disabled"],mJ={key:0,class:"spinner-border spinner-border-sm",role:"status"},kJ={key:1};function hJ(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",{class:"modal-overlay",onClick:e[6]||(e[6]=(...a)=>o.handleOverlayClick&&o.handleOverlayClick(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[5]||(e[5]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",lJ,[(0,n.Lk)("h5",nJ,(0,k.v_)(o.isEditMode?"Edit Role":"Tambah Data Role"),1),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",oJ,[(0,n.Lk)("form",{onSubmit:e[2]||(e[2]=(0,l.D$)((...a)=>o.submitForm&&o.submitForm(...a),["prevent"]))},[(0,n.Lk)("div",rJ,[e[7]||(e[7]=(0,n.Lk)("label",{class:"form-label"},"Nama Role",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=a=>i.formData.namalevel=a),placeholder:"Masukkan nama role",required:""},null,512),[[l.Jo,i.formData.namalevel]])]),i.errorMessage?((0,n.uX)(),(0,n.CE)("div",cJ,(0,k.v_)(i.errorMessage),1)):(0,n.Q3)("",!0)],32)]),(0,n.Lk)("div",dJ,[(0,n.Lk)("button",{type:"button",class:"btn btn-danger",onClick:e[3]||(e[3]=(...a)=>o.closeModal&&o.closeModal(...a))},"Batal"),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[4]||(e[4]=(...a)=>o.submitForm&&o.submitForm(...a)),disabled:i.isLoading},[i.isLoading?((0,n.uX)(),(0,n.CE)("span",mJ)):((0,n.uX)(),(0,n.CE)("span",kJ,"Simpan"))],8,uJ)])])])])}var gJ={name:"editRoleModal",props:{roleToEdit:{type:Object,default:null}},created(){this.toast=(0,ln.dj)()},data(){return{formData:{namalevel:""},isLoading:!1,errorMessage:null}},computed:{isEditMode(){return!!this.roleToEdit}},watch:{roleToEdit:{handler(a){this.formData=a?{...a}:{namalevel:""},this.errorMessage=null},immediate:!0}},methods:{closeModal(){this.$emit("close")},handleOverlayClick(a){a.target===a.currentTarget&&this.closeModal()},async submitForm(){this.errorMessage=null;const{namalevel:a}=this.formData;if(a){this.isLoading=!0;try{this.isEditMode?(await TO(this.roleToEdit.idlevel,this.formData),this.toast.success("Data role berhasil diperbarui",{icon:"fa fa-check"})):(await xO(this.formData),this.toast.success("Data role berhasil ditambah",{icon:"fa fa-check"})),this.$emit("save-successful"),this.closeModal()}catch(e){console.error("Error occurred:",e),this.errorMessage=e.response?.data?.message||"Gagal menyimpan data.",this.toast.error("Gagal menyimpan data role",{icon:"fa fa-times"})}finally{this.isLoading=!1}}else this.errorMessage="Semua field wajib diisi."}}};const pJ=(0,r.A)(gJ,[["render",hJ],["__scopeId","data-v-c20c789e"]]);var bJ=pJ,fJ={components:{AddEditRoleModal:bJ},data(){return{roleList:[],isLoading:!1,sortColumn:"",sortDirection:"asc",isModalVisible:!1,currentPage:1,perPage:10,totalItems:0,roleBeingEdited:null,isFilterVisible:!1,filters:{namalevel:""}}},computed:{paginatedRoles(){return this.roleList},totalPages(){return this.perPage<=0?1:Math.ceil(this.totalItems/this.perPage)},pageNumbers(){const a=[],e=5;let t=Math.max(1,this.currentPage-Math.floor(e/2)),s=t+e-1;s>this.totalPages&&(s=this.totalPages,t=Math.max(1,s-e+1));for(let i=t;i<=s;i++)a.push(i);return a}},watch:{currentPage(){this.fetchRoles()},perPage(){this.currentPage=1,this.fetchRoles()}},async mounted(){this.toast=(0,ln.dj)(),await this.fetchRoles()},methods:{openAddModal(){this.roleBeingEdited=null,this.isModalVisible=!0},openEditModal(a){this.roleBeingEdited={...a},this.isModalVisible=!0},closeModal(){this.isModalVisible=!1,this.roleBeingEdited=null},handleSaveSuccessful(){this.closeModal(),this.fetchRoles()},async fetchRoles(){this.isLoading=!0;try{const a={act:"roles",page:this.currentPage,limit:this.perPage,order:this.sortColumn?`${this.sortColumn} ${this.sortDirection}`:"",group:""},e=Object.entries(this.filters).filter(([,a])=>""!==a&&null!==a).map(([a,e])=>`${a}=${e}`);e.length>0?a.filter=e.join(","):a.filter="";const t=await XO(a),s=t.data?.data||t.data?.[0]?.data||[],i=t.data?.meta?.pagination||t.data?.[0]?.meta?.pagination||{};this.roleList=s,this.totalItems=i.total||s.length}catch(a){console.error("Error fetching role:",a),this.toast.error("Gagal memuat data role",{icon:"fa fa-times"})}finally{this.isLoading=!1}},advancedDeleteAlert(a){this.$swal({title:"Hapus Data Role",text:"Apakah Anda yakin ingin menghapus data ini?",icon:"warning",showCancelButton:!0,confirmButtonText:'<i class="fa fa-check me-2"></i> Hapus!',confirmButtonColor:"#d33",cancelButtonText:'<i class="fa fa-times me-2"></i> Batal',cancelButtonColor:"#efefef",reverseButtons:!0}).then(async e=>{if(e.isConfirmed)try{await SO(a),1===this.roleList.length&&this.currentPage>1?this.currentPage--:this.fetchRoles(),this.toast.success("Data role berhasil dihapus",{icon:"fa fa-check"})}catch(t){this.toast.error("Gagal menghapus data role",{icon:"fa fa-times"})}})},sortBy(a){this.sortColumn===a?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=a,this.sortDirection="asc"),this.fetchRoles()},changePage(a){a>=1&&a<=this.totalPages&&(this.currentPage=a)},toggleFilterVisibility(){this.isFilterVisible=!this.isFilterVisible},applyFilters(){this.currentPage=1,this.fetchRoles()},resetFilters(){this.filters.namalevel="",this.sortColumn="",this.sortDirection="desc",this.currentPage=1,this.fetchRoles()}}};const LJ=(0,r.A)(fJ,[["render",iJ],["__scopeId","data-v-8dbd1274"]]);var yJ=LJ,vJ={components:{RolesTable:yJ}};const CJ=(0,r.A)(vJ,[["render",DG]]);var PJ=CJ;const EJ={class:"container-fluid"},DJ={class:"row widget-grid"};function MJ(a,e,t,s,i,l){const o=(0,n.g2)("Breadcrumbs"),r=(0,n.g2)("ReligionsTable");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(o,{main:"Kependudukan",title:a.$route.meta.title},null,8,["title"]),(0,n.Lk)("div",EJ,[(0,n.Lk)("div",DJ,[(0,n.bF)(r)])])])}const wJ={class:"col-sm-12"},FJ={class:"card"},XJ={class:"card-body"},xJ={class:"d-flex justify-content-end align-items-start mb-3"},TJ={class:"d-flex gap-2"},SJ={key:0,class:"fa fa-angle-up me-2"},BJ={key:1,class:"fa fa-angle-down me-2"},AJ={key:0,class:"border p-3 mb-3 rounded filter-section"},_J={class:"row g-2"},jJ={class:"col-md-4"},VJ={class:"d-flex justify-content-end gap-2 mt-3"},IJ={class:"table-responsive signal-table"},NJ={class:"table table-hover"},UJ={key:0,class:"fa fa-sort-asc"},RJ={key:1,class:"fa fa-sort-desc"},QJ={key:2,class:"fa fa-sort"},WJ={scope:"row"},KJ={class:"btn-group"},OJ=["onClick"],$J=["onClick"],GJ={key:0},JJ={class:"d-flex flex-column flex-md-row justify-content-md-between align-items-center mt-3 px-3 pb-3"},qJ={class:"mt-2"},HJ={key:0,class:"text-muted"},YJ={key:0,class:"d-flex align-items-center flex-wrap gap-2 mt-2"},zJ={class:"pagination mb-0"},ZJ={key:0,class:"page-item"},aq={key:1,class:"page-item disabled"},eq=["onClick"],tq={key:2,class:"page-item disabled"},sq={key:3,class:"page-item"};function iq(a,e,t,s,i,o){const r=(0,n.g2)("add-edit-religion-modal");return(0,n.uX)(),(0,n.CE)("div",wJ,[i.isModalVisible?((0,n.uX)(),(0,n.Wv)(r,{key:0,"religion-to-edit":i.religionBeingEdited,onClose:o.closeModal,onSaveSuccessful:o.handleSaveSuccessful},null,8,["religion-to-edit","onClose","onSaveSuccessful"])):(0,n.Q3)("",!0),(0,n.Lk)("div",FJ,[e[26]||(e[26]=(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("h3",null,"Daftar Agama")],-1)),(0,n.Lk)("div",XJ,[(0,n.Lk)("div",xJ,[(0,n.Lk)("div",TJ,[(0,n.Lk)("button",{class:"btn btn-outline-light txt-dark",onClick:e[0]||(e[0]=(...a)=>o.toggleFilterVisibility&&o.toggleFilterVisibility(...a))},[i.isFilterVisible?((0,n.uX)(),(0,n.CE)("i",SJ)):((0,n.uX)(),(0,n.CE)("i",BJ)),(0,n.Lk)("span",null,(0,k.v_)(i.isFilterVisible?"Sembunyikan":"Tampilkan")+" Filter",1)]),(0,n.Lk)("button",{class:"btn btn-success",onClick:e[1]||(e[1]=(...a)=>o.openAddModal&&o.openAddModal(...a))},e[10]||(e[10]=[(0,n.Lk)("i",{class:"fa fa-plus me-2"},null,-1),(0,n.Lk)("span",null," Tambah Data",-1)]))])]),i.isFilterVisible?((0,n.uX)(),(0,n.CE)("div",AJ,[(0,n.Lk)("div",_J,[(0,n.Lk)("div",jJ,[e[11]||(e[11]=(0,n.Lk)("label",{for:"filterName",class:"form-label"},"Nama Agama",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterName",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.filters.namaagama=a),placeholder:"Filter berdasarkan nama agama"},null,512),[[l.Jo,i.filters.namaagama]])])]),(0,n.Lk)("div",VJ,[(0,n.Lk)("button",{class:"btn btn-secondary",onClick:e[3]||(e[3]=(...a)=>o.resetFilters&&o.resetFilters(...a))},e[12]||(e[12]=[(0,n.Lk)("i",{class:"fa fa-refresh me-2"},null,-1),(0,n.Lk)("span",null,"Reset Filter",-1)])),(0,n.Lk)("button",{class:"btn btn-primary",onClick:e[4]||(e[4]=(...a)=>o.applyFilters&&o.applyFilters(...a))},e[13]||(e[13]=[(0,n.Lk)("i",{class:"fa fa-search me-2"},null,-1),(0,n.Lk)("span",null,"Terapkan Filter",-1)]))])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",IJ,[(0,n.Lk)("table",NJ,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[e[15]||(e[15]=(0,n.Lk)("th",{scope:"col"},"No",-1)),(0,n.Lk)("th",{scope:"col",onClick:e[5]||(e[5]=a=>o.sortBy("namaagama"))},[e[14]||(e[14]=(0,n.eW)(" Nama Agama ")),"namaagama"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",UJ)):"namaagama"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",RJ)):((0,n.uX)(),(0,n.CE)("i",QJ))]),e[16]||(e[16]=(0,n.Lk)("th",{scope:"col"},"Aksi",-1))])]),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.paginatedReligions,(a,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:a.idagama},[(0,n.Lk)("th",WJ,(0,k.v_)((i.currentPage-1)*i.perPage+t+1),1),(0,n.Lk)("td",null,(0,k.v_)(a.namaagama),1),(0,n.Lk)("td",null,[(0,n.Lk)("div",KJ,[(0,n.Lk)("button",{class:"btn btn-primary btn-sm",onClick:e=>o.openEditModal(a)},e[17]||(e[17]=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)]),8,OJ),(0,n.Lk)("button",{class:"btn btn-danger sweet-11 btn-sm",type:"button",onClick:e=>o.advancedDeleteAlert(a.idagama)},e[18]||(e[18]=[(0,n.Lk)("i",{class:"fa fa-trash"},null,-1)]),8,$J)])])]))),128)),0===o.paginatedReligions.length?((0,n.uX)(),(0,n.CE)("tr",GJ,e[19]||(e[19]=[(0,n.Lk)("td",{colspan:"5",class:"text-center"},"Tidak ada data yang cocok atau tersedia.",-1)]))):(0,n.Q3)("",!0)])]),(0,n.Lk)("div",JJ,[(0,n.Lk)("div",qJ,[i.totalItems>0?((0,n.uX)(),(0,n.CE)("span",HJ,[e[20]||(e[20]=(0,n.eW)(" Menampilkan ")),(0,n.Lk)("strong",null,(0,k.v_)((i.currentPage-1)*i.perPage+1),1),e[21]||(e[21]=(0,n.eW)(" - ")),(0,n.Lk)("strong",null,(0,k.v_)(Math.min(i.currentPage*i.perPage,i.totalItems)),1),e[22]||(e[22]=(0,n.eW)(" dari ")),(0,n.Lk)("strong",null,(0,k.v_)(i.totalItems),1),e[23]||(e[23]=(0,n.eW)(" data "))])):(0,n.Q3)("",!0)]),-1!==i.perPage&&o.totalPages>1?((0,n.uX)(),(0,n.CE)("nav",YJ,[(0,n.Lk)("ul",zJ,[(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[6]||(e[6]=a=>o.changePage(i.currentPage-1))},"Prev")],2),o.pageNumbers[0]>1?((0,n.uX)(),(0,n.CE)("li",ZJ,[(0,n.Lk)("button",{class:"page-link",onClick:e[7]||(e[7]=a=>o.changePage(1))},"1")])):(0,n.Q3)("",!0),o.pageNumbers[0]>2?((0,n.uX)(),(0,n.CE)("li",aq,e[24]||(e[24]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.pageNumbers,a=>((0,n.uX)(),(0,n.CE)("li",{key:a,class:(0,k.C4)(["page-item",{active:i.currentPage===a}])},[(0,n.Lk)("button",{class:"page-link",onClick:e=>o.changePage(a)},(0,k.v_)(a),9,eq)],2))),128)),o.pageNumbers.slice(-1)[0]<o.totalPages-1?((0,n.uX)(),(0,n.CE)("li",tq,e[25]||(e[25]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),o.pageNumbers.slice(-1)[0]<o.totalPages?((0,n.uX)(),(0,n.CE)("li",sq,[(0,n.Lk)("button",{class:"page-link",onClick:e[8]||(e[8]=a=>o.changePage(o.totalPages))},(0,k.v_)(o.totalPages),1)])):(0,n.Q3)("",!0),(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:i.currentPage===o.totalPages}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[9]||(e[9]=a=>o.changePage(i.currentPage+1))},"Next")],2)])])):(0,n.Q3)("",!0)])])])])}const lq={class:"modal-header"},nq={class:"modal-title"},oq={class:"modal-body"},rq={class:"mb-3"},cq={key:0,class:"alert alert-danger mt-3"},dq={class:"modal-footer"},uq=["disabled"],mq={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},kq={key:1};function hq(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",{class:"modal-overlay",onClick:e[6]||(e[6]=(...a)=>o.handleOverlayClick&&o.handleOverlayClick(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[5]||(e[5]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",lq,[(0,n.Lk)("h5",nq,(0,k.v_)(o.isEditMode?"Edit Data Agama":"Tambah data Agama"),1),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",oq,[(0,n.Lk)("form",{onSubmit:e[2]||(e[2]=(0,l.D$)((...a)=>o.submitForm&&o.submitForm(...a),["prevent"]))},[(0,n.Lk)("div",rq,[e[7]||(e[7]=(0,n.Lk)("label",{for:"namaagama",class:"form-label"},"Nama Agama",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"namaAgama",placeholder:"Masukkan nama agama","onUpdate:modelValue":e[1]||(e[1]=a=>i.formData.namaagama=a),required:""},null,512),[[l.Jo,i.formData.namaagama]])]),i.errorMessage?((0,n.uX)(),(0,n.CE)("div",cq,(0,k.v_)(i.errorMessage),1)):(0,n.Q3)("",!0)],32)]),(0,n.Lk)("div",dq,[(0,n.Lk)("button",{type:"button",class:"btn btn-danger",onClick:e[3]||(e[3]=(...a)=>o.closeModal&&o.closeModal(...a))},"Batal"),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[4]||(e[4]=(...a)=>o.submitForm&&o.submitForm(...a)),disabled:i.isLoading},[i.isLoading?((0,n.uX)(),(0,n.CE)("span",mq)):((0,n.uX)(),(0,n.CE)("span",kq,"Simpan"))],8,uq)])])])}var gq={name:"editReligionModal",props:{religionToEdit:{type:Object,default:null}},created(){this.toast=(0,ln.dj)()},data(){return{formData:{namaagama:""},isLoading:!1,errorMessage:null}},computed:{isEditMode(){return!!this.religionToEdit}},watch:{religionToEdit:{handler(a){this.formData=a?{...a}:{namaagama:""},this.errorMessage=null},immediate:!0}},methods:{closeModal(){this.$emit("close")},handleOverlayClick(a){a.target===a.currentTarget&&this.closeModal()},async submitForm(){this.errorMessage=null;const{namaagama:a}=this.formData;if(a){this.isLoading=!0;try{this.isEditMode?(await lh(this.religionToEdit.idagama,this.formData),this.toast.success("Data agama berhasil diperbarui",{icon:"fa fa-check"})):(await ih(this.formData),this.toast.success("Data agama berhasil ditambah",{icon:"fa fa-check"})),this.$emit("save-successful"),this.closeModal()}catch(e){console.error("Error occurred:",e),this.errorMessage=e.response?.data?.message||"Gagal menyimpan data.",this.toast.error("Gagal menyimpan data agama",{icon:"fa fa-times"})}finally{this.isLoading=!1}}else this.errorMessage="Semua field wajib diisi."}}};const pq=(0,r.A)(gq,[["render",hq],["__scopeId","data-v-4de2e57c"]]);var bq=pq,fq={components:{AddEditReligionModal:bq},data(){return{religions:[],sortColumn:"",sortDirection:"asc",isModalVisible:!1,currentPage:1,perPage:20,totalItems:0,religionBeingEdited:null,jumpPage:1,isFilterVisible:!1,filters:{religion_name:""}}},computed:{paginatedReligions(){return this.religions},totalPages(){return this.perPage<=0?1:Math.ceil(this.totalItems/this.perPage)},pageNumbers(){const a=[],e=5;let t=Math.max(1,this.currentPage-Math.floor(e/2)),s=t+e-1;s>this.totalPages&&(s=this.totalPages,t=Math.max(1,s-e+1));for(let i=t;i<=s;i++)a.push(i);return a}},watch:{currentPage(){this.fetchReligions(),this.jumpPage=this.currentPage},perPage(){this.currentPage=1,this.fetchReligions()}},async mounted(){this.toast=(0,ln.dj)(),await this.fetchReligions()},methods:{openAddModal(){this.religionBeingEdited=null,this.isModalVisible=!0},openEditModal(a){this.religionBeingEdited={...a},this.isModalVisible=!0},closeModal(){this.isModalVisible=!1,this.religionBeingEdited=null},handleSaveSuccessful(){this.closeModal(),this.fetchReligions()},async fetchReligions(){try{const a={act:"agama",page:this.currentPage,limit:this.perPage,order:this.sortColumn?`${this.sortColumn} ${this.sortDirection}`:"",group:""},e=Object.entries(this.filters).filter(([a,e])=>""!==e).map(([a,e])=>`${a}=${e}`);e.length>0?a.filter=e.join(","):a.filter="";const t=await sh(a),s=t.data?.data||t.data?.[0]?.data||[],i=t.data?.[0]?.meta?.pagination||{};this.religions=s,this.totalItems=i.total||s.length}catch(a){console.error("Error fetching agama:",a),this.$swal({icon:"error",title:"Oops...",text:"Gagal memuat data agama. Silakan coba lagi nanti."})}},advancedDeleteAlert(a){this.$swal({title:"Hapus Data Agama",text:"Apakah Anda yakin ingin menghapus data ini?",icon:"warning",showCancelButton:!0,confirmButtonText:'<i class="fa fa-check me-2"></i> Hapus!',confirmButtonColor:"#d33",cancelButtonText:'<i class="fa fa-times me-2"></i> Batal',cancelButtonColor:"#efefef",reverseButtons:!0}).then(async e=>{if(e.isConfirmed)try{await nh(a),1===this.religions.length&&this.currentPage>1?this.currentPage--:this.fetchReligions(),this.toast.success("Data agama berhasil dihapus",{icon:"fa fa-check"})}catch(t){this.toast.error("Gagal menghapus data agama",{icon:"fa fa-times"})}})},sortBy(a){this.sortColumn===a?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=a,this.sortDirection="asc"),this.fetchReligions()},changePage(a){a>=1&&a<=this.totalPages&&(this.currentPage=a)},toggleFilterVisibility(){this.isFilterVisible=!this.isFilterVisible},applyFilters(){this.currentPage=1,this.fetchReligions()},resetFilters(){this.filters.namaagama="",this.sortColumn="",this.sortDirection="asc",this.currentPage=1,this.fetchReligions()}}};const Lq=(0,r.A)(fq,[["render",iq],["__scopeId","data-v-690d6b19"]]);var yq=Lq,vq={components:{ReligionsTable:yq}};const Cq=(0,r.A)(vq,[["render",MJ]]);var Pq=Cq;const Eq={class:"container-fluid"},Dq={class:"row widget-grid"};function Mq(a,e,t,s,i,l){const o=(0,n.g2)("Breadcrumbs"),r=(0,n.g2)("BloodTypesTable");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(o,{main:"Kependudukan",title:a.$route.meta.title},null,8,["title"]),(0,n.Lk)("div",Eq,[(0,n.Lk)("div",Dq,[(0,n.bF)(r)])])])}const wq={class:"col-sm-12"},Fq={class:"card"},Xq={class:"card-body"},xq={class:"d-flex justify-content-end align-items-start mb-3"},Tq={class:"d-flex gap-2"},Sq={key:0,class:"fa fa-angle-up me-2"},Bq={key:1,class:"fa fa-angle-down me-2"},Aq={key:0,class:"border p-3 mb-3 rounded filter-section"},_q={class:"row g-2"},jq={class:"col-md-4"},Vq={class:"d-flex justify-content-end gap-2 mt-3"},Iq={class:"table-responsive signal-table"},Nq={class:"table table-hover"},Uq={key:0,class:"fa fa-sort-asc"},Rq={key:1,class:"fa fa-sort-desc"},Qq={key:2,class:"fa fa-sort"},Wq={scope:"row"},Kq={class:"btn-group"},Oq=["onClick"],$q=["onClick"],Gq={key:0},Jq={class:"d-flex flex-column flex-md-row justify-content-md-between align-items-center mt-3 px-3 pb-3"},qq={class:"mt-2"},Hq={key:0,class:"text-muted"},Yq={key:0,class:"d-flex align-items-center flex-wrap gap-2 mt-2"},zq={class:"pagination mb-0"},Zq={key:0,class:"page-item"},aH={key:1,class:"page-item disabled"},eH=["onClick"],tH={key:2,class:"page-item disabled"},sH={key:3,class:"page-item"};function iH(a,e,t,s,i,o){const r=(0,n.g2)("add-edit-bloodType-modal");return(0,n.uX)(),(0,n.CE)("div",wq,[i.isModalVisible?((0,n.uX)(),(0,n.Wv)(r,{key:0,"bloodType-to-edit":i.bloodTypeBeingEdited,onClose:o.closeModal,onSaveSuccessful:o.handleSaveSuccessful},null,8,["bloodType-to-edit","onClose","onSaveSuccessful"])):(0,n.Q3)("",!0),(0,n.Lk)("div",Fq,[e[26]||(e[26]=(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("h3",null,"Daftar Golongan Darah")],-1)),(0,n.Lk)("div",Xq,[(0,n.Lk)("div",xq,[(0,n.Lk)("div",Tq,[(0,n.Lk)("button",{class:"btn btn-outline-light txt-dark",onClick:e[0]||(e[0]=(...a)=>o.toggleFilterVisibility&&o.toggleFilterVisibility(...a))},[i.isFilterVisible?((0,n.uX)(),(0,n.CE)("i",Sq)):((0,n.uX)(),(0,n.CE)("i",Bq)),(0,n.Lk)("span",null,(0,k.v_)(i.isFilterVisible?"Sembunyikan":"Tampilkan")+" Filter",1)]),(0,n.Lk)("button",{class:"btn btn-success",onClick:e[1]||(e[1]=(...a)=>o.openAddModal&&o.openAddModal(...a))},e[10]||(e[10]=[(0,n.Lk)("i",{class:"fa fa-plus me-2"},null,-1),(0,n.Lk)("span",null," Tambah Data",-1)]))])]),i.isFilterVisible?((0,n.uX)(),(0,n.CE)("div",Aq,[(0,n.Lk)("div",_q,[(0,n.Lk)("div",jq,[e[11]||(e[11]=(0,n.Lk)("label",{for:"filterName",class:"form-label"},"Golongan Darah",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterName",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.filters.namagolongandarah=a),placeholder:"Filter berdasarkan golongan darah"},null,512),[[l.Jo,i.filters.namagolongandarah]])])]),(0,n.Lk)("div",Vq,[(0,n.Lk)("button",{class:"btn btn-secondary",onClick:e[3]||(e[3]=(...a)=>o.resetFilters&&o.resetFilters(...a))},e[12]||(e[12]=[(0,n.Lk)("i",{class:"fa fa-refresh me-2"},null,-1),(0,n.Lk)("span",null,"Reset Filter",-1)])),(0,n.Lk)("button",{class:"btn btn-primary",onClick:e[4]||(e[4]=(...a)=>o.applyFilters&&o.applyFilters(...a))},e[13]||(e[13]=[(0,n.Lk)("i",{class:"fa fa-search me-2"},null,-1),(0,n.Lk)("span",null,"Terapkan Filter",-1)]))])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",Iq,[(0,n.Lk)("table",Nq,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[e[15]||(e[15]=(0,n.Lk)("th",{scope:"col"},"No",-1)),(0,n.Lk)("th",{scope:"col",onClick:e[5]||(e[5]=a=>o.sortBy("namagolongandarah"))},[e[14]||(e[14]=(0,n.eW)(" Golongan Darah ")),"namagolongandarah"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",Uq)):"namagolongandarah"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",Rq)):((0,n.uX)(),(0,n.CE)("i",Qq))]),e[16]||(e[16]=(0,n.Lk)("th",{scope:"col"},"Aksi",-1))])]),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.paginatedBloodTypes,(a,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:a.idgolongandarah},[(0,n.Lk)("th",Wq,(0,k.v_)((i.currentPage-1)*i.perPage+t+1),1),(0,n.Lk)("td",null,(0,k.v_)(a.namagolongandarah),1),(0,n.Lk)("td",null,[(0,n.Lk)("div",Kq,[(0,n.Lk)("button",{class:"btn btn-primary btn-sm",onClick:e=>o.openEditModal(a)},e[17]||(e[17]=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)]),8,Oq),(0,n.Lk)("button",{class:"btn btn-danger sweet-11 btn-sm",type:"button",onClick:e=>o.advancedDeleteAlert(a.idgolongandarah)},e[18]||(e[18]=[(0,n.Lk)("i",{class:"fa fa-trash"},null,-1)]),8,$q)])])]))),128)),0===o.paginatedBloodTypes.length?((0,n.uX)(),(0,n.CE)("tr",Gq,e[19]||(e[19]=[(0,n.Lk)("td",{colspan:"5",class:"text-center"},"Tidak ada data yang cocok atau tersedia.",-1)]))):(0,n.Q3)("",!0)])]),(0,n.Lk)("div",Jq,[(0,n.Lk)("div",qq,[i.totalItems>0?((0,n.uX)(),(0,n.CE)("span",Hq,[e[20]||(e[20]=(0,n.eW)(" Menampilkan ")),(0,n.Lk)("strong",null,(0,k.v_)((i.currentPage-1)*i.perPage+1),1),e[21]||(e[21]=(0,n.eW)(" - ")),(0,n.Lk)("strong",null,(0,k.v_)(Math.min(i.currentPage*i.perPage,i.totalItems)),1),e[22]||(e[22]=(0,n.eW)(" dari ")),(0,n.Lk)("strong",null,(0,k.v_)(i.totalItems),1),e[23]||(e[23]=(0,n.eW)(" data "))])):(0,n.Q3)("",!0)]),-1!==i.perPage&&o.totalPages>1?((0,n.uX)(),(0,n.CE)("nav",Yq,[(0,n.Lk)("ul",zq,[(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[6]||(e[6]=a=>o.changePage(i.currentPage-1))},"Prev")],2),o.pageNumbers[0]>1?((0,n.uX)(),(0,n.CE)("li",Zq,[(0,n.Lk)("button",{class:"page-link",onClick:e[7]||(e[7]=a=>o.changePage(1))},"1")])):(0,n.Q3)("",!0),o.pageNumbers[0]>2?((0,n.uX)(),(0,n.CE)("li",aH,e[24]||(e[24]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.pageNumbers,a=>((0,n.uX)(),(0,n.CE)("li",{key:a,class:(0,k.C4)(["page-item",{active:i.currentPage===a}])},[(0,n.Lk)("button",{class:"page-link",onClick:e=>o.changePage(a)},(0,k.v_)(a),9,eH)],2))),128)),o.pageNumbers.slice(-1)[0]<o.totalPages-1?((0,n.uX)(),(0,n.CE)("li",tH,e[25]||(e[25]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),o.pageNumbers.slice(-1)[0]<o.totalPages?((0,n.uX)(),(0,n.CE)("li",sH,[(0,n.Lk)("button",{class:"page-link",onClick:e[8]||(e[8]=a=>o.changePage(o.totalPages))},(0,k.v_)(o.totalPages),1)])):(0,n.Q3)("",!0),(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:i.currentPage===o.totalPages}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[9]||(e[9]=a=>o.changePage(i.currentPage+1))},"Next")],2)])])):(0,n.Q3)("",!0)])])])])}const lH={class:"modal-header"},nH={class:"modal-title"},oH={class:"modal-body"},rH={class:"mb-3"},cH={key:0,class:"alert alert-danger mt-3"},dH={class:"modal-footer"},uH=["disabled"],mH={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},kH={key:1};function hH(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",{class:"modal-overlay",onClick:e[6]||(e[6]=(...a)=>o.handleOverlayClick&&o.handleOverlayClick(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[5]||(e[5]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",lH,[(0,n.Lk)("h5",nH,(0,k.v_)(o.isEditMode?"Edit Data Golongan Darah":"Tambah Data Golongan Darah"),1),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",oH,[(0,n.Lk)("form",{onSubmit:e[2]||(e[2]=(0,l.D$)((...a)=>o.submitForm&&o.submitForm(...a),["prevent"]))},[(0,n.Lk)("div",rH,[e[7]||(e[7]=(0,n.Lk)("label",{for:"namagolongandarah",class:"form-label"},"Nama Golongan Darah",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"namaGolonganDarah",placeholder:"Masukkan nama golongan darah","onUpdate:modelValue":e[1]||(e[1]=a=>i.formData.namagolongandarah=a),required:""},null,512),[[l.Jo,i.formData.namagolongandarah]])]),i.errorMessage?((0,n.uX)(),(0,n.CE)("div",cH,(0,k.v_)(i.errorMessage),1)):(0,n.Q3)("",!0)],32)]),(0,n.Lk)("div",dH,[(0,n.Lk)("button",{type:"button",class:"btn btn-danger",onClick:e[3]||(e[3]=(...a)=>o.closeModal&&o.closeModal(...a))},"Batal"),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[4]||(e[4]=(...a)=>o.submitForm&&o.submitForm(...a)),disabled:i.isLoading},[i.isLoading?((0,n.uX)(),(0,n.CE)("span",mH)):((0,n.uX)(),(0,n.CE)("span",kH,"Simpan"))],8,uH)])])])}var gH={name:"editBloodTypeModal",props:{bloodTypeToEdit:{type:Object,default:null}},created(){this.toast=(0,ln.dj)()},data(){return{formData:{namagolongandarah:""},isLoading:!1,errorMessage:null}},computed:{isEditMode(){return!!this.bloodTypeToEdit}},watch:{bloodTypeToEdit:{handler(a){this.formData=a?{...a}:{namagolongandarah:""},this.errorMessage=null},immediate:!0}},methods:{closeModal(){this.$emit("close")},handleOverlayClick(a){a.target===a.currentTarget&&this.closeModal()},async submitForm(){this.errorMessage=null;const{namagolongandarah:a}=this.formData;if(a){this.isLoading=!0;try{this.isEditMode?(await ch(this.bloodTypeToEdit.idgolongandarah,this.formData),this.toast.success("Data golongan darah berhasil diperbarui",{icon:"fa fa-check"})):(await rh(this.formData),this.toast.success("Data golongan darah berhasil ditambah",{icon:"fa fa-check"})),this.$emit("save-successful"),this.closeModal()}catch(e){console.error("Error occurred:",e),this.errorMessage=e.response?.data?.message||"Gagal menyimpan data.",this.toast.error("Gagal menyimpan data golongan darah",{icon:"fa fa-times"})}finally{this.isLoading=!1}}else this.errorMessage="Semua field wajib diisi."}}};const pH=(0,r.A)(gH,[["render",hH],["__scopeId","data-v-f13b28dc"]]);var bH=pH,fH={components:{AddEditBloodTypeModal:bH},data(){return{bloodTypes:[],sortColumn:"",sortDirection:"asc",isModalVisible:!1,currentPage:1,perPage:20,totalItems:0,bloodTypeBeingEdited:null,jumpPage:1,isFilterVisible:!1,filters:{bloodType_name:""}}},computed:{paginatedBloodTypes(){return this.bloodTypes},totalPages(){return this.perPage<=0?1:Math.ceil(this.totalItems/this.perPage)},pageNumbers(){const a=[],e=5;let t=Math.max(1,this.currentPage-Math.floor(e/2)),s=t+e-1;s>this.totalPages&&(s=this.totalPages,t=Math.max(1,s-e+1));for(let i=t;i<=s;i++)a.push(i);return a}},watch:{currentPage(){this.fetchBloodTypes(),this.jumpPage=this.currentPage},perPage(){this.currentPage=1,this.fetchBloodTypes()}},async mounted(){this.toast=(0,ln.dj)(),await this.fetchBloodTypes()},methods:{openAddModal(){this.bloodTypeBeingEdited=null,this.isModalVisible=!0},openEditModal(a){this.bloodTypeBeingEdited={...a},this.isModalVisible=!0},closeModal(){this.isModalVisible=!1,this.bloodTypeBeingEdited=null},handleSaveSuccessful(){this.closeModal(),this.fetchBloodTypes()},async fetchBloodTypes(){try{const a={act:"golongan-darah",page:this.currentPage,limit:this.perPage,order:this.sortColumn?`${this.sortColumn} ${this.sortDirection}`:"",group:""},e=Object.entries(this.filters).filter(([a,e])=>""!==e).map(([a,e])=>`${a}=${e}`);e.length>0?a.filter=e.join(","):a.filter="";const t=await oh(a),s=t.data?.data||t.data?.[0]?.data||[],i=t.data?.[0]?.meta?.pagination||{};this.bloodTypes=s,this.totalItems=i.total||s.length}catch(a){console.error("Error fetching golongan darah:",a),this.$swal({icon:"error",title:"Oops...",text:"Gagal memuat data golongan darah. Silakan coba lagi nanti."})}},advancedDeleteAlert(a){this.$swal({title:"Hapus Data Golongan Darah",text:"Apakah Anda yakin ingin menghapus data ini?",icon:"warning",showCancelButton:!0,confirmButtonText:'<i class="fa fa-check me-2"></i> Hapus!',confirmButtonColor:"#d33",cancelButtonText:'<i class="fa fa-times me-2"></i> Batal',cancelButtonColor:"#efefef",reverseButtons:!0}).then(async e=>{if(e.isConfirmed)try{await dh(a),1===this.bloodTypes.length&&this.currentPage>1?this.currentPage--:this.fetchBloodTypes(),this.toast.success("Data golongan darah berhasil dihapus",{icon:"fa fa-check"})}catch(t){this.toast.error("Gagal menghapus data golongan darah",{icon:"fa fa-times"})}})},sortBy(a){this.sortColumn===a?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=a,this.sortDirection="asc"),this.fetchBloodTypes()},changePage(a){a>=1&&a<=this.totalPages&&(this.currentPage=a)},toggleFilterVisibility(){this.isFilterVisible=!this.isFilterVisible},applyFilters(){this.currentPage=1,this.fetchBloodTypes()},resetFilters(){this.filters.namagolongandarah="",this.sortColumn="",this.sortDirection="asc",this.currentPage=1,this.fetchBloodTypes()}}};const LH=(0,r.A)(fH,[["render",iH],["__scopeId","data-v-845f3050"]]);var yH=LH,vH={components:{BloodTypesTable:yH}};const CH=(0,r.A)(vH,[["render",Mq]]);var PH=CH;const EH={class:"container-fluid"},DH={class:"row widget-grid"};function MH(a,e,t,s,i,l){const o=(0,n.g2)("Breadcrumbs"),r=(0,n.g2)("FamilyRelationshipsTable");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(o,{main:"Kependudukan",title:a.$route.meta.title},null,8,["title"]),(0,n.Lk)("div",EH,[(0,n.Lk)("div",DH,[(0,n.bF)(r)])])])}const wH={class:"col-sm-12"},FH={class:"card"},XH={class:"card-body"},xH={class:"d-flex justify-content-end align-items-start mb-3"},TH={class:"d-flex gap-2"},SH={key:0,class:"fa fa-angle-up me-2"},BH={key:1,class:"fa fa-angle-down me-2"},AH={key:0,class:"border p-3 mb-3 rounded filter-section"},_H={class:"row g-2"},jH={class:"col-md-4"},VH={class:"d-flex justify-content-end gap-2 mt-3"},IH={class:"table-responsive signal-table"},NH={class:"table table-hover"},UH={key:0,class:"fa fa-sort-asc"},RH={key:1,class:"fa fa-sort-desc"},QH={key:2,class:"fa fa-sort"},WH={scope:"row"},KH={class:"btn-group"},OH=["onClick"],$H=["onClick"],GH={key:0},JH={class:"d-flex flex-column flex-md-row justify-content-md-between align-items-center mt-3 px-3 pb-3"},qH={class:"mt-2"},HH={key:0,class:"text-muted"},YH={key:0,class:"d-flex align-items-center flex-wrap gap-2 mt-2"},zH={class:"pagination mb-0"},ZH={key:0,class:"page-item"},aY={key:1,class:"page-item disabled"},eY=["onClick"],tY={key:2,class:"page-item disabled"},sY={key:3,class:"page-item"};function iY(a,e,t,s,i,o){const r=(0,n.g2)("add-edit-familyRelationship-modal");return(0,n.uX)(),(0,n.CE)("div",wH,[i.isModalVisible?((0,n.uX)(),(0,n.Wv)(r,{key:0,"familyRelationship-to-edit":i.familyRelationshipBeingEdited,onClose:o.closeModal,onSaveSuccessful:o.handleSaveSuccessful},null,8,["familyRelationship-to-edit","onClose","onSaveSuccessful"])):(0,n.Q3)("",!0),(0,n.Lk)("div",FH,[e[26]||(e[26]=(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("h3",null,"Daftar Nama Hubungan Keluarga")],-1)),(0,n.Lk)("div",XH,[(0,n.Lk)("div",xH,[(0,n.Lk)("div",TH,[(0,n.Lk)("button",{class:"btn btn-outline-light txt-dark",onClick:e[0]||(e[0]=(...a)=>o.toggleFilterVisibility&&o.toggleFilterVisibility(...a))},[i.isFilterVisible?((0,n.uX)(),(0,n.CE)("i",SH)):((0,n.uX)(),(0,n.CE)("i",BH)),(0,n.Lk)("span",null,(0,k.v_)(i.isFilterVisible?"Sembunyikan":"Tampilkan")+" Filter",1)]),(0,n.Lk)("button",{class:"btn btn-success",onClick:e[1]||(e[1]=(...a)=>o.openAddModal&&o.openAddModal(...a))},e[10]||(e[10]=[(0,n.Lk)("i",{class:"fa fa-plus me-2"},null,-1),(0,n.Lk)("span",null," Tambah Data",-1)]))])]),i.isFilterVisible?((0,n.uX)(),(0,n.CE)("div",AH,[(0,n.Lk)("div",_H,[(0,n.Lk)("div",jH,[e[11]||(e[11]=(0,n.Lk)("label",{for:"filterName",class:"form-label"},"Nama Hubungan Keluarga",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterName",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.filters.namahubungankeluarga=a),placeholder:"Filter berdasarkan nama hubungan keluarga"},null,512),[[l.Jo,i.filters.namahubungankeluarga]])])]),(0,n.Lk)("div",VH,[(0,n.Lk)("button",{class:"btn btn-secondary",onClick:e[3]||(e[3]=(...a)=>o.resetFilters&&o.resetFilters(...a))},e[12]||(e[12]=[(0,n.Lk)("i",{class:"fa fa-refresh me-2"},null,-1),(0,n.Lk)("span",null,"Reset Filter",-1)])),(0,n.Lk)("button",{class:"btn btn-primary",onClick:e[4]||(e[4]=(...a)=>o.applyFilters&&o.applyFilters(...a))},e[13]||(e[13]=[(0,n.Lk)("i",{class:"fa fa-search me-2"},null,-1),(0,n.Lk)("span",null,"Terapkan Filter",-1)]))])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",IH,[(0,n.Lk)("table",NH,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[e[15]||(e[15]=(0,n.Lk)("th",{scope:"col"},"No",-1)),(0,n.Lk)("th",{scope:"col",onClick:e[5]||(e[5]=a=>o.sortBy("namahubungankeluarga"))},[e[14]||(e[14]=(0,n.eW)(" Nama Hubungan Keluarga ")),"namahubungankeluarga"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",UH)):"namahubungankeluarga"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",RH)):((0,n.uX)(),(0,n.CE)("i",QH))]),e[16]||(e[16]=(0,n.Lk)("th",{scope:"col"},"Aksi",-1))])]),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.paginatedFamilyRelationships,(a,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:a.idhubungankeluarga},[(0,n.Lk)("th",WH,(0,k.v_)((i.currentPage-1)*i.perPage+t+1),1),(0,n.Lk)("td",null,(0,k.v_)(a.namahubungankeluarga),1),(0,n.Lk)("td",null,[(0,n.Lk)("div",KH,[(0,n.Lk)("button",{class:"btn btn-primary btn-sm",onClick:e=>o.openEditModal(a)},e[17]||(e[17]=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)]),8,OH),(0,n.Lk)("button",{class:"btn btn-danger sweet-11 btn-sm",type:"button",onClick:e=>o.advancedDeleteAlert(a.idhubungankeluarga)},e[18]||(e[18]=[(0,n.Lk)("i",{class:"fa fa-trash"},null,-1)]),8,$H)])])]))),128)),0===o.paginatedFamilyRelationships.length?((0,n.uX)(),(0,n.CE)("tr",GH,e[19]||(e[19]=[(0,n.Lk)("td",{colspan:"5",class:"text-center"},"Tidak ada data yang cocok atau tersedia.",-1)]))):(0,n.Q3)("",!0)])]),(0,n.Lk)("div",JH,[(0,n.Lk)("div",qH,[i.totalItems>0?((0,n.uX)(),(0,n.CE)("span",HH,[e[20]||(e[20]=(0,n.eW)(" Menampilkan ")),(0,n.Lk)("strong",null,(0,k.v_)((i.currentPage-1)*i.perPage+1),1),e[21]||(e[21]=(0,n.eW)(" - ")),(0,n.Lk)("strong",null,(0,k.v_)(Math.min(i.currentPage*i.perPage,i.totalItems)),1),e[22]||(e[22]=(0,n.eW)(" dari ")),(0,n.Lk)("strong",null,(0,k.v_)(i.totalItems),1),e[23]||(e[23]=(0,n.eW)(" data "))])):(0,n.Q3)("",!0)]),-1!==i.perPage&&o.totalPages>1?((0,n.uX)(),(0,n.CE)("nav",YH,[(0,n.Lk)("ul",zH,[(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[6]||(e[6]=a=>o.changePage(i.currentPage-1))},"Prev")],2),o.pageNumbers[0]>1?((0,n.uX)(),(0,n.CE)("li",ZH,[(0,n.Lk)("button",{class:"page-link",onClick:e[7]||(e[7]=a=>o.changePage(1))},"1")])):(0,n.Q3)("",!0),o.pageNumbers[0]>2?((0,n.uX)(),(0,n.CE)("li",aY,e[24]||(e[24]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.pageNumbers,a=>((0,n.uX)(),(0,n.CE)("li",{key:a,class:(0,k.C4)(["page-item",{active:i.currentPage===a}])},[(0,n.Lk)("button",{class:"page-link",onClick:e=>o.changePage(a)},(0,k.v_)(a),9,eY)],2))),128)),o.pageNumbers.slice(-1)[0]<o.totalPages-1?((0,n.uX)(),(0,n.CE)("li",tY,e[25]||(e[25]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),o.pageNumbers.slice(-1)[0]<o.totalPages?((0,n.uX)(),(0,n.CE)("li",sY,[(0,n.Lk)("button",{class:"page-link",onClick:e[8]||(e[8]=a=>o.changePage(o.totalPages))},(0,k.v_)(o.totalPages),1)])):(0,n.Q3)("",!0),(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:i.currentPage===o.totalPages}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[9]||(e[9]=a=>o.changePage(i.currentPage+1))},"Next")],2)])])):(0,n.Q3)("",!0)])])])])}const lY={class:"modal-header"},nY={class:"modal-title"},oY={class:"modal-body"},rY={class:"mb-3"},cY={key:0,class:"alert alert-danger mt-3"},dY={class:"modal-footer"},uY=["disabled"],mY={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},kY={key:1};function hY(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",{class:"modal-overlay",onClick:e[6]||(e[6]=(...a)=>o.handleOverlayClick&&o.handleOverlayClick(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[5]||(e[5]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",lY,[(0,n.Lk)("h5",nY,(0,k.v_)(o.isEditMode?"Edit Data Hubungan Keluarga":"Tambah Data Hubungan Keluarga"),1),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",oY,[(0,n.Lk)("form",{onSubmit:e[2]||(e[2]=(0,l.D$)((...a)=>o.submitForm&&o.submitForm(...a),["prevent"]))},[(0,n.Lk)("div",rY,[e[7]||(e[7]=(0,n.Lk)("label",{for:"namahubungankeluarga",class:"form-label"},"Nama Hubungan Keluarga",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"namaHubunganKeluarga",placeholder:"Masukkan nama hubungan keluarga","onUpdate:modelValue":e[1]||(e[1]=a=>i.formData.namahubungankeluarga=a),required:""},null,512),[[l.Jo,i.formData.namahubungankeluarga]])]),i.errorMessage?((0,n.uX)(),(0,n.CE)("div",cY,(0,k.v_)(i.errorMessage),1)):(0,n.Q3)("",!0)],32)]),(0,n.Lk)("div",dY,[(0,n.Lk)("button",{type:"button",class:"btn btn-danger",onClick:e[3]||(e[3]=(...a)=>o.closeModal&&o.closeModal(...a))},"Batal"),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[4]||(e[4]=(...a)=>o.submitForm&&o.submitForm(...a)),disabled:i.isLoading},[i.isLoading?((0,n.uX)(),(0,n.CE)("span",mY)):((0,n.uX)(),(0,n.CE)("span",kY,"Simpan"))],8,uY)])])])}var gY={name:"editFamilyRelationshipModal",props:{familyRelationshipToEdit:{type:Object,default:null}},created(){this.toast=(0,ln.dj)()},data(){return{formData:{namahubungankeluarga:""},isLoading:!1,errorMessage:null}},computed:{isEditMode(){return!!this.familyRelationshipToEdit}},watch:{familyRelationshipToEdit:{handler(a){this.formData=a?{...a}:{namahubungankeluarga:""},this.errorMessage=null},immediate:!0}},methods:{closeModal(){this.$emit("close")},handleOverlayClick(a){a.target===a.currentTarget&&this.closeModal()},async submitForm(){this.errorMessage=null;const{namahubungankeluarga:a}=this.formData;if(a){this.isLoading=!0;try{this.isEditMode?(await bh(this.familyRelationshipToEdit.idhubungankeluarga,this.formData),this.toast.success("Data hubungan keluarga berhasil diperbarui",{icon:"fa fa-check"})):(await ph(this.formData),this.toast.success("Data hubungan keluarga berhasil ditambah",{icon:"fa fa-check"})),this.$emit("save-successful"),this.closeModal()}catch(e){console.error("Error occurred:",e),this.errorMessage=e.response?.data?.message||"Gagal menyimpan data.",this.toast.error("Gagal menyimpan data hubungan keluarga",{icon:"fa fa-times"})}finally{this.isLoading=!1}}else this.errorMessage="Semua field wajib diisi."}}};const pY=(0,r.A)(gY,[["render",hY],["__scopeId","data-v-e0b236ba"]]);var bY=pY,fY={components:{AddEditFamilyRelationshipModal:bY},data(){return{familyRelationships:[],sortColumn:"",sortDirection:"asc",isModalVisible:!1,currentPage:1,perPage:20,totalItems:0,familyRelationshipBeingEdited:null,jumpPage:1,isFilterVisible:!1,filters:{familyRelationship_name:""}}},computed:{paginatedFamilyRelationships(){return this.familyRelationships},totalPages(){return this.perPage<=0?1:Math.ceil(this.totalItems/this.perPage)},pageNumbers(){const a=[],e=5;let t=Math.max(1,this.currentPage-Math.floor(e/2)),s=t+e-1;s>this.totalPages&&(s=this.totalPages,t=Math.max(1,s-e+1));for(let i=t;i<=s;i++)a.push(i);return a}},watch:{currentPage(){this.fetchFamilyRelationships(),this.jumpPage=this.currentPage},perPage(){this.currentPage=1,this.fetchFamilyRelationships()}},async mounted(){this.toast=(0,ln.dj)(),await this.fetchFamilyRelationships()},methods:{openAddModal(){this.familyRelationshipBeingEdited=null,this.isModalVisible=!0},openEditModal(a){this.familyRelationshipBeingEdited={...a},this.isModalVisible=!0},closeModal(){this.isModalVisible=!1,this.familyRelationshipBeingEdited=null},handleSaveSuccessful(){this.closeModal(),this.fetchFamilyRelationships()},async fetchFamilyRelationships(){try{const a={act:"hubungan-keluarga",page:this.currentPage,limit:this.perPage,order:this.sortColumn?`${this.sortColumn} ${this.sortDirection}`:"",group:""},e=Object.entries(this.filters).filter(([a,e])=>""!==e).map(([a,e])=>`${a}=${e}`);e.length>0?a.filter=e.join(","):a.filter="";const t=await gh(a),s=t.data?.data||t.data?.[0]?.data||[],i=t.data?.[0]?.meta?.pagination||{};this.familyRelationships=s,this.totalItems=i.total||s.length}catch(a){console.error("Error fetching hubungan keluarga:",a),this.$swal({icon:"error",title:"Oops...",text:"Gagal memuat data hubungan keluarga. Silakan coba lagi nanti."})}},advancedDeleteAlert(a){this.$swal({title:"Hapus Data Hubungan Keluarga",text:"Apakah Anda yakin ingin menghapus data ini?",icon:"warning",showCancelButton:!0,confirmButtonText:'<i class="fa fa-check me-2"></i> Hapus!',confirmButtonColor:"#d33",cancelButtonText:'<i class="fa fa-times me-2"></i> Batal',cancelButtonColor:"#efefef",reverseButtons:!0}).then(async e=>{if(e.isConfirmed)try{await fh(a),1===this.familyRelationships.length&&this.currentPage>1?this.currentPage--:this.fetchFamilyRelationships(),this.toast.success("Data hubungan keluarga berhasil dihapus",{icon:"fa fa-check"})}catch(t){this.toast.error("Gagal menghapus data hubungan keluarga",{icon:"fa fa-times"})}})},sortBy(a){this.sortColumn===a?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=a,this.sortDirection="asc"),this.fetchFamilyRelationships()},changePage(a){a>=1&&a<=this.totalPages&&(this.currentPage=a)},toggleFilterVisibility(){this.isFilterVisible=!this.isFilterVisible},applyFilters(){this.currentPage=1,this.fetchFamilyRelationships()},resetFilters(){this.filters.namahubungankeluarga="",this.sortColumn="",this.sortDirection="asc",this.currentPage=1,this.fetchFamilyRelationships()}}};const LY=(0,r.A)(fY,[["render",iY],["__scopeId","data-v-5f3c85aa"]]);var yY=LY,vY={components:{FamilyRelationshipsTable:yY}};const CY=(0,r.A)(vY,[["render",MH]]);var PY=CY;const EY={class:"container-fluid"},DY={class:"row widget-grid"};function MY(a,e,t,s,i,l){const o=(0,n.g2)("Breadcrumbs"),r=(0,n.g2)("GendersTable");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(o,{main:"Kependudukan",title:a.$route.meta.title},null,8,["title"]),(0,n.Lk)("div",EY,[(0,n.Lk)("div",DY,[(0,n.bF)(r)])])])}const wY={class:"col-sm-12"},FY={class:"card"},XY={class:"card-body"},xY={class:"d-flex justify-content-end align-items-start mb-3"},TY={class:"d-flex gap-2"},SY={key:0,class:"fa fa-angle-up me-2"},BY={key:1,class:"fa fa-angle-down me-2"},AY={key:0,class:"border p-3 mb-3 rounded filter-section"},_Y={class:"row g-2"},jY={class:"col-md-4"},VY={class:"d-flex justify-content-end gap-2 mt-3"},IY={class:"table-responsive signal-table"},NY={class:"table table-hover"},UY={key:0,class:"fa fa-sort-asc"},RY={key:1,class:"fa fa-sort-desc"},QY={key:2,class:"fa fa-sort"},WY={scope:"row"},KY={class:"btn-group"},OY=["onClick"],$Y=["onClick"],GY={key:0},JY={class:"d-flex flex-column flex-md-row justify-content-md-between align-items-center mt-3 px-3 pb-3"},qY={class:"mt-2"},HY={key:0,class:"text-muted"},YY={key:0,class:"d-flex align-items-center flex-wrap gap-2 mt-2"},zY={class:"pagination mb-0"},ZY={key:0,class:"page-item"},az={key:1,class:"page-item disabled"},ez=["onClick"],tz={key:2,class:"page-item disabled"},sz={key:3,class:"page-item"};function iz(a,e,t,s,i,o){const r=(0,n.g2)("add-edit-gender-modal");return(0,n.uX)(),(0,n.CE)("div",wY,[i.isModalVisible?((0,n.uX)(),(0,n.Wv)(r,{key:0,"gender-to-edit":i.genderBeingEdited,onClose:o.closeModal,onSaveSuccessful:o.handleSaveSuccessful},null,8,["gender-to-edit","onClose","onSaveSuccessful"])):(0,n.Q3)("",!0),(0,n.Lk)("div",FY,[e[26]||(e[26]=(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("h3",null,"Daftar Nama Jenis Kelamin")],-1)),(0,n.Lk)("div",XY,[(0,n.Lk)("div",xY,[(0,n.Lk)("div",TY,[(0,n.Lk)("button",{class:"btn btn-outline-light txt-dark",onClick:e[0]||(e[0]=(...a)=>o.toggleFilterVisibility&&o.toggleFilterVisibility(...a))},[i.isFilterVisible?((0,n.uX)(),(0,n.CE)("i",SY)):((0,n.uX)(),(0,n.CE)("i",BY)),(0,n.Lk)("span",null,(0,k.v_)(i.isFilterVisible?"Sembunyikan":"Tampilkan")+" Filter",1)]),(0,n.Lk)("button",{class:"btn btn-success",onClick:e[1]||(e[1]=(...a)=>o.openAddModal&&o.openAddModal(...a))},e[10]||(e[10]=[(0,n.Lk)("i",{class:"fa fa-plus me-2"},null,-1),(0,n.Lk)("span",null," Tambah Data",-1)]))])]),i.isFilterVisible?((0,n.uX)(),(0,n.CE)("div",AY,[(0,n.Lk)("div",_Y,[(0,n.Lk)("div",jY,[e[11]||(e[11]=(0,n.Lk)("label",{for:"filterName",class:"form-label"},"Nama Jenis Kelamin",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterName",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.filters.namajeniskelamin=a),placeholder:"Filter berdasarkan nama jenis kelamin"},null,512),[[l.Jo,i.filters.namajeniskelamin]])])]),(0,n.Lk)("div",VY,[(0,n.Lk)("button",{class:"btn btn-secondary",onClick:e[3]||(e[3]=(...a)=>o.resetFilters&&o.resetFilters(...a))},e[12]||(e[12]=[(0,n.Lk)("i",{class:"fa fa-refresh me-2"},null,-1),(0,n.Lk)("span",null,"Reset Filter",-1)])),(0,n.Lk)("button",{class:"btn btn-primary",onClick:e[4]||(e[4]=(...a)=>o.applyFilters&&o.applyFilters(...a))},e[13]||(e[13]=[(0,n.Lk)("i",{class:"fa fa-search me-2"},null,-1),(0,n.Lk)("span",null,"Terapkan Filter",-1)]))])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",IY,[(0,n.Lk)("table",NY,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[e[15]||(e[15]=(0,n.Lk)("th",{scope:"col"},"No",-1)),(0,n.Lk)("th",{scope:"col",onClick:e[5]||(e[5]=a=>o.sortBy("namajeniskelamin"))},[e[14]||(e[14]=(0,n.eW)(" Nama Jenis Kelamin ")),"namajeniskelamin"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",UY)):"namajeniskelamin"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",RY)):((0,n.uX)(),(0,n.CE)("i",QY))]),e[16]||(e[16]=(0,n.Lk)("th",{scope:"col"},"Aksi",-1))])]),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.paginatedGenders,(a,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:a.idjeniskelamin},[(0,n.Lk)("th",WY,(0,k.v_)((i.currentPage-1)*i.perPage+t+1),1),(0,n.Lk)("td",null,(0,k.v_)(a.namajeniskelamin),1),(0,n.Lk)("td",null,[(0,n.Lk)("div",KY,[(0,n.Lk)("button",{class:"btn btn-primary btn-sm",onClick:e=>o.openEditModal(a)},e[17]||(e[17]=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)]),8,OY),(0,n.Lk)("button",{class:"btn btn-danger sweet-11 btn-sm",type:"button",onClick:e=>o.advancedDeleteAlert(a.idjeniskelamin)},e[18]||(e[18]=[(0,n.Lk)("i",{class:"fa fa-trash"},null,-1)]),8,$Y)])])]))),128)),0===o.paginatedGenders.length?((0,n.uX)(),(0,n.CE)("tr",GY,e[19]||(e[19]=[(0,n.Lk)("td",{colspan:"5",class:"text-center"},"Tidak ada data yang cocok atau tersedia.",-1)]))):(0,n.Q3)("",!0)])]),(0,n.Lk)("div",JY,[(0,n.Lk)("div",qY,[i.totalItems>0?((0,n.uX)(),(0,n.CE)("span",HY,[e[20]||(e[20]=(0,n.eW)(" Menampilkan ")),(0,n.Lk)("strong",null,(0,k.v_)((i.currentPage-1)*i.perPage+1),1),e[21]||(e[21]=(0,n.eW)(" - ")),(0,n.Lk)("strong",null,(0,k.v_)(Math.min(i.currentPage*i.perPage,i.totalItems)),1),e[22]||(e[22]=(0,n.eW)(" dari ")),(0,n.Lk)("strong",null,(0,k.v_)(i.totalItems),1),e[23]||(e[23]=(0,n.eW)(" data "))])):(0,n.Q3)("",!0)]),-1!==i.perPage&&o.totalPages>1?((0,n.uX)(),(0,n.CE)("nav",YY,[(0,n.Lk)("ul",zY,[(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[6]||(e[6]=a=>o.changePage(i.currentPage-1))},"Prev")],2),o.pageNumbers[0]>1?((0,n.uX)(),(0,n.CE)("li",ZY,[(0,n.Lk)("button",{class:"page-link",onClick:e[7]||(e[7]=a=>o.changePage(1))},"1")])):(0,n.Q3)("",!0),o.pageNumbers[0]>2?((0,n.uX)(),(0,n.CE)("li",az,e[24]||(e[24]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.pageNumbers,a=>((0,n.uX)(),(0,n.CE)("li",{key:a,class:(0,k.C4)(["page-item",{active:i.currentPage===a}])},[(0,n.Lk)("button",{class:"page-link",onClick:e=>o.changePage(a)},(0,k.v_)(a),9,ez)],2))),128)),o.pageNumbers.slice(-1)[0]<o.totalPages-1?((0,n.uX)(),(0,n.CE)("li",tz,e[25]||(e[25]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),o.pageNumbers.slice(-1)[0]<o.totalPages?((0,n.uX)(),(0,n.CE)("li",sz,[(0,n.Lk)("button",{class:"page-link",onClick:e[8]||(e[8]=a=>o.changePage(o.totalPages))},(0,k.v_)(o.totalPages),1)])):(0,n.Q3)("",!0),(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:i.currentPage===o.totalPages}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[9]||(e[9]=a=>o.changePage(i.currentPage+1))},"Next")],2)])])):(0,n.Q3)("",!0)])])])])}const lz={class:"modal-header"},nz={class:"modal-title"},oz={class:"modal-body"},rz={class:"mb-3"},cz={key:0,class:"alert alert-danger mt-3"},dz={class:"modal-footer"},uz=["disabled"],mz={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},kz={key:1};function hz(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",{class:"modal-overlay",onClick:e[6]||(e[6]=(...a)=>o.handleOverlayClick&&o.handleOverlayClick(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[5]||(e[5]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",lz,[(0,n.Lk)("h5",nz,(0,k.v_)(o.isEditMode?"Edit Data Jenis Kelamin":"Tambah Data Jenis Kelamin"),1),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",oz,[(0,n.Lk)("form",{onSubmit:e[2]||(e[2]=(0,l.D$)((...a)=>o.submitForm&&o.submitForm(...a),["prevent"]))},[(0,n.Lk)("div",rz,[e[7]||(e[7]=(0,n.Lk)("label",{for:"namajeniskelamin",class:"form-label"},"Nama Jenis Kelamin",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"namaJenisKelamin",placeholder:"Masukkan nama jenis kelamin","onUpdate:modelValue":e[1]||(e[1]=a=>i.formData.namajeniskelamin=a),required:""},null,512),[[l.Jo,i.formData.namajeniskelamin]])]),i.errorMessage?((0,n.uX)(),(0,n.CE)("div",cz,(0,k.v_)(i.errorMessage),1)):(0,n.Q3)("",!0)],32)]),(0,n.Lk)("div",dz,[(0,n.Lk)("button",{type:"button",class:"btn btn-danger",onClick:e[3]||(e[3]=(...a)=>o.closeModal&&o.closeModal(...a))},"Batal"),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[4]||(e[4]=(...a)=>o.submitForm&&o.submitForm(...a)),disabled:i.isLoading},[i.isLoading?((0,n.uX)(),(0,n.CE)("span",mz)):((0,n.uX)(),(0,n.CE)("span",kz,"Simpan"))],8,uz)])])])}var gz={name:"editGenderModal",props:{genderToEdit:{type:Object,default:null}},created(){this.toast=(0,ln.dj)()},data(){return{formData:{namajeniskelamin:""},isLoading:!1,errorMessage:null}},computed:{isEditMode(){return!!this.genderToEdit}},watch:{genderToEdit:{handler(a){this.formData=a?{...a}:{namajeniskelamin:""},this.errorMessage=null},immediate:!0}},methods:{closeModal(){this.$emit("close")},handleOverlayClick(a){a.target===a.currentTarget&&this.closeModal()},async submitForm(){this.errorMessage=null;const{namajeniskelamin:a}=this.formData;if(a){this.isLoading=!0;try{this.isEditMode?(await eh(this.genderToEdit.idjeniskelamin,this.formData),this.toast.success("Data jenis kelamin berhasil diperbarui",{icon:"fa fa-check"})):(await ah(this.formData),this.toast.success("Data jenis kelamin berhasil ditambah",{icon:"fa fa-check"})),this.$emit("save-successful"),this.closeModal()}catch(e){console.error("Error occurred:",e),this.errorMessage=e.response?.data?.message||"Gagal menyimpan data.",this.toast.error("Gagal menyimpan data jenis kelamin",{icon:"fa fa-times"})}finally{this.isLoading=!1}}else this.errorMessage="Semua field wajib diisi."}}};const pz=(0,r.A)(gz,[["render",hz],["__scopeId","data-v-2b1a2bd3"]]);var bz=pz,fz={components:{AddEditGenderModal:bz},data(){return{genders:[],sortColumn:"",sortDirection:"asc",isModalVisible:!1,currentPage:1,perPage:20,totalItems:0,genderBeingEdited:null,jumpPage:1,isFilterVisible:!1,filters:{gender_name:""}}},computed:{paginatedGenders(){return this.genders},totalPages(){return this.perPage<=0?1:Math.ceil(this.totalItems/this.perPage)},pageNumbers(){const a=[],e=5;let t=Math.max(1,this.currentPage-Math.floor(e/2)),s=t+e-1;s>this.totalPages&&(s=this.totalPages,t=Math.max(1,s-e+1));for(let i=t;i<=s;i++)a.push(i);return a}},watch:{currentPage(){this.fetchGenders(),this.jumpPage=this.currentPage},perPage(){this.currentPage=1,this.fetchGenders()}},async mounted(){this.toast=(0,ln.dj)(),await this.fetchGenders()},methods:{openAddModal(){this.genderBeingEdited=null,this.isModalVisible=!0},openEditModal(a){this.genderBeingEdited={...a},this.isModalVisible=!0},closeModal(){this.isModalVisible=!1,this.genderBeingEdited=null},handleSaveSuccessful(){this.closeModal(),this.fetchGenders()},async fetchGenders(){try{const a={act:"jenis-kelamin",page:this.currentPage,limit:this.perPage,order:this.sortColumn?`${this.sortColumn} ${this.sortDirection}`:"",group:""},e=Object.entries(this.filters).filter(([a,e])=>""!==e).map(([a,e])=>`${a}=${e}`);e.length>0?a.filter=e.join(","):a.filter="";const t=await Zk(a),s=t.data?.data||t.data?.[0]?.data||[],i=t.data?.[0]?.meta?.pagination||{};this.genders=s,this.totalItems=i.total||s.length}catch(a){console.error("Error fetching jenis kelamin:",a),this.$swal({icon:"error",title:"Oops...",text:"Gagal memuat data jenis kelamin. Silakan coba lagi nanti."})}},advancedDeleteAlert(a){this.$swal({title:"Hapus Data Jenis Kelamin",text:"Apakah Anda yakin ingin menghapus data ini?",icon:"warning",showCancelButton:!0,confirmButtonText:'<i class="fa fa-check me-2"></i> Hapus!',confirmButtonColor:"#d33",cancelButtonText:'<i class="fa fa-times me-2"></i> Batal',cancelButtonColor:"#efefef",reverseButtons:!0}).then(async e=>{if(e.isConfirmed)try{await th(a),1===this.genders.length&&this.currentPage>1?this.currentPage--:this.fetchGenders(),this.toast.success("Data jenis kelamin berhasil dihapus",{icon:"fa fa-check"})}catch(t){this.toast.error("Gagal menghapus data jenis kelamin",{icon:"fa fa-times"})}})},sortBy(a){this.sortColumn===a?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=a,this.sortDirection="asc"),this.fetchGenders()},changePage(a){a>=1&&a<=this.totalPages&&(this.currentPage=a)},toggleFilterVisibility(){this.isFilterVisible=!this.isFilterVisible},applyFilters(){this.currentPage=1,this.fetchGenders()},resetFilters(){this.filters.namajeniskelamin="",this.sortColumn="",this.sortDirection="asc",this.currentPage=1,this.fetchGenders()}}};const Lz=(0,r.A)(fz,[["render",iz],["__scopeId","data-v-0801c3e9"]]);var yz=Lz,vz={components:{GendersTable:yz}};const Cz=(0,r.A)(vz,[["render",MY]]);var Pz=Cz;const Ez={class:"container-fluid"},Dz={class:"row widget-grid"};function Mz(a,e,t,s,i,l){const o=(0,n.g2)("Breadcrumbs"),r=(0,n.g2)("OccupationsTable");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(o,{main:"Kependudukan",title:a.$route.meta.title},null,8,["title"]),(0,n.Lk)("div",Ez,[(0,n.Lk)("div",Dz,[(0,n.bF)(r)])])])}const wz={class:"col-sm-12"},Fz={class:"card"},Xz={class:"card-body"},xz={class:"d-flex justify-content-end align-items-start mb-3"},Tz={class:"d-flex gap-2"},Sz={key:0,class:"fa fa-angle-up me-2"},Bz={key:1,class:"fa fa-angle-down me-2"},Az={key:0,class:"border p-3 mb-3 rounded filter-section"},_z={class:"row g-2"},jz={class:"col-md-4"},Vz={class:"d-flex justify-content-end gap-2 mt-3"},Iz={class:"table-responsive signal-table"},Nz={class:"table table-hover"},Uz={key:0,class:"fa fa-sort-asc"},Rz={key:1,class:"fa fa-sort-desc"},Qz={key:2,class:"fa fa-sort"},Wz={scope:"row"},Kz={class:"btn-group"},Oz=["onClick"],$z=["onClick"],Gz={key:0},Jz={class:"d-flex flex-column flex-md-row justify-content-md-between align-items-center mt-3 px-3 pb-3"},qz={class:"mt-2"},Hz={key:0,class:"text-muted"},Yz={key:0,class:"d-flex align-items-center flex-wrap gap-2 mt-2"},zz={class:"pagination mb-0"},Zz={key:0,class:"page-item"},aZ={key:1,class:"page-item disabled"},eZ=["onClick"],tZ={key:2,class:"page-item disabled"},sZ={key:3,class:"page-item"};function iZ(a,e,t,s,i,o){const r=(0,n.g2)("add-edit-occupation-modal");return(0,n.uX)(),(0,n.CE)("div",wz,[i.isModalVisible?((0,n.uX)(),(0,n.Wv)(r,{key:0,"occupation-to-edit":i.occupationBeingEdited,onClose:o.closeModal,onSaveSuccessful:o.handleSaveSuccessful},null,8,["occupation-to-edit","onClose","onSaveSuccessful"])):(0,n.Q3)("",!0),(0,n.Lk)("div",Fz,[e[26]||(e[26]=(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("h3",null,"Daftar Nama Pekerjaan")],-1)),(0,n.Lk)("div",Xz,[(0,n.Lk)("div",xz,[(0,n.Lk)("div",Tz,[(0,n.Lk)("button",{class:"btn btn-outline-light txt-dark",onClick:e[0]||(e[0]=(...a)=>o.toggleFilterVisibility&&o.toggleFilterVisibility(...a))},[i.isFilterVisible?((0,n.uX)(),(0,n.CE)("i",Sz)):((0,n.uX)(),(0,n.CE)("i",Bz)),(0,n.Lk)("span",null,(0,k.v_)(i.isFilterVisible?"Sembunyikan":"Tampilkan")+" Filter",1)]),(0,n.Lk)("button",{class:"btn btn-success",onClick:e[1]||(e[1]=(...a)=>o.openAddModal&&o.openAddModal(...a))},e[10]||(e[10]=[(0,n.Lk)("i",{class:"fa fa-plus me-2"},null,-1),(0,n.Lk)("span",null," Tambah Data",-1)]))])]),i.isFilterVisible?((0,n.uX)(),(0,n.CE)("div",Az,[(0,n.Lk)("div",_z,[(0,n.Lk)("div",jz,[e[11]||(e[11]=(0,n.Lk)("label",{for:"filterName",class:"form-label"},"Nama Pekerjaan",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterName",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.filters.namapekerjaan=a),placeholder:"Filter berdasarkan nama pekerjaan"},null,512),[[l.Jo,i.filters.namapekerjaan]])])]),(0,n.Lk)("div",Vz,[(0,n.Lk)("button",{class:"btn btn-secondary",onClick:e[3]||(e[3]=(...a)=>o.resetFilters&&o.resetFilters(...a))},e[12]||(e[12]=[(0,n.Lk)("i",{class:"fa fa-refresh me-2"},null,-1),(0,n.Lk)("span",null,"Reset Filter",-1)])),(0,n.Lk)("button",{class:"btn btn-primary",onClick:e[4]||(e[4]=(...a)=>o.applyFilters&&o.applyFilters(...a))},e[13]||(e[13]=[(0,n.Lk)("i",{class:"fa fa-search me-2"},null,-1),(0,n.Lk)("span",null,"Terapkan Filter",-1)]))])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",Iz,[(0,n.Lk)("table",Nz,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[e[15]||(e[15]=(0,n.Lk)("th",{scope:"col"},"No",-1)),(0,n.Lk)("th",{scope:"col",onClick:e[5]||(e[5]=a=>o.sortBy("namapekerjaan"))},[e[14]||(e[14]=(0,n.eW)(" Nama Pekerjaan ")),"namapekerjaan"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",Uz)):"namapekerjaan"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",Rz)):((0,n.uX)(),(0,n.CE)("i",Qz))]),e[16]||(e[16]=(0,n.Lk)("th",{scope:"col"},"Aksi",-1))])]),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.paginatedOccupations,(a,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:a.idpekerjaan},[(0,n.Lk)("th",Wz,(0,k.v_)((i.currentPage-1)*i.perPage+t+1),1),(0,n.Lk)("td",null,(0,k.v_)(a.namapekerjaan),1),(0,n.Lk)("td",null,[(0,n.Lk)("div",Kz,[(0,n.Lk)("button",{class:"btn btn-primary btn-sm",onClick:e=>o.openEditModal(a)},e[17]||(e[17]=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)]),8,Oz),(0,n.Lk)("button",{class:"btn btn-danger sweet-11 btn-sm",type:"button",onClick:e=>o.advancedDeleteAlert(a.idpekerjaan)},e[18]||(e[18]=[(0,n.Lk)("i",{class:"fa fa-trash"},null,-1)]),8,$z)])])]))),128)),0===o.paginatedOccupations.length?((0,n.uX)(),(0,n.CE)("tr",Gz,e[19]||(e[19]=[(0,n.Lk)("td",{colspan:"5",class:"text-center"},"Tidak ada data yang cocok atau tersedia.",-1)]))):(0,n.Q3)("",!0)])]),(0,n.Lk)("div",Jz,[(0,n.Lk)("div",qz,[i.totalItems>0?((0,n.uX)(),(0,n.CE)("span",Hz,[e[20]||(e[20]=(0,n.eW)(" Menampilkan ")),(0,n.Lk)("strong",null,(0,k.v_)((i.currentPage-1)*i.perPage+1),1),e[21]||(e[21]=(0,n.eW)(" - ")),(0,n.Lk)("strong",null,(0,k.v_)(Math.min(i.currentPage*i.perPage,i.totalItems)),1),e[22]||(e[22]=(0,n.eW)(" dari ")),(0,n.Lk)("strong",null,(0,k.v_)(i.totalItems),1),e[23]||(e[23]=(0,n.eW)(" data "))])):(0,n.Q3)("",!0)]),-1!==i.perPage&&o.totalPages>1?((0,n.uX)(),(0,n.CE)("nav",Yz,[(0,n.Lk)("ul",zz,[(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[6]||(e[6]=a=>o.changePage(i.currentPage-1))},"Prev")],2),o.pageNumbers[0]>1?((0,n.uX)(),(0,n.CE)("li",Zz,[(0,n.Lk)("button",{class:"page-link",onClick:e[7]||(e[7]=a=>o.changePage(1))},"1")])):(0,n.Q3)("",!0),o.pageNumbers[0]>2?((0,n.uX)(),(0,n.CE)("li",aZ,e[24]||(e[24]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.pageNumbers,a=>((0,n.uX)(),(0,n.CE)("li",{key:a,class:(0,k.C4)(["page-item",{active:i.currentPage===a}])},[(0,n.Lk)("button",{class:"page-link",onClick:e=>o.changePage(a)},(0,k.v_)(a),9,eZ)],2))),128)),o.pageNumbers.slice(-1)[0]<o.totalPages-1?((0,n.uX)(),(0,n.CE)("li",tZ,e[25]||(e[25]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),o.pageNumbers.slice(-1)[0]<o.totalPages?((0,n.uX)(),(0,n.CE)("li",sZ,[(0,n.Lk)("button",{class:"page-link",onClick:e[8]||(e[8]=a=>o.changePage(o.totalPages))},(0,k.v_)(o.totalPages),1)])):(0,n.Q3)("",!0),(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:i.currentPage===o.totalPages}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[9]||(e[9]=a=>o.changePage(i.currentPage+1))},"Next")],2)])])):(0,n.Q3)("",!0)])])])])}const lZ={class:"modal-header"},nZ={class:"modal-title"},oZ={class:"modal-body"},rZ={class:"mb-3"},cZ={key:0,class:"alert alert-danger mt-3"},dZ={class:"modal-footer"},uZ=["disabled"],mZ={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},kZ={key:1};function hZ(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",{class:"modal-overlay",onClick:e[6]||(e[6]=(...a)=>o.handleOverlayClick&&o.handleOverlayClick(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[5]||(e[5]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",lZ,[(0,n.Lk)("h5",nZ,(0,k.v_)(o.isEditMode?"Edit Data Pekerjaan":"Tambah Data Pekerjaan"),1),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",oZ,[(0,n.Lk)("form",{onSubmit:e[2]||(e[2]=(0,l.D$)((...a)=>o.submitForm&&o.submitForm(...a),["prevent"]))},[(0,n.Lk)("div",rZ,[e[7]||(e[7]=(0,n.Lk)("label",{for:"namapekerjaan",class:"form-label"},"Nama Pekerjaan",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"namaPekerjaan",placeholder:"Masukkan nama pekerjaan","onUpdate:modelValue":e[1]||(e[1]=a=>i.formData.namapekerjaan=a),required:""},null,512),[[l.Jo,i.formData.namapekerjaan]])]),i.errorMessage?((0,n.uX)(),(0,n.CE)("div",cZ,(0,k.v_)(i.errorMessage),1)):(0,n.Q3)("",!0)],32)]),(0,n.Lk)("div",dZ,[(0,n.Lk)("button",{type:"button",class:"btn btn-danger",onClick:e[3]||(e[3]=(...a)=>o.closeModal&&o.closeModal(...a))},"Batal"),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[4]||(e[4]=(...a)=>o.submitForm&&o.submitForm(...a)),disabled:i.isLoading},[i.isLoading?((0,n.uX)(),(0,n.CE)("span",mZ)):((0,n.uX)(),(0,n.CE)("span",kZ,"Simpan"))],8,uZ)])])])}var gZ={name:"editOccupationModal",props:{occupationToEdit:{type:Object,default:null}},created(){this.toast=(0,ln.dj)()},data(){return{formData:{namapekerjaan:""},isLoading:!1,errorMessage:null}},computed:{isEditMode(){return!!this.occupationToEdit}},watch:{occupationToEdit:{handler(a){this.formData=a?{...a}:{namapekerjaan:""},this.errorMessage=null},immediate:!0}},methods:{closeModal(){this.$emit("close")},handleOverlayClick(a){a.target===a.currentTarget&&this.closeModal()},async submitForm(){this.errorMessage=null;const{namapekerjaan:a}=this.formData;if(a){this.isLoading=!0;try{this.isEditMode?(await Dh(this.occupationToEdit.idpekerjaan,this.formData),this.toast.success("Data pekerjaan berhasil diperbarui",{icon:"fa fa-check"})):(await Eh(this.formData),this.toast.success("Data pekerjaan berhasil ditambah",{icon:"fa fa-check"})),this.$emit("save-successful"),this.closeModal()}catch(e){console.error("Error occurred:",e),this.errorMessage=e.response?.data?.message||"Gagal menyimpan data.",this.toast.error("Gagal menyimpan data pekerjaan",{icon:"fa fa-times"})}finally{this.isLoading=!1}}else this.errorMessage="Semua field wajib diisi."}}};const pZ=(0,r.A)(gZ,[["render",hZ],["__scopeId","data-v-137ddbde"]]);var bZ=pZ,fZ={components:{AddEditOccupationModal:bZ},data(){return{occupations:[],sortColumn:"",sortDirection:"asc",isModalVisible:!1,currentPage:1,perPage:20,totalItems:0,occupationBeingEdited:null,jumpPage:1,isFilterVisible:!1,filters:{occupation_name:""}}},computed:{paginatedOccupations(){return this.occupations},totalPages(){return this.perPage<=0?1:Math.ceil(this.totalItems/this.perPage)},pageNumbers(){const a=[],e=5;let t=Math.max(1,this.currentPage-Math.floor(e/2)),s=t+e-1;s>this.totalPages&&(s=this.totalPages,t=Math.max(1,s-e+1));for(let i=t;i<=s;i++)a.push(i);return a}},watch:{currentPage(){this.fetchOccupations(),this.jumpPage=this.currentPage},perPage(){this.currentPage=1,this.fetchOccupations()}},async mounted(){this.toast=(0,ln.dj)(),await this.fetchOccupations()},methods:{openAddModal(){this.occupationBeingEdited=null,this.isModalVisible=!0},openEditModal(a){this.occupationBeingEdited={...a},this.isModalVisible=!0},closeModal(){this.isModalVisible=!1,this.occupationBeingEdited=null},handleSaveSuccessful(){this.closeModal(),this.fetchOccupations()},async fetchOccupations(){try{const a={act:"pekerjaan",page:this.currentPage,limit:this.perPage,order:this.sortColumn?`${this.sortColumn} ${this.sortDirection}`:"",group:""},e=Object.entries(this.filters).filter(([a,e])=>""!==e).map(([a,e])=>`${a}=${e}`);e.length>0?a.filter=e.join(","):a.filter="";const t=await Ph(a),s=t.data?.data||t.data?.[0]?.data||[],i=t.data?.[0]?.meta?.pagination||{};this.occupations=s,this.totalItems=i.total||s.length}catch(a){console.error("Error fetching pekerjaan:",a),this.$swal({icon:"error",title:"Oops...",text:"Gagal memuat data pekerjaan. Silakan coba lagi nanti."})}},advancedDeleteAlert(a){this.$swal({title:"Hapus Data Pekerjaan",text:"Apakah Anda yakin ingin menghapus data ini?",icon:"warning",showCancelButton:!0,confirmButtonText:'<i class="fa fa-check me-2"></i> Hapus!',confirmButtonColor:"#d33",cancelButtonText:'<i class="fa fa-times me-2"></i> Batal',cancelButtonColor:"#efefef",reverseButtons:!0}).then(async e=>{if(e.isConfirmed)try{await Mh(a),1===this.occupations.length&&this.currentPage>1?this.currentPage--:this.fetchOccupations(),this.toast.success("Data pekerjaan berhasil dihapus",{icon:"fa fa-check"})}catch(t){this.toast.error("Gagal menghapus data pekerjaan",{icon:"fa fa-times"})}})},sortBy(a){this.sortColumn===a?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=a,this.sortDirection="asc"),this.fetchOccupations()},changePage(a){a>=1&&a<=this.totalPages&&(this.currentPage=a)},toggleFilterVisibility(){this.isFilterVisible=!this.isFilterVisible},applyFilters(){this.currentPage=1,this.fetchOccupations()},resetFilters(){this.filters.namapekerjaan="",this.sortColumn="",this.sortDirection="asc",this.currentPage=1,this.fetchOccupations()}}};const LZ=(0,r.A)(fZ,[["render",iZ],["__scopeId","data-v-5a2655fc"]]);var yZ=LZ,vZ={components:{OccupationsTable:yZ}};const CZ=(0,r.A)(vZ,[["render",Mz]]);var PZ=CZ;const EZ={class:"container-fluid"},DZ={class:"row widget-grid"};function MZ(a,e,t,s,i,l){const o=(0,n.g2)("Breadcrumbs"),r=(0,n.g2)("EducationLevelsTable");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(o,{main:"Kependudukan",title:a.$route.meta.title},null,8,["title"]),(0,n.Lk)("div",EZ,[(0,n.Lk)("div",DZ,[(0,n.bF)(r)])])])}const wZ={class:"col-sm-12"},FZ={class:"card"},XZ={class:"card-body"},xZ={class:"d-flex justify-content-end align-items-start mb-3"},TZ={class:"d-flex gap-2"},SZ={key:0,class:"fa fa-angle-up me-2"},BZ={key:1,class:"fa fa-angle-down me-2"},AZ={key:0,class:"border p-3 mb-3 rounded filter-section"},_Z={class:"row g-2"},jZ={class:"col-md-4"},VZ={class:"d-flex justify-content-end gap-2 mt-3"},IZ={class:"table-responsive signal-table"},NZ={class:"table table-hover"},UZ={key:0,class:"fa fa-sort-asc"},RZ={key:1,class:"fa fa-sort-desc"},QZ={key:2,class:"fa fa-sort"},WZ={scope:"row"},KZ={class:"btn-group"},OZ=["onClick"],$Z=["onClick"],GZ={key:0},JZ={class:"d-flex flex-column flex-md-row justify-content-md-between align-items-center mt-3 px-3 pb-3"},qZ={class:"mt-2"},HZ={key:0,class:"text-muted"},YZ={key:0,class:"d-flex align-items-center flex-wrap gap-2 mt-2"},zZ={class:"pagination mb-0"},ZZ={key:0,class:"page-item"},a0={key:1,class:"page-item disabled"},e0=["onClick"],t0={key:2,class:"page-item disabled"},s0={key:3,class:"page-item"};function i0(a,e,t,s,i,o){const r=(0,n.g2)("add-edit-educationLevel-modal");return(0,n.uX)(),(0,n.CE)("div",wZ,[i.isModalVisible?((0,n.uX)(),(0,n.Wv)(r,{key:0,"educationLevel-to-edit":i.educationLevelBeingEdited,onClose:o.closeModal,onSaveSuccessful:o.handleSaveSuccessful},null,8,["educationLevel-to-edit","onClose","onSaveSuccessful"])):(0,n.Q3)("",!0),(0,n.Lk)("div",FZ,[e[26]||(e[26]=(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("h3",null,"Daftar Nama Pendidikan")],-1)),(0,n.Lk)("div",XZ,[(0,n.Lk)("div",xZ,[(0,n.Lk)("div",TZ,[(0,n.Lk)("button",{class:"btn btn-outline-light txt-dark",onClick:e[0]||(e[0]=(...a)=>o.toggleFilterVisibility&&o.toggleFilterVisibility(...a))},[i.isFilterVisible?((0,n.uX)(),(0,n.CE)("i",SZ)):((0,n.uX)(),(0,n.CE)("i",BZ)),(0,n.Lk)("span",null,(0,k.v_)(i.isFilterVisible?"Sembunyikan":"Tampilkan")+" Filter",1)]),(0,n.Lk)("button",{class:"btn btn-success",onClick:e[1]||(e[1]=(...a)=>o.openAddModal&&o.openAddModal(...a))},e[10]||(e[10]=[(0,n.Lk)("i",{class:"fa fa-plus me-2"},null,-1),(0,n.Lk)("span",null," Tambah Data",-1)]))])]),i.isFilterVisible?((0,n.uX)(),(0,n.CE)("div",AZ,[(0,n.Lk)("div",_Z,[(0,n.Lk)("div",jZ,[e[11]||(e[11]=(0,n.Lk)("label",{for:"filterName",class:"form-label"},"Nama Pendidikan",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterName",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.filters.namapendidikan=a),placeholder:"Filter berdasarkan nama pendidikan"},null,512),[[l.Jo,i.filters.namapendidikan]])])]),(0,n.Lk)("div",VZ,[(0,n.Lk)("button",{class:"btn btn-secondary",onClick:e[3]||(e[3]=(...a)=>o.resetFilters&&o.resetFilters(...a))},e[12]||(e[12]=[(0,n.Lk)("i",{class:"fa fa-refresh me-2"},null,-1),(0,n.Lk)("span",null,"Reset Filter",-1)])),(0,n.Lk)("button",{class:"btn btn-primary",onClick:e[4]||(e[4]=(...a)=>o.applyFilters&&o.applyFilters(...a))},e[13]||(e[13]=[(0,n.Lk)("i",{class:"fa fa-search me-2"},null,-1),(0,n.Lk)("span",null,"Terapkan Filter",-1)]))])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",IZ,[(0,n.Lk)("table",NZ,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[e[15]||(e[15]=(0,n.Lk)("th",{scope:"col"},"No",-1)),(0,n.Lk)("th",{scope:"col",onClick:e[5]||(e[5]=a=>o.sortBy("namapendidikan"))},[e[14]||(e[14]=(0,n.eW)(" Nama Pendidikan ")),"namapendidikan"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",UZ)):"namapendidikan"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",RZ)):((0,n.uX)(),(0,n.CE)("i",QZ))]),e[16]||(e[16]=(0,n.Lk)("th",{scope:"col"},"Aksi",-1))])]),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.paginatedEducationLevels,(a,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:a.idpendidikan},[(0,n.Lk)("th",WZ,(0,k.v_)((i.currentPage-1)*i.perPage+t+1),1),(0,n.Lk)("td",null,(0,k.v_)(a.namapendidikan),1),(0,n.Lk)("td",null,[(0,n.Lk)("div",KZ,[(0,n.Lk)("button",{class:"btn btn-primary btn-sm",onClick:e=>o.openEditModal(a)},e[17]||(e[17]=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)]),8,OZ),(0,n.Lk)("button",{class:"btn btn-danger sweet-11 btn-sm",type:"button",onClick:e=>o.advancedDeleteAlert(a.idpendidikan)},e[18]||(e[18]=[(0,n.Lk)("i",{class:"fa fa-trash"},null,-1)]),8,$Z)])])]))),128)),0===o.paginatedEducationLevels.length?((0,n.uX)(),(0,n.CE)("tr",GZ,e[19]||(e[19]=[(0,n.Lk)("td",{colspan:"5",class:"text-center"},"Tidak ada data yang cocok atau tersedia.",-1)]))):(0,n.Q3)("",!0)])]),(0,n.Lk)("div",JZ,[(0,n.Lk)("div",qZ,[i.totalItems>0?((0,n.uX)(),(0,n.CE)("span",HZ,[e[20]||(e[20]=(0,n.eW)(" Menampilkan ")),(0,n.Lk)("strong",null,(0,k.v_)((i.currentPage-1)*i.perPage+1),1),e[21]||(e[21]=(0,n.eW)(" - ")),(0,n.Lk)("strong",null,(0,k.v_)(Math.min(i.currentPage*i.perPage,i.totalItems)),1),e[22]||(e[22]=(0,n.eW)(" dari ")),(0,n.Lk)("strong",null,(0,k.v_)(i.totalItems),1),e[23]||(e[23]=(0,n.eW)(" data "))])):(0,n.Q3)("",!0)]),-1!==i.perPage&&o.totalPages>1?((0,n.uX)(),(0,n.CE)("nav",YZ,[(0,n.Lk)("ul",zZ,[(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[6]||(e[6]=a=>o.changePage(i.currentPage-1))},"Prev")],2),o.pageNumbers[0]>1?((0,n.uX)(),(0,n.CE)("li",ZZ,[(0,n.Lk)("button",{class:"page-link",onClick:e[7]||(e[7]=a=>o.changePage(1))},"1")])):(0,n.Q3)("",!0),o.pageNumbers[0]>2?((0,n.uX)(),(0,n.CE)("li",a0,e[24]||(e[24]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.pageNumbers,a=>((0,n.uX)(),(0,n.CE)("li",{key:a,class:(0,k.C4)(["page-item",{active:i.currentPage===a}])},[(0,n.Lk)("button",{class:"page-link",onClick:e=>o.changePage(a)},(0,k.v_)(a),9,e0)],2))),128)),o.pageNumbers.slice(-1)[0]<o.totalPages-1?((0,n.uX)(),(0,n.CE)("li",t0,e[25]||(e[25]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),o.pageNumbers.slice(-1)[0]<o.totalPages?((0,n.uX)(),(0,n.CE)("li",s0,[(0,n.Lk)("button",{class:"page-link",onClick:e[8]||(e[8]=a=>o.changePage(o.totalPages))},(0,k.v_)(o.totalPages),1)])):(0,n.Q3)("",!0),(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:i.currentPage===o.totalPages}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[9]||(e[9]=a=>o.changePage(i.currentPage+1))},"Next")],2)])])):(0,n.Q3)("",!0)])])])])}const l0={class:"modal-header"},n0={class:"modal-title"},o0={class:"modal-body"},r0={class:"mb-3"},c0={key:0,class:"alert alert-danger mt-3"},d0={class:"modal-footer"},u0=["disabled"],m0={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},k0={key:1};function h0(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",{class:"modal-overlay",onClick:e[6]||(e[6]=(...a)=>o.handleOverlayClick&&o.handleOverlayClick(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[5]||(e[5]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",l0,[(0,n.Lk)("h5",n0,(0,k.v_)(o.isEditMode?"Edit Data Pendidikan":"Tambah Data Pendidikan"),1),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",o0,[(0,n.Lk)("form",{onSubmit:e[2]||(e[2]=(0,l.D$)((...a)=>o.submitForm&&o.submitForm(...a),["prevent"]))},[(0,n.Lk)("div",r0,[e[7]||(e[7]=(0,n.Lk)("label",{for:"namapendidikan",class:"form-label"},"Nama Pendidikan",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"namaPendidikan",placeholder:"Masukkan nama pendidikan","onUpdate:modelValue":e[1]||(e[1]=a=>i.formData.namapendidikan=a),required:""},null,512),[[l.Jo,i.formData.namapendidikan]])]),i.errorMessage?((0,n.uX)(),(0,n.CE)("div",c0,(0,k.v_)(i.errorMessage),1)):(0,n.Q3)("",!0)],32)]),(0,n.Lk)("div",d0,[(0,n.Lk)("button",{type:"button",class:"btn btn-danger",onClick:e[3]||(e[3]=(...a)=>o.closeModal&&o.closeModal(...a))},"Batal"),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[4]||(e[4]=(...a)=>o.submitForm&&o.submitForm(...a)),disabled:i.isLoading},[i.isLoading?((0,n.uX)(),(0,n.CE)("span",m0)):((0,n.uX)(),(0,n.CE)("span",k0,"Simpan"))],8,u0)])])])}var g0={name:"editEducationLevelModal",props:{educationLevelToEdit:{type:Object,default:null}},created(){this.toast=(0,ln.dj)()},data(){return{formData:{namapendidikan:""},isLoading:!1,errorMessage:null}},computed:{isEditMode(){return!!this.educationLevelToEdit}},watch:{educationLevelToEdit:{handler(a){this.formData=a?{...a}:{namapendidikan:""},this.errorMessage=null},immediate:!0}},methods:{closeModal(){this.$emit("close")},handleOverlayClick(a){a.target===a.currentTarget&&this.closeModal()},async submitForm(){this.errorMessage=null;const{namapendidikan:a}=this.formData;if(a){this.isLoading=!0;try{this.isEditMode?(await vh(this.educationLevelToEdit.idpendidikan,this.formData),this.toast.success("Data pendidikan berhasil diperbarui",{icon:"fa fa-check"})):(await yh(this.formData),this.toast.success("Data pendidikan berhasil ditambah",{icon:"fa fa-check"})),this.$emit("save-successful"),this.closeModal()}catch(e){console.error("Error occurred:",e),this.errorMessage=e.response?.data?.message||"Gagal menyimpan data.",this.toast.error("Gagal menyimpan data pendidikan",{icon:"fa fa-times"})}finally{this.isLoading=!1}}else this.errorMessage="Semua field wajib diisi."}}};const p0=(0,r.A)(g0,[["render",h0],["__scopeId","data-v-30e976b6"]]);var b0=p0,f0={components:{AddEditEducationLevelModal:b0},data(){return{educationLevels:[],sortColumn:"",sortDirection:"asc",isModalVisible:!1,currentPage:1,perPage:20,totalItems:0,educationLevelBeingEdited:null,jumpPage:1,isFilterVisible:!1,filters:{educationLevel_name:""}}},computed:{paginatedEducationLevels(){return this.educationLevels},totalPages(){return this.perPage<=0?1:Math.ceil(this.totalItems/this.perPage)},pageNumbers(){const a=[],e=5;let t=Math.max(1,this.currentPage-Math.floor(e/2)),s=t+e-1;s>this.totalPages&&(s=this.totalPages,t=Math.max(1,s-e+1));for(let i=t;i<=s;i++)a.push(i);return a}},watch:{currentPage(){this.fetchEducationLevels(),this.jumpPage=this.currentPage},perPage(){this.currentPage=1,this.fetchEducationLevels()}},async mounted(){this.toast=(0,ln.dj)(),await this.fetchEducationLevels()},methods:{openAddModal(){this.educationLevelBeingEdited=null,this.isModalVisible=!0},openEditModal(a){this.educationLevelBeingEdited={...a},this.isModalVisible=!0},closeModal(){this.isModalVisible=!1,this.educationLevelBeingEdited=null},handleSaveSuccessful(){this.closeModal(),this.fetchEducationLevels()},async fetchEducationLevels(){try{const a={act:"pendidikan",page:this.currentPage,limit:this.perPage,order:this.sortColumn?`${this.sortColumn} ${this.sortDirection}`:"",group:""},e=Object.entries(this.filters).filter(([a,e])=>""!==e).map(([a,e])=>`${a}=${e}`);e.length>0?a.filter=e.join(","):a.filter="";const t=await Lh(a),s=t.data?.data||t.data?.[0]?.data||[],i=t.data?.[0]?.meta?.pagination||{};this.educationLevels=s,this.totalItems=i.total||s.length}catch(a){console.error("Error fetching pendidikan:",a),this.$swal({icon:"error",title:"Oops...",text:"Gagal memuat data pendidikan. Silakan coba lagi nanti."})}},advancedDeleteAlert(a){this.$swal({title:"Hapus Data Pendidikan",text:"Apakah Anda yakin ingin menghapus data ini?",icon:"warning",showCancelButton:!0,confirmButtonText:'<i class="fa fa-check me-2"></i> Hapus!',confirmButtonColor:"#d33",cancelButtonText:'<i class="fa fa-times me-2"></i> Batal',cancelButtonColor:"#efefef",reverseButtons:!0}).then(async e=>{if(e.isConfirmed)try{await Ch(a),1===this.educationLevels.length&&this.currentPage>1?this.currentPage--:this.fetchEducationLevels(),this.toast.success("Data pendidikan berhasil dihapus",{icon:"fa fa-check"})}catch(t){this.toast.error("Gagal menghapus data pendidikan",{icon:"fa fa-times"})}})},sortBy(a){this.sortColumn===a?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=a,this.sortDirection="asc"),this.fetchEducationLevels()},changePage(a){a>=1&&a<=this.totalPages&&(this.currentPage=a)},toggleFilterVisibility(){this.isFilterVisible=!this.isFilterVisible},applyFilters(){this.currentPage=1,this.fetchEducationLevels()},resetFilters(){this.filters.namapendidikan="",this.sortColumn="",this.sortDirection="asc",this.currentPage=1,this.fetchEducationLevels()}}};const L0=(0,r.A)(f0,[["render",i0],["__scopeId","data-v-c67341ca"]]);var y0=L0,v0={components:{EducationLevelsTable:y0}};const C0=(0,r.A)(v0,[["render",MZ]]);var P0=C0;const E0={class:"container-fluid"},D0={class:"row widget-grid"};function M0(a,e,t,s,i,l){const o=(0,n.g2)("Breadcrumbs"),r=(0,n.g2)("BirthAttendantsTable");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(o,{main:"Kependudukan",title:a.$route.meta.title},null,8,["title"]),(0,n.Lk)("div",E0,[(0,n.Lk)("div",D0,[(0,n.bF)(r)])])])}const w0={class:"col-sm-12"},F0={class:"card"},X0={class:"card-body"},x0={class:"d-flex justify-content-end align-items-start mb-3"},T0={class:"d-flex gap-2"},S0={key:0,class:"fa fa-angle-up me-2"},B0={key:1,class:"fa fa-angle-down me-2"},A0={key:0,class:"border p-3 mb-3 rounded filter-section"},_0={class:"row g-2"},j0={class:"col-md-4"},V0={class:"d-flex justify-content-end gap-2 mt-3"},I0={class:"table-responsive signal-table"},N0={class:"table table-hover"},U0={key:0,class:"fa fa-sort-asc"},R0={key:1,class:"fa fa-sort-desc"},Q0={key:2,class:"fa fa-sort"},W0={scope:"row"},K0={class:"btn-group"},O0=["onClick"],$0=["onClick"],G0={key:0},J0={class:"d-flex flex-column flex-md-row justify-content-md-between align-items-center mt-3 px-3 pb-3"},q0={class:"mt-2"},H0={key:0,class:"text-muted"},Y0={key:0,class:"d-flex align-items-center flex-wrap gap-2 mt-2"},z0={class:"pagination mb-0"},Z0={key:0,class:"page-item"},a1={key:1,class:"page-item disabled"},e1=["onClick"],t1={key:2,class:"page-item disabled"},s1={key:3,class:"page-item"};function i1(a,e,t,s,i,o){const r=(0,n.g2)("add-edit-birthAttendant-modal");return(0,n.uX)(),(0,n.CE)("div",w0,[i.isModalVisible?((0,n.uX)(),(0,n.Wv)(r,{key:0,"birthAttendant-to-edit":i.birthAttendantBeingEdited,onClose:o.closeModal,onSaveSuccessful:o.handleSaveSuccessful},null,8,["birthAttendant-to-edit","onClose","onSaveSuccessful"])):(0,n.Q3)("",!0),(0,n.Lk)("div",F0,[e[26]||(e[26]=(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("h3",null,"Daftar Penolong Kelahiran")],-1)),(0,n.Lk)("div",X0,[(0,n.Lk)("div",x0,[(0,n.Lk)("div",T0,[(0,n.Lk)("button",{class:"btn btn-outline-light txt-dark",onClick:e[0]||(e[0]=(...a)=>o.toggleFilterVisibility&&o.toggleFilterVisibility(...a))},[i.isFilterVisible?((0,n.uX)(),(0,n.CE)("i",S0)):((0,n.uX)(),(0,n.CE)("i",B0)),(0,n.Lk)("span",null,(0,k.v_)(i.isFilterVisible?"Sembunyikan":"Tampilkan")+" Filter",1)]),(0,n.Lk)("button",{class:"btn btn-success",onClick:e[1]||(e[1]=(...a)=>o.openAddModal&&o.openAddModal(...a))},e[10]||(e[10]=[(0,n.Lk)("i",{class:"fa fa-plus me-2"},null,-1),(0,n.Lk)("span",null," Tambah Data",-1)]))])]),i.isFilterVisible?((0,n.uX)(),(0,n.CE)("div",A0,[(0,n.Lk)("div",_0,[(0,n.Lk)("div",j0,[e[11]||(e[11]=(0,n.Lk)("label",{for:"filterName",class:"form-label"},"Penolong Kelahiran",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterName",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.filters.namapenolongkelahiran=a),placeholder:"Filter berdasarkan penolong kelahiran"},null,512),[[l.Jo,i.filters.namapenolongkelahiran]])])]),(0,n.Lk)("div",V0,[(0,n.Lk)("button",{class:"btn btn-secondary",onClick:e[3]||(e[3]=(...a)=>o.resetFilters&&o.resetFilters(...a))},e[12]||(e[12]=[(0,n.Lk)("i",{class:"fa fa-refresh me-2"},null,-1),(0,n.Lk)("span",null,"Reset Filter",-1)])),(0,n.Lk)("button",{class:"btn btn-primary",onClick:e[4]||(e[4]=(...a)=>o.applyFilters&&o.applyFilters(...a))},e[13]||(e[13]=[(0,n.Lk)("i",{class:"fa fa-search me-2"},null,-1),(0,n.Lk)("span",null,"Terapkan Filter",-1)]))])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",I0,[(0,n.Lk)("table",N0,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[e[15]||(e[15]=(0,n.Lk)("th",{scope:"col"},"No",-1)),(0,n.Lk)("th",{scope:"col",onClick:e[5]||(e[5]=a=>o.sortBy("namapenolongkelahiran"))},[e[14]||(e[14]=(0,n.eW)(" Nama Penolong Kelahiran ")),"namapenolongkelahiran"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",U0)):"namapenolongkelahiran"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",R0)):((0,n.uX)(),(0,n.CE)("i",Q0))]),e[16]||(e[16]=(0,n.Lk)("th",{scope:"col"},"Aksi",-1))])]),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.paginatedBirthAttendants,(a,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:a.idpenolongkelahiran},[(0,n.Lk)("th",W0,(0,k.v_)((i.currentPage-1)*i.perPage+t+1),1),(0,n.Lk)("td",null,(0,k.v_)(a.namapenolongkelahiran),1),(0,n.Lk)("td",null,[(0,n.Lk)("div",K0,[(0,n.Lk)("button",{class:"btn btn-primary btn-sm",onClick:e=>o.openEditModal(a)},e[17]||(e[17]=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)]),8,O0),(0,n.Lk)("button",{class:"btn btn-danger sweet-11 btn-sm",type:"button",onClick:e=>o.advancedDeleteAlert(a.idpenolongkelahiran)},e[18]||(e[18]=[(0,n.Lk)("i",{class:"fa fa-trash"},null,-1)]),8,$0)])])]))),128)),0===o.paginatedBirthAttendants.length?((0,n.uX)(),(0,n.CE)("tr",G0,e[19]||(e[19]=[(0,n.Lk)("td",{colspan:"5",class:"text-center"},"Tidak ada data yang cocok atau tersedia.",-1)]))):(0,n.Q3)("",!0)])]),(0,n.Lk)("div",J0,[(0,n.Lk)("div",q0,[i.totalItems>0?((0,n.uX)(),(0,n.CE)("span",H0,[e[20]||(e[20]=(0,n.eW)(" Menampilkan ")),(0,n.Lk)("strong",null,(0,k.v_)((i.currentPage-1)*i.perPage+1),1),e[21]||(e[21]=(0,n.eW)(" - ")),(0,n.Lk)("strong",null,(0,k.v_)(Math.min(i.currentPage*i.perPage,i.totalItems)),1),e[22]||(e[22]=(0,n.eW)(" dari ")),(0,n.Lk)("strong",null,(0,k.v_)(i.totalItems),1),e[23]||(e[23]=(0,n.eW)(" data "))])):(0,n.Q3)("",!0)]),-1!==i.perPage&&o.totalPages>1?((0,n.uX)(),(0,n.CE)("nav",Y0,[(0,n.Lk)("ul",z0,[(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[6]||(e[6]=a=>o.changePage(i.currentPage-1))},"Prev")],2),o.pageNumbers[0]>1?((0,n.uX)(),(0,n.CE)("li",Z0,[(0,n.Lk)("button",{class:"page-link",onClick:e[7]||(e[7]=a=>o.changePage(1))},"1")])):(0,n.Q3)("",!0),o.pageNumbers[0]>2?((0,n.uX)(),(0,n.CE)("li",a1,e[24]||(e[24]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.pageNumbers,a=>((0,n.uX)(),(0,n.CE)("li",{key:a,class:(0,k.C4)(["page-item",{active:i.currentPage===a}])},[(0,n.Lk)("button",{class:"page-link",onClick:e=>o.changePage(a)},(0,k.v_)(a),9,e1)],2))),128)),o.pageNumbers.slice(-1)[0]<o.totalPages-1?((0,n.uX)(),(0,n.CE)("li",t1,e[25]||(e[25]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),o.pageNumbers.slice(-1)[0]<o.totalPages?((0,n.uX)(),(0,n.CE)("li",s1,[(0,n.Lk)("button",{class:"page-link",onClick:e[8]||(e[8]=a=>o.changePage(o.totalPages))},(0,k.v_)(o.totalPages),1)])):(0,n.Q3)("",!0),(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:i.currentPage===o.totalPages}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[9]||(e[9]=a=>o.changePage(i.currentPage+1))},"Next")],2)])])):(0,n.Q3)("",!0)])])])])}const l1={class:"modal-header"},n1={class:"modal-title"},o1={class:"modal-body"},r1={class:"mb-3"},c1={key:0,class:"alert alert-danger mt-3"},d1={class:"modal-footer"},u1=["disabled"],m1={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},k1={key:1};function h1(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",{class:"modal-overlay",onClick:e[6]||(e[6]=(...a)=>o.handleOverlayClick&&o.handleOverlayClick(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[5]||(e[5]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",l1,[(0,n.Lk)("h5",n1,(0,k.v_)(o.isEditMode?"Edit Data Penolong Kelahiran":"Tambah Data Penolong Kelahiran"),1),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",o1,[(0,n.Lk)("form",{onSubmit:e[2]||(e[2]=(0,l.D$)((...a)=>o.submitForm&&o.submitForm(...a),["prevent"]))},[(0,n.Lk)("div",r1,[e[7]||(e[7]=(0,n.Lk)("label",{for:"namapenolongkelahiran",class:"form-label"},"Nama Penolong Kelahiran",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"namaPenolongKelahiran",placeholder:"Masukkan nama penolong kelahiran","onUpdate:modelValue":e[1]||(e[1]=a=>i.formData.namapenolongkelahiran=a),required:""},null,512),[[l.Jo,i.formData.namapenolongkelahiran]])]),i.errorMessage?((0,n.uX)(),(0,n.CE)("div",c1,(0,k.v_)(i.errorMessage),1)):(0,n.Q3)("",!0)],32)]),(0,n.Lk)("div",d1,[(0,n.Lk)("button",{type:"button",class:"btn btn-danger",onClick:e[3]||(e[3]=(...a)=>o.closeModal&&o.closeModal(...a))},"Batal"),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[4]||(e[4]=(...a)=>o.submitForm&&o.submitForm(...a)),disabled:i.isLoading},[i.isLoading?((0,n.uX)(),(0,n.CE)("span",m1)):((0,n.uX)(),(0,n.CE)("span",k1,"Simpan"))],8,u1)])])])}var g1={name:"editBirthAttendantModal",props:{birthAttendantToEdit:{type:Object,default:null}},created(){this.toast=(0,ln.dj)()},data(){return{formData:{namapenolongkelahiran:""},isLoading:!1,errorMessage:null}},computed:{isEditMode(){return!!this.birthAttendantToEdit}},watch:{birthAttendantToEdit:{handler(a){this.formData=a?{...a}:{namapenolongkelahiran:""},this.errorMessage=null},immediate:!0}},methods:{closeModal(){this.$emit("close")},handleOverlayClick(a){a.target===a.currentTarget&&this.closeModal()},async submitForm(){this.errorMessage=null;const{namapenolongkelahiran:a}=this.formData;if(a){this.isLoading=!0;try{this.isEditMode?(await Xh(this.birthAttendantToEdit.idpenolongkelahiran,this.formData),this.toast.success("Data penolong kelahiran berhasil diperbarui",{icon:"fa fa-check"})):(await Fh(this.formData),this.toast.success("Data penolong kelahiran berhasil ditambah",{icon:"fa fa-check"})),this.$emit("save-successful"),this.closeModal()}catch(e){console.error("Error occurred:",e),this.errorMessage=e.response?.data?.message||"Gagal menyimpan data.",this.toast.error("Gagal menyimpan data penolong kelahiran",{icon:"fa fa-times"})}finally{this.isLoading=!1}}else this.errorMessage="Semua field wajib diisi."}}};const p1=(0,r.A)(g1,[["render",h1],["__scopeId","data-v-d821f298"]]);var b1=p1,f1={components:{AddEditBirthAttendantModal:b1},data(){return{birthAttendants:[],sortColumn:"",sortDirection:"asc",isModalVisible:!1,currentPage:1,perPage:20,totalItems:0,birthAttendantBeingEdited:null,jumpPage:1,isFilterVisible:!1,filters:{birthAttendant_name:""}}},computed:{paginatedBirthAttendants(){return this.birthAttendants},totalPages(){return this.perPage<=0?1:Math.ceil(this.totalItems/this.perPage)},pageNumbers(){const a=[],e=5;let t=Math.max(1,this.currentPage-Math.floor(e/2)),s=t+e-1;s>this.totalPages&&(s=this.totalPages,t=Math.max(1,s-e+1));for(let i=t;i<=s;i++)a.push(i);return a}},watch:{currentPage(){this.fetchBirthAttendants(),this.jumpPage=this.currentPage},perPage(){this.currentPage=1,this.fetchBirthAttendants()}},async mounted(){this.toast=(0,ln.dj)(),await this.fetchBirthAttendants()},methods:{openAddModal(){this.birthAttendantBeingEdited=null,this.isModalVisible=!0},openEditModal(a){this.birthAttendantBeingEdited={...a},this.isModalVisible=!0},closeModal(){this.isModalVisible=!1,this.birthAttendantBeingEdited=null},handleSaveSuccessful(){this.closeModal(),this.fetchBirthAttendants()},async fetchBirthAttendants(){try{const a={act:"penolong-kelahiran",page:this.currentPage,limit:this.perPage,order:this.sortColumn?`${this.sortColumn} ${this.sortDirection}`:"",group:""},e=Object.entries(this.filters).filter(([a,e])=>""!==e).map(([a,e])=>`${a}=${e}`);e.length>0?a.filter=e.join(","):a.filter="";const t=await wh(a),s=t.data?.data||t.data?.[0]?.data||[],i=t.data?.[0]?.meta?.pagination||{};this.birthAttendants=s,this.totalItems=i.total||s.length}catch(a){console.error("Error fetching penolong kelahiran:",a),this.$swal({icon:"error",title:"Oops...",text:"Gagal memuat data penolong kelahiran. Silakan coba lagi nanti."})}},advancedDeleteAlert(a){this.$swal({title:"Hapus Data Penolong Kelahiran",text:"Apakah Anda yakin ingin menghapus data ini?",icon:"warning",showCancelButton:!0,confirmButtonText:'<i class="fa fa-check me-2"></i> Hapus!',confirmButtonColor:"#d33",cancelButtonText:'<i class="fa fa-times me-2"></i> Batal',cancelButtonColor:"#efefef",reverseButtons:!0}).then(async e=>{if(e.isConfirmed)try{await xh(a),1===this.birthAttendants.length&&this.currentPage>1?this.currentPage--:this.fetchBirthAttendants(),this.toast.success("Data penolong kelahiran berhasil dihapus",{icon:"fa fa-check"})}catch(t){this.toast.error("Gagal menghapus data penolong kelahiran",{icon:"fa fa-times"})}})},sortBy(a){this.sortColumn===a?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=a,this.sortDirection="asc"),this.fetchBirthAttendants()},changePage(a){a>=1&&a<=this.totalPages&&(this.currentPage=a)},toggleFilterVisibility(){this.isFilterVisible=!this.isFilterVisible},applyFilters(){this.currentPage=1,this.fetchBirthAttendants()},resetFilters(){this.filters.namapenolongkelahiran="",this.sortColumn="",this.sortDirection="asc",this.currentPage=1,this.fetchBirthAttendants()}}};const L1=(0,r.A)(f1,[["render",i1],["__scopeId","data-v-6765e6f7"]]);var y1=L1,v1={components:{BirthAttendantsTable:y1}};const C1=(0,r.A)(v1,[["render",M0]]);var P1=C1;const E1={class:"container-fluid"},D1={class:"row widget-grid"};function M1(a,e,t,s,i,l){const o=(0,n.g2)("Breadcrumbs"),r=(0,n.g2)("BirthPlacesTable");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(o,{main:"Kependudukan",title:a.$route.meta.title},null,8,["title"]),(0,n.Lk)("div",E1,[(0,n.Lk)("div",D1,[(0,n.bF)(r)])])])}const w1={class:"col-sm-12"},F1={class:"card"},X1={class:"card-body"},x1={class:"d-flex justify-content-end align-items-start mb-3"},T1={class:"d-flex gap-2"},S1={key:0,class:"fa fa-angle-up me-2"},B1={key:1,class:"fa fa-angle-down me-2"},A1={key:0,class:"border p-3 mb-3 rounded filter-section"},_1={class:"row g-2"},j1={class:"col-md-4"},V1={class:"d-flex justify-content-end gap-2 mt-3"},I1={class:"table-responsive signal-table"},N1={class:"table table-hover"},U1={key:0,class:"fa fa-sort-asc"},R1={key:1,class:"fa fa-sort-desc"},Q1={key:2,class:"fa fa-sort"},W1={scope:"row"},K1={class:"btn-group"},O1=["onClick"],$1=["onClick"],G1={key:0},J1={class:"d-flex flex-column flex-md-row justify-content-md-between align-items-center mt-3 px-3 pb-3"},q1={class:"mt-2"},H1={key:0,class:"text-muted"},Y1={key:0,class:"d-flex align-items-center flex-wrap gap-2 mt-2"},z1={class:"pagination mb-0"},Z1={key:0,class:"page-item"},a2={key:1,class:"page-item disabled"},e2=["onClick"],t2={key:2,class:"page-item disabled"},s2={key:3,class:"page-item"};function i2(a,e,t,s,i,o){const r=(0,n.g2)("add-edit-birthPlace-modal");return(0,n.uX)(),(0,n.CE)("div",w1,[i.isModalVisible?((0,n.uX)(),(0,n.Wv)(r,{key:0,"birthPlace-to-edit":i.birthPlaceBeingEdited,onClose:o.closeModal,onSaveSuccessful:o.handleSaveSuccessful},null,8,["birthPlace-to-edit","onClose","onSaveSuccessful"])):(0,n.Q3)("",!0),(0,n.Lk)("div",F1,[e[26]||(e[26]=(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("h3",null,"Daftar Tempat Dilahirkan")],-1)),(0,n.Lk)("div",X1,[(0,n.Lk)("div",x1,[(0,n.Lk)("div",T1,[(0,n.Lk)("button",{class:"btn btn-outline-light txt-dark",onClick:e[0]||(e[0]=(...a)=>o.toggleFilterVisibility&&o.toggleFilterVisibility(...a))},[i.isFilterVisible?((0,n.uX)(),(0,n.CE)("i",S1)):((0,n.uX)(),(0,n.CE)("i",B1)),(0,n.Lk)("span",null,(0,k.v_)(i.isFilterVisible?"Sembunyikan":"Tampilkan")+" Filter",1)]),(0,n.Lk)("button",{class:"btn btn-success",onClick:e[1]||(e[1]=(...a)=>o.openAddModal&&o.openAddModal(...a))},e[10]||(e[10]=[(0,n.Lk)("i",{class:"fa fa-plus me-2"},null,-1),(0,n.Lk)("span",null," Tambah Data",-1)]))])]),i.isFilterVisible?((0,n.uX)(),(0,n.CE)("div",A1,[(0,n.Lk)("div",_1,[(0,n.Lk)("div",j1,[e[11]||(e[11]=(0,n.Lk)("label",{for:"filterName",class:"form-label"},"Tempat Dilahirkan",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterName",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.filters.namatempatdilahirkan=a),placeholder:"Filter berdasarkan tempat dilahirkan"},null,512),[[l.Jo,i.filters.namatempatdilahirkan]])])]),(0,n.Lk)("div",V1,[(0,n.Lk)("button",{class:"btn btn-secondary",onClick:e[3]||(e[3]=(...a)=>o.resetFilters&&o.resetFilters(...a))},e[12]||(e[12]=[(0,n.Lk)("i",{class:"fa fa-refresh me-2"},null,-1),(0,n.Lk)("span",null,"Reset Filter",-1)])),(0,n.Lk)("button",{class:"btn btn-primary",onClick:e[4]||(e[4]=(...a)=>o.applyFilters&&o.applyFilters(...a))},e[13]||(e[13]=[(0,n.Lk)("i",{class:"fa fa-search me-2"},null,-1),(0,n.Lk)("span",null,"Terapkan Filter",-1)]))])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",I1,[(0,n.Lk)("table",N1,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[e[15]||(e[15]=(0,n.Lk)("th",{scope:"col"},"No",-1)),(0,n.Lk)("th",{scope:"col",onClick:e[5]||(e[5]=a=>o.sortBy("namatempatdilahirkan"))},[e[14]||(e[14]=(0,n.eW)(" Tempat Dilahirkan ")),"namatempatdilahirkan"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",U1)):"namatempatdilahirkan"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",R1)):((0,n.uX)(),(0,n.CE)("i",Q1))]),e[16]||(e[16]=(0,n.Lk)("th",{scope:"col"},"Aksi",-1))])]),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.paginatedBirthPlaces,(a,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:a.idtempatdilahirkan},[(0,n.Lk)("th",W1,(0,k.v_)((i.currentPage-1)*i.perPage+t+1),1),(0,n.Lk)("td",null,(0,k.v_)(a.namatempatdilahirkan),1),(0,n.Lk)("td",null,[(0,n.Lk)("div",K1,[(0,n.Lk)("button",{class:"btn btn-primary btn-sm",onClick:e=>o.openEditModal(a)},e[17]||(e[17]=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)]),8,O1),(0,n.Lk)("button",{class:"btn btn-danger sweet-11 btn-sm",type:"button",onClick:e=>o.advancedDeleteAlert(a.idtempatdilahirkan)},e[18]||(e[18]=[(0,n.Lk)("i",{class:"fa fa-trash"},null,-1)]),8,$1)])])]))),128)),0===o.paginatedBirthPlaces.length?((0,n.uX)(),(0,n.CE)("tr",G1,e[19]||(e[19]=[(0,n.Lk)("td",{colspan:"5",class:"text-center"},"Tidak ada data yang cocok atau tersedia.",-1)]))):(0,n.Q3)("",!0)])]),(0,n.Lk)("div",J1,[(0,n.Lk)("div",q1,[i.totalItems>0?((0,n.uX)(),(0,n.CE)("span",H1,[e[20]||(e[20]=(0,n.eW)(" Menampilkan ")),(0,n.Lk)("strong",null,(0,k.v_)((i.currentPage-1)*i.perPage+1),1),e[21]||(e[21]=(0,n.eW)(" - ")),(0,n.Lk)("strong",null,(0,k.v_)(Math.min(i.currentPage*i.perPage,i.totalItems)),1),e[22]||(e[22]=(0,n.eW)(" dari ")),(0,n.Lk)("strong",null,(0,k.v_)(i.totalItems),1),e[23]||(e[23]=(0,n.eW)(" data "))])):(0,n.Q3)("",!0)]),-1!==i.perPage&&o.totalPages>1?((0,n.uX)(),(0,n.CE)("nav",Y1,[(0,n.Lk)("ul",z1,[(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[6]||(e[6]=a=>o.changePage(i.currentPage-1))},"Prev")],2),o.pageNumbers[0]>1?((0,n.uX)(),(0,n.CE)("li",Z1,[(0,n.Lk)("button",{class:"page-link",onClick:e[7]||(e[7]=a=>o.changePage(1))},"1")])):(0,n.Q3)("",!0),o.pageNumbers[0]>2?((0,n.uX)(),(0,n.CE)("li",a2,e[24]||(e[24]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.pageNumbers,a=>((0,n.uX)(),(0,n.CE)("li",{key:a,class:(0,k.C4)(["page-item",{active:i.currentPage===a}])},[(0,n.Lk)("button",{class:"page-link",onClick:e=>o.changePage(a)},(0,k.v_)(a),9,e2)],2))),128)),o.pageNumbers.slice(-1)[0]<o.totalPages-1?((0,n.uX)(),(0,n.CE)("li",t2,e[25]||(e[25]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),o.pageNumbers.slice(-1)[0]<o.totalPages?((0,n.uX)(),(0,n.CE)("li",s2,[(0,n.Lk)("button",{class:"page-link",onClick:e[8]||(e[8]=a=>o.changePage(o.totalPages))},(0,k.v_)(o.totalPages),1)])):(0,n.Q3)("",!0),(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:i.currentPage===o.totalPages}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[9]||(e[9]=a=>o.changePage(i.currentPage+1))},"Next")],2)])])):(0,n.Q3)("",!0)])])])])}const l2={class:"modal-header"},n2={class:"modal-title"},o2={class:"modal-body"},r2={class:"mb-3"},c2={key:0,class:"alert alert-danger mt-3"},d2={class:"modal-footer"},u2=["disabled"],m2={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},k2={key:1};function h2(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",{class:"modal-overlay",onClick:e[6]||(e[6]=(...a)=>o.handleOverlayClick&&o.handleOverlayClick(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[5]||(e[5]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",l2,[(0,n.Lk)("h5",n2,(0,k.v_)(o.isEditMode?"Edit Data Tempat Dilahirkan":"Tambah Data Tempat Dilahirkan"),1),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",o2,[(0,n.Lk)("form",{onSubmit:e[2]||(e[2]=(0,l.D$)((...a)=>o.submitForm&&o.submitForm(...a),["prevent"]))},[(0,n.Lk)("div",r2,[e[7]||(e[7]=(0,n.Lk)("label",{for:"namatempatdilahirkan",class:"form-label"},"Nama Tempat Dilahirkan",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"namaTempatDilahirkan",placeholder:"Masukkan tempat dilahirkan","onUpdate:modelValue":e[1]||(e[1]=a=>i.formData.namatempatdilahirkan=a),required:""},null,512),[[l.Jo,i.formData.namatempatdilahirkan]])]),i.errorMessage?((0,n.uX)(),(0,n.CE)("div",c2,(0,k.v_)(i.errorMessage),1)):(0,n.Q3)("",!0)],32)]),(0,n.Lk)("div",d2,[(0,n.Lk)("button",{type:"button",class:"btn btn-danger",onClick:e[3]||(e[3]=(...a)=>o.closeModal&&o.closeModal(...a))},"Batal"),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[4]||(e[4]=(...a)=>o.submitForm&&o.submitForm(...a)),disabled:i.isLoading},[i.isLoading?((0,n.uX)(),(0,n.CE)("span",m2)):((0,n.uX)(),(0,n.CE)("span",k2,"Simpan"))],8,u2)])])])}var g2={name:"editBirthPlaceModal",props:{birthPlaceToEdit:{type:Object,default:null}},created(){this.toast=(0,ln.dj)()},data(){return{formData:{namatempatdilahirkan:""},isLoading:!1,errorMessage:null}},computed:{isEditMode(){return!!this.birthPlaceToEdit}},watch:{birthPlaceToEdit:{handler(a){this.formData=a?{...a}:{namatempatdilahirkan:""},this.errorMessage=null},immediate:!0}},methods:{closeModal(){this.$emit("close")},handleOverlayClick(a){a.target===a.currentTarget&&this.closeModal()},async submitForm(){this.errorMessage=null;const{namatempatdilahirkan:a}=this.formData;if(a){this.isLoading=!0;try{this.isEditMode?(await kh(this.birthPlaceToEdit.idtempatdilahirkan,this.formData),this.toast.success("Data tempat dilahirkan berhasil diperbarui",{icon:"fa fa-check"})):(await mh(this.formData),this.toast.success("Data tempat dilahirkan berhasil ditambah",{icon:"fa fa-check"})),this.$emit("save-successful"),this.closeModal()}catch(e){console.error("Error occurred:",e),this.errorMessage=e.response?.data?.message||"Gagal menyimpan data.",this.toast.error("Gagal menyimpan data tempat dilahirkan",{icon:"fa fa-times"})}finally{this.isLoading=!1}}else this.errorMessage="Semua field wajib diisi."}}};const p2=(0,r.A)(g2,[["render",h2],["__scopeId","data-v-77c04558"]]);var b2=p2,f2={components:{AddEditBirthPlaceModal:b2},data(){return{birthPlaces:[],sortColumn:"",sortDirection:"asc",isModalVisible:!1,currentPage:1,perPage:20,totalItems:0,birthPlaceBeingEdited:null,jumpPage:1,isFilterVisible:!1,filters:{birthPlace_name:""}}},computed:{paginatedBirthPlaces(){return this.birthPlaces},totalPages(){return this.perPage<=0?1:Math.ceil(this.totalItems/this.perPage)},pageNumbers(){const a=[],e=5;let t=Math.max(1,this.currentPage-Math.floor(e/2)),s=t+e-1;s>this.totalPages&&(s=this.totalPages,t=Math.max(1,s-e+1));for(let i=t;i<=s;i++)a.push(i);return a}},watch:{currentPage(){this.fetchBirthPlaces(),this.jumpPage=this.currentPage},perPage(){this.currentPage=1,this.fetchBirthPlaces()}},async mounted(){this.toast=(0,ln.dj)(),await this.fetchBirthPlaces()},methods:{openAddModal(){this.birthPlaceBeingEdited=null,this.isModalVisible=!0},openEditModal(a){this.birthPlaceBeingEdited={...a},this.isModalVisible=!0},closeModal(){this.isModalVisible=!1,this.birthPlaceBeingEdited=null},handleSaveSuccessful(){this.closeModal(),this.fetchBirthPlaces()},async fetchBirthPlaces(){try{const a={act:"tempat-dilahirkan",page:this.currentPage,limit:this.perPage,order:this.sortColumn?`${this.sortColumn} ${this.sortDirection}`:"",group:""},e=Object.entries(this.filters).filter(([a,e])=>""!==e).map(([a,e])=>`${a}=${e}`);e.length>0?a.filter=e.join(","):a.filter="";const t=await uh(a),s=t.data?.data||t.data?.[0]?.data||[],i=t.data?.[0]?.meta?.pagination||{};this.birthPlaces=s,this.totalItems=i.total||s.length}catch(a){console.error("Error fetching gtempat dilahirkan:",a),this.$swal({icon:"error",title:"Oops...",text:"Gagal memuat data tempat dilahirkan. Silakan coba lagi nanti."})}},advancedDeleteAlert(a){this.$swal({title:"Hapus Data Tempat Dilahirkan",text:"Apakah Anda yakin ingin menghapus data ini?",icon:"warning",showCancelButton:!0,confirmButtonText:'<i class="fa fa-check me-2"></i> Hapus!',confirmButtonColor:"#d33",cancelButtonText:'<i class="fa fa-times me-2"></i> Batal',cancelButtonColor:"#efefef",reverseButtons:!0}).then(async e=>{if(e.isConfirmed)try{await hh(a),1===this.birthPlaces.length&&this.currentPage>1?this.currentPage--:this.fetchBirthPlaces(),this.toast.success("Data tempat dilahirkan berhasil dihapus",{icon:"fa fa-check"})}catch(t){this.toast.error("Gagal menghapus data tempat dilahirkan",{icon:"fa fa-times"})}})},sortBy(a){this.sortColumn===a?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=a,this.sortDirection="asc"),this.fetchBirthPlaces()},changePage(a){a>=1&&a<=this.totalPages&&(this.currentPage=a)},toggleFilterVisibility(){this.isFilterVisible=!this.isFilterVisible},applyFilters(){this.currentPage=1,this.fetchBirthPlaces()},resetFilters(){this.filters.namatempatdilahirkan="",this.sortColumn="",this.sortDirection="asc",this.currentPage=1,this.fetchBirthPlaces()}}};const L2=(0,r.A)(f2,[["render",i2],["__scopeId","data-v-1305f1c7"]]);var y2=L2,v2={components:{BirthPlacesTable:y2}};const C2=(0,r.A)(v2,[["render",M1]]);var P2=C2;const E2={class:"container-fluid"},D2={class:"row widget-grid"};function M2(a,e,t,s,i,l){const o=(0,n.g2)("Breadcrumbs"),r=(0,n.g2)("MartialStatusesTable");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(o,{main:"Kependudukan",title:a.$route.meta.title},null,8,["title"]),(0,n.Lk)("div",E2,[(0,n.Lk)("div",D2,[(0,n.bF)(r)])])])}const w2={class:"col-sm-12"},F2={class:"card"},X2={class:"card-body"},x2={class:"d-flex justify-content-end align-items-start mb-3"},T2={class:"d-flex gap-2"},S2={key:0,class:"fa fa-angle-up me-2"},B2={key:1,class:"fa fa-angle-down me-2"},A2={key:0,class:"border p-3 mb-3 rounded filter-section"},_2={class:"row g-2"},j2={class:"col-md-4"},V2={class:"d-flex justify-content-end gap-2 mt-3"},I2={class:"table-responsive signal-table"},N2={class:"table table-hover"},U2={key:0,class:"fa fa-sort-asc"},R2={key:1,class:"fa fa-sort-desc"},Q2={key:2,class:"fa fa-sort"},W2={scope:"row"},K2={class:"btn-group"},O2=["onClick"],$2=["onClick"],G2={key:0},J2={class:"d-flex flex-column flex-md-row justify-content-md-between align-items-center mt-3 px-3 pb-3"},q2={class:"mt-2"},H2={key:0,class:"text-muted"},Y2={key:0,class:"d-flex align-items-center flex-wrap gap-2 mt-2"},z2={class:"pagination mb-0"},Z2={key:0,class:"page-item"},a3={key:1,class:"page-item disabled"},e3=["onClick"],t3={key:2,class:"page-item disabled"},s3={key:3,class:"page-item"};function i3(a,e,t,s,i,o){const r=(0,n.g2)("add-edit-martialStatus-modal");return(0,n.uX)(),(0,n.CE)("div",w2,[i.isModalVisible?((0,n.uX)(),(0,n.Wv)(r,{key:0,"martialStatus-to-edit":i.martialStatusBeingEdited,onClose:o.closeModal,onSaveSuccessful:o.handleSaveSuccessful},null,8,["martialStatus-to-edit","onClose","onSaveSuccessful"])):(0,n.Q3)("",!0),(0,n.Lk)("div",F2,[e[26]||(e[26]=(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("h3",null,"Daftar Nama Status Perkawinan")],-1)),(0,n.Lk)("div",X2,[(0,n.Lk)("div",x2,[(0,n.Lk)("div",T2,[(0,n.Lk)("button",{class:"btn btn-outline-light txt-dark",onClick:e[0]||(e[0]=(...a)=>o.toggleFilterVisibility&&o.toggleFilterVisibility(...a))},[i.isFilterVisible?((0,n.uX)(),(0,n.CE)("i",S2)):((0,n.uX)(),(0,n.CE)("i",B2)),(0,n.Lk)("span",null,(0,k.v_)(i.isFilterVisible?"Sembunyikan":"Tampilkan")+" Filter",1)]),(0,n.Lk)("button",{class:"btn btn-success",onClick:e[1]||(e[1]=(...a)=>o.openAddModal&&o.openAddModal(...a))},e[10]||(e[10]=[(0,n.Lk)("i",{class:"fa fa-plus me-2"},null,-1),(0,n.Lk)("span",null," Tambah Data",-1)]))])]),i.isFilterVisible?((0,n.uX)(),(0,n.CE)("div",A2,[(0,n.Lk)("div",_2,[(0,n.Lk)("div",j2,[e[11]||(e[11]=(0,n.Lk)("label",{for:"filterName",class:"form-label"},"Nama Status Perkawinan",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterName",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.filters.namastatusperkawinan=a),placeholder:"Filter berdasarkan nama status perkawinan"},null,512),[[l.Jo,i.filters.namastatusperkawinan]])])]),(0,n.Lk)("div",V2,[(0,n.Lk)("button",{class:"btn btn-secondary",onClick:e[3]||(e[3]=(...a)=>o.resetFilters&&o.resetFilters(...a))},e[12]||(e[12]=[(0,n.Lk)("i",{class:"fa fa-refresh me-2"},null,-1),(0,n.Lk)("span",null,"Reset Filter",-1)])),(0,n.Lk)("button",{class:"btn btn-primary",onClick:e[4]||(e[4]=(...a)=>o.applyFilters&&o.applyFilters(...a))},e[13]||(e[13]=[(0,n.Lk)("i",{class:"fa fa-search me-2"},null,-1),(0,n.Lk)("span",null,"Terapkan Filter",-1)]))])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",I2,[(0,n.Lk)("table",N2,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[e[15]||(e[15]=(0,n.Lk)("th",{scope:"col"},"No",-1)),(0,n.Lk)("th",{scope:"col",onClick:e[5]||(e[5]=a=>o.sortBy("namastatusperkawinan"))},[e[14]||(e[14]=(0,n.eW)(" Nama Status Perkawinan ")),"namastatusperkawinan"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",U2)):"namastatusperkawinan"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",R2)):((0,n.uX)(),(0,n.CE)("i",Q2))]),e[16]||(e[16]=(0,n.Lk)("th",{scope:"col"},"Aksi",-1))])]),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.paginatedMartialStatuses,(a,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:a.idstatusperkawinan},[(0,n.Lk)("th",W2,(0,k.v_)((i.currentPage-1)*i.perPage+t+1),1),(0,n.Lk)("td",null,(0,k.v_)(a.namastatusperkawinan),1),(0,n.Lk)("td",null,[(0,n.Lk)("div",K2,[(0,n.Lk)("button",{class:"btn btn-primary btn-sm",onClick:e=>o.openEditModal(a)},e[17]||(e[17]=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)]),8,O2),(0,n.Lk)("button",{class:"btn btn-danger sweet-11 btn-sm",type:"button",onClick:e=>o.advancedDeleteAlert(a.idstatusperkawinan)},e[18]||(e[18]=[(0,n.Lk)("i",{class:"fa fa-trash"},null,-1)]),8,$2)])])]))),128)),0===o.paginatedMartialStatuses.length?((0,n.uX)(),(0,n.CE)("tr",G2,e[19]||(e[19]=[(0,n.Lk)("td",{colspan:"5",class:"text-center"},"Tidak ada data yang cocok atau tersedia.",-1)]))):(0,n.Q3)("",!0)])]),(0,n.Lk)("div",J2,[(0,n.Lk)("div",q2,[i.totalItems>0?((0,n.uX)(),(0,n.CE)("span",H2,[e[20]||(e[20]=(0,n.eW)(" Menampilkan ")),(0,n.Lk)("strong",null,(0,k.v_)((i.currentPage-1)*i.perPage+1),1),e[21]||(e[21]=(0,n.eW)(" - ")),(0,n.Lk)("strong",null,(0,k.v_)(Math.min(i.currentPage*i.perPage,i.totalItems)),1),e[22]||(e[22]=(0,n.eW)(" dari ")),(0,n.Lk)("strong",null,(0,k.v_)(i.totalItems),1),e[23]||(e[23]=(0,n.eW)(" data "))])):(0,n.Q3)("",!0)]),-1!==i.perPage&&o.totalPages>1?((0,n.uX)(),(0,n.CE)("nav",Y2,[(0,n.Lk)("ul",z2,[(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[6]||(e[6]=a=>o.changePage(i.currentPage-1))},"Prev")],2),o.pageNumbers[0]>1?((0,n.uX)(),(0,n.CE)("li",Z2,[(0,n.Lk)("button",{class:"page-link",onClick:e[7]||(e[7]=a=>o.changePage(1))},"1")])):(0,n.Q3)("",!0),o.pageNumbers[0]>2?((0,n.uX)(),(0,n.CE)("li",a3,e[24]||(e[24]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.pageNumbers,a=>((0,n.uX)(),(0,n.CE)("li",{key:a,class:(0,k.C4)(["page-item",{active:i.currentPage===a}])},[(0,n.Lk)("button",{class:"page-link",onClick:e=>o.changePage(a)},(0,k.v_)(a),9,e3)],2))),128)),o.pageNumbers.slice(-1)[0]<o.totalPages-1?((0,n.uX)(),(0,n.CE)("li",t3,e[25]||(e[25]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),o.pageNumbers.slice(-1)[0]<o.totalPages?((0,n.uX)(),(0,n.CE)("li",s3,[(0,n.Lk)("button",{class:"page-link",onClick:e[8]||(e[8]=a=>o.changePage(o.totalPages))},(0,k.v_)(o.totalPages),1)])):(0,n.Q3)("",!0),(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:i.currentPage===o.totalPages}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[9]||(e[9]=a=>o.changePage(i.currentPage+1))},"Next")],2)])])):(0,n.Q3)("",!0)])])])])}const l3={class:"modal-header"},n3={class:"modal-title"},o3={class:"modal-body"},r3={class:"mb-3"},c3={key:0,class:"alert alert-danger mt-3"},d3={class:"modal-footer"},u3=["disabled"],m3={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},k3={key:1};function h3(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",{class:"modal-overlay",onClick:e[6]||(e[6]=(...a)=>o.handleOverlayClick&&o.handleOverlayClick(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[5]||(e[5]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",l3,[(0,n.Lk)("h5",n3,(0,k.v_)(o.isEditMode?"Edit Data Status Perkawinan":"Tambah Data Status Perkawinan"),1),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",o3,[(0,n.Lk)("form",{onSubmit:e[2]||(e[2]=(0,l.D$)((...a)=>o.submitForm&&o.submitForm(...a),["prevent"]))},[(0,n.Lk)("div",r3,[e[7]||(e[7]=(0,n.Lk)("label",{for:"namastatusperkawinan",class:"form-label"},"Nama Status Perkawinan",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"namaStatusPerkawinan",placeholder:"Masukkan nama status perkawinan","onUpdate:modelValue":e[1]||(e[1]=a=>i.formData.namastatusperkawinan=a),required:""},null,512),[[l.Jo,i.formData.namastatusperkawinan]])]),i.errorMessage?((0,n.uX)(),(0,n.CE)("div",c3,(0,k.v_)(i.errorMessage),1)):(0,n.Q3)("",!0)],32)]),(0,n.Lk)("div",d3,[(0,n.Lk)("button",{type:"button",class:"btn btn-danger",onClick:e[3]||(e[3]=(...a)=>o.closeModal&&o.closeModal(...a))},"Batal"),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[4]||(e[4]=(...a)=>o.submitForm&&o.submitForm(...a)),disabled:i.isLoading},[i.isLoading?((0,n.uX)(),(0,n.CE)("span",m3)):((0,n.uX)(),(0,n.CE)("span",k3,"Simpan"))],8,u3)])])])}var g3={name:"editMartialStatusModal",props:{martialStatusToEdit:{type:Object,default:null}},created(){this.toast=(0,ln.dj)()},data(){return{formData:{namastatusperkawinan:""},isLoading:!1,errorMessage:null}},computed:{isEditMode(){return!!this.martialStatusToEdit}},watch:{martialStatusToEdit:{handler(a){this.formData=a?{...a}:{namastatusperkawinan:""},this.errorMessage=null},immediate:!0}},methods:{closeModal(){this.$emit("close")},handleOverlayClick(a){a.target===a.currentTarget&&this.closeModal()},async submitForm(){this.errorMessage=null;const{namastatusperkawinan:a}=this.formData;if(a){this.isLoading=!0;try{this.isEditMode?(await Bh(this.martialStatusToEdit.idstatusperkawinan,this.formData),this.toast.success("Data status perkawinan berhasil diperbarui",{icon:"fa fa-check"})):(await Sh(this.formData),this.toast.success("Data status perkawinan berhasil ditambah",{icon:"fa fa-check"})),this.$emit("save-successful"),this.closeModal()}catch(e){console.error("Error occurred:",e),this.errorMessage=e.response?.data?.message||"Gagal menyimpan data.",this.toast.error("Gagal menyimpan data status perkawinan",{icon:"fa fa-times"})}finally{this.isLoading=!1}}else this.errorMessage="Semua field wajib diisi."}}};const p3=(0,r.A)(g3,[["render",h3],["__scopeId","data-v-44e499a6"]]);var b3=p3,f3={components:{AddEditMartialStatusModal:b3},data(){return{martialStatuses:[],sortColumn:"",sortDirection:"asc",isModalVisible:!1,currentPage:1,perPage:20,totalItems:0,martialStatusBeingEdited:null,jumpPage:1,isFilterVisible:!1,filters:{martialStatus_name:""}}},computed:{paginatedMartialStatuses(){return this.martialStatuses},totalPages(){return this.perPage<=0?1:Math.ceil(this.totalItems/this.perPage)},pageNumbers(){const a=[],e=5;let t=Math.max(1,this.currentPage-Math.floor(e/2)),s=t+e-1;s>this.totalPages&&(s=this.totalPages,t=Math.max(1,s-e+1));for(let i=t;i<=s;i++)a.push(i);return a}},watch:{currentPage(){this.fetchMartialStatuses(),this.jumpPage=this.currentPage},perPage(){this.currentPage=1,this.fetchMartialStatuses()}},async mounted(){this.toast=(0,ln.dj)(),await this.fetchMartialStatuses()},methods:{openAddModal(){this.martialStatusBeingEdited=null,this.isModalVisible=!0},openEditModal(a){this.martialStatusBeingEdited={...a},this.isModalVisible=!0},closeModal(){this.isModalVisible=!1,this.martialStatusBeingEdited=null},handleSaveSuccessful(){this.closeModal(),this.fetchMartialStatuses()},async fetchMartialStatuses(){try{const a={act:"status-perkawinan",page:this.currentPage,limit:this.perPage,order:this.sortColumn?`${this.sortColumn} ${this.sortDirection}`:"",group:""},e=Object.entries(this.filters).filter(([a,e])=>""!==e).map(([a,e])=>`${a}=${e}`);e.length>0?a.filter=e.join(","):a.filter="";const t=await Th(a),s=t.data?.data||t.data?.[0]?.data||[],i=t.data?.[0]?.meta?.pagination||{};this.martialStatuses=s,this.totalItems=i.total||s.length}catch(a){console.error("Error fetching status perkawinan:",a),this.$swal({icon:"error",title:"Oops...",text:"Gagal memuat data status perkawinan. Silakan coba lagi nanti."})}},advancedDeleteAlert(a){this.$swal({title:"Hapus Data Status Perkawinan",text:"Apakah Anda yakin ingin menghapus data ini?",icon:"warning",showCancelButton:!0,confirmButtonText:'<i class="fa fa-check me-2"></i> Hapus!',confirmButtonColor:"#d33",cancelButtonText:'<i class="fa fa-times me-2"></i> Batal',cancelButtonColor:"#efefef",reverseButtons:!0}).then(async e=>{if(e.isConfirmed)try{await Ah(a),1===this.martialStatuses.length&&this.currentPage>1?this.currentPage--:this.fetchMartialStatuses(),this.toast.success("Data status perkawinan berhasil dihapus",{icon:"fa fa-check"})}catch(t){this.toast.error("Gagal menghapus data status perkawinan",{icon:"fa fa-times"})}})},sortBy(a){this.sortColumn===a?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=a,this.sortDirection="asc"),this.fetchMartialStatuses()},changePage(a){a>=1&&a<=this.totalPages&&(this.currentPage=a)},toggleFilterVisibility(){this.isFilterVisible=!this.isFilterVisible},applyFilters(){this.currentPage=1,this.fetchMartialStatuses()},resetFilters(){this.filters.namastatusperkawinan="",this.sortColumn="",this.sortDirection="asc",this.currentPage=1,this.fetchMartialStatuses()}}};const L3=(0,r.A)(f3,[["render",i3],["__scopeId","data-v-6ae16bcd"]]);var y3=L3,v3={components:{MartialStatusesTable:y3}};const C3=(0,r.A)(v3,[["render",M2]]);var P3=C3;const E3={class:"container-fluid"},D3={class:"row widget-grid"};function M3(a,e,t,s,i,l){const o=(0,n.g2)("Breadcrumbs"),r=(0,n.g2)("GroupCategoriesTable");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(o,{main:"Kependudukan",title:a.$route.meta.title},null,8,["title"]),(0,n.Lk)("div",E3,[(0,n.Lk)("div",D3,[(0,n.bF)(r)])])])}const w3={class:"col-sm-12"},F3={class:"card"},X3={class:"card-body"},x3={class:"d-flex justify-content-end align-items-start mb-3"},T3={class:"d-flex gap-2"},S3={key:0,class:"fa fa-angle-up me-2"},B3={key:1,class:"fa fa-angle-down me-2"},A3={key:0,class:"border p-3 mb-3 rounded filter-section"},_3={class:"row g-2"},j3={class:"col-md-4"},V3={class:"d-flex justify-content-end gap-2 mt-3"},I3={class:"table-responsive signal-table"},N3={class:"table table-hover"},U3={key:0,class:"fa fa-sort-asc"},R3={key:1,class:"fa fa-sort-desc"},Q3={key:2,class:"fa fa-sort"},W3={scope:"row"},K3={class:"btn-group"},O3=["onClick"],$3=["onClick"],G3={key:0},J3={class:"d-flex flex-column flex-md-row justify-content-md-between align-items-center mt-3 px-3 pb-3"},q3={class:"mt-2"},H3={key:0,class:"text-muted"},Y3={key:0,class:"d-flex align-items-center flex-wrap gap-2 mt-2"},z3={class:"pagination mb-0"},Z3={key:0,class:"page-item"},a5={key:1,class:"page-item disabled"},e5=["onClick"],t5={key:2,class:"page-item disabled"},s5={key:3,class:"page-item"};function i5(a,e,t,s,i,o){const r=(0,n.g2)("add-edit-groupCategory-modal");return(0,n.uX)(),(0,n.CE)("div",w3,[i.isModalVisible?((0,n.uX)(),(0,n.Wv)(r,{key:0,"groupCategory-to-edit":i.groupCategoryBeingEdited,onClose:o.closeModal,onSaveSuccessful:o.handleSaveSuccessful},null,8,["groupCategory-to-edit","onClose","onSaveSuccessful"])):(0,n.Q3)("",!0),(0,n.Lk)("div",F3,[e[26]||(e[26]=(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("h3",null,"Daftar Kategori Kelompok")],-1)),(0,n.Lk)("div",X3,[(0,n.Lk)("div",x3,[(0,n.Lk)("div",T3,[(0,n.Lk)("button",{class:"btn btn-outline-light txt-dark",onClick:e[0]||(e[0]=(...a)=>o.toggleFilterVisibility&&o.toggleFilterVisibility(...a))},[i.isFilterVisible?((0,n.uX)(),(0,n.CE)("i",S3)):((0,n.uX)(),(0,n.CE)("i",B3)),(0,n.Lk)("span",null,(0,k.v_)(i.isFilterVisible?"Sembunyikan":"Tampilkan")+" Filter",1)]),(0,n.Lk)("button",{class:"btn btn-success",onClick:e[1]||(e[1]=(...a)=>o.openAddModal&&o.openAddModal(...a))},e[10]||(e[10]=[(0,n.Lk)("i",{class:"fa fa-plus me-2"},null,-1),(0,n.Lk)("span",null," Tambah Data",-1)]))])]),i.isFilterVisible?((0,n.uX)(),(0,n.CE)("div",A3,[(0,n.Lk)("div",_3,[(0,n.Lk)("div",j3,[e[11]||(e[11]=(0,n.Lk)("label",{for:"filterName",class:"form-label"},"Kategori Kelompok",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterName",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.filters.namakategorikelompok=a),placeholder:"Filter berdasarkan nama kategori kelompok"},null,512),[[l.Jo,i.filters.namakategorikelompok]])])]),(0,n.Lk)("div",V3,[(0,n.Lk)("button",{class:"btn btn-secondary",onClick:e[3]||(e[3]=(...a)=>o.resetFilters&&o.resetFilters(...a))},e[12]||(e[12]=[(0,n.Lk)("i",{class:"fa fa-refresh me-2"},null,-1),(0,n.Lk)("span",null,"Reset Filter",-1)])),(0,n.Lk)("button",{class:"btn btn-primary",onClick:e[4]||(e[4]=(...a)=>o.applyFilters&&o.applyFilters(...a))},e[13]||(e[13]=[(0,n.Lk)("i",{class:"fa fa-search me-2"},null,-1),(0,n.Lk)("span",null,"Terapkan Filter",-1)]))])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",I3,[(0,n.Lk)("table",N3,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[e[15]||(e[15]=(0,n.Lk)("th",{scope:"col"},"No",-1)),(0,n.Lk)("th",{scope:"col",onClick:e[5]||(e[5]=a=>o.sortBy("namakategorikelompok"))},[e[14]||(e[14]=(0,n.eW)(" Kategori Kelompok ")),"namakategorikelompok"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",U3)):"namakategorikelompok"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",R3)):((0,n.uX)(),(0,n.CE)("i",Q3))]),e[16]||(e[16]=(0,n.Lk)("th",{scope:"col"},"Aksi",-1))])]),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.paginatedGroupCategories,(a,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:a.idkategorikelompok},[(0,n.Lk)("th",W3,(0,k.v_)((i.currentPage-1)*i.perPage+t+1),1),(0,n.Lk)("td",null,(0,k.v_)(a.namakategorikelompok),1),(0,n.Lk)("td",null,[(0,n.Lk)("div",K3,[(0,n.Lk)("button",{class:"btn btn-primary btn-sm",onClick:e=>o.openEditModal(a)},e[17]||(e[17]=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)]),8,O3),(0,n.Lk)("button",{class:"btn btn-danger sweet-11 btn-sm",type:"button",onClick:e=>o.advancedDeleteAlert(a.idkategorikelompok)},e[18]||(e[18]=[(0,n.Lk)("i",{class:"fa fa-trash"},null,-1)]),8,$3)])])]))),128)),0===o.paginatedGroupCategories.length?((0,n.uX)(),(0,n.CE)("tr",G3,e[19]||(e[19]=[(0,n.Lk)("td",{colspan:"5",class:"text-center"},"Tidak ada data yang cocok atau tersedia.",-1)]))):(0,n.Q3)("",!0)])]),(0,n.Lk)("div",J3,[(0,n.Lk)("div",q3,[i.totalItems>0?((0,n.uX)(),(0,n.CE)("span",H3,[e[20]||(e[20]=(0,n.eW)(" Menampilkan ")),(0,n.Lk)("strong",null,(0,k.v_)((i.currentPage-1)*i.perPage+1),1),e[21]||(e[21]=(0,n.eW)(" - ")),(0,n.Lk)("strong",null,(0,k.v_)(Math.min(i.currentPage*i.perPage,i.totalItems)),1),e[22]||(e[22]=(0,n.eW)(" dari ")),(0,n.Lk)("strong",null,(0,k.v_)(i.totalItems),1),e[23]||(e[23]=(0,n.eW)(" data "))])):(0,n.Q3)("",!0)]),-1!==i.perPage&&o.totalPages>1?((0,n.uX)(),(0,n.CE)("nav",Y3,[(0,n.Lk)("ul",z3,[(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[6]||(e[6]=a=>o.changePage(i.currentPage-1))},"Prev")],2),o.pageNumbers[0]>1?((0,n.uX)(),(0,n.CE)("li",Z3,[(0,n.Lk)("button",{class:"page-link",onClick:e[7]||(e[7]=a=>o.changePage(1))},"1")])):(0,n.Q3)("",!0),o.pageNumbers[0]>2?((0,n.uX)(),(0,n.CE)("li",a5,e[24]||(e[24]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.pageNumbers,a=>((0,n.uX)(),(0,n.CE)("li",{key:a,class:(0,k.C4)(["page-item",{active:i.currentPage===a}])},[(0,n.Lk)("button",{class:"page-link",onClick:e=>o.changePage(a)},(0,k.v_)(a),9,e5)],2))),128)),o.pageNumbers.slice(-1)[0]<o.totalPages-1?((0,n.uX)(),(0,n.CE)("li",t5,e[25]||(e[25]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),o.pageNumbers.slice(-1)[0]<o.totalPages?((0,n.uX)(),(0,n.CE)("li",s5,[(0,n.Lk)("button",{class:"page-link",onClick:e[8]||(e[8]=a=>o.changePage(o.totalPages))},(0,k.v_)(o.totalPages),1)])):(0,n.Q3)("",!0),(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:i.currentPage===o.totalPages}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[9]||(e[9]=a=>o.changePage(i.currentPage+1))},"Next")],2)])])):(0,n.Q3)("",!0)])])])])}const l5={class:"modal-header"},n5={class:"modal-title"},o5={class:"modal-body"},r5={class:"mb-3"},c5={key:0,class:"alert alert-danger mt-3"},d5={class:"modal-footer"},u5=["disabled"],m5={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},k5={key:1};function h5(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",{class:"modal-overlay",onClick:e[6]||(e[6]=(...a)=>o.handleOverlayClick&&o.handleOverlayClick(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[5]||(e[5]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",l5,[(0,n.Lk)("h5",n5,(0,k.v_)(o.isEditMode?"Edit Data Kategori Kelompok":"Tambah Data Kategori Kelompok"),1),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",o5,[(0,n.Lk)("form",{onSubmit:e[2]||(e[2]=(0,l.D$)((...a)=>o.submitForm&&o.submitForm(...a),["prevent"]))},[(0,n.Lk)("div",r5,[e[7]||(e[7]=(0,n.Lk)("label",{for:"namakategorikelompok",class:"form-label"},"Nama Kategori Kelompok",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"namaKategoriKelompok",placeholder:"Masukkan nama kategori kelompok","onUpdate:modelValue":e[1]||(e[1]=a=>i.formData.namakategorikelompok=a),required:""},null,512),[[l.Jo,i.formData.namakategorikelompok]])]),i.errorMessage?((0,n.uX)(),(0,n.CE)("div",c5,(0,k.v_)(i.errorMessage),1)):(0,n.Q3)("",!0)],32)]),(0,n.Lk)("div",d5,[(0,n.Lk)("button",{type:"button",class:"btn btn-danger",onClick:e[3]||(e[3]=(...a)=>o.closeModal&&o.closeModal(...a))},"Batal"),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[4]||(e[4]=(...a)=>o.submitForm&&o.submitForm(...a)),disabled:i.isLoading},[i.isLoading?((0,n.uX)(),(0,n.CE)("span",m5)):((0,n.uX)(),(0,n.CE)("span",k5,"Simpan"))],8,u5)])])])}var g5={name:"editGroupCategoryModal",props:{groupCategoryToEdit:{type:Object,default:null}},created(){this.toast=(0,ln.dj)()},data(){return{formData:{namakategorikelompok:""},isLoading:!1,errorMessage:null}},computed:{isEditMode(){return!!this.groupCategoryToEdit}},watch:{groupCategoryToEdit:{handler(a){this.formData=a?{...a}:{namakategorikelompok:""},this.errorMessage=null},immediate:!0}},methods:{closeModal(){this.$emit("close")},handleOverlayClick(a){a.target===a.currentTarget&&this.closeModal()},async submitForm(){this.errorMessage=null;const{namakategorikelompok:a}=this.formData;if(a){this.isLoading=!0;try{this.isEditMode?(await lb(this.groupCategoryToEdit.idkategorikelompok,this.formData),this.toast.success("Data kategori kelompok berhasil diperbarui",{icon:"fa fa-check"})):(await ib(this.formData),this.toast.success("Data kategori kelompok berhasil ditambah",{icon:"fa fa-check"})),this.$emit("save-successful"),this.closeModal()}catch(e){console.error("Error occurred:",e),this.errorMessage=e.response?.data?.message||"Gagal menyimpan data.",this.toast.error("Gagal menyimpan data kategori kelompok",{icon:"fa fa-times"})}finally{this.isLoading=!1}}else this.errorMessage="Semua field wajib diisi."}}};const p5=(0,r.A)(g5,[["render",h5],["__scopeId","data-v-2ed95907"]]);var b5=p5,f5={components:{AddEditGroupCategoryModal:b5},data(){return{groupCategories:[],sortColumn:"",sortDirection:"asc",isModalVisible:!1,currentPage:1,perPage:20,totalItems:0,groupCategoryBeingEdited:null,jumpPage:1,isFilterVisible:!1,filters:{groupCategory_name:""}}},computed:{paginatedGroupCategories(){return this.groupCategories},totalPages(){return this.perPage<=0?1:Math.ceil(this.totalItems/this.perPage)},pageNumbers(){const a=[],e=5;let t=Math.max(1,this.currentPage-Math.floor(e/2)),s=t+e-1;s>this.totalPages&&(s=this.totalPages,t=Math.max(1,s-e+1));for(let i=t;i<=s;i++)a.push(i);return a}},watch:{currentPage(){this.fetchGroupCategories(),this.jumpPage=this.currentPage},perPage(){this.currentPage=1,this.fetchGroupCategories()}},async mounted(){this.toast=(0,ln.dj)(),await this.fetchGroupCategories()},methods:{openAddModal(){this.groupCategoryBeingEdited=null,this.isModalVisible=!0},openEditModal(a){this.groupCategoryBeingEdited={...a},this.isModalVisible=!0},closeModal(){this.isModalVisible=!1,this.groupCategoryBeingEdited=null},handleSaveSuccessful(){this.closeModal(),this.fetchGroupCategories()},async fetchGroupCategories(){try{const a={act:"kategori-kelompok",page:this.currentPage,limit:this.perPage,order:this.sortColumn?`${this.sortColumn} ${this.sortDirection}`:"",group:""},e=Object.entries(this.filters).filter(([a,e])=>""!==e).map(([a,e])=>`${a}=${e}`);e.length>0?a.filter=e.join(","):a.filter="";const t=await sb(a),s=t.data?.data||t.data?.[0]?.data||[],i=t.data?.[0]?.meta?.pagination||{};this.groupCategories=s,this.totalItems=i.total||s.length}catch(a){console.error("Error fetching kategori kelompok:",a),this.$swal({icon:"error",title:"Oops...",text:"Gagal memuat data kategori kelompok. Silakan coba lagi nanti."})}},advancedDeleteAlert(a){this.$swal({title:"Hapus Data Kategori Kelompok",text:"Apakah Anda yakin ingin menghapus data ini?",icon:"warning",showCancelButton:!0,confirmButtonText:'<i class="fa fa-check me-2"></i> Hapus!',confirmButtonColor:"#d33",cancelButtonText:'<i class="fa fa-times me-2"></i> Batal',cancelButtonColor:"#efefef",reverseButtons:!0}).then(async e=>{if(e.isConfirmed)try{await nb(a),1===this.groupCategories.length&&this.currentPage>1?this.currentPage--:this.fetchGroupCategories(),this.toast.success("Data kategori kelompok berhasil dihapus",{icon:"fa fa-check"})}catch(t){this.toast.error("Gagal menghapus data kategori kelompok",{icon:"fa fa-times"})}})},sortBy(a){this.sortColumn===a?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=a,this.sortDirection="asc"),this.fetchGroupCategories()},changePage(a){a>=1&&a<=this.totalPages&&(this.currentPage=a)},toggleFilterVisibility(){this.isFilterVisible=!this.isFilterVisible},applyFilters(){this.currentPage=1,this.fetchGroupCategories()},resetFilters(){this.filters.namakategorikelompok="",this.sortColumn="",this.sortDirection="asc",this.currentPage=1,this.fetchGroupCategories()}}};const L5=(0,r.A)(f5,[["render",i5],["__scopeId","data-v-23d5573b"]]);var y5=L5,v5={components:{GroupCategoriesTable:y5}};const C5=(0,r.A)(v5,[["render",M3]]);var P5=C5;const E5={class:"container-fluid"},D5={class:"row widget-grid"};function M5(a,e,t,s,i,l){const o=(0,n.g2)("Breadcrumbs"),r=(0,n.g2)("BudgetSourcesTable");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(o,{main:"Keuangan",title:a.$route.meta.title},null,8,["title"]),(0,n.Lk)("div",E5,[(0,n.Lk)("div",D5,[(0,n.bF)(r)])])])}const w5={class:"col-sm-12"},F5={class:"card"},X5={class:"card-body"},x5={class:"d-flex justify-content-end align-items-start mb-3"},T5={class:"d-flex gap-2"},S5={key:0,class:"fa fa-angle-up me-2"},B5={key:1,class:"fa fa-angle-down me-2"},A5={key:0,class:"border p-3 mb-3 rounded filter-section"},_5={class:"row g-2"},j5={class:"col-md-4"},V5={class:"d-flex justify-content-end gap-2 mt-3"},I5={class:"table-responsive signal-table"},N5={class:"table table-hover"},U5={key:0,class:"fa fa-sort-asc"},R5={key:1,class:"fa fa-sort-desc"},Q5={key:2,class:"fa fa-sort"},W5={scope:"row"},K5={class:"btn-group"},O5=["onClick"],$5=["onClick"],G5={key:0},J5={class:"d-flex flex-column flex-md-row justify-content-md-between align-items-center mt-3 px-3 pb-3"},q5={class:"mt-2"},H5={key:0,class:"text-muted"},Y5={key:0,class:"d-flex align-items-center flex-wrap gap-2 mt-2"},z5={class:"pagination mb-0"},Z5={key:0,class:"page-item"},a4={key:1,class:"page-item disabled"},e4=["onClick"],t4={key:2,class:"page-item disabled"},s4={key:3,class:"page-item"};function i4(a,e,t,s,i,o){const r=(0,n.g2)("add-edit-budgetSource-modal");return(0,n.uX)(),(0,n.CE)("div",w5,[i.isModalVisible?((0,n.uX)(),(0,n.Wv)(r,{key:0,"budgetSource-to-edit":i.budgetSourceBeingEdited,onClose:o.closeModal,onSaveSuccessful:o.handleSaveSuccessful},null,8,["budgetSource-to-edit","onClose","onSaveSuccessful"])):(0,n.Q3)("",!0),(0,n.Lk)("div",F5,[e[26]||(e[26]=(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("h3",null,"Daftar Nama Sumber Anggaran")],-1)),(0,n.Lk)("div",X5,[(0,n.Lk)("div",x5,[(0,n.Lk)("div",T5,[(0,n.Lk)("button",{class:"btn btn-outline-light txt-dark",onClick:e[0]||(e[0]=(...a)=>o.toggleFilterVisibility&&o.toggleFilterVisibility(...a))},[i.isFilterVisible?((0,n.uX)(),(0,n.CE)("i",S5)):((0,n.uX)(),(0,n.CE)("i",B5)),(0,n.Lk)("span",null,(0,k.v_)(i.isFilterVisible?"Sembunyikan":"Tampilkan")+" Filter",1)]),(0,n.Lk)("button",{class:"btn btn-success",onClick:e[1]||(e[1]=(...a)=>o.openAddModal&&o.openAddModal(...a))},e[10]||(e[10]=[(0,n.Lk)("i",{class:"fa fa-plus me-2"},null,-1),(0,n.Lk)("span",null," Tambah Data",-1)]))])]),i.isFilterVisible?((0,n.uX)(),(0,n.CE)("div",A5,[(0,n.Lk)("div",_5,[(0,n.Lk)("div",j5,[e[11]||(e[11]=(0,n.Lk)("label",{for:"filterName",class:"form-label"},"Nama Sumber Anggaran",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterName",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.filters.namasumberanggaran=a),placeholder:"Filter berdasarkan nama sumber anggaran"},null,512),[[l.Jo,i.filters.namasumberanggaran]])])]),(0,n.Lk)("div",V5,[(0,n.Lk)("button",{class:"btn btn-secondary",onClick:e[3]||(e[3]=(...a)=>o.resetFilters&&o.resetFilters(...a))},e[12]||(e[12]=[(0,n.Lk)("i",{class:"fa fa-refresh me-2"},null,-1),(0,n.Lk)("span",null,"Reset Filter",-1)])),(0,n.Lk)("button",{class:"btn btn-primary",onClick:e[4]||(e[4]=(...a)=>o.applyFilters&&o.applyFilters(...a))},e[13]||(e[13]=[(0,n.Lk)("i",{class:"fa fa-search me-2"},null,-1),(0,n.Lk)("span",null,"Terapkan Filter",-1)]))])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",I5,[(0,n.Lk)("table",N5,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[e[15]||(e[15]=(0,n.Lk)("th",{scope:"col"},"No",-1)),(0,n.Lk)("th",{scope:"col",onClick:e[5]||(e[5]=a=>o.sortBy("namasumberanggaran"))},[e[14]||(e[14]=(0,n.eW)(" Nama Sumber Anggaran ")),"namasumberanggaran"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",U5)):"namasumberanggaran"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",R5)):((0,n.uX)(),(0,n.CE)("i",Q5))]),e[16]||(e[16]=(0,n.Lk)("th",{scope:"col"},"Aksi",-1))])]),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.paginatedBudgetSources,(a,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:a.idsumberanggaran},[(0,n.Lk)("th",W5,(0,k.v_)((i.currentPage-1)*i.perPage+t+1),1),(0,n.Lk)("td",null,(0,k.v_)(a.namasumberanggaran),1),(0,n.Lk)("td",null,[(0,n.Lk)("div",K5,[(0,n.Lk)("button",{class:"btn btn-primary btn-sm",onClick:e=>o.openEditModal(a)},e[17]||(e[17]=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)]),8,O5),(0,n.Lk)("button",{class:"btn btn-danger sweet-11 btn-sm",type:"button",onClick:e=>o.advancedDeleteAlert(a.idsumberanggaran)},e[18]||(e[18]=[(0,n.Lk)("i",{class:"fa fa-trash"},null,-1)]),8,$5)])])]))),128)),0===o.paginatedBudgetSources.length?((0,n.uX)(),(0,n.CE)("tr",G5,e[19]||(e[19]=[(0,n.Lk)("td",{colspan:"5",class:"text-center"},"Tidak ada data yang cocok atau tersedia.",-1)]))):(0,n.Q3)("",!0)])]),(0,n.Lk)("div",J5,[(0,n.Lk)("div",q5,[i.totalItems>0?((0,n.uX)(),(0,n.CE)("span",H5,[e[20]||(e[20]=(0,n.eW)(" Menampilkan ")),(0,n.Lk)("strong",null,(0,k.v_)((i.currentPage-1)*i.perPage+1),1),e[21]||(e[21]=(0,n.eW)(" - ")),(0,n.Lk)("strong",null,(0,k.v_)(Math.min(i.currentPage*i.perPage,i.totalItems)),1),e[22]||(e[22]=(0,n.eW)(" dari ")),(0,n.Lk)("strong",null,(0,k.v_)(i.totalItems),1),e[23]||(e[23]=(0,n.eW)(" data "))])):(0,n.Q3)("",!0)]),-1!==i.perPage&&o.totalPages>1?((0,n.uX)(),(0,n.CE)("nav",Y5,[(0,n.Lk)("ul",z5,[(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[6]||(e[6]=a=>o.changePage(i.currentPage-1))},"Prev")],2),o.pageNumbers[0]>1?((0,n.uX)(),(0,n.CE)("li",Z5,[(0,n.Lk)("button",{class:"page-link",onClick:e[7]||(e[7]=a=>o.changePage(1))},"1")])):(0,n.Q3)("",!0),o.pageNumbers[0]>2?((0,n.uX)(),(0,n.CE)("li",a4,e[24]||(e[24]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.pageNumbers,a=>((0,n.uX)(),(0,n.CE)("li",{key:a,class:(0,k.C4)(["page-item",{active:i.currentPage===a}])},[(0,n.Lk)("button",{class:"page-link",onClick:e=>o.changePage(a)},(0,k.v_)(a),9,e4)],2))),128)),o.pageNumbers.slice(-1)[0]<o.totalPages-1?((0,n.uX)(),(0,n.CE)("li",t4,e[25]||(e[25]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),o.pageNumbers.slice(-1)[0]<o.totalPages?((0,n.uX)(),(0,n.CE)("li",s4,[(0,n.Lk)("button",{class:"page-link",onClick:e[8]||(e[8]=a=>o.changePage(o.totalPages))},(0,k.v_)(o.totalPages),1)])):(0,n.Q3)("",!0),(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:i.currentPage===o.totalPages}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[9]||(e[9]=a=>o.changePage(i.currentPage+1))},"Next")],2)])])):(0,n.Q3)("",!0)])])])])}const l4={class:"modal-header"},n4={class:"modal-title"},o4={class:"modal-body"},r4={class:"mb-3"},c4={key:0,class:"alert alert-danger mt-3"},d4={class:"modal-footer"},u4=["disabled"],m4={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},k4={key:1};function h4(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",{class:"modal-overlay",onClick:e[6]||(e[6]=(...a)=>o.handleOverlayClick&&o.handleOverlayClick(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[5]||(e[5]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",l4,[(0,n.Lk)("h5",n4,(0,k.v_)(o.isEditMode?"Edit Data Sumber Anggaran":"Tambah Data Sumber Anggaran"),1),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",o4,[(0,n.Lk)("form",{onSubmit:e[2]||(e[2]=(0,l.D$)((...a)=>o.submitForm&&o.submitForm(...a),["prevent"]))},[(0,n.Lk)("div",r4,[e[7]||(e[7]=(0,n.Lk)("label",{for:"namasumberanggaran",class:"form-label"},"Nama Sumber Anggaran",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"namaSumberAnggaran",placeholder:"Masukkan nama sumber anggaran","onUpdate:modelValue":e[1]||(e[1]=a=>i.formData.namasumberanggaran=a),required:""},null,512),[[l.Jo,i.formData.namasumberanggaran]])]),i.errorMessage?((0,n.uX)(),(0,n.CE)("div",c4,(0,k.v_)(i.errorMessage),1)):(0,n.Q3)("",!0)],32)]),(0,n.Lk)("div",d4,[(0,n.Lk)("button",{type:"button",class:"btn btn-danger",onClick:e[3]||(e[3]=(...a)=>o.closeModal&&o.closeModal(...a))},"Batal"),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[4]||(e[4]=(...a)=>o.submitForm&&o.submitForm(...a)),disabled:i.isLoading},[i.isLoading?((0,n.uX)(),(0,n.CE)("span",m4)):((0,n.uX)(),(0,n.CE)("span",k4,"Simpan"))],8,u4)])])])}var g4={name:"editBudgetSourceModal",props:{budgetSourceToEdit:{type:Object,default:null}},created(){this.toast=(0,ln.dj)()},data(){return{formData:{namasumberanggaran:""},isLoading:!1,errorMessage:null}},computed:{isEditMode(){return!!this.budgetSourceToEdit}},watch:{budgetSourceToEdit:{handler(a){this.formData=a?{...a}:{namasumberanggaran:""},this.errorMessage=null},immediate:!0}},methods:{closeModal(){this.$emit("close")},handleOverlayClick(a){a.target===a.currentTarget&&this.closeModal()},async submitForm(){this.errorMessage=null;const{namasumberanggaran:a}=this.formData;if(a){this.isLoading=!0;try{this.isEditMode?(await KC(this.budgetSourceToEdit.idsumberanggaran,this.formData),this.toast.success("Data sumber anggaran berhasil diperbarui",{icon:"fa fa-check"})):(await WC(this.formData),this.toast.success("Data sumber anggaran berhasil ditambah",{icon:"fa fa-check"})),this.$emit("save-successful"),this.closeModal()}catch(e){console.error("Error occurred:",e),this.errorMessage=e.response?.data?.message||"Gagal menyimpan data.",this.toast.error("Gagal menyimpan data sumber anggaran",{icon:"fa fa-times"})}finally{this.isLoading=!1}}else this.errorMessage="Semua field wajib diisi."}}};const p4=(0,r.A)(g4,[["render",h4],["__scopeId","data-v-738ac3c5"]]);var b4=p4,f4={components:{AddEditBudgetSourceModal:b4},data(){return{budgetSources:[],sortColumn:"",sortDirection:"asc",isModalVisible:!1,currentPage:1,perPage:20,totalItems:0,budgetSourceBeingEdited:null,jumpPage:1,isFilterVisible:!1,filters:{budgetSource_name:""}}},computed:{paginatedBudgetSources(){return this.budgetSources},totalPages(){return this.perPage<=0?1:Math.ceil(this.totalItems/this.perPage)},pageNumbers(){const a=[],e=5;let t=Math.max(1,this.currentPage-Math.floor(e/2)),s=t+e-1;s>this.totalPages&&(s=this.totalPages,t=Math.max(1,s-e+1));for(let i=t;i<=s;i++)a.push(i);return a}},watch:{currentPage(){this.fetchBudgetSources(),this.jumpPage=this.currentPage},perPage(){this.currentPage=1,this.fetchBudgetSources()}},async mounted(){this.toast=(0,ln.dj)(),await this.fetchBudgetSources()},methods:{openAddModal(){this.budgetSourceBeingEdited=null,this.isModalVisible=!0},openEditModal(a){this.budgetSourceBeingEdited={...a},this.isModalVisible=!0},closeModal(){this.isModalVisible=!1,this.budgetSourceBeingEdited=null},handleSaveSuccessful(){this.closeModal(),this.fetchBudgetSources()},async fetchBudgetSources(){try{const a={act:"sumber-anggaran",page:this.currentPage,limit:this.perPage,order:this.sortColumn?`${this.sortColumn} ${this.sortDirection}`:"",group:""},e=Object.entries(this.filters).filter(([a,e])=>""!==e).map(([a,e])=>`${a}=${e}`);e.length>0?a.filter=e.join(","):a.filter="";const t=await QC(a),s=t.data?.data||t.data?.[0]?.data||[],i=t.data?.[0]?.meta?.pagination||{};this.budgetSources=s,this.totalItems=i.total||s.length}catch(a){console.error("Error fetching sumber anggaran:",a),this.$swal({icon:"error",title:"Oops...",text:"Gagal memuat data sumber anggaran. Silakan coba lagi nanti."})}},advancedDeleteAlert(a){this.$swal({title:"Hapus Data Sumber Anggaran",text:"Apakah Anda yakin ingin menghapus data ini?",icon:"warning",showCancelButton:!0,confirmButtonText:'<i class="fa fa-check me-2"></i> Hapus!',confirmButtonColor:"#d33",cancelButtonText:'<i class="fa fa-times me-2"></i> Batal',cancelButtonColor:"#efefef",reverseButtons:!0}).then(async e=>{if(e.isConfirmed)try{await OC(a),1===this.budgetSources.length&&this.currentPage>1?this.currentPage--:this.fetchBudgetSources(),this.toast.success("Data sumber anggaran berhasil dihapus",{icon:"fa fa-check"})}catch(t){this.toast.error("Gagal menghapus data sumber anggaran",{icon:"fa fa-times"})}})},sortBy(a){this.sortColumn===a?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=a,this.sortDirection="asc"),this.fetchBudgetSources()},changePage(a){a>=1&&a<=this.totalPages&&(this.currentPage=a)},toggleFilterVisibility(){this.isFilterVisible=!this.isFilterVisible},applyFilters(){this.currentPage=1,this.fetchBudgetSources()},resetFilters(){this.filters.namasumberanggaran="",this.sortColumn="",this.sortDirection="asc",this.currentPage=1,this.fetchBudgetSources()}}};const L4=(0,r.A)(f4,[["render",i4],["__scopeId","data-v-5b247a8e"]]);var y4=L4,v4={components:{BudgetSourcesTable:y4}};const C4=(0,r.A)(v4,[["render",M5]]);var P4=C4;const E4={class:"container-fluid"},D4={class:"row widget-grid"};function M4(a,e,t,s,i,l){const o=(0,n.g2)("Breadcrumbs"),r=(0,n.g2)("PositionsTable");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(o,{main:"Pemerintahan",title:a.$route.meta.title},null,8,["title"]),(0,n.Lk)("div",E4,[(0,n.Lk)("div",D4,[(0,n.bF)(r)])])])}const w4={class:"col-sm-12"},F4={class:"card"},X4={class:"card-body"},x4={class:"d-flex justify-content-end align-items-start mb-3"},T4={class:"d-flex gap-2"},S4={key:0,class:"fa fa-angle-up me-2"},B4={key:1,class:"fa fa-angle-down me-2"},A4={key:0,class:"border p-3 mb-3 rounded filter-section"},_4={class:"row g-2"},j4={class:"col-md-4"},V4={class:"d-flex justify-content-end gap-2 mt-3"},I4={class:"table-responsive signal-table"},N4={class:"table table-hover"},U4={key:0,class:"fa fa-sort-asc"},R4={key:1,class:"fa fa-sort-desc"},Q4={key:2,class:"fa fa-sort"},W4={scope:"row"},K4={class:"btn-group"},O4=["onClick"],$4=["onClick"],G4={key:0},J4={class:"d-flex flex-column flex-md-row justify-content-md-between align-items-center mt-3 px-3 pb-3"},q4={class:"mt-2"},H4={key:0,class:"text-muted"},Y4={key:0,class:"d-flex align-items-center flex-wrap gap-2 mt-2"},z4={class:"pagination mb-0"},Z4={key:0,class:"page-item"},a8={key:1,class:"page-item disabled"},e8=["onClick"],t8={key:2,class:"page-item disabled"},s8={key:3,class:"page-item"};function i8(a,e,t,s,i,o){const r=(0,n.g2)("add-edit-position-modal");return(0,n.uX)(),(0,n.CE)("div",w4,[i.isModalVisible?((0,n.uX)(),(0,n.Wv)(r,{key:0,"position-to-edit":i.positionBeingEdited,onClose:o.closeModal,onSaveSuccessful:o.handleSaveSuccessful},null,8,["position-to-edit","onClose","onSaveSuccessful"])):(0,n.Q3)("",!0),(0,n.Lk)("div",F4,[e[26]||(e[26]=(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("h3",null,"Daftar Nama Jabatan")],-1)),(0,n.Lk)("div",X4,[(0,n.Lk)("div",x4,[(0,n.Lk)("div",T4,[(0,n.Lk)("button",{class:"btn btn-outline-light txt-dark",onClick:e[0]||(e[0]=(...a)=>o.toggleFilterVisibility&&o.toggleFilterVisibility(...a))},[i.isFilterVisible?((0,n.uX)(),(0,n.CE)("i",S4)):((0,n.uX)(),(0,n.CE)("i",B4)),(0,n.Lk)("span",null,(0,k.v_)(i.isFilterVisible?"Sembunyikan":"Tampilkan")+" Filter",1)]),(0,n.Lk)("button",{class:"btn btn-success",onClick:e[1]||(e[1]=(...a)=>o.openAddModal&&o.openAddModal(...a))},e[10]||(e[10]=[(0,n.Lk)("i",{class:"fa fa-plus me-2"},null,-1),(0,n.Lk)("span",null," Tambah Data",-1)]))])]),i.isFilterVisible?((0,n.uX)(),(0,n.CE)("div",A4,[(0,n.Lk)("div",_4,[(0,n.Lk)("div",j4,[e[11]||(e[11]=(0,n.Lk)("label",{for:"filterName",class:"form-label"},"Nama Jabatan",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterName",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.filters.namajabatan=a),placeholder:"Filter berdasarkan nama jabatan"},null,512),[[l.Jo,i.filters.namajabatan]])])]),(0,n.Lk)("div",V4,[(0,n.Lk)("button",{class:"btn btn-secondary",onClick:e[3]||(e[3]=(...a)=>o.resetFilters&&o.resetFilters(...a))},e[12]||(e[12]=[(0,n.Lk)("i",{class:"fa fa-refresh me-2"},null,-1),(0,n.Lk)("span",null,"Reset Filter",-1)])),(0,n.Lk)("button",{class:"btn btn-primary",onClick:e[4]||(e[4]=(...a)=>o.applyFilters&&o.applyFilters(...a))},e[13]||(e[13]=[(0,n.Lk)("i",{class:"fa fa-search me-2"},null,-1),(0,n.Lk)("span",null,"Terapkan Filter",-1)]))])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",I4,[(0,n.Lk)("table",N4,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[e[15]||(e[15]=(0,n.Lk)("th",{scope:"col"},"No",-1)),(0,n.Lk)("th",{scope:"col",onClick:e[5]||(e[5]=a=>o.sortBy("namajabatan"))},[e[14]||(e[14]=(0,n.eW)(" Nama Jabatan ")),"namajabatan"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",U4)):"namajabatan"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",R4)):((0,n.uX)(),(0,n.CE)("i",Q4))]),e[16]||(e[16]=(0,n.Lk)("th",{scope:"col"},"Aksi",-1))])]),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.paginatedPositions,(a,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:a.idjabatan},[(0,n.Lk)("th",W4,(0,k.v_)((i.currentPage-1)*i.perPage+t+1),1),(0,n.Lk)("td",null,(0,k.v_)(a.namajabatan),1),(0,n.Lk)("td",null,[(0,n.Lk)("div",K4,[(0,n.Lk)("button",{class:"btn btn-primary btn-sm",onClick:e=>o.openEditModal(a)},e[17]||(e[17]=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)]),8,O4),(0,n.Lk)("button",{class:"btn btn-danger sweet-11 btn-sm",type:"button",onClick:e=>o.advancedDeleteAlert(a.idjabatan)},e[18]||(e[18]=[(0,n.Lk)("i",{class:"fa fa-trash"},null,-1)]),8,$4)])])]))),128)),0===o.paginatedPositions.length?((0,n.uX)(),(0,n.CE)("tr",G4,e[19]||(e[19]=[(0,n.Lk)("td",{colspan:"5",class:"text-center"},"Tidak ada data yang cocok atau tersedia.",-1)]))):(0,n.Q3)("",!0)])]),(0,n.Lk)("div",J4,[(0,n.Lk)("div",q4,[i.totalItems>0?((0,n.uX)(),(0,n.CE)("span",H4,[e[20]||(e[20]=(0,n.eW)(" Menampilkan ")),(0,n.Lk)("strong",null,(0,k.v_)((i.currentPage-1)*i.perPage+1),1),e[21]||(e[21]=(0,n.eW)(" - ")),(0,n.Lk)("strong",null,(0,k.v_)(Math.min(i.currentPage*i.perPage,i.totalItems)),1),e[22]||(e[22]=(0,n.eW)(" dari ")),(0,n.Lk)("strong",null,(0,k.v_)(i.totalItems),1),e[23]||(e[23]=(0,n.eW)(" data "))])):(0,n.Q3)("",!0)]),-1!==i.perPage&&o.totalPages>1?((0,n.uX)(),(0,n.CE)("nav",Y4,[(0,n.Lk)("ul",z4,[(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[6]||(e[6]=a=>o.changePage(i.currentPage-1))},"Prev")],2),o.pageNumbers[0]>1?((0,n.uX)(),(0,n.CE)("li",Z4,[(0,n.Lk)("button",{class:"page-link",onClick:e[7]||(e[7]=a=>o.changePage(1))},"1")])):(0,n.Q3)("",!0),o.pageNumbers[0]>2?((0,n.uX)(),(0,n.CE)("li",a8,e[24]||(e[24]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.pageNumbers,a=>((0,n.uX)(),(0,n.CE)("li",{key:a,class:(0,k.C4)(["page-item",{active:i.currentPage===a}])},[(0,n.Lk)("button",{class:"page-link",onClick:e=>o.changePage(a)},(0,k.v_)(a),9,e8)],2))),128)),o.pageNumbers.slice(-1)[0]<o.totalPages-1?((0,n.uX)(),(0,n.CE)("li",t8,e[25]||(e[25]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),o.pageNumbers.slice(-1)[0]<o.totalPages?((0,n.uX)(),(0,n.CE)("li",s8,[(0,n.Lk)("button",{class:"page-link",onClick:e[8]||(e[8]=a=>o.changePage(o.totalPages))},(0,k.v_)(o.totalPages),1)])):(0,n.Q3)("",!0),(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:i.currentPage===o.totalPages}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[9]||(e[9]=a=>o.changePage(i.currentPage+1))},"Next")],2)])])):(0,n.Q3)("",!0)])])])])}const l8={class:"modal-header"},n8={class:"modal-title"},o8={class:"modal-body"},r8={class:"mb-3"},c8={key:0,class:"alert alert-danger mt-3"},d8={class:"modal-footer"},u8=["disabled"],m8={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},k8={key:1};function h8(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",{class:"modal-overlay",onClick:e[6]||(e[6]=(...a)=>o.handleOverlayClick&&o.handleOverlayClick(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[5]||(e[5]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",l8,[(0,n.Lk)("h5",n8,(0,k.v_)(o.isEditMode?"Edit Data Jabatan":"Tambah Data Jabatan"),1),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",o8,[(0,n.Lk)("form",{onSubmit:e[2]||(e[2]=(0,l.D$)((...a)=>o.submitForm&&o.submitForm(...a),["prevent"]))},[(0,n.Lk)("div",r8,[e[7]||(e[7]=(0,n.Lk)("label",{for:"namajabatan",class:"form-label"},"Nama Jabatan",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"namaJabatan",placeholder:"Masukkan nama jabatan","onUpdate:modelValue":e[1]||(e[1]=a=>i.formData.namajabatan=a),required:""},null,512),[[l.Jo,i.formData.namajabatan]])]),i.errorMessage?((0,n.uX)(),(0,n.CE)("div",c8,(0,k.v_)(i.errorMessage),1)):(0,n.Q3)("",!0)],32)]),(0,n.Lk)("div",d8,[(0,n.Lk)("button",{type:"button",class:"btn btn-danger",onClick:e[3]||(e[3]=(...a)=>o.closeModal&&o.closeModal(...a))},"Batal"),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[4]||(e[4]=(...a)=>o.submitForm&&o.submitForm(...a)),disabled:i.isLoading},[i.isLoading?((0,n.uX)(),(0,n.CE)("span",m8)):((0,n.uX)(),(0,n.CE)("span",k8,"Simpan"))],8,u8)])])])}var g8={name:"editPositionModal",props:{positionToEdit:{type:Object,default:null}},created(){this.toast=(0,ln.dj)()},data(){return{formData:{namajabatan:""},isLoading:!1,errorMessage:null}},computed:{isEditMode(){return!!this.positionToEdit}},watch:{positionToEdit:{handler(a){this.formData=a?{...a}:{namajabatan:""},this.errorMessage=null},immediate:!0}},methods:{closeModal(){this.$emit("close")},handleOverlayClick(a){a.target===a.currentTarget&&this.closeModal()},async submitForm(){this.errorMessage=null;const{namajabatan:a}=this.formData;if(a){this.isLoading=!0;try{this.isEditMode?(await od(this.positionToEdit.idjabatan,this.formData),this.toast.success("Data jabatan berhasil diperbarui",{icon:"fa fa-check"})):(await nd(this.formData),this.toast.success("Data jabatan berhasil ditambah",{icon:"fa fa-check"})),this.$emit("save-successful"),this.closeModal()}catch(e){console.error("Error occurred:",e),this.errorMessage=e.response?.data?.message||"Gagal menyimpan data.",this.toast.error("Gagal menyimpan data jabatan",{icon:"fa fa-times"})}finally{this.isLoading=!1}}else this.errorMessage="Semua field wajib diisi."}}};const p8=(0,r.A)(g8,[["render",h8],["__scopeId","data-v-cf7c6e52"]]);var b8=p8,f8={components:{AddEditPositionModal:b8},data(){return{positions:[],sortColumn:"",sortDirection:"asc",isModalVisible:!1,currentPage:1,perPage:20,totalItems:0,positionBeingEdited:null,jumpPage:1,isFilterVisible:!1,filters:{position_name:""}}},computed:{paginatedPositions(){return this.positions},totalPages(){return this.perPage<=0?1:Math.ceil(this.totalItems/this.perPage)},pageNumbers(){const a=[],e=5;let t=Math.max(1,this.currentPage-Math.floor(e/2)),s=t+e-1;s>this.totalPages&&(s=this.totalPages,t=Math.max(1,s-e+1));for(let i=t;i<=s;i++)a.push(i);return a}},watch:{currentPage(){this.fetchPositions(),this.jumpPage=this.currentPage},perPage(){this.currentPage=1,this.fetchPositions()}},async mounted(){this.toast=(0,ln.dj)(),await this.fetchPositions()},methods:{openAddModal(){this.positionBeingEdited=null,this.isModalVisible=!0},openEditModal(a){this.positionBeingEdited={...a},this.isModalVisible=!0},closeModal(){this.isModalVisible=!1,this.positionBeingEdited=null},handleSaveSuccessful(){this.closeModal(),this.fetchPositions()},async fetchPositions(){try{const a={act:"jabatan",page:this.currentPage,limit:this.perPage,order:this.sortColumn?`${this.sortColumn} ${this.sortDirection}`:"",group:""},e=Object.entries(this.filters).filter(([a,e])=>""!==e).map(([a,e])=>`${a}=${e}`);e.length>0?a.filter=e.join(","):a.filter="";const t=await ld(a),s=t.data?.data||t.data?.[0]?.data||[],i=t.data?.[0]?.meta?.pagination||{};this.positions=s,this.totalItems=i.total||s.length}catch(a){console.error("Error fetching jabatan:",a),this.$swal({icon:"error",title:"Oops...",text:"Gagal memuat data jabatan. Silakan coba lagi nanti."})}},advancedDeleteAlert(a){this.$swal({title:"Hapus Data Jabatan",text:"Apakah Anda yakin ingin menghapus data ini?",icon:"warning",showCancelButton:!0,confirmButtonText:'<i class="fa fa-check me-2"></i> Hapus!',confirmButtonColor:"#d33",cancelButtonText:'<i class="fa fa-times me-2"></i> Batal',cancelButtonColor:"#efefef",reverseButtons:!0}).then(async e=>{if(e.isConfirmed)try{await rd(a),1===this.positions.length&&this.currentPage>1?this.currentPage--:this.fetchPositions(),this.toast.success("Data jabatan berhasil dihapus",{icon:"fa fa-check"})}catch(t){this.toast.error("Gagal menghapus data jabatan",{icon:"fa fa-times"})}})},sortBy(a){this.sortColumn===a?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=a,this.sortDirection="asc"),this.fetchPositions()},changePage(a){a>=1&&a<=this.totalPages&&(this.currentPage=a)},toggleFilterVisibility(){this.isFilterVisible=!this.isFilterVisible},applyFilters(){this.currentPage=1,this.fetchPositions()},resetFilters(){this.filters.namajabatan="",this.sortColumn="",this.sortDirection="asc",this.currentPage=1,this.fetchPositions()}}};const L8=(0,r.A)(f8,[["render",i8],["__scopeId","data-v-53910e9d"]]);var y8=L8,v8={components:{PositionsTable:y8}};const C8=(0,r.A)(v8,[["render",M4]]);var P8=C8;const E8={class:"container-fluid"},D8={class:"row widget-grid"};function M8(a,e,t,s,i,l){const o=(0,n.g2)("Breadcrumbs"),r=(0,n.g2)("OfficialStatusesTable");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(o,{main:"Pemerintahan",title:a.$route.meta.title},null,8,["title"]),(0,n.Lk)("div",E8,[(0,n.Lk)("div",D8,[(0,n.bF)(r)])])])}const w8={class:"col-sm-12"},F8={class:"card"},X8={class:"card-body"},x8={class:"d-flex justify-content-end align-items-start mb-3"},T8={class:"d-flex gap-2"},S8={key:0,class:"fa fa-angle-up me-2"},B8={key:1,class:"fa fa-angle-down me-2"},A8={key:0,class:"border p-3 mb-3 rounded filter-section"},_8={class:"row g-2"},j8={class:"col-md-4"},V8={class:"d-flex justify-content-end gap-2 mt-3"},I8={class:"table-responsive signal-table"},N8={class:"table table-hover"},U8={key:0,class:"fa fa-sort-asc"},R8={key:1,class:"fa fa-sort-desc"},Q8={key:2,class:"fa fa-sort"},W8={scope:"row"},K8={class:"btn-group"},O8=["onClick"],$8=["onClick"],G8={key:0},J8={class:"d-flex flex-column flex-md-row justify-content-md-between align-items-center mt-3 px-3 pb-3"},q8={class:"mt-2"},H8={key:0,class:"text-muted"},Y8={key:0,class:"d-flex align-items-center flex-wrap gap-2 mt-2"},z8={class:"pagination mb-0"},Z8={key:0,class:"page-item"},a6={key:1,class:"page-item disabled"},e6=["onClick"],t6={key:2,class:"page-item disabled"},s6={key:3,class:"page-item"};function i6(a,e,t,s,i,o){const r=(0,n.g2)("add-edit-officialStatus-modal");return(0,n.uX)(),(0,n.CE)("div",w8,[i.isModalVisible?((0,n.uX)(),(0,n.Wv)(r,{key:0,"officialStatus-to-edit":i.officialStatusBeingEdited,onClose:o.closeModal,onSaveSuccessful:o.handleSaveSuccessful},null,8,["officialStatus-to-edit","onClose","onSaveSuccessful"])):(0,n.Q3)("",!0),(0,n.Lk)("div",F8,[e[26]||(e[26]=(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("h3",null,"Daftar Nama Status Perangkat")],-1)),(0,n.Lk)("div",X8,[(0,n.Lk)("div",x8,[(0,n.Lk)("div",T8,[(0,n.Lk)("button",{class:"btn btn-outline-light txt-dark",onClick:e[0]||(e[0]=(...a)=>o.toggleFilterVisibility&&o.toggleFilterVisibility(...a))},[i.isFilterVisible?((0,n.uX)(),(0,n.CE)("i",S8)):((0,n.uX)(),(0,n.CE)("i",B8)),(0,n.Lk)("span",null,(0,k.v_)(i.isFilterVisible?"Sembunyikan":"Tampilkan")+" Filter",1)]),(0,n.Lk)("button",{class:"btn btn-success",onClick:e[1]||(e[1]=(...a)=>o.openAddModal&&o.openAddModal(...a))},e[10]||(e[10]=[(0,n.Lk)("i",{class:"fa fa-plus me-2"},null,-1),(0,n.Lk)("span",null," Tambah Data",-1)]))])]),i.isFilterVisible?((0,n.uX)(),(0,n.CE)("div",A8,[(0,n.Lk)("div",_8,[(0,n.Lk)("div",j8,[e[11]||(e[11]=(0,n.Lk)("label",{for:"filterName",class:"form-label"},"Nama Status Perangkat",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterName",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.filters.namastatus=a),placeholder:"Filter berdasarkan nama status perangkat"},null,512),[[l.Jo,i.filters.namastatus]])])]),(0,n.Lk)("div",V8,[(0,n.Lk)("button",{class:"btn btn-secondary",onClick:e[3]||(e[3]=(...a)=>o.resetFilters&&o.resetFilters(...a))},e[12]||(e[12]=[(0,n.Lk)("i",{class:"fa fa-refresh me-2"},null,-1),(0,n.Lk)("span",null,"Reset Filter",-1)])),(0,n.Lk)("button",{class:"btn btn-primary",onClick:e[4]||(e[4]=(...a)=>o.applyFilters&&o.applyFilters(...a))},e[13]||(e[13]=[(0,n.Lk)("i",{class:"fa fa-search me-2"},null,-1),(0,n.Lk)("span",null,"Terapkan Filter",-1)]))])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",I8,[(0,n.Lk)("table",N8,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[e[15]||(e[15]=(0,n.Lk)("th",{scope:"col"},"No",-1)),(0,n.Lk)("th",{scope:"col",onClick:e[5]||(e[5]=a=>o.sortBy("namastatus"))},[e[14]||(e[14]=(0,n.eW)(" Nama Status Perangkat ")),"namastatus"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",U8)):"namastatus"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",R8)):((0,n.uX)(),(0,n.CE)("i",Q8))]),e[16]||(e[16]=(0,n.Lk)("th",{scope:"col"},"Aksi",-1))])]),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.paginatedOfficialStatuses,(a,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:a.idstatus},[(0,n.Lk)("th",W8,(0,k.v_)((i.currentPage-1)*i.perPage+t+1),1),(0,n.Lk)("td",null,(0,k.v_)(a.namastatus),1),(0,n.Lk)("td",null,[(0,n.Lk)("div",K8,[(0,n.Lk)("button",{class:"btn btn-primary btn-sm",onClick:e=>o.openEditModal(a)},e[17]||(e[17]=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)]),8,O8),(0,n.Lk)("button",{class:"btn btn-danger sweet-11 btn-sm",type:"button",onClick:e=>o.advancedDeleteAlert(a.idstatus)},e[18]||(e[18]=[(0,n.Lk)("i",{class:"fa fa-trash"},null,-1)]),8,$8)])])]))),128)),0===o.paginatedOfficialStatuses.length?((0,n.uX)(),(0,n.CE)("tr",G8,e[19]||(e[19]=[(0,n.Lk)("td",{colspan:"5",class:"text-center"},"Tidak ada data yang cocok atau tersedia.",-1)]))):(0,n.Q3)("",!0)])]),(0,n.Lk)("div",J8,[(0,n.Lk)("div",q8,[i.totalItems>0?((0,n.uX)(),(0,n.CE)("span",H8,[e[20]||(e[20]=(0,n.eW)(" Menampilkan ")),(0,n.Lk)("strong",null,(0,k.v_)((i.currentPage-1)*i.perPage+1),1),e[21]||(e[21]=(0,n.eW)(" - ")),(0,n.Lk)("strong",null,(0,k.v_)(Math.min(i.currentPage*i.perPage,i.totalItems)),1),e[22]||(e[22]=(0,n.eW)(" dari ")),(0,n.Lk)("strong",null,(0,k.v_)(i.totalItems),1),e[23]||(e[23]=(0,n.eW)(" data "))])):(0,n.Q3)("",!0)]),-1!==i.perPage&&o.totalPages>1?((0,n.uX)(),(0,n.CE)("nav",Y8,[(0,n.Lk)("ul",z8,[(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[6]||(e[6]=a=>o.changePage(i.currentPage-1))},"Prev")],2),o.pageNumbers[0]>1?((0,n.uX)(),(0,n.CE)("li",Z8,[(0,n.Lk)("button",{class:"page-link",onClick:e[7]||(e[7]=a=>o.changePage(1))},"1")])):(0,n.Q3)("",!0),o.pageNumbers[0]>2?((0,n.uX)(),(0,n.CE)("li",a6,e[24]||(e[24]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.pageNumbers,a=>((0,n.uX)(),(0,n.CE)("li",{key:a,class:(0,k.C4)(["page-item",{active:i.currentPage===a}])},[(0,n.Lk)("button",{class:"page-link",onClick:e=>o.changePage(a)},(0,k.v_)(a),9,e6)],2))),128)),o.pageNumbers.slice(-1)[0]<o.totalPages-1?((0,n.uX)(),(0,n.CE)("li",t6,e[25]||(e[25]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),o.pageNumbers.slice(-1)[0]<o.totalPages?((0,n.uX)(),(0,n.CE)("li",s6,[(0,n.Lk)("button",{class:"page-link",onClick:e[8]||(e[8]=a=>o.changePage(o.totalPages))},(0,k.v_)(o.totalPages),1)])):(0,n.Q3)("",!0),(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:i.currentPage===o.totalPages}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[9]||(e[9]=a=>o.changePage(i.currentPage+1))},"Next")],2)])])):(0,n.Q3)("",!0)])])])])}const l6={class:"modal-header"},n6={class:"modal-title"},o6={class:"modal-body"},r6={class:"mb-3"},c6={key:0,class:"alert alert-danger mt-3"},d6={class:"modal-footer"},u6=["disabled"],m6={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},k6={key:1};function h6(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",{class:"modal-overlay",onClick:e[6]||(e[6]=(...a)=>o.handleOverlayClick&&o.handleOverlayClick(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[5]||(e[5]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",l6,[(0,n.Lk)("h5",n6,(0,k.v_)(o.isEditMode?"Edit Data Status Perangkat":"Tambah Data Status Perangkat"),1),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",o6,[(0,n.Lk)("form",{onSubmit:e[2]||(e[2]=(0,l.D$)((...a)=>o.submitForm&&o.submitForm(...a),["prevent"]))},[(0,n.Lk)("div",r6,[e[7]||(e[7]=(0,n.Lk)("label",{for:"namastatus",class:"form-label"},"Nama Status Perangkat",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"namaStatus",placeholder:"Masukkan nama status perangkat","onUpdate:modelValue":e[1]||(e[1]=a=>i.formData.namastatus=a),required:""},null,512),[[l.Jo,i.formData.namastatus]])]),i.errorMessage?((0,n.uX)(),(0,n.CE)("div",c6,(0,k.v_)(i.errorMessage),1)):(0,n.Q3)("",!0)],32)]),(0,n.Lk)("div",d6,[(0,n.Lk)("button",{type:"button",class:"btn btn-danger",onClick:e[3]||(e[3]=(...a)=>o.closeModal&&o.closeModal(...a))},"Batal"),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[4]||(e[4]=(...a)=>o.submitForm&&o.submitForm(...a)),disabled:i.isLoading},[i.isLoading?((0,n.uX)(),(0,n.CE)("span",m6)):((0,n.uX)(),(0,n.CE)("span",k6,"Simpan"))],8,u6)])])])}var g6={name:"editOfficialStatusModal",props:{officialStatusToEdit:{type:Object,default:null}},created(){this.toast=(0,ln.dj)()},data(){return{formData:{namastatus:""},isLoading:!1,errorMessage:null}},computed:{isEditMode(){return!!this.officialStatusToEdit}},watch:{officialStatusToEdit:{handler(a){this.formData=a?{...a}:{namastatus:""},this.errorMessage=null},immediate:!0}},methods:{closeModal(){this.$emit("close")},handleOverlayClick(a){a.target===a.currentTarget&&this.closeModal()},async submitForm(){this.errorMessage=null;const{namastatus:a}=this.formData;if(a){this.isLoading=!0;try{this.isEditMode?(await sd(this.officialStatusToEdit.idstatus,this.formData),this.toast.success("Data status perangkat berhasil diperbarui",{icon:"fa fa-check"})):(await td(this.formData),this.toast.success("Data status perangkat berhasil ditambah",{icon:"fa fa-check"})),this.$emit("save-successful"),this.closeModal()}catch(e){console.error("Error occurred:",e),this.errorMessage=e.response?.data?.message||"Gagal menyimpan data.",this.toast.error("Gagal menyimpan data status perangkat",{icon:"fa fa-times"})}finally{this.isLoading=!1}}else this.errorMessage="Semua field wajib diisi."}}};const p6=(0,r.A)(g6,[["render",h6],["__scopeId","data-v-c38de6fa"]]);var b6=p6,f6={components:{AddEditOfficialStatusModal:b6},data(){return{officialStatuses:[],sortColumn:"",sortDirection:"asc",isModalVisible:!1,currentPage:1,perPage:20,totalItems:0,officialStatusBeingEdited:null,jumpPage:1,isFilterVisible:!1,filters:{officialStatus_name:""}}},computed:{paginatedOfficialStatuses(){return this.officialStatuses},totalPages(){return this.perPage<=0?1:Math.ceil(this.totalItems/this.perPage)},pageNumbers(){const a=[],e=5;let t=Math.max(1,this.currentPage-Math.floor(e/2)),s=t+e-1;s>this.totalPages&&(s=this.totalPages,t=Math.max(1,s-e+1));for(let i=t;i<=s;i++)a.push(i);return a}},watch:{currentPage(){this.fetchOfficialStatuses(),this.jumpPage=this.currentPage},perPage(){this.currentPage=1,this.fetchOfficialStatuses()}},async mounted(){this.toast=(0,ln.dj)(),await this.fetchOfficialStatuses()},methods:{openAddModal(){this.officialStatusBeingEdited=null,this.isModalVisible=!0},openEditModal(a){this.officialStatusBeingEdited={...a},this.isModalVisible=!0},closeModal(){this.isModalVisible=!1,this.officialStatusBeingEdited=null},handleSaveSuccessful(){this.closeModal(),this.fetchOfficialStatuses()},async fetchOfficialStatuses(){try{const a={act:"status-perangkat",page:this.currentPage,limit:this.perPage,order:this.sortColumn?`${this.sortColumn} ${this.sortDirection}`:"",group:""},e=Object.entries(this.filters).filter(([a,e])=>""!==e).map(([a,e])=>`${a}=${e}`);e.length>0?a.filter=e.join(","):a.filter="";const t=await ed(a),s=t.data?.data||t.data?.[0]?.data||[],i=t.data?.[0]?.meta?.pagination||{};this.officialStatuses=s,this.totalItems=i.total||s.length}catch(a){console.error("Error fetching status perangkat:",a),this.$swal({icon:"error",title:"Oops...",text:"Gagal memuat data status perangkat. Silakan coba lagi nanti."})}},advancedDeleteAlert(a){this.$swal({title:"Hapus Data Status Perangkat",text:"Apakah Anda yakin ingin menghapus data ini?",icon:"warning",showCancelButton:!0,confirmButtonText:'<i class="fa fa-check me-2"></i> Hapus!',confirmButtonColor:"#d33",cancelButtonText:'<i class="fa fa-times me-2"></i> Batal',cancelButtonColor:"#efefef",reverseButtons:!0}).then(async e=>{if(e.isConfirmed)try{await id(a),1===this.officialStatuses.length&&this.currentPage>1?this.currentPage--:this.fetchOfficialStatuses(),this.toast.success("Data status perangkat berhasil dihapus",{icon:"fa fa-check"})}catch(t){this.toast.error("Gagal menghapus data status perangkat",{icon:"fa fa-times"})}})},sortBy(a){this.sortColumn===a?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=a,this.sortDirection="asc"),this.fetchOfficialStatuses()},changePage(a){a>=1&&a<=this.totalPages&&(this.currentPage=a)},toggleFilterVisibility(){this.isFilterVisible=!this.isFilterVisible},applyFilters(){this.currentPage=1,this.fetchOfficialStatuses()},resetFilters(){this.filters.namastatus="",this.sortColumn="",this.sortDirection="asc",this.currentPage=1,this.fetchOfficialStatuses()}}};const L6=(0,r.A)(f6,[["render",i6],["__scopeId","data-v-6652f4b7"]]);var y6=L6,v6={components:{OfficialStatusesTable:y6}};const C6=(0,r.A)(v6,[["render",M8]]);var P6=C6;const E6={class:"container-fluid"},D6={class:"row widget-grid"};function M6(a,e,t,s,i,l){const o=(0,n.g2)("Breadcrumbs"),r=(0,n.g2)("BusinessFieldsTable");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(o,{main:"BUMDES",title:a.$route.meta.title},null,8,["title"]),(0,n.Lk)("div",E6,[(0,n.Lk)("div",D6,[(0,n.bF)(r)])])])}const w6={class:"col-sm-12"},F6={class:"card"},X6={class:"card-body"},x6={class:"d-flex justify-content-end align-items-start mb-3"},T6={class:"d-flex gap-2"},S6={key:0,class:"fa fa-angle-up me-2"},B6={key:1,class:"fa fa-angle-down me-2"},A6={key:0,class:"border p-3 mb-3 rounded filter-section"},_6={class:"row g-2"},j6={class:"col-md-4"},V6={class:"d-flex justify-content-end gap-2 mt-3"},I6={class:"table-responsive signal-table"},N6={class:"table table-hover"},U6={key:0,class:"fa fa-sort-asc"},R6={key:1,class:"fa fa-sort-desc"},Q6={key:2,class:"fa fa-sort"},W6={scope:"row"},K6={class:"btn-group"},O6=["onClick"],$6=["onClick"],G6={key:0},J6={class:"d-flex flex-column flex-md-row justify-content-md-between align-items-center mt-3 px-3 pb-3"},q6={class:"mt-2"},H6={key:0,class:"text-muted"},Y6={key:0,class:"d-flex align-items-center flex-wrap gap-2 mt-2"},z6={class:"pagination mb-0"},Z6={key:0,class:"page-item"},a7={key:1,class:"page-item disabled"},e7=["onClick"],t7={key:2,class:"page-item disabled"},s7={key:3,class:"page-item"};function i7(a,e,t,s,i,o){const r=(0,n.g2)("add-edit-businessField-modal");return(0,n.uX)(),(0,n.CE)("div",w6,[i.isModalVisible?((0,n.uX)(),(0,n.Wv)(r,{key:0,"businessField-to-edit":i.businessFieldBeingEdited,onClose:o.closeModal,onSaveSuccessful:o.handleSaveSuccessful},null,8,["businessField-to-edit","onClose","onSaveSuccessful"])):(0,n.Q3)("",!0),(0,n.Lk)("div",F6,[e[26]||(e[26]=(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("h3",null,"Daftar Nama Bidang Usaha")],-1)),(0,n.Lk)("div",X6,[(0,n.Lk)("div",x6,[(0,n.Lk)("div",T6,[(0,n.Lk)("button",{class:"btn btn-outline-light txt-dark",onClick:e[0]||(e[0]=(...a)=>o.toggleFilterVisibility&&o.toggleFilterVisibility(...a))},[i.isFilterVisible?((0,n.uX)(),(0,n.CE)("i",S6)):((0,n.uX)(),(0,n.CE)("i",B6)),(0,n.Lk)("span",null,(0,k.v_)(i.isFilterVisible?"Sembunyikan":"Tampilkan")+" Filter",1)]),(0,n.Lk)("button",{class:"btn btn-success",onClick:e[1]||(e[1]=(...a)=>o.openAddModal&&o.openAddModal(...a))},e[10]||(e[10]=[(0,n.Lk)("i",{class:"fa fa-plus me-2"},null,-1),(0,n.Lk)("span",null," Tambah Data",-1)]))])]),i.isFilterVisible?((0,n.uX)(),(0,n.CE)("div",A6,[(0,n.Lk)("div",_6,[(0,n.Lk)("div",j6,[e[11]||(e[11]=(0,n.Lk)("label",{for:"filterName",class:"form-label"},"Nama Bidang Usaha",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterName",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.filters.namabidangusaha=a),placeholder:"Filter berdasarkan nama bidang usaha"},null,512),[[l.Jo,i.filters.namabidangusaha]])])]),(0,n.Lk)("div",V6,[(0,n.Lk)("button",{class:"btn btn-secondary",onClick:e[3]||(e[3]=(...a)=>o.resetFilters&&o.resetFilters(...a))},e[12]||(e[12]=[(0,n.Lk)("i",{class:"fa fa-refresh me-2"},null,-1),(0,n.Lk)("span",null,"Reset Filter",-1)])),(0,n.Lk)("button",{class:"btn btn-primary",onClick:e[4]||(e[4]=(...a)=>o.applyFilters&&o.applyFilters(...a))},e[13]||(e[13]=[(0,n.Lk)("i",{class:"fa fa-search me-2"},null,-1),(0,n.Lk)("span",null,"Terapkan Filter",-1)]))])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",I6,[(0,n.Lk)("table",N6,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[e[15]||(e[15]=(0,n.Lk)("th",{scope:"col"},"No",-1)),(0,n.Lk)("th",{scope:"col",onClick:e[5]||(e[5]=a=>o.sortBy("namabidangusaha"))},[e[14]||(e[14]=(0,n.eW)(" Nama Bidang Usaha ")),"namabidangusaha"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",U6)):"namabidangusaha"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",R6)):((0,n.uX)(),(0,n.CE)("i",Q6))]),e[16]||(e[16]=(0,n.Lk)("th",{scope:"col"},"Aksi",-1))])]),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.paginatedBusinessFields,(a,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:a.idbidangusaha},[(0,n.Lk)("th",W6,(0,k.v_)((i.currentPage-1)*i.perPage+t+1),1),(0,n.Lk)("td",null,(0,k.v_)(a.namabidangusaha),1),(0,n.Lk)("td",null,[(0,n.Lk)("div",K6,[(0,n.Lk)("button",{class:"btn btn-primary btn-sm",onClick:e=>o.openEditModal(a)},e[17]||(e[17]=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)]),8,O6),(0,n.Lk)("button",{class:"btn btn-danger sweet-11 btn-sm",type:"button",onClick:e=>o.advancedDeleteAlert(a.idbidangusaha)},e[18]||(e[18]=[(0,n.Lk)("i",{class:"fa fa-trash"},null,-1)]),8,$6)])])]))),128)),0===o.paginatedBusinessFields.length?((0,n.uX)(),(0,n.CE)("tr",G6,e[19]||(e[19]=[(0,n.Lk)("td",{colspan:"5",class:"text-center"},"Tidak ada data yang cocok atau tersedia.",-1)]))):(0,n.Q3)("",!0)])]),(0,n.Lk)("div",J6,[(0,n.Lk)("div",q6,[i.totalItems>0?((0,n.uX)(),(0,n.CE)("span",H6,[e[20]||(e[20]=(0,n.eW)(" Menampilkan ")),(0,n.Lk)("strong",null,(0,k.v_)((i.currentPage-1)*i.perPage+1),1),e[21]||(e[21]=(0,n.eW)(" - ")),(0,n.Lk)("strong",null,(0,k.v_)(Math.min(i.currentPage*i.perPage,i.totalItems)),1),e[22]||(e[22]=(0,n.eW)(" dari ")),(0,n.Lk)("strong",null,(0,k.v_)(i.totalItems),1),e[23]||(e[23]=(0,n.eW)(" data "))])):(0,n.Q3)("",!0)]),-1!==i.perPage&&o.totalPages>1?((0,n.uX)(),(0,n.CE)("nav",Y6,[(0,n.Lk)("ul",z6,[(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[6]||(e[6]=a=>o.changePage(i.currentPage-1))},"Prev")],2),o.pageNumbers[0]>1?((0,n.uX)(),(0,n.CE)("li",Z6,[(0,n.Lk)("button",{class:"page-link",onClick:e[7]||(e[7]=a=>o.changePage(1))},"1")])):(0,n.Q3)("",!0),o.pageNumbers[0]>2?((0,n.uX)(),(0,n.CE)("li",a7,e[24]||(e[24]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.pageNumbers,a=>((0,n.uX)(),(0,n.CE)("li",{key:a,class:(0,k.C4)(["page-item",{active:i.currentPage===a}])},[(0,n.Lk)("button",{class:"page-link",onClick:e=>o.changePage(a)},(0,k.v_)(a),9,e7)],2))),128)),o.pageNumbers.slice(-1)[0]<o.totalPages-1?((0,n.uX)(),(0,n.CE)("li",t7,e[25]||(e[25]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),o.pageNumbers.slice(-1)[0]<o.totalPages?((0,n.uX)(),(0,n.CE)("li",s7,[(0,n.Lk)("button",{class:"page-link",onClick:e[8]||(e[8]=a=>o.changePage(o.totalPages))},(0,k.v_)(o.totalPages),1)])):(0,n.Q3)("",!0),(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:i.currentPage===o.totalPages}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[9]||(e[9]=a=>o.changePage(i.currentPage+1))},"Next")],2)])])):(0,n.Q3)("",!0)])])])])}const l7={class:"modal-header"},n7={class:"modal-title"},o7={class:"modal-body"},r7={class:"mb-3"},c7={key:0,class:"alert alert-danger mt-3"},d7={class:"modal-footer"},u7=["disabled"],m7={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},k7={key:1};function h7(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",{class:"modal-overlay",onClick:e[6]||(e[6]=(...a)=>o.handleOverlayClick&&o.handleOverlayClick(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[5]||(e[5]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",l7,[(0,n.Lk)("h5",n7,(0,k.v_)(o.isEditMode?"Edit Data Bidang Usaha":"Tambah Data Bidang Usaha"),1),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",o7,[(0,n.Lk)("form",{onSubmit:e[2]||(e[2]=(0,l.D$)((...a)=>o.submitForm&&o.submitForm(...a),["prevent"]))},[(0,n.Lk)("div",r7,[e[7]||(e[7]=(0,n.Lk)("label",{for:"namabidangusaha",class:"form-label"},"Nama Bidang Usaha",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"namaBidangUsaha",placeholder:"Masukkan nama bidang usaha","onUpdate:modelValue":e[1]||(e[1]=a=>i.formData.namabidangusaha=a),required:""},null,512),[[l.Jo,i.formData.namabidangusaha]])]),i.errorMessage?((0,n.uX)(),(0,n.CE)("div",c7,(0,k.v_)(i.errorMessage),1)):(0,n.Q3)("",!0)],32)]),(0,n.Lk)("div",d7,[(0,n.Lk)("button",{type:"button",class:"btn btn-danger",onClick:e[3]||(e[3]=(...a)=>o.closeModal&&o.closeModal(...a))},"Batal"),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[4]||(e[4]=(...a)=>o.submitForm&&o.submitForm(...a)),disabled:i.isLoading},[i.isLoading?((0,n.uX)(),(0,n.CE)("span",m7)):((0,n.uX)(),(0,n.CE)("span",k7,"Simpan"))],8,u7)])])])}var g7={name:"editBusinessFieldModal",props:{businessFieldToEdit:{type:Object,default:null}},created(){this.toast=(0,ln.dj)()},data(){return{formData:{namabidangusaha:""},isLoading:!1,errorMessage:null}},computed:{isEditMode(){return!!this.businessFieldToEdit}},watch:{businessFieldToEdit:{handler(a){this.formData=a?{...a}:{namabidangusaha:""},this.errorMessage=null},immediate:!0}},methods:{closeModal(){this.$emit("close")},handleOverlayClick(a){a.target===a.currentTarget&&this.closeModal()},async submitForm(){this.errorMessage=null;const{namabidangusaha:a}=this.formData;if(a){this.isLoading=!0;try{this.isEditMode?(await yw(this.businessFieldToEdit.idbidangusaha,this.formData),this.toast.success("Data bidang usaha berhasil diperbarui",{icon:"fa fa-check"})):(await Lw(this.formData),this.toast.success("Data bidang usaha berhasil ditambah",{icon:"fa fa-check"})),this.$emit("save-successful"),this.closeModal()}catch(e){console.error("Error occurred:",e),this.errorMessage=e.response?.data?.message||"Gagal menyimpan data.",this.toast.error("Gagal menyimpan data bidang usaha",{icon:"fa fa-times"})}finally{this.isLoading=!1}}else this.errorMessage="Semua field wajib diisi."}}};const p7=(0,r.A)(g7,[["render",h7],["__scopeId","data-v-3dd57cf6"]]);var b7=p7,f7={components:{AddEditBusinessFieldModal:b7},data(){return{businessFields:[],sortColumn:"",sortDirection:"asc",isModalVisible:!1,currentPage:1,perPage:20,totalItems:0,businessFieldBeingEdited:null,jumpPage:1,isFilterVisible:!1,filters:{businessField_name:""}}},computed:{paginatedBusinessFields(){return this.businessFields},totalPages(){return this.perPage<=0?1:Math.ceil(this.totalItems/this.perPage)},pageNumbers(){const a=[],e=5;let t=Math.max(1,this.currentPage-Math.floor(e/2)),s=t+e-1;s>this.totalPages&&(s=this.totalPages,t=Math.max(1,s-e+1));for(let i=t;i<=s;i++)a.push(i);return a}},watch:{currentPage(){this.fetchBusinessFields(),this.jumpPage=this.currentPage},perPage(){this.currentPage=1,this.fetchBusinessFields()}},async mounted(){this.toast=(0,ln.dj)(),await this.fetchBusinessFields()},methods:{openAddModal(){this.businessFieldBeingEdited=null,this.isModalVisible=!0},openEditModal(a){this.businessFieldBeingEdited={...a},this.isModalVisible=!0},closeModal(){this.isModalVisible=!1,this.businessFieldBeingEdited=null},handleSaveSuccessful(){this.closeModal(),this.fetchBusinessFields()},async fetchBusinessFields(){try{const a={act:"bidang-usaha",page:this.currentPage,limit:this.perPage,order:this.sortColumn?`${this.sortColumn} ${this.sortDirection}`:"",group:""},e=Object.entries(this.filters).filter(([a,e])=>""!==e).map(([a,e])=>`${a}=${e}`);e.length>0?a.filter=e.join(","):a.filter="";const t=await fw(a),s=t.data?.data||t.data?.[0]?.data||[],i=t.data?.[0]?.meta?.pagination||{};this.businessFields=s,this.totalItems=i.total||s.length}catch(a){console.error("Error fetching bidang usaha:",a),this.$swal({icon:"error",title:"Oops...",text:"Gagal memuat data bidang usaha. Silakan coba lagi nanti."})}},advancedDeleteAlert(a){this.$swal({title:"Hapus Data Periode Bidang Usaha",text:"Apakah Anda yakin ingin menghapus data ini?",icon:"warning",showCancelButton:!0,confirmButtonText:'<i class="fa fa-check me-2"></i> Hapus!',confirmButtonColor:"#d33",cancelButtonText:'<i class="fa fa-times me-2"></i> Batal',cancelButtonColor:"#efefef",reverseButtons:!0}).then(async e=>{if(e.isConfirmed)try{await vw(a),1===this.businessFields.length&&this.currentPage>1?this.currentPage--:this.fetchBusinessFields(),this.toast.success("Data bidang usaha berhasil dihapus",{icon:"fa fa-check"})}catch(t){this.toast.error("Gagal menghapus data bidang usaha",{icon:"fa fa-times"})}})},sortBy(a){this.sortColumn===a?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=a,this.sortDirection="asc"),this.fetchBusinessFields()},changePage(a){a>=1&&a<=this.totalPages&&(this.currentPage=a)},toggleFilterVisibility(){this.isFilterVisible=!this.isFilterVisible},applyFilters(){this.currentPage=1,this.fetchBusinessFields()},resetFilters(){this.filters.namabidangbidangusaha="",this.sortColumn="",this.sortDirection="asc",this.currentPage=1,this.fetchBusinessFields()}}};const L7=(0,r.A)(f7,[["render",i7],["__scopeId","data-v-d7b1e086"]]);var y7=L7,v7={components:{BusinessFieldsTable:y7}};const C7=(0,r.A)(v7,[["render",M6]]);var P7=C7;const E7={class:"container-fluid"},D7={class:"row widget-grid"};function M7(a,e,t,s,i,l){const o=(0,n.g2)("Breadcrumbs"),r=(0,n.g2)("ReportPeriodsTable");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(o,{main:"BUMDES",title:a.$route.meta.title},null,8,["title"]),(0,n.Lk)("div",E7,[(0,n.Lk)("div",D7,[(0,n.bF)(r)])])])}const w7={class:"col-sm-12"},F7={class:"card"},X7={class:"card-body"},x7={class:"d-flex justify-content-end align-items-start mb-3"},T7={class:"d-flex gap-2"},S7={key:0,class:"fa fa-angle-up me-2"},B7={key:1,class:"fa fa-angle-down me-2"},A7={key:0,class:"border p-3 mb-3 rounded filter-section"},_7={class:"row g-2"},j7={class:"col-md-4"},V7={class:"d-flex justify-content-end gap-2 mt-3"},I7={class:"table-responsive signal-table"},N7={class:"table table-hover"},U7={key:0,class:"fa fa-sort-asc"},R7={key:1,class:"fa fa-sort-desc"},Q7={key:2,class:"fa fa-sort"},W7={scope:"row"},K7={class:"btn-group"},O7=["onClick"],$7=["onClick"],G7={key:0},J7={class:"d-flex flex-column flex-md-row justify-content-md-between align-items-center mt-3 px-3 pb-3"},q7={class:"mt-2"},H7={key:0,class:"text-muted"},Y7={key:0,class:"d-flex align-items-center flex-wrap gap-2 mt-2"},z7={class:"pagination mb-0"},Z7={key:0,class:"page-item"},a9={key:1,class:"page-item disabled"},e9=["onClick"],t9={key:2,class:"page-item disabled"},s9={key:3,class:"page-item"};function i9(a,e,t,s,i,o){const r=(0,n.g2)("add-edit-reportPeriod-modal");return(0,n.uX)(),(0,n.CE)("div",w7,[i.isModalVisible?((0,n.uX)(),(0,n.Wv)(r,{key:0,"reportPeriod-to-edit":i.reportPeriodBeingEdited,onClose:o.closeModal,onSaveSuccessful:o.handleSaveSuccessful},null,8,["reportPeriod-to-edit","onClose","onSaveSuccessful"])):(0,n.Q3)("",!0),(0,n.Lk)("div",F7,[e[26]||(e[26]=(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("h3",null,"Daftar Nama Periode Laporan Usaha")],-1)),(0,n.Lk)("div",X7,[(0,n.Lk)("div",x7,[(0,n.Lk)("div",T7,[(0,n.Lk)("button",{class:"btn btn-outline-light txt-dark",onClick:e[0]||(e[0]=(...a)=>o.toggleFilterVisibility&&o.toggleFilterVisibility(...a))},[i.isFilterVisible?((0,n.uX)(),(0,n.CE)("i",S7)):((0,n.uX)(),(0,n.CE)("i",B7)),(0,n.Lk)("span",null,(0,k.v_)(i.isFilterVisible?"Sembunyikan":"Tampilkan")+" Filter",1)]),(0,n.Lk)("button",{class:"btn btn-success",onClick:e[1]||(e[1]=(...a)=>o.openAddModal&&o.openAddModal(...a))},e[10]||(e[10]=[(0,n.Lk)("i",{class:"fa fa-plus me-2"},null,-1),(0,n.Lk)("span",null," Tambah Data",-1)]))])]),i.isFilterVisible?((0,n.uX)(),(0,n.CE)("div",A7,[(0,n.Lk)("div",_7,[(0,n.Lk)("div",j7,[e[11]||(e[11]=(0,n.Lk)("label",{for:"filterName",class:"form-label"},"Nama Periode Laporan Usaha",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterName",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.filters.namaperiodelaporan=a),placeholder:"Filter berdasarkan nama..."},null,512),[[l.Jo,i.filters.namaperiodelaporan]])])]),(0,n.Lk)("div",V7,[(0,n.Lk)("button",{class:"btn btn-secondary",onClick:e[3]||(e[3]=(...a)=>o.resetFilters&&o.resetFilters(...a))},e[12]||(e[12]=[(0,n.Lk)("i",{class:"fa fa-refresh me-2"},null,-1),(0,n.Lk)("span",null,"Reset Filter",-1)])),(0,n.Lk)("button",{class:"btn btn-primary",onClick:e[4]||(e[4]=(...a)=>o.applyFilters&&o.applyFilters(...a))},e[13]||(e[13]=[(0,n.Lk)("i",{class:"fa fa-search me-2"},null,-1),(0,n.Lk)("span",null,"Terapkan Filter",-1)]))])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",I7,[(0,n.Lk)("table",N7,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[e[15]||(e[15]=(0,n.Lk)("th",{scope:"col"},"No",-1)),(0,n.Lk)("th",{scope:"col",onClick:e[5]||(e[5]=a=>o.sortBy("namaperiodelaporan"))},[e[14]||(e[14]=(0,n.eW)(" Nama Periode Laporan Usaha ")),"namaperiodelaporan"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",U7)):"namaperiodelaporan"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",R7)):((0,n.uX)(),(0,n.CE)("i",Q7))]),e[16]||(e[16]=(0,n.Lk)("th",{scope:"col"},"Aksi",-1))])]),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.paginatedReportPeriods,(a,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:a.idperiodelaporan},[(0,n.Lk)("th",W7,(0,k.v_)((i.currentPage-1)*i.perPage+t+1),1),(0,n.Lk)("td",null,(0,k.v_)(a.namaperiodelaporan),1),(0,n.Lk)("td",null,[(0,n.Lk)("div",K7,[(0,n.Lk)("button",{class:"btn btn-primary btn-sm",onClick:e=>o.openEditModal(a)},e[17]||(e[17]=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)]),8,O7),(0,n.Lk)("button",{class:"btn btn-danger sweet-11 btn-sm",type:"button",onClick:e=>o.advancedDeleteAlert(a.idperiodelaporan)},e[18]||(e[18]=[(0,n.Lk)("i",{class:"fa fa-trash"},null,-1)]),8,$7)])])]))),128)),0===o.paginatedReportPeriods.length?((0,n.uX)(),(0,n.CE)("tr",G7,e[19]||(e[19]=[(0,n.Lk)("td",{colspan:"5",class:"text-center"},"Tidak ada data yang cocok atau tersedia.",-1)]))):(0,n.Q3)("",!0)])]),(0,n.Lk)("div",J7,[(0,n.Lk)("div",q7,[i.totalItems>0?((0,n.uX)(),(0,n.CE)("span",H7,[e[20]||(e[20]=(0,n.eW)(" Menampilkan ")),(0,n.Lk)("strong",null,(0,k.v_)((i.currentPage-1)*i.perPage+1),1),e[21]||(e[21]=(0,n.eW)(" - ")),(0,n.Lk)("strong",null,(0,k.v_)(Math.min(i.currentPage*i.perPage,i.totalItems)),1),e[22]||(e[22]=(0,n.eW)(" dari ")),(0,n.Lk)("strong",null,(0,k.v_)(i.totalItems),1),e[23]||(e[23]=(0,n.eW)(" data "))])):(0,n.Q3)("",!0)]),-1!==i.perPage&&o.totalPages>1?((0,n.uX)(),(0,n.CE)("nav",Y7,[(0,n.Lk)("ul",z7,[(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[6]||(e[6]=a=>o.changePage(i.currentPage-1))},"Prev")],2),o.pageNumbers[0]>1?((0,n.uX)(),(0,n.CE)("li",Z7,[(0,n.Lk)("button",{class:"page-link",onClick:e[7]||(e[7]=a=>o.changePage(1))},"1")])):(0,n.Q3)("",!0),o.pageNumbers[0]>2?((0,n.uX)(),(0,n.CE)("li",a9,e[24]||(e[24]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.pageNumbers,a=>((0,n.uX)(),(0,n.CE)("li",{key:a,class:(0,k.C4)(["page-item",{active:i.currentPage===a}])},[(0,n.Lk)("button",{class:"page-link",onClick:e=>o.changePage(a)},(0,k.v_)(a),9,e9)],2))),128)),o.pageNumbers.slice(-1)[0]<o.totalPages-1?((0,n.uX)(),(0,n.CE)("li",t9,e[25]||(e[25]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),o.pageNumbers.slice(-1)[0]<o.totalPages?((0,n.uX)(),(0,n.CE)("li",s9,[(0,n.Lk)("button",{class:"page-link",onClick:e[8]||(e[8]=a=>o.changePage(o.totalPages))},(0,k.v_)(o.totalPages),1)])):(0,n.Q3)("",!0),(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:i.currentPage===o.totalPages}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[9]||(e[9]=a=>o.changePage(i.currentPage+1))},"Next")],2)])])):(0,n.Q3)("",!0)])])])])}const l9={class:"modal-header"},n9={class:"modal-title"},o9={class:"modal-body"},r9={class:"mb-3"},c9={key:0,class:"alert alert-danger mt-3"},d9={class:"modal-footer"},u9=["disabled"],m9={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},k9={key:1};function h9(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",{class:"modal-overlay",onClick:e[6]||(e[6]=(...a)=>o.handleOverlayClick&&o.handleOverlayClick(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[5]||(e[5]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",l9,[(0,n.Lk)("h5",n9,(0,k.v_)(o.isEditMode?"Edit Data Periode Laporan Usaha":"Tambah Data Periode Laporan Usaha"),1),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",o9,[(0,n.Lk)("form",{onSubmit:e[2]||(e[2]=(0,l.D$)((...a)=>o.submitForm&&o.submitForm(...a),["prevent"]))},[(0,n.Lk)("div",r9,[e[7]||(e[7]=(0,n.Lk)("label",{for:"namaperiodelaporan",class:"form-label"},"Nama Periode Laporan Usaha",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"namaPeriodeLaporan",placeholder:"Masukkan nama periode laporan","onUpdate:modelValue":e[1]||(e[1]=a=>i.formData.namaperiodelaporan=a),required:""},null,512),[[l.Jo,i.formData.namaperiodelaporan]])]),i.errorMessage?((0,n.uX)(),(0,n.CE)("div",c9,(0,k.v_)(i.errorMessage),1)):(0,n.Q3)("",!0)],32)]),(0,n.Lk)("div",d9,[(0,n.Lk)("button",{type:"button",class:"btn btn-danger",onClick:e[3]||(e[3]=(...a)=>o.closeModal&&o.closeModal(...a))},"Batal"),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[4]||(e[4]=(...a)=>o.submitForm&&o.submitForm(...a)),disabled:i.isLoading},[i.isLoading?((0,n.uX)(),(0,n.CE)("span",m9)):((0,n.uX)(),(0,n.CE)("span",k9,"Simpan"))],8,u9)])])])}var g9={name:"editReportPeriodModal",props:{reportPeriodToEdit:{type:Object,default:null}},created(){this.toast=(0,ln.dj)()},data(){return{formData:{namaperiodelaporan:""},isLoading:!1,errorMessage:null}},computed:{isEditMode(){return!!this.reportPeriodToEdit}},watch:{reportPeriodToEdit:{handler(a){this.formData=a?{...a}:{namaperiodelaporan:""},this.errorMessage=null},immediate:!0}},methods:{closeModal(){this.$emit("close")},handleOverlayClick(a){a.target===a.currentTarget&&this.closeModal()},async submitForm(){this.errorMessage=null;const{namaperiodelaporan:a}=this.formData;if(a){this.isLoading=!0;try{this.isEditMode?(await fT(this.reportPeriodToEdit.idperiodelaporan,this.formData),this.toast.success("Data periode laporan berhasil diperbarui",{icon:"fa fa-check"})):(await bT(this.formData),this.toast.success("Data periode laporan berhasil ditambah",{icon:"fa fa-check"})),this.$emit("save-successful"),this.closeModal()}catch(e){console.error("Error occurred:",e),this.errorMessage=e.response?.data?.message||"Gagal menyimpan data.",this.toast.error("Gagal menyimpan data periode laporan",{icon:"fa fa-times"})}finally{this.isLoading=!1}}else this.errorMessage="Semua field wajib diisi."}}};const p9=(0,r.A)(g9,[["render",h9],["__scopeId","data-v-e0b7c678"]]);var b9=p9,f9={components:{AddEditReportPeriodModal:b9},data(){return{reportPeriods:[],sortColumn:"",sortDirection:"asc",isModalVisible:!1,currentPage:1,perPage:20,totalItems:0,reportPeriodBeingEdited:null,jumpPage:1,isFilterVisible:!1,filters:{reportPeriod_name:""}}},computed:{paginatedReportPeriods(){return this.reportPeriods},totalPages(){return this.perPage<=0?1:Math.ceil(this.totalItems/this.perPage)},pageNumbers(){const a=[],e=5;let t=Math.max(1,this.currentPage-Math.floor(e/2)),s=t+e-1;s>this.totalPages&&(s=this.totalPages,t=Math.max(1,s-e+1));for(let i=t;i<=s;i++)a.push(i);return a}},watch:{currentPage(){this.fetchReportPeriods(),this.jumpPage=this.currentPage},perPage(){this.currentPage=1,this.fetchReportPeriods()}},async mounted(){this.toast=(0,ln.dj)(),await this.fetchReportPeriods()},methods:{openAddModal(){this.reportPeriodBeingEdited=null,this.isModalVisible=!0},openEditModal(a){this.reportPeriodBeingEdited={...a},this.isModalVisible=!0},closeModal(){this.isModalVisible=!1,this.reportPeriodBeingEdited=null},handleSaveSuccessful(){this.closeModal(),this.fetchReportPeriods()},async fetchReportPeriods(){try{const a={act:"periode-laporan-usaha",page:this.currentPage,limit:this.perPage,order:this.sortColumn?`${this.sortColumn} ${this.sortDirection}`:"",group:""},e=Object.entries(this.filters).filter(([a,e])=>""!==e).map(([a,e])=>`${a}=${e}`);e.length>0?a.filter=e.join(","):a.filter="";const t=await pT(a),s=t.data?.data||t.data?.[0]?.data||[],i=t.data?.[0]?.meta?.pagination||{};this.reportPeriods=s,this.totalItems=i.total||s.length}catch(a){console.error("Error fetching periode laporan:",a),this.$swal({icon:"error",title:"Oops...",text:"Gagal memuat data periode laporan. Silakan coba lagi nanti."})}},advancedDeleteAlert(a){this.$swal({title:"Hapus Data Periode Laporan Usaha",text:"Apakah Anda yakin ingin menghapus data ini?",icon:"warning",showCancelButton:!0,confirmButtonText:'<i class="fa fa-check me-2"></i> Hapus!',confirmButtonColor:"#d33",cancelButtonText:'<i class="fa fa-times me-2"></i> Batal',cancelButtonColor:"#efefef",reverseButtons:!0}).then(async e=>{if(e.isConfirmed)try{await LT(a),1===this.reportPeriods.length&&this.currentPage>1?this.currentPage--:this.fetchReportPeriods(),this.toast.success("Data periode laporan berhasil dihapus",{icon:"fa fa-check"})}catch(t){this.toast.error("Gagal menghapus data periode laporan",{icon:"fa fa-times"})}})},sortBy(a){this.sortColumn===a?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=a,this.sortDirection="asc"),this.fetchReportPeriods()},changePage(a){a>=1&&a<=this.totalPages&&(this.currentPage=a)},toggleFilterVisibility(){this.isFilterVisible=!this.isFilterVisible},applyFilters(){this.currentPage=1,this.fetchReportPeriods()},resetFilters(){this.filters.namaperiodelaporan="",this.sortColumn="",this.sortDirection="asc",this.currentPage=1,this.fetchReportPeriods()}}};const L9=(0,r.A)(f9,[["render",i9],["__scopeId","data-v-472ebaba"]]);var y9=L9,v9={components:{ReportPeriodsTable:y9}};const C9=(0,r.A)(v9,[["render",M7]]);var P9=C9;const E9={class:"container-fluid"},D9={class:"row widget-grid"};function M9(a,e,t,s,i,l){const o=(0,n.g2)("Breadcrumbs"),r=(0,n.g2)("IncomingLetterTypesTable");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(o,{main:"Dokumen",title:a.$route.meta.title},null,8,["title"]),(0,n.Lk)("div",E9,[(0,n.Lk)("div",D9,[(0,n.bF)(r)])])])}const w9={class:"col-sm-12"},F9={class:"card"},X9={class:"card-body"},x9={class:"d-flex justify-content-end align-items-start mb-3"},T9={class:"d-flex gap-2"},S9={key:0,class:"fa fa-angle-up me-2"},B9={key:1,class:"fa fa-angle-down me-2"},A9={key:0,class:"border p-3 mb-3 rounded filter-section"},_9={class:"row g-2"},j9={class:"col-md-4"},V9={class:"d-flex justify-content-end gap-2 mt-3"},I9={class:"table-responsive signal-table"},N9={class:"table table-hover"},U9={key:0,class:"fa fa-sort-asc"},R9={key:1,class:"fa fa-sort-desc"},Q9={key:2,class:"fa fa-sort"},W9={scope:"row"},K9={class:"btn-group"},O9=["onClick"],$9=["onClick"],G9={key:0},J9={class:"d-flex flex-column flex-md-row justify-content-md-between align-items-center mt-3 px-3 pb-3"},q9={class:"mt-2"},H9={key:0,class:"text-muted"},Y9={key:0,class:"d-flex align-items-center flex-wrap gap-2 mt-2"},z9={class:"pagination mb-0"},Z9={key:0,class:"page-item"},aaa={key:1,class:"page-item disabled"},eaa=["onClick"],taa={key:2,class:"page-item disabled"},saa={key:3,class:"page-item"};function iaa(a,e,t,s,i,o){const r=(0,n.g2)("add-edit-incomingLetterType-modal");return(0,n.uX)(),(0,n.CE)("div",w9,[i.isModalVisible?((0,n.uX)(),(0,n.Wv)(r,{key:0,"incomingLetterType-to-edit":i.incomingLetterTypeBeingEdited,onClose:o.closeModal,onSaveSuccessful:o.handleSaveSuccessful},null,8,["incomingLetterType-to-edit","onClose","onSaveSuccessful"])):(0,n.Q3)("",!0),(0,n.Lk)("div",F9,[e[26]||(e[26]=(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("h3",null,"Daftar Nama Jenis Surat Masuk")],-1)),(0,n.Lk)("div",X9,[(0,n.Lk)("div",x9,[(0,n.Lk)("div",T9,[(0,n.Lk)("button",{class:"btn btn-outline-light txt-dark",onClick:e[0]||(e[0]=(...a)=>o.toggleFilterVisibility&&o.toggleFilterVisibility(...a))},[i.isFilterVisible?((0,n.uX)(),(0,n.CE)("i",S9)):((0,n.uX)(),(0,n.CE)("i",B9)),(0,n.Lk)("span",null,(0,k.v_)(i.isFilterVisible?"Sembunyikan":"Tampilkan")+" Filter",1)]),(0,n.Lk)("button",{class:"btn btn-success",onClick:e[1]||(e[1]=(...a)=>o.openAddModal&&o.openAddModal(...a))},e[10]||(e[10]=[(0,n.Lk)("i",{class:"fa fa-plus me-2"},null,-1),(0,n.Lk)("span",null," Tambah Data",-1)]))])]),i.isFilterVisible?((0,n.uX)(),(0,n.CE)("div",A9,[(0,n.Lk)("div",_9,[(0,n.Lk)("div",j9,[e[11]||(e[11]=(0,n.Lk)("label",{for:"filterName",class:"form-label"},"Nama Jenis Surat Masuk",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterName",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.filters.namajenissuratmasuk=a),placeholder:"Filter berdasarkan nama jenis surat masuk"},null,512),[[l.Jo,i.filters.namajenissuratmasuk]])])]),(0,n.Lk)("div",V9,[(0,n.Lk)("button",{class:"btn btn-secondary",onClick:e[3]||(e[3]=(...a)=>o.resetFilters&&o.resetFilters(...a))},e[12]||(e[12]=[(0,n.Lk)("i",{class:"fa fa-refresh me-2"},null,-1),(0,n.Lk)("span",null,"Reset Filter",-1)])),(0,n.Lk)("button",{class:"btn btn-primary",onClick:e[4]||(e[4]=(...a)=>o.applyFilters&&o.applyFilters(...a))},e[13]||(e[13]=[(0,n.Lk)("i",{class:"fa fa-search me-2"},null,-1),(0,n.Lk)("span",null,"Terapkan Filter",-1)]))])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",I9,[(0,n.Lk)("table",N9,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[e[15]||(e[15]=(0,n.Lk)("th",{scope:"col"},"No",-1)),(0,n.Lk)("th",{scope:"col",onClick:e[5]||(e[5]=a=>o.sortBy("namajenissuratmasuk"))},[e[14]||(e[14]=(0,n.eW)(" Nama Jenis Surat Masuk ")),"namajenissuratmasuk"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",U9)):"namajenissuratmasuk"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",R9)):((0,n.uX)(),(0,n.CE)("i",Q9))]),e[16]||(e[16]=(0,n.Lk)("th",{scope:"col"},"Aksi",-1))])]),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.paginatedIncomingLetterTypes,(a,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:a.idjenissuratmasuk},[(0,n.Lk)("th",W9,(0,k.v_)((i.currentPage-1)*i.perPage+t+1),1),(0,n.Lk)("td",null,(0,k.v_)(a.namajenissuratmasuk),1),(0,n.Lk)("td",null,[(0,n.Lk)("div",K9,[(0,n.Lk)("button",{class:"btn btn-primary btn-sm",onClick:e=>o.openEditModal(a)},e[17]||(e[17]=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)]),8,O9),(0,n.Lk)("button",{class:"btn btn-danger sweet-11 btn-sm",type:"button",onClick:e=>o.advancedDeleteAlert(a.idjenissuratmasuk)},e[18]||(e[18]=[(0,n.Lk)("i",{class:"fa fa-trash"},null,-1)]),8,$9)])])]))),128)),0===o.paginatedIncomingLetterTypes.length?((0,n.uX)(),(0,n.CE)("tr",G9,e[19]||(e[19]=[(0,n.Lk)("td",{colspan:"5",class:"text-center"},"Tidak ada data yang cocok atau tersedia.",-1)]))):(0,n.Q3)("",!0)])]),(0,n.Lk)("div",J9,[(0,n.Lk)("div",q9,[i.totalItems>0?((0,n.uX)(),(0,n.CE)("span",H9,[e[20]||(e[20]=(0,n.eW)(" Menampilkan ")),(0,n.Lk)("strong",null,(0,k.v_)((i.currentPage-1)*i.perPage+1),1),e[21]||(e[21]=(0,n.eW)(" - ")),(0,n.Lk)("strong",null,(0,k.v_)(Math.min(i.currentPage*i.perPage,i.totalItems)),1),e[22]||(e[22]=(0,n.eW)(" dari ")),(0,n.Lk)("strong",null,(0,k.v_)(i.totalItems),1),e[23]||(e[23]=(0,n.eW)(" data "))])):(0,n.Q3)("",!0)]),-1!==i.perPage&&o.totalPages>1?((0,n.uX)(),(0,n.CE)("nav",Y9,[(0,n.Lk)("ul",z9,[(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[6]||(e[6]=a=>o.changePage(i.currentPage-1))},"Prev")],2),o.pageNumbers[0]>1?((0,n.uX)(),(0,n.CE)("li",Z9,[(0,n.Lk)("button",{class:"page-link",onClick:e[7]||(e[7]=a=>o.changePage(1))},"1")])):(0,n.Q3)("",!0),o.pageNumbers[0]>2?((0,n.uX)(),(0,n.CE)("li",aaa,e[24]||(e[24]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.pageNumbers,a=>((0,n.uX)(),(0,n.CE)("li",{key:a,class:(0,k.C4)(["page-item",{active:i.currentPage===a}])},[(0,n.Lk)("button",{class:"page-link",onClick:e=>o.changePage(a)},(0,k.v_)(a),9,eaa)],2))),128)),o.pageNumbers.slice(-1)[0]<o.totalPages-1?((0,n.uX)(),(0,n.CE)("li",taa,e[25]||(e[25]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),o.pageNumbers.slice(-1)[0]<o.totalPages?((0,n.uX)(),(0,n.CE)("li",saa,[(0,n.Lk)("button",{class:"page-link",onClick:e[8]||(e[8]=a=>o.changePage(o.totalPages))},(0,k.v_)(o.totalPages),1)])):(0,n.Q3)("",!0),(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:i.currentPage===o.totalPages}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[9]||(e[9]=a=>o.changePage(i.currentPage+1))},"Next")],2)])])):(0,n.Q3)("",!0)])])])])}const laa=(a={})=>Na.get("",{params:{act:"jenis-surat-masuk",...a}}),naa=a=>Na.post("",{act:"jenis-surat-masuk",record:a}),oaa=(a,e)=>a?Na.put("",{act:"jenis-surat-masuk",key:a,record:e}):Promise.reject(new Error("ID jenis surat masuk tidak tersedia.")),raa=a=>a?Na.delete("",{data:{act:"jenis-surat-masuk",key:a}}):Promise.reject(new Error("ID jenis surat masuk tidak tersedia.")),caa={class:"modal-header"},daa={class:"modal-title"},uaa={class:"modal-body"},maa={class:"mb-3"},kaa={key:0,class:"alert alert-danger mt-3"},haa={class:"modal-footer"},gaa=["disabled"],paa={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},baa={key:1};function faa(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",{class:"modal-overlay",onClick:e[6]||(e[6]=(...a)=>o.handleOverlayClick&&o.handleOverlayClick(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[5]||(e[5]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",caa,[(0,n.Lk)("h5",daa,(0,k.v_)(o.isEditMode?"Edit Data Jenis Surat Masuk":"Tambah Data Jenis Surat Masuk"),1),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",uaa,[(0,n.Lk)("form",{onSubmit:e[2]||(e[2]=(0,l.D$)((...a)=>o.submitForm&&o.submitForm(...a),["prevent"]))},[(0,n.Lk)("div",maa,[e[7]||(e[7]=(0,n.Lk)("label",{for:"namajenissuratmasuk",class:"form-label"},"Nama Jenis Surat Masuk",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"namaJenisSuratMasuk",placeholder:"Masukkan nama jenis surat masuk","onUpdate:modelValue":e[1]||(e[1]=a=>i.formData.namajenissuratmasuk=a),required:""},null,512),[[l.Jo,i.formData.namajenissuratmasuk]])]),i.errorMessage?((0,n.uX)(),(0,n.CE)("div",kaa,(0,k.v_)(i.errorMessage),1)):(0,n.Q3)("",!0)],32)]),(0,n.Lk)("div",haa,[(0,n.Lk)("button",{type:"button",class:"btn btn-danger",onClick:e[3]||(e[3]=(...a)=>o.closeModal&&o.closeModal(...a))},"Batal"),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[4]||(e[4]=(...a)=>o.submitForm&&o.submitForm(...a)),disabled:i.isLoading},[i.isLoading?((0,n.uX)(),(0,n.CE)("span",paa)):((0,n.uX)(),(0,n.CE)("span",baa,"Simpan"))],8,gaa)])])])}var Laa={name:"editIncomingLetterTypeModal",props:{incomingLetterTypeToEdit:{type:Object,default:null}},created(){this.toast=(0,ln.dj)()},data(){return{formData:{namajenissuratmasuk:""},isLoading:!1,errorMessage:null}},computed:{isEditMode(){return!!this.incomingLetterTypeToEdit}},watch:{incomingLetterTypeToEdit:{handler(a){this.formData=a?{...a}:{namajenissuratmasuk:""},this.errorMessage=null},immediate:!0}},methods:{closeModal(){this.$emit("close")},handleOverlayClick(a){a.target===a.currentTarget&&this.closeModal()},async submitForm(){this.errorMessage=null;const{namajenissuratmasuk:a}=this.formData;if(a){this.isLoading=!0;try{this.isEditMode?(await oaa(this.incomingLetterTypeToEdit.idjenissuratmasuk,this.formData),this.toast.success("Data jenis surat masuk berhasil diperbarui",{icon:"fa fa-check"})):(await naa(this.formData),this.toast.success("Data jenis surat masuk berhasil ditambah",{icon:"fa fa-check"})),this.$emit("save-successful"),this.closeModal()}catch(e){console.error("Error occurred:",e),this.errorMessage=e.response?.data?.message||"Gagal menyimpan data.",this.toast.error("Gagal menyimpan data jenis surat masuk",{icon:"fa fa-times"})}finally{this.isLoading=!1}}else this.errorMessage="Semua field wajib diisi."}}};const yaa=(0,r.A)(Laa,[["render",faa],["__scopeId","data-v-46998b37"]]);var vaa=yaa,Caa={components:{AddEditIncomingLetterTypeModal:vaa},data(){return{incomingLetterTypes:[],sortColumn:"",sortDirection:"asc",isModalVisible:!1,currentPage:1,perPage:20,totalItems:0,incomingLetterTypeBeingEdited:null,jumpPage:1,isFilterVisible:!1,filters:{incomingLetterType_name:""}}},computed:{paginatedIncomingLetterTypes(){return this.incomingLetterTypes},totalPages(){return this.perPage<=0?1:Math.ceil(this.totalItems/this.perPage)},pageNumbers(){const a=[],e=5;let t=Math.max(1,this.currentPage-Math.floor(e/2)),s=t+e-1;s>this.totalPages&&(s=this.totalPages,t=Math.max(1,s-e+1));for(let i=t;i<=s;i++)a.push(i);return a}},watch:{currentPage(){this.fetchIncomingLetterTypes(),this.jumpPage=this.currentPage},perPage(){this.currentPage=1,this.fetchIncomingLetterTypes()}},async mounted(){this.toast=(0,ln.dj)(),await this.fetchIncomingLetterTypes()},methods:{openAddModal(){this.incomingLetterTypeBeingEdited=null,this.isModalVisible=!0},openEditModal(a){this.incomingLetterTypeBeingEdited={...a},this.isModalVisible=!0},closeModal(){this.isModalVisible=!1,this.incomingLetterTypeBeingEdited=null},handleSaveSuccessful(){this.closeModal(),this.fetchIncomingLetterTypes()},async fetchIncomingLetterTypes(){try{const a={act:"jenis-surat-masuk",page:this.currentPage,limit:this.perPage,order:this.sortColumn?`${this.sortColumn} ${this.sortDirection}`:"",group:""},e=Object.entries(this.filters).filter(([a,e])=>""!==e).map(([a,e])=>`${a}=${e}`);e.length>0?a.filter=e.join(","):a.filter="";const t=await laa(a),s=t.data?.data||t.data?.[0]?.data||[],i=t.data?.[0]?.meta?.pagination||{};this.incomingLetterTypes=s,this.totalItems=i.total||s.length}catch(a){console.error("Error fetching jenis surat masuk:",a),this.$swal({icon:"error",title:"Oops...",text:"Gagal memuat data jenis surat masuk. Silakan coba lagi nanti."})}},advancedDeleteAlert(a){this.$swal({title:"Hapus Data Jenis Surat Masuk",text:"Apakah Anda yakin ingin menghapus data ini?",icon:"warning",showCancelButton:!0,confirmButtonText:'<i class="fa fa-check me-2"></i> Hapus!',confirmButtonColor:"#d33",cancelButtonText:'<i class="fa fa-times me-2"></i> Batal',cancelButtonColor:"#efefef",reverseButtons:!0}).then(async e=>{if(e.isConfirmed)try{await raa(a),1===this.incomingLetterTypes.length&&this.currentPage>1?this.currentPage--:this.fetchIncomingLetterTypes(),this.toast.success("Data jenis surat masuk berhasil dihapus",{icon:"fa fa-check"})}catch(t){this.toast.error("Gagal menghapus data jenis surat masuk",{icon:"fa fa-times"})}})},sortBy(a){this.sortColumn===a?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=a,this.sortDirection="asc"),this.fetchIncomingLetterTypes()},changePage(a){a>=1&&a<=this.totalPages&&(this.currentPage=a)},toggleFilterVisibility(){this.isFilterVisible=!this.isFilterVisible},applyFilters(){this.currentPage=1,this.fetchIncomingLetterTypes()},resetFilters(){this.filters.namajenissuratmasuk="",this.sortColumn="",this.sortDirection="asc",this.currentPage=1,this.fetchIncomingLetterTypes()}}};const Paa=(0,r.A)(Caa,[["render",iaa],["__scopeId","data-v-cc2fdd26"]]);var Eaa=Paa,Daa={components:{IncomingLetterTypesTable:Eaa}};const Maa=(0,r.A)(Daa,[["render",M9]]);var waa=Maa;const Faa={class:"container-fluid"},Xaa={class:"row widget-grid"};function xaa(a,e,t,s,i,l){const o=(0,n.g2)("Breadcrumbs"),r=(0,n.g2)("OutgoingLetterTypesTable");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(o,{main:"Dokumen",title:a.$route.meta.title},null,8,["title"]),(0,n.Lk)("div",Faa,[(0,n.Lk)("div",Xaa,[(0,n.bF)(r)])])])}const Taa={class:"col-sm-12"},Saa={class:"card"},Baa={class:"card-body"},Aaa={class:"d-flex justify-content-end align-items-start mb-3"},_aa={class:"d-flex gap-2"},jaa={key:0,class:"fa fa-angle-up me-2"},Vaa={key:1,class:"fa fa-angle-down me-2"},Iaa={key:0,class:"border p-3 mb-3 rounded filter-section"},Naa={class:"row g-2"},Uaa={class:"col-md-4"},Raa={class:"d-flex justify-content-end gap-2 mt-3"},Qaa={class:"table-responsive signal-table"},Waa={class:"table table-hover"},Kaa={key:0,class:"fa fa-sort-asc"},Oaa={key:1,class:"fa fa-sort-desc"},$aa={key:2,class:"fa fa-sort"},Gaa={scope:"row"},Jaa={class:"btn-group"},qaa=["onClick"],Haa=["onClick"],Yaa={key:0},zaa={class:"d-flex flex-column flex-md-row justify-content-md-between align-items-center mt-3 px-3 pb-3"},Zaa={class:"mt-2"},aea={key:0,class:"text-muted"},eea={key:0,class:"d-flex align-items-center flex-wrap gap-2 mt-2"},tea={class:"pagination mb-0"},sea={key:0,class:"page-item"},iea={key:1,class:"page-item disabled"},lea=["onClick"],nea={key:2,class:"page-item disabled"},oea={key:3,class:"page-item"};function rea(a,e,t,s,i,o){const r=(0,n.g2)("add-edit-outgoingLetterType-modal");return(0,n.uX)(),(0,n.CE)("div",Taa,[i.isModalVisible?((0,n.uX)(),(0,n.Wv)(r,{key:0,"outgoingLetterType-to-edit":i.outgoingLetterTypeBeingEdited,onClose:o.closeModal,onSaveSuccessful:o.handleSaveSuccessful},null,8,["outgoingLetterType-to-edit","onClose","onSaveSuccessful"])):(0,n.Q3)("",!0),(0,n.Lk)("div",Saa,[e[26]||(e[26]=(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("h3",null,"Daftar Nama Jenis Surat Keluar")],-1)),(0,n.Lk)("div",Baa,[(0,n.Lk)("div",Aaa,[(0,n.Lk)("div",_aa,[(0,n.Lk)("button",{class:"btn btn-outline-light txt-dark",onClick:e[0]||(e[0]=(...a)=>o.toggleFilterVisibility&&o.toggleFilterVisibility(...a))},[i.isFilterVisible?((0,n.uX)(),(0,n.CE)("i",jaa)):((0,n.uX)(),(0,n.CE)("i",Vaa)),(0,n.Lk)("span",null,(0,k.v_)(i.isFilterVisible?"Sembunyikan":"Tampilkan")+" Filter",1)]),(0,n.Lk)("button",{class:"btn btn-success",onClick:e[1]||(e[1]=(...a)=>o.openAddModal&&o.openAddModal(...a))},e[10]||(e[10]=[(0,n.Lk)("i",{class:"fa fa-plus me-2"},null,-1),(0,n.Lk)("span",null," Tambah Data",-1)]))])]),i.isFilterVisible?((0,n.uX)(),(0,n.CE)("div",Iaa,[(0,n.Lk)("div",Naa,[(0,n.Lk)("div",Uaa,[e[11]||(e[11]=(0,n.Lk)("label",{for:"filterName",class:"form-label"},"Nama Jenis Surat Keluar",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterName",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.filters.namajenissuratkeluar=a),placeholder:"Filter berdasarkan nama jenis surat keluar"},null,512),[[l.Jo,i.filters.namajenissuratkeluar]])])]),(0,n.Lk)("div",Raa,[(0,n.Lk)("button",{class:"btn btn-secondary",onClick:e[3]||(e[3]=(...a)=>o.resetFilters&&o.resetFilters(...a))},e[12]||(e[12]=[(0,n.Lk)("i",{class:"fa fa-refresh me-2"},null,-1),(0,n.Lk)("span",null,"Reset Filter",-1)])),(0,n.Lk)("button",{class:"btn btn-primary",onClick:e[4]||(e[4]=(...a)=>o.applyFilters&&o.applyFilters(...a))},e[13]||(e[13]=[(0,n.Lk)("i",{class:"fa fa-search me-2"},null,-1),(0,n.Lk)("span",null,"Terapkan Filter",-1)]))])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",Qaa,[(0,n.Lk)("table",Waa,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[e[15]||(e[15]=(0,n.Lk)("th",{scope:"col"},"No",-1)),(0,n.Lk)("th",{scope:"col",onClick:e[5]||(e[5]=a=>o.sortBy("namajenissuratkeluar"))},[e[14]||(e[14]=(0,n.eW)(" Nama Jenis Surat Keluar ")),"namajenissuratkeluar"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",Kaa)):"namajenissuratkeluar"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",Oaa)):((0,n.uX)(),(0,n.CE)("i",$aa))]),e[16]||(e[16]=(0,n.Lk)("th",{scope:"col"},"Aksi",-1))])]),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.paginatedOutgoingLetterTypes,(a,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:a.idjenissuratkeluar},[(0,n.Lk)("th",Gaa,(0,k.v_)((i.currentPage-1)*i.perPage+t+1),1),(0,n.Lk)("td",null,(0,k.v_)(a.namajenissuratkeluar),1),(0,n.Lk)("td",null,[(0,n.Lk)("div",Jaa,[(0,n.Lk)("button",{class:"btn btn-primary btn-sm",onClick:e=>o.openEditModal(a)},e[17]||(e[17]=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)]),8,qaa),(0,n.Lk)("button",{class:"btn btn-danger sweet-11 btn-sm",type:"button",onClick:e=>o.advancedDeleteAlert(a.idjenissuratkeluar)},e[18]||(e[18]=[(0,n.Lk)("i",{class:"fa fa-trash"},null,-1)]),8,Haa)])])]))),128)),0===o.paginatedOutgoingLetterTypes.length?((0,n.uX)(),(0,n.CE)("tr",Yaa,e[19]||(e[19]=[(0,n.Lk)("td",{colspan:"5",class:"text-center"},"Tidak ada data yang cocok atau tersedia.",-1)]))):(0,n.Q3)("",!0)])]),(0,n.Lk)("div",zaa,[(0,n.Lk)("div",Zaa,[i.totalItems>0?((0,n.uX)(),(0,n.CE)("span",aea,[e[20]||(e[20]=(0,n.eW)(" Menampilkan ")),(0,n.Lk)("strong",null,(0,k.v_)((i.currentPage-1)*i.perPage+1),1),e[21]||(e[21]=(0,n.eW)(" - ")),(0,n.Lk)("strong",null,(0,k.v_)(Math.min(i.currentPage*i.perPage,i.totalItems)),1),e[22]||(e[22]=(0,n.eW)(" dari ")),(0,n.Lk)("strong",null,(0,k.v_)(i.totalItems),1),e[23]||(e[23]=(0,n.eW)(" data "))])):(0,n.Q3)("",!0)]),-1!==i.perPage&&o.totalPages>1?((0,n.uX)(),(0,n.CE)("nav",eea,[(0,n.Lk)("ul",tea,[(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[6]||(e[6]=a=>o.changePage(i.currentPage-1))},"Prev")],2),o.pageNumbers[0]>1?((0,n.uX)(),(0,n.CE)("li",sea,[(0,n.Lk)("button",{class:"page-link",onClick:e[7]||(e[7]=a=>o.changePage(1))},"1")])):(0,n.Q3)("",!0),o.pageNumbers[0]>2?((0,n.uX)(),(0,n.CE)("li",iea,e[24]||(e[24]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.pageNumbers,a=>((0,n.uX)(),(0,n.CE)("li",{key:a,class:(0,k.C4)(["page-item",{active:i.currentPage===a}])},[(0,n.Lk)("button",{class:"page-link",onClick:e=>o.changePage(a)},(0,k.v_)(a),9,lea)],2))),128)),o.pageNumbers.slice(-1)[0]<o.totalPages-1?((0,n.uX)(),(0,n.CE)("li",nea,e[25]||(e[25]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),o.pageNumbers.slice(-1)[0]<o.totalPages?((0,n.uX)(),(0,n.CE)("li",oea,[(0,n.Lk)("button",{class:"page-link",onClick:e[8]||(e[8]=a=>o.changePage(o.totalPages))},(0,k.v_)(o.totalPages),1)])):(0,n.Q3)("",!0),(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:i.currentPage===o.totalPages}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[9]||(e[9]=a=>o.changePage(i.currentPage+1))},"Next")],2)])])):(0,n.Q3)("",!0)])])])])}const cea=(a={})=>Na.get("",{params:{act:"jenis-surat-keluar",...a}}),dea=a=>Na.post("",{act:"jenis-surat-keluar",record:a}),uea=(a,e)=>a?Na.put("",{act:"jenis-surat-keluar",key:a,record:e}):Promise.reject(new Error("ID jenis surat keluar tidak tersedia.")),mea=a=>a?Na.delete("",{data:{act:"jenis-surat-keluar",key:a}}):Promise.reject(new Error("ID jenis surat keluar tidak tersedia.")),kea={class:"modal-header"},hea={class:"modal-title"},gea={class:"modal-body"},pea={class:"mb-3"},bea={key:0,class:"alert alert-danger mt-3"},fea={class:"modal-footer"},Lea=["disabled"],yea={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},vea={key:1};function Cea(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",{class:"modal-overlay",onClick:e[6]||(e[6]=(...a)=>o.handleOverlayClick&&o.handleOverlayClick(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[5]||(e[5]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",kea,[(0,n.Lk)("h5",hea,(0,k.v_)(o.isEditMode?"Edit Data Jenis Surat Keluar":"Tambah Data Jenis Surat Keluar"),1),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",gea,[(0,n.Lk)("form",{onSubmit:e[2]||(e[2]=(0,l.D$)((...a)=>o.submitForm&&o.submitForm(...a),["prevent"]))},[(0,n.Lk)("div",pea,[e[7]||(e[7]=(0,n.Lk)("label",{for:"namajenissuratkeluar",class:"form-label"},"Nama Jenis Surat Keluar",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"namaJenisSuratKeluar",placeholder:"Masukkan nama jenis surat keluar","onUpdate:modelValue":e[1]||(e[1]=a=>i.formData.namajenissuratkeluar=a),required:""},null,512),[[l.Jo,i.formData.namajenissuratkeluar]])]),i.errorMessage?((0,n.uX)(),(0,n.CE)("div",bea,(0,k.v_)(i.errorMessage),1)):(0,n.Q3)("",!0)],32)]),(0,n.Lk)("div",fea,[(0,n.Lk)("button",{type:"button",class:"btn btn-danger",onClick:e[3]||(e[3]=(...a)=>o.closeModal&&o.closeModal(...a))},"Batal"),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[4]||(e[4]=(...a)=>o.submitForm&&o.submitForm(...a)),disabled:i.isLoading},[i.isLoading?((0,n.uX)(),(0,n.CE)("span",yea)):((0,n.uX)(),(0,n.CE)("span",vea,"Simpan"))],8,Lea)])])])}var Pea={name:"editOutgoingLetterTypeModal",props:{outgoingLetterTypeToEdit:{type:Object,default:null}},created(){this.toast=(0,ln.dj)()},data(){return{formData:{namajenissuratkeluar:""},isLoading:!1,errorMessage:null}},computed:{isEditMode(){return!!this.outgoingLetterTypeToEdit}},watch:{outgoingLetterTypeToEdit:{handler(a){this.formData=a?{...a}:{namajenissuratkeluar:""},this.errorMessage=null},immediate:!0}},methods:{closeModal(){this.$emit("close")},handleOverlayClick(a){a.target===a.currentTarget&&this.closeModal()},async submitForm(){this.errorMessage=null;const{namajenissuratkeluar:a}=this.formData;if(a){this.isLoading=!0;try{this.isEditMode?(await uea(this.outgoingLetterTypeToEdit.idjenissuratkeluar,this.formData),this.toast.success("Data jenis surat keluar berhasil diperbarui",{icon:"fa fa-check"})):(await dea(this.formData),this.toast.success("Data jenis surat keluar berhasil ditambah",{icon:"fa fa-check"})),this.$emit("save-successful"),this.closeModal()}catch(e){console.error("Error occurred:",e),this.errorMessage=e.response?.data?.message||"Gagal menyimpan data.",this.toast.error("Gagal menyimpan data jenis surat keluar",{icon:"fa fa-times"})}finally{this.isLoading=!1}}else this.errorMessage="Semua field wajib diisi."}}};const Eea=(0,r.A)(Pea,[["render",Cea],["__scopeId","data-v-7d802644"]]);var Dea=Eea,Mea={components:{AddEditOutgoingLetterTypeModal:Dea},data(){return{outgoingLetterTypes:[],sortColumn:"",sortDirection:"asc",isModalVisible:!1,currentPage:1,perPage:20,totalItems:0,outgoingLetterTypeBeingEdited:null,jumpPage:1,isFilterVisible:!1,filters:{outgoingLetterType_name:""}}},computed:{paginatedOutgoingLetterTypes(){return this.outgoingLetterTypes},totalPages(){return this.perPage<=0?1:Math.ceil(this.totalItems/this.perPage)},pageNumbers(){const a=[],e=5;let t=Math.max(1,this.currentPage-Math.floor(e/2)),s=t+e-1;s>this.totalPages&&(s=this.totalPages,t=Math.max(1,s-e+1));for(let i=t;i<=s;i++)a.push(i);return a}},watch:{currentPage(){this.fetchOutgoingLetterTypes(),this.jumpPage=this.currentPage},perPage(){this.currentPage=1,this.fetchOutgoingLetterTypes()}},async mounted(){this.toast=(0,ln.dj)(),await this.fetchOutgoingLetterTypes()},methods:{openAddModal(){this.outgoingLetterTypeBeingEdited=null,this.isModalVisible=!0},openEditModal(a){this.outgoingLetterTypeBeingEdited={...a},this.isModalVisible=!0},closeModal(){this.isModalVisible=!1,this.outgoingLetterTypeBeingEdited=null},handleSaveSuccessful(){this.closeModal(),this.fetchOutgoingLetterTypes()},async fetchOutgoingLetterTypes(){try{const a={act:"jenis-surat-keluar",page:this.currentPage,limit:this.perPage,order:this.sortColumn?`${this.sortColumn} ${this.sortDirection}`:"",group:""},e=Object.entries(this.filters).filter(([a,e])=>""!==e).map(([a,e])=>`${a}=${e}`);e.length>0?a.filter=e.join(","):a.filter="";const t=await cea(a),s=t.data?.data||t.data?.[0]?.data||[],i=t.data?.[0]?.meta?.pagination||{};this.outgoingLetterTypes=s,this.totalItems=i.total||s.length}catch(a){console.error("Error fetching jenis surat keluar:",a),this.$swal({icon:"error",title:"Oops...",text:"Gagal memuat data jenis surat keluar. Silakan coba lagi nanti."})}},advancedDeleteAlert(a){this.$swal({title:"Hapus Data Jenis Surat Keluar",text:"Apakah Anda yakin ingin menghapus data ini?",icon:"warning",showCancelButton:!0,confirmButtonText:'<i class="fa fa-check me-2"></i> Hapus!',confirmButtonColor:"#d33",cancelButtonText:'<i class="fa fa-times me-2"></i> Batal',cancelButtonColor:"#efefef",reverseButtons:!0}).then(async e=>{if(e.isConfirmed)try{await mea(a),1===this.outgoingLetterTypes.length&&this.currentPage>1?this.currentPage--:this.fetchOutgoingLetterTypes(),this.toast.success("Data jenis surat keluar berhasil dihapus",{icon:"fa fa-check"})}catch(t){this.toast.error("Gagal menghapus data jenis surat keluar",{icon:"fa fa-times"})}})},sortBy(a){this.sortColumn===a?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=a,this.sortDirection="asc"),this.fetchOutgoingLetterTypes()},changePage(a){a>=1&&a<=this.totalPages&&(this.currentPage=a)},toggleFilterVisibility(){this.isFilterVisible=!this.isFilterVisible},applyFilters(){this.currentPage=1,this.fetchOutgoingLetterTypes()},resetFilters(){this.filters.namajenissuratkeluar="",this.sortColumn="",this.sortDirection="asc",this.currentPage=1,this.fetchOutgoingLetterTypes()}}};const wea=(0,r.A)(Mea,[["render",rea],["__scopeId","data-v-f4428b32"]]);var Fea=wea,Xea={components:{OutgoingLetterTypesTable:Fea}};const xea=(0,r.A)(Xea,[["render",xaa]]);var Tea=xea;const Sea={class:"container-fluid"},Bea={class:"row widget-grid"};function Aea(a,e,t,s,i,l){const o=(0,n.g2)("Breadcrumbs"),r=(0,n.g2)("RegulationTypesTable");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(o,{main:"Dokumen",title:a.$route.meta.title},null,8,["title"]),(0,n.Lk)("div",Sea,[(0,n.Lk)("div",Bea,[(0,n.bF)(r)])])])}const _ea={class:"col-sm-12"},jea={class:"card"},Vea={class:"card-body"},Iea={class:"d-flex justify-content-end align-items-start mb-3"},Nea={class:"d-flex gap-2"},Uea={key:0,class:"fa fa-angle-up me-2"},Rea={key:1,class:"fa fa-angle-down me-2"},Qea={key:0,class:"border p-3 mb-3 rounded filter-section"},Wea={class:"row g-2"},Kea={class:"col-md-4"},Oea={class:"d-flex justify-content-end gap-2 mt-3"},$ea={class:"table-responsive signal-table"},Gea={class:"table table-hover"},Jea={key:0,class:"fa fa-sort-asc"},qea={key:1,class:"fa fa-sort-desc"},Hea={key:2,class:"fa fa-sort"},Yea={scope:"row"},zea={class:"btn-group"},Zea=["onClick"],ata=["onClick"],eta={key:0},tta={class:"d-flex flex-column flex-md-row justify-content-md-between align-items-center mt-3 px-3 pb-3"},sta={class:"mt-2"},ita={key:0,class:"text-muted"},lta={key:0,class:"d-flex align-items-center flex-wrap gap-2 mt-2"},nta={class:"pagination mb-0"},ota={key:0,class:"page-item"},rta={key:1,class:"page-item disabled"},cta=["onClick"],dta={key:2,class:"page-item disabled"},uta={key:3,class:"page-item"};function mta(a,e,t,s,i,o){const r=(0,n.g2)("add-edit-regulationType-modal");return(0,n.uX)(),(0,n.CE)("div",_ea,[i.isModalVisible?((0,n.uX)(),(0,n.Wv)(r,{key:0,"regulationType-to-edit":i.regulationTypeBeingEdited,onClose:o.closeModal,onSaveSuccessful:o.handleSaveSuccessful},null,8,["regulationType-to-edit","onClose","onSaveSuccessful"])):(0,n.Q3)("",!0),(0,n.Lk)("div",jea,[e[26]||(e[26]=(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("h3",null,"Daftar Nama Jenis Regulasi")],-1)),(0,n.Lk)("div",Vea,[(0,n.Lk)("div",Iea,[(0,n.Lk)("div",Nea,[(0,n.Lk)("button",{class:"btn btn-outline-light txt-dark",onClick:e[0]||(e[0]=(...a)=>o.toggleFilterVisibility&&o.toggleFilterVisibility(...a))},[i.isFilterVisible?((0,n.uX)(),(0,n.CE)("i",Uea)):((0,n.uX)(),(0,n.CE)("i",Rea)),(0,n.Lk)("span",null,(0,k.v_)(i.isFilterVisible?"Sembunyikan":"Tampilkan")+" Filter",1)]),(0,n.Lk)("button",{class:"btn btn-success",onClick:e[1]||(e[1]=(...a)=>o.openAddModal&&o.openAddModal(...a))},e[10]||(e[10]=[(0,n.Lk)("i",{class:"fa fa-plus me-2"},null,-1),(0,n.Lk)("span",null," Tambah Data",-1)]))])]),i.isFilterVisible?((0,n.uX)(),(0,n.CE)("div",Qea,[(0,n.Lk)("div",Wea,[(0,n.Lk)("div",Kea,[e[11]||(e[11]=(0,n.Lk)("label",{for:"filterName",class:"form-label"},"Nama Jenis Regulasi",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterName",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.filters.namajenisregulasi=a),placeholder:"Filter berdasarkan nama jenis regulasi"},null,512),[[l.Jo,i.filters.namajenisregulasi]])])]),(0,n.Lk)("div",Oea,[(0,n.Lk)("button",{class:"btn btn-secondary",onClick:e[3]||(e[3]=(...a)=>o.resetFilters&&o.resetFilters(...a))},e[12]||(e[12]=[(0,n.Lk)("i",{class:"fa fa-refresh me-2"},null,-1),(0,n.Lk)("span",null,"Reset Filter",-1)])),(0,n.Lk)("button",{class:"btn btn-primary",onClick:e[4]||(e[4]=(...a)=>o.applyFilters&&o.applyFilters(...a))},e[13]||(e[13]=[(0,n.Lk)("i",{class:"fa fa-search me-2"},null,-1),(0,n.Lk)("span",null,"Terapkan Filter",-1)]))])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",$ea,[(0,n.Lk)("table",Gea,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[e[15]||(e[15]=(0,n.Lk)("th",{scope:"col"},"No",-1)),(0,n.Lk)("th",{scope:"col",onClick:e[5]||(e[5]=a=>o.sortBy("namajenisregulasi"))},[e[14]||(e[14]=(0,n.eW)(" Nama Jenis Regulasi ")),"namajenisregulasi"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",Jea)):"namajenisregulasi"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",qea)):((0,n.uX)(),(0,n.CE)("i",Hea))]),e[16]||(e[16]=(0,n.Lk)("th",{scope:"col"},"Aksi",-1))])]),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.paginatedRegulationTypes,(a,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:a.idjenisregulasi},[(0,n.Lk)("th",Yea,(0,k.v_)((i.currentPage-1)*i.perPage+t+1),1),(0,n.Lk)("td",null,(0,k.v_)(a.namajenisregulasi),1),(0,n.Lk)("td",null,[(0,n.Lk)("div",zea,[(0,n.Lk)("button",{class:"btn btn-primary btn-sm",onClick:e=>o.openEditModal(a)},e[17]||(e[17]=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)]),8,Zea),(0,n.Lk)("button",{class:"btn btn-danger sweet-11 btn-sm",type:"button",onClick:e=>o.advancedDeleteAlert(a.idjenisregulasi)},e[18]||(e[18]=[(0,n.Lk)("i",{class:"fa fa-trash"},null,-1)]),8,ata)])])]))),128)),0===o.paginatedRegulationTypes.length?((0,n.uX)(),(0,n.CE)("tr",eta,e[19]||(e[19]=[(0,n.Lk)("td",{colspan:"5",class:"text-center"},"Tidak ada data yang cocok atau tersedia.",-1)]))):(0,n.Q3)("",!0)])]),(0,n.Lk)("div",tta,[(0,n.Lk)("div",sta,[i.totalItems>0?((0,n.uX)(),(0,n.CE)("span",ita,[e[20]||(e[20]=(0,n.eW)(" Menampilkan ")),(0,n.Lk)("strong",null,(0,k.v_)((i.currentPage-1)*i.perPage+1),1),e[21]||(e[21]=(0,n.eW)(" - ")),(0,n.Lk)("strong",null,(0,k.v_)(Math.min(i.currentPage*i.perPage,i.totalItems)),1),e[22]||(e[22]=(0,n.eW)(" dari ")),(0,n.Lk)("strong",null,(0,k.v_)(i.totalItems),1),e[23]||(e[23]=(0,n.eW)(" data "))])):(0,n.Q3)("",!0)]),-1!==i.perPage&&o.totalPages>1?((0,n.uX)(),(0,n.CE)("nav",lta,[(0,n.Lk)("ul",nta,[(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[6]||(e[6]=a=>o.changePage(i.currentPage-1))},"Prev")],2),o.pageNumbers[0]>1?((0,n.uX)(),(0,n.CE)("li",ota,[(0,n.Lk)("button",{class:"page-link",onClick:e[7]||(e[7]=a=>o.changePage(1))},"1")])):(0,n.Q3)("",!0),o.pageNumbers[0]>2?((0,n.uX)(),(0,n.CE)("li",rta,e[24]||(e[24]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.pageNumbers,a=>((0,n.uX)(),(0,n.CE)("li",{key:a,class:(0,k.C4)(["page-item",{active:i.currentPage===a}])},[(0,n.Lk)("button",{class:"page-link",onClick:e=>o.changePage(a)},(0,k.v_)(a),9,cta)],2))),128)),o.pageNumbers.slice(-1)[0]<o.totalPages-1?((0,n.uX)(),(0,n.CE)("li",dta,e[25]||(e[25]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),o.pageNumbers.slice(-1)[0]<o.totalPages?((0,n.uX)(),(0,n.CE)("li",uta,[(0,n.Lk)("button",{class:"page-link",onClick:e[8]||(e[8]=a=>o.changePage(o.totalPages))},(0,k.v_)(o.totalPages),1)])):(0,n.Q3)("",!0),(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:i.currentPage===o.totalPages}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[9]||(e[9]=a=>o.changePage(i.currentPage+1))},"Next")],2)])])):(0,n.Q3)("",!0)])])])])}const kta=(a={})=>Na.get("",{params:{act:"jenis-regulasi",...a}}),hta=a=>Na.post("",{act:"jenis-regulasi",record:a}),gta=(a,e)=>a?Na.put("",{act:"jenis-regulasi",key:a,record:e}):Promise.reject(new Error("ID jenis regulasi tidak tersedia.")),pta=a=>a?Na.delete("",{data:{act:"jenis-regulasi",key:a}}):Promise.reject(new Error("ID jenis regulasi tidak tersedia.")),bta={class:"modal-header"},fta={class:"modal-title"},Lta={class:"modal-body"},yta={class:"mb-3"},vta={key:0,class:"alert alert-danger mt-3"},Cta={class:"modal-footer"},Pta=["disabled"],Eta={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},Dta={key:1};function Mta(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",{class:"modal-overlay",onClick:e[6]||(e[6]=(...a)=>o.handleOverlayClick&&o.handleOverlayClick(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[5]||(e[5]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",bta,[(0,n.Lk)("h5",fta,(0,k.v_)(o.isEditMode?"Edit Data Jenis Regulasi":"Tambah Data Jenis Regulasi"),1),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",Lta,[(0,n.Lk)("form",{onSubmit:e[2]||(e[2]=(0,l.D$)((...a)=>o.submitForm&&o.submitForm(...a),["prevent"]))},[(0,n.Lk)("div",yta,[e[7]||(e[7]=(0,n.Lk)("label",{for:"namajenisregulasi",class:"form-label"},"Nama Jenis Regulasi",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"namaJenisRegulasi",placeholder:"Masukkan nama jenis regulasi","onUpdate:modelValue":e[1]||(e[1]=a=>i.formData.namajenisregulasi=a),required:""},null,512),[[l.Jo,i.formData.namajenisregulasi]])]),i.errorMessage?((0,n.uX)(),(0,n.CE)("div",vta,(0,k.v_)(i.errorMessage),1)):(0,n.Q3)("",!0)],32)]),(0,n.Lk)("div",Cta,[(0,n.Lk)("button",{type:"button",class:"btn btn-danger",onClick:e[3]||(e[3]=(...a)=>o.closeModal&&o.closeModal(...a))},"Batal"),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[4]||(e[4]=(...a)=>o.submitForm&&o.submitForm(...a)),disabled:i.isLoading},[i.isLoading?((0,n.uX)(),(0,n.CE)("span",Eta)):((0,n.uX)(),(0,n.CE)("span",Dta,"Simpan"))],8,Pta)])])])}var wta={name:"editRegulationTypeModal",props:{regulationTypeToEdit:{type:Object,default:null}},created(){this.toast=(0,ln.dj)()},data(){return{formData:{namajenisregulasi:""},isLoading:!1,errorMessage:null}},computed:{isEditMode(){return!!this.regulationTypeToEdit}},watch:{regulationTypeToEdit:{handler(a){this.formData=a?{...a}:{namajenisregulasi:""},this.errorMessage=null},immediate:!0}},methods:{closeModal(){this.$emit("close")},handleOverlayClick(a){a.target===a.currentTarget&&this.closeModal()},async submitForm(){this.errorMessage=null;const{namajenisregulasi:a}=this.formData;if(a){this.isLoading=!0;try{this.isEditMode?(await gta(this.regulationTypeToEdit.idjenisregulasi,this.formData),this.toast.success("Data jenis regulasi berhasil diperbarui",{icon:"fa fa-check"})):(await hta(this.formData),this.toast.success("Data jenis regulasi berhasil ditambah",{icon:"fa fa-check"})),this.$emit("save-successful"),this.closeModal()}catch(e){console.error("Error occurred:",e),this.errorMessage=e.response?.data?.message||"Gagal menyimpan data.",this.toast.error("Gagal menyimpan data jenis regulasi",{icon:"fa fa-times"})}finally{this.isLoading=!1}}else this.errorMessage="Semua field wajib diisi."}}};const Fta=(0,r.A)(wta,[["render",Mta],["__scopeId","data-v-39adc3f2"]]);var Xta=Fta,xta={components:{AddEditRegulationTypeModal:Xta},data(){return{regulationTypes:[],sortColumn:"",sortDirection:"asc",isModalVisible:!1,currentPage:1,perPage:20,totalItems:0,regulationTypeBeingEdited:null,jumpPage:1,isFilterVisible:!1,filters:{regulationType_name:""}}},computed:{paginatedRegulationTypes(){return this.regulationTypes},totalPages(){return this.perPage<=0?1:Math.ceil(this.totalItems/this.perPage)},pageNumbers(){const a=[],e=5;let t=Math.max(1,this.currentPage-Math.floor(e/2)),s=t+e-1;s>this.totalPages&&(s=this.totalPages,t=Math.max(1,s-e+1));for(let i=t;i<=s;i++)a.push(i);return a}},watch:{currentPage(){this.fetchRegulationTypes(),this.jumpPage=this.currentPage},perPage(){this.currentPage=1,this.fetchRegulationTypes()}},async mounted(){this.toast=(0,ln.dj)(),await this.fetchRegulationTypes()},methods:{openAddModal(){this.regulationTypeBeingEdited=null,this.isModalVisible=!0},openEditModal(a){this.regulationTypeBeingEdited={...a},this.isModalVisible=!0},closeModal(){this.isModalVisible=!1,this.regulationTypeBeingEdited=null},handleSaveSuccessful(){this.closeModal(),this.fetchRegulationTypes()},async fetchRegulationTypes(){try{const a={act:"jenis-regulasi",page:this.currentPage,limit:this.perPage,order:this.sortColumn?`${this.sortColumn} ${this.sortDirection}`:"",group:""},e=Object.entries(this.filters).filter(([a,e])=>""!==e).map(([a,e])=>`${a}=${e}`);e.length>0?a.filter=e.join(","):a.filter="";const t=await kta(a),s=t.data?.data||t.data?.[0]?.data||[],i=t.data?.[0]?.meta?.pagination||{};this.regulationTypes=s,this.totalItems=i.total||s.length}catch(a){console.error("Error fetching jenis regulasi:",a),this.$swal({icon:"error",title:"Oops...",text:"Gagal memuat data jenis regulasi. Silakan coba lagi nanti."})}},advancedDeleteAlert(a){this.$swal({title:"Hapus Data Jenis Regulasi",text:"Apakah Anda yakin ingin menghapus data ini?",icon:"warning",showCancelButton:!0,confirmButtonText:'<i class="fa fa-check me-2"></i> Hapus!',confirmButtonColor:"#d33",cancelButtonText:'<i class="fa fa-times me-2"></i> Batal',cancelButtonColor:"#efefef",reverseButtons:!0}).then(async e=>{if(e.isConfirmed)try{await pta(a),1===this.regulationTypes.length&&this.currentPage>1?this.currentPage--:this.fetchRegulationTypes(),this.toast.success("Data jenis regulasi berhasil dihapus",{icon:"fa fa-check"})}catch(t){this.toast.error("Gagal menghapus data jenis regulasi",{icon:"fa fa-times"})}})},sortBy(a){this.sortColumn===a?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=a,this.sortDirection="asc"),this.fetchRegulationTypes()},changePage(a){a>=1&&a<=this.totalPages&&(this.currentPage=a)},toggleFilterVisibility(){this.isFilterVisible=!this.isFilterVisible},applyFilters(){this.currentPage=1,this.fetchRegulationTypes()},resetFilters(){this.filters.namajenisregulasi="",this.sortColumn="",this.sortDirection="asc",this.currentPage=1,this.fetchRegulationTypes()}}};const Tta=(0,r.A)(xta,[["render",mta],["__scopeId","data-v-7bd3d2b0"]]);var Sta=Tta,Bta={components:{RegulationTypesTable:Sta}};const Ata=(0,r.A)(Bta,[["render",Aea]]);var _ta=Ata;const jta={class:"container-fluid"},Vta={class:"row widget-grid"};function Ita(a,e,t,s,i,l){const o=(0,n.g2)("Breadcrumbs"),r=(0,n.g2)("LegalStatusesTable");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(o,{main:"Aset",title:a.$route.meta.title},null,8,["title"]),(0,n.Lk)("div",jta,[(0,n.Lk)("div",Vta,[(0,n.bF)(r)])])])}const Nta={class:"col-sm-12"},Uta={class:"card"},Rta={class:"card-body"},Qta={class:"d-flex justify-content-end align-items-start mb-3"},Wta={class:"d-flex gap-2"},Kta={key:0,class:"fa fa-angle-up me-2"},Ota={key:1,class:"fa fa-angle-down me-2"},$ta={key:0,class:"border p-3 mb-3 rounded filter-section"},Gta={class:"row g-2"},Jta={class:"col-md-4"},qta={class:"d-flex justify-content-end gap-2 mt-3"},Hta={class:"table-responsive signal-table"},Yta={class:"table table-hover"},zta={key:0,class:"fa fa-sort-asc"},Zta={key:1,class:"fa fa-sort-desc"},asa={key:2,class:"fa fa-sort"},esa={scope:"row"},tsa={class:"btn-group"},ssa=["onClick"],isa=["onClick"],lsa={key:0},nsa={class:"d-flex flex-column flex-md-row justify-content-md-between align-items-center mt-3 px-3 pb-3"},osa={class:"mt-2"},rsa={key:0,class:"text-muted"},csa={key:0,class:"d-flex align-items-center flex-wrap gap-2 mt-2"},dsa={class:"pagination mb-0"},usa={key:0,class:"page-item"},msa={key:1,class:"page-item disabled"},ksa=["onClick"],hsa={key:2,class:"page-item disabled"},gsa={key:3,class:"page-item"};function psa(a,e,t,s,i,o){const r=(0,n.g2)("add-edit-legalStatus-modal");return(0,n.uX)(),(0,n.CE)("div",Nta,[i.isModalVisible?((0,n.uX)(),(0,n.Wv)(r,{key:0,"legalStatus-to-edit":i.legalStatusBeingEdited,onClose:o.closeModal,onSaveSuccessful:o.handleSaveSuccessful},null,8,["legalStatus-to-edit","onClose","onSaveSuccessful"])):(0,n.Q3)("",!0),(0,n.Lk)("div",Uta,[e[26]||(e[26]=(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("h3",null,"Daftar Nama Status Hak")],-1)),(0,n.Lk)("div",Rta,[(0,n.Lk)("div",Qta,[(0,n.Lk)("div",Wta,[(0,n.Lk)("button",{class:"btn btn-outline-light txt-dark",onClick:e[0]||(e[0]=(...a)=>o.toggleFilterVisibility&&o.toggleFilterVisibility(...a))},[i.isFilterVisible?((0,n.uX)(),(0,n.CE)("i",Kta)):((0,n.uX)(),(0,n.CE)("i",Ota)),(0,n.Lk)("span",null,(0,k.v_)(i.isFilterVisible?"Sembunyikan":"Tampilkan")+" Filter",1)]),(0,n.Lk)("button",{class:"btn btn-success",onClick:e[1]||(e[1]=(...a)=>o.openAddModal&&o.openAddModal(...a))},e[10]||(e[10]=[(0,n.Lk)("i",{class:"fa fa-plus me-2"},null,-1),(0,n.Lk)("span",null," Tambah Data",-1)]))])]),i.isFilterVisible?((0,n.uX)(),(0,n.CE)("div",$ta,[(0,n.Lk)("div",Gta,[(0,n.Lk)("div",Jta,[e[11]||(e[11]=(0,n.Lk)("label",{for:"filterName",class:"form-label"},"Nama Status Hak",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterName",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.filters.namastatushak=a),placeholder:"Filter berdasarkan nama status hak"},null,512),[[l.Jo,i.filters.namastatushak]])])]),(0,n.Lk)("div",qta,[(0,n.Lk)("button",{class:"btn btn-secondary",onClick:e[3]||(e[3]=(...a)=>o.resetFilters&&o.resetFilters(...a))},e[12]||(e[12]=[(0,n.Lk)("i",{class:"fa fa-refresh me-2"},null,-1),(0,n.Lk)("span",null,"Reset Filter",-1)])),(0,n.Lk)("button",{class:"btn btn-primary",onClick:e[4]||(e[4]=(...a)=>o.applyFilters&&o.applyFilters(...a))},e[13]||(e[13]=[(0,n.Lk)("i",{class:"fa fa-search me-2"},null,-1),(0,n.Lk)("span",null,"Terapkan Filter",-1)]))])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",Hta,[(0,n.Lk)("table",Yta,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[e[15]||(e[15]=(0,n.Lk)("th",{scope:"col"},"No",-1)),(0,n.Lk)("th",{scope:"col",onClick:e[5]||(e[5]=a=>o.sortBy("namastatushak"))},[e[14]||(e[14]=(0,n.eW)(" Nama Status Hak ")),"namastatushak"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",zta)):"namastatushakhak"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",Zta)):((0,n.uX)(),(0,n.CE)("i",asa))]),e[16]||(e[16]=(0,n.Lk)("th",{scope:"col"},"Aksi",-1))])]),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.paginatedLegalStatuses,(a,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:a.idstatushak},[(0,n.Lk)("th",esa,(0,k.v_)((i.currentPage-1)*i.perPage+t+1),1),(0,n.Lk)("td",null,(0,k.v_)(a.namastatushak),1),(0,n.Lk)("td",null,[(0,n.Lk)("div",tsa,[(0,n.Lk)("button",{class:"btn btn-primary btn-sm",onClick:e=>o.openEditModal(a)},e[17]||(e[17]=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)]),8,ssa),(0,n.Lk)("button",{class:"btn btn-danger sweet-11 btn-sm",type:"button",onClick:e=>o.advancedDeleteAlert(a.idstatushak)},e[18]||(e[18]=[(0,n.Lk)("i",{class:"fa fa-trash"},null,-1)]),8,isa)])])]))),128)),0===o.paginatedLegalStatuses.length?((0,n.uX)(),(0,n.CE)("tr",lsa,e[19]||(e[19]=[(0,n.Lk)("td",{colspan:"5",class:"text-center"},"Tidak ada data yang cocok atau tersedia.",-1)]))):(0,n.Q3)("",!0)])]),(0,n.Lk)("div",nsa,[(0,n.Lk)("div",osa,[i.totalItems>0?((0,n.uX)(),(0,n.CE)("span",rsa,[e[20]||(e[20]=(0,n.eW)(" Menampilkan ")),(0,n.Lk)("strong",null,(0,k.v_)((i.currentPage-1)*i.perPage+1),1),e[21]||(e[21]=(0,n.eW)(" - ")),(0,n.Lk)("strong",null,(0,k.v_)(Math.min(i.currentPage*i.perPage,i.totalItems)),1),e[22]||(e[22]=(0,n.eW)(" dari ")),(0,n.Lk)("strong",null,(0,k.v_)(i.totalItems),1),e[23]||(e[23]=(0,n.eW)(" data "))])):(0,n.Q3)("",!0)]),-1!==i.perPage&&o.totalPages>1?((0,n.uX)(),(0,n.CE)("nav",csa,[(0,n.Lk)("ul",dsa,[(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[6]||(e[6]=a=>o.changePage(i.currentPage-1))},"Prev")],2),o.pageNumbers[0]>1?((0,n.uX)(),(0,n.CE)("li",usa,[(0,n.Lk)("button",{class:"page-link",onClick:e[7]||(e[7]=a=>o.changePage(1))},"1")])):(0,n.Q3)("",!0),o.pageNumbers[0]>2?((0,n.uX)(),(0,n.CE)("li",msa,e[24]||(e[24]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.pageNumbers,a=>((0,n.uX)(),(0,n.CE)("li",{key:a,class:(0,k.C4)(["page-item",{active:i.currentPage===a}])},[(0,n.Lk)("button",{class:"page-link",onClick:e=>o.changePage(a)},(0,k.v_)(a),9,ksa)],2))),128)),o.pageNumbers.slice(-1)[0]<o.totalPages-1?((0,n.uX)(),(0,n.CE)("li",hsa,e[25]||(e[25]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),o.pageNumbers.slice(-1)[0]<o.totalPages?((0,n.uX)(),(0,n.CE)("li",gsa,[(0,n.Lk)("button",{class:"page-link",onClick:e[8]||(e[8]=a=>o.changePage(o.totalPages))},(0,k.v_)(o.totalPages),1)])):(0,n.Q3)("",!0),(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:i.currentPage===o.totalPages}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[9]||(e[9]=a=>o.changePage(i.currentPage+1))},"Next")],2)])])):(0,n.Q3)("",!0)])])])])}const bsa=(a={})=>Na.get("",{params:{act:"status-hak",...a}}),fsa=a=>Na.post("",{act:"status-hak",record:a}),Lsa=(a,e)=>a?Na.put("",{act:"status-hak",key:a,record:e}):Promise.reject(new Error("ID status hak tidak tersedia.")),ysa=a=>a?Na.delete("",{data:{act:"status-hak",key:a}}):Promise.reject(new Error("ID status hak tidak tersedia.")),vsa={class:"modal-header"},Csa={class:"modal-title"},Psa={class:"modal-body"},Esa={class:"mb-3"},Dsa={key:0,class:"alert alert-danger mt-3"},Msa={class:"modal-footer"},wsa=["disabled"],Fsa={key:0,class:"spinner-border spinner-border-sm",role:"statushak","aria-hidden":"true"},Xsa={key:1};function xsa(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",{class:"modal-overlay",onClick:e[6]||(e[6]=(...a)=>o.handleOverlayClick&&o.handleOverlayClick(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[5]||(e[5]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",vsa,[(0,n.Lk)("h5",Csa,(0,k.v_)(o.isEditMode?"Edit Data Status Hak":"Tambah Data Status Hak"),1),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",Psa,[(0,n.Lk)("form",{onSubmit:e[2]||(e[2]=(0,l.D$)((...a)=>o.submitForm&&o.submitForm(...a),["prevent"]))},[(0,n.Lk)("div",Esa,[e[7]||(e[7]=(0,n.Lk)("label",{for:"namastatushak",class:"form-label"},"Nama Status Hak",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"namaStatusHak",placeholder:"Masukkan nama status hak","onUpdate:modelValue":e[1]||(e[1]=a=>i.formData.namastatushak=a),required:""},null,512),[[l.Jo,i.formData.namastatushak]])]),i.errorMessage?((0,n.uX)(),(0,n.CE)("div",Dsa,(0,k.v_)(i.errorMessage),1)):(0,n.Q3)("",!0)],32)]),(0,n.Lk)("div",Msa,[(0,n.Lk)("button",{type:"button",class:"btn btn-danger",onClick:e[3]||(e[3]=(...a)=>o.closeModal&&o.closeModal(...a))},"Batal"),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[4]||(e[4]=(...a)=>o.submitForm&&o.submitForm(...a)),disabled:i.isLoading},[i.isLoading?((0,n.uX)(),(0,n.CE)("span",Fsa)):((0,n.uX)(),(0,n.CE)("span",Xsa,"Simpan"))],8,wsa)])])])}var Tsa={name:"editLegalStatusModal",props:{legalStatusToEdit:{type:Object,default:null}},created(){this.toast=(0,ln.dj)()},data(){return{formData:{namastatushak:""},isLoading:!1,errorMessage:null}},computed:{isEditMode(){return!!this.legalStatusToEdit}},watch:{legalStatusToEdit:{handler(a){this.formData=a?{...a}:{namastatushak:""},this.errorMessage=null},immediate:!0}},methods:{closeModal(){this.$emit("close")},handleOverlayClick(a){a.target===a.currentTarget&&this.closeModal()},async submitForm(){this.errorMessage=null;const{namastatushak:a}=this.formData;if(a){this.isLoading=!0;try{this.isEditMode?(await Lsa(this.legalStatusToEdit.idstatushak,this.formData),this.toast.success("Data status hak berhasil diperbarui",{icon:"fa fa-check"})):(await fsa(this.formData),this.toast.success("Data status hak berhasil ditambah",{icon:"fa fa-check"})),this.$emit("save-successful"),this.closeModal()}catch(e){console.error("Error occurred:",e),this.errorMessage=e.response?.data?.message||"Gagal menyimpan data.",this.toast.error("Gagal menyimpan data status hak",{icon:"fa fa-times"})}finally{this.isLoading=!1}}else this.errorMessage="Semua field wajib diisi."}}};const Ssa=(0,r.A)(Tsa,[["render",xsa],["__scopeId","data-v-2eab63b4"]]);var Bsa=Ssa,Asa={components:{AddEditLegalStatusModal:Bsa},data(){return{legalStatuses:[],sortColumn:"",sortDirection:"asc",isModalVisible:!1,currentPage:1,perPage:20,totalItems:0,legalStatusBeingEdited:null,jumpPage:1,isFilterVisible:!1,filters:{legalStatus_name:""}}},computed:{paginatedLegalStatuses(){return this.legalStatuses},totalPages(){return this.perPage<=0?1:Math.ceil(this.totalItems/this.perPage)},pageNumbers(){const a=[],e=5;let t=Math.max(1,this.currentPage-Math.floor(e/2)),s=t+e-1;s>this.totalPages&&(s=this.totalPages,t=Math.max(1,s-e+1));for(let i=t;i<=s;i++)a.push(i);return a}},watch:{currentPage(){this.fetchLegalStatuses(),this.jumpPage=this.currentPage},perPage(){this.currentPage=1,this.fetchLegalStatuses()}},async mounted(){this.toast=(0,ln.dj)(),await this.fetchLegalStatuses()},methods:{openAddModal(){this.legalStatusBeingEdited=null,this.isModalVisible=!0},openEditModal(a){this.legalStatusBeingEdited={...a},this.isModalVisible=!0},closeModal(){this.isModalVisible=!1,this.legalStatusBeingEdited=null},handleSaveSuccessful(){this.closeModal(),this.fetchLegalStatuses()},async fetchLegalStatuses(){try{const a={act:"status-hak",page:this.currentPage,limit:this.perPage,order:this.sortColumn?`${this.sortColumn} ${this.sortDirection}`:"",group:""},e=Object.entries(this.filters).filter(([a,e])=>""!==e).map(([a,e])=>`${a}=${e}`);e.length>0?a.filter=e.join(","):a.filter="";const t=await bsa(a),s=t.data?.data||t.data?.[0]?.data||[],i=t.data?.[0]?.meta?.pagination||{};this.legalStatuses=s,this.totalItems=i.total||s.length}catch(a){console.error("Error fetching status hak:",a),this.$swal({icon:"error",title:"Oops...",text:"Gagal memuat data status hak. Silakan coba lagi nanti."})}},advancedDeleteAlert(a){this.$swal({title:"Hapus Data Status Hak",text:"Apakah Anda yakin ingin menghapus data ini?",icon:"warning",showCancelButton:!0,confirmButtonText:'<i class="fa fa-check me-2"></i> Hapus!',confirmButtonColor:"#d33",cancelButtonText:'<i class="fa fa-times me-2"></i> Batal',cancelButtonColor:"#efefef",reverseButtons:!0}).then(async e=>{if(e.isConfirmed)try{await ysa(a),1===this.legalStatuses.length&&this.currentPage>1?this.currentPage--:this.fetchLegalStatuses(),this.toast.success("Data status hak berhasil dihapus",{icon:"fa fa-check"})}catch(t){this.toast.error("Gagal menghapus data status hak",{icon:"fa fa-times"})}})},sortBy(a){this.sortColumn===a?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=a,this.sortDirection="asc"),this.fetchLegalStatuses()},changePage(a){a>=1&&a<=this.totalPages&&(this.currentPage=a)},toggleFilterVisibility(){this.isFilterVisible=!this.isFilterVisible},applyFilters(){this.currentPage=1,this.fetchLegalStatuses()},resetFilters(){this.filters.namastatushak="",this.sortColumn="",this.sortDirection="asc",this.currentPage=1,this.fetchLegalStatuses()}}};const _sa=(0,r.A)(Asa,[["render",psa],["__scopeId","data-v-02069e48"]]);var jsa=_sa,Vsa={components:{LegalStatusesTable:jsa}};const Isa=(0,r.A)(Vsa,[["render",Ita]]);var Nsa=Isa;const Usa={class:"container-fluid"},Rsa={class:"row widget-grid"};function Qsa(a,e,t,s,i,l){const o=(0,n.g2)("Breadcrumbs"),r=(0,n.g2)("LandOriginsTable");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(o,{main:"Aset",title:a.$route.meta.title},null,8,["title"]),(0,n.Lk)("div",Usa,[(0,n.Lk)("div",Rsa,[(0,n.bF)(r)])])])}const Wsa={class:"col-sm-12"},Ksa={class:"card"},Osa={class:"card-body"},$sa={class:"d-flex justify-content-end align-items-start mb-3"},Gsa={class:"d-flex gap-2"},Jsa={key:0,class:"fa fa-angle-up me-2"},qsa={key:1,class:"fa fa-angle-down me-2"},Hsa={key:0,class:"border p-3 mb-3 rounded filter-section"},Ysa={class:"row g-2"},zsa={class:"col-md-4"},Zsa={class:"d-flex justify-content-end gap-2 mt-3"},aia={class:"table-responsive signal-table"},eia={class:"table table-hover"},tia={key:0,class:"fa fa-sort-asc"},sia={key:1,class:"fa fa-sort-desc"},iia={key:2,class:"fa fa-sort"},lia={scope:"row"},nia={class:"btn-group"},oia=["onClick"],ria=["onClick"],cia={key:0},dia={class:"d-flex flex-column flex-md-row justify-content-md-between align-items-center mt-3 px-3 pb-3"},uia={class:"mt-2"},mia={key:0,class:"text-muted"},kia={key:0,class:"d-flex align-items-center flex-wrap gap-2 mt-2"},hia={class:"pagination mb-0"},gia={key:0,class:"page-item"},pia={key:1,class:"page-item disabled"},bia=["onClick"],fia={key:2,class:"page-item disabled"},Lia={key:3,class:"page-item"};function yia(a,e,t,s,i,o){const r=(0,n.g2)("add-edit-landOrigin-modal");return(0,n.uX)(),(0,n.CE)("div",Wsa,[i.isModalVisible?((0,n.uX)(),(0,n.Wv)(r,{key:0,"landOrigin-to-edit":i.landOriginBeingEdited,onClose:o.closeModal,onSaveSuccessful:o.handleSaveSuccessful},null,8,["landOrigin-to-edit","onClose","onSaveSuccessful"])):(0,n.Q3)("",!0),(0,n.Lk)("div",Ksa,[e[26]||(e[26]=(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("h3",null,"Daftar Nama Asal-Usul Tanah")],-1)),(0,n.Lk)("div",Osa,[(0,n.Lk)("div",$sa,[(0,n.Lk)("div",Gsa,[(0,n.Lk)("button",{class:"btn btn-outline-light txt-dark",onClick:e[0]||(e[0]=(...a)=>o.toggleFilterVisibility&&o.toggleFilterVisibility(...a))},[i.isFilterVisible?((0,n.uX)(),(0,n.CE)("i",Jsa)):((0,n.uX)(),(0,n.CE)("i",qsa)),(0,n.Lk)("span",null,(0,k.v_)(i.isFilterVisible?"Sembunyikan":"Tampilkan")+" Filter",1)]),(0,n.Lk)("button",{class:"btn btn-success",onClick:e[1]||(e[1]=(...a)=>o.openAddModal&&o.openAddModal(...a))},e[10]||(e[10]=[(0,n.Lk)("i",{class:"fa fa-plus me-2"},null,-1),(0,n.Lk)("span",null," Tambah Data",-1)]))])]),i.isFilterVisible?((0,n.uX)(),(0,n.CE)("div",Hsa,[(0,n.Lk)("div",Ysa,[(0,n.Lk)("div",zsa,[e[11]||(e[11]=(0,n.Lk)("label",{for:"filterName",class:"form-label"},"Nama Asal-Usul Tanah",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterName",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.filters.namaasalusultanah=a),placeholder:"Filter berdasarkan nama..."},null,512),[[l.Jo,i.filters.namaasalusultanah]])])]),(0,n.Lk)("div",Zsa,[(0,n.Lk)("button",{class:"btn btn-secondary",onClick:e[3]||(e[3]=(...a)=>o.resetFilters&&o.resetFilters(...a))},e[12]||(e[12]=[(0,n.Lk)("i",{class:"fa fa-refresh me-2"},null,-1),(0,n.Lk)("span",null,"Reset Filter",-1)])),(0,n.Lk)("button",{class:"btn btn-primary",onClick:e[4]||(e[4]=(...a)=>o.applyFilters&&o.applyFilters(...a))},e[13]||(e[13]=[(0,n.Lk)("i",{class:"fa fa-search me-2"},null,-1),(0,n.Lk)("span",null,"Terapkan Filter",-1)]))])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",aia,[(0,n.Lk)("table",eia,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[e[15]||(e[15]=(0,n.Lk)("th",{scope:"col"},"No",-1)),(0,n.Lk)("th",{scope:"col",onClick:e[5]||(e[5]=a=>o.sortBy("namaasalusultanah"))},[e[14]||(e[14]=(0,n.eW)(" Nama Asal-Usul Tanah ")),"namaasalusultanah"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",tia)):"namaasalusultanah"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",sia)):((0,n.uX)(),(0,n.CE)("i",iia))]),e[16]||(e[16]=(0,n.Lk)("th",{scope:"col"},"Aksi",-1))])]),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.paginatedLandOrigins,(a,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:a.idasalusultanah},[(0,n.Lk)("th",lia,(0,k.v_)((i.currentPage-1)*i.perPage+t+1),1),(0,n.Lk)("td",null,(0,k.v_)(a.namaasalusultanah),1),(0,n.Lk)("td",null,[(0,n.Lk)("div",nia,[(0,n.Lk)("button",{class:"btn btn-primary btn-sm",onClick:e=>o.openEditModal(a)},e[17]||(e[17]=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)]),8,oia),(0,n.Lk)("button",{class:"btn btn-danger sweet-11 btn-sm",type:"button",onClick:e=>o.advancedDeleteAlert(a.idasalusultanah)},e[18]||(e[18]=[(0,n.Lk)("i",{class:"fa fa-trash"},null,-1)]),8,ria)])])]))),128)),0===o.paginatedLandOrigins.length?((0,n.uX)(),(0,n.CE)("tr",cia,e[19]||(e[19]=[(0,n.Lk)("td",{colspan:"5",class:"text-center"},"Tidak ada data yang cocok atau tersedia.",-1)]))):(0,n.Q3)("",!0)])]),(0,n.Lk)("div",dia,[(0,n.Lk)("div",uia,[i.totalItems>0?((0,n.uX)(),(0,n.CE)("span",mia,[e[20]||(e[20]=(0,n.eW)(" Menampilkan ")),(0,n.Lk)("strong",null,(0,k.v_)((i.currentPage-1)*i.perPage+1),1),e[21]||(e[21]=(0,n.eW)(" - ")),(0,n.Lk)("strong",null,(0,k.v_)(Math.min(i.currentPage*i.perPage,i.totalItems)),1),e[22]||(e[22]=(0,n.eW)(" dari ")),(0,n.Lk)("strong",null,(0,k.v_)(i.totalItems),1),e[23]||(e[23]=(0,n.eW)(" data "))])):(0,n.Q3)("",!0)]),-1!==i.perPage&&o.totalPages>1?((0,n.uX)(),(0,n.CE)("nav",kia,[(0,n.Lk)("ul",hia,[(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[6]||(e[6]=a=>o.changePage(i.currentPage-1))},"Prev")],2),o.pageNumbers[0]>1?((0,n.uX)(),(0,n.CE)("li",gia,[(0,n.Lk)("button",{class:"page-link",onClick:e[7]||(e[7]=a=>o.changePage(1))},"1")])):(0,n.Q3)("",!0),o.pageNumbers[0]>2?((0,n.uX)(),(0,n.CE)("li",pia,e[24]||(e[24]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.pageNumbers,a=>((0,n.uX)(),(0,n.CE)("li",{key:a,class:(0,k.C4)(["page-item",{active:i.currentPage===a}])},[(0,n.Lk)("button",{class:"page-link",onClick:e=>o.changePage(a)},(0,k.v_)(a),9,bia)],2))),128)),o.pageNumbers.slice(-1)[0]<o.totalPages-1?((0,n.uX)(),(0,n.CE)("li",fia,e[25]||(e[25]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),o.pageNumbers.slice(-1)[0]<o.totalPages?((0,n.uX)(),(0,n.CE)("li",Lia,[(0,n.Lk)("button",{class:"page-link",onClick:e[8]||(e[8]=a=>o.changePage(o.totalPages))},(0,k.v_)(o.totalPages),1)])):(0,n.Q3)("",!0),(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:i.currentPage===o.totalPages}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[9]||(e[9]=a=>o.changePage(i.currentPage+1))},"Next")],2)])])):(0,n.Q3)("",!0)])])])])}const via=(a={})=>Na.get("",{params:{act:"asal-usul-tanah",...a}}),Cia=a=>Na.post("",{act:"asal-usul-tanah",record:a}),Pia=(a,e)=>a?Na.put("",{act:"asal-usul-tanah",key:a,record:e}):Promise.reject(new Error("ID asal usul tanah tidak tersedia.")),Eia=a=>a?Na.delete("",{data:{act:"asal-usul-tanah",key:a}}):Promise.reject(new Error("ID asal usul tanah tidak tersedia.")),Dia={class:"modal-header"},Mia={class:"modal-title"},wia={class:"modal-body"},Fia={class:"mb-3"},Xia={key:0,class:"alert alert-danger mt-3"},xia={class:"modal-footer"},Tia=["disabled"],Sia={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},Bia={key:1};function Aia(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",{class:"modal-overlay",onClick:e[6]||(e[6]=(...a)=>o.handleOverlayClick&&o.handleOverlayClick(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[5]||(e[5]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",Dia,[(0,n.Lk)("h5",Mia,(0,k.v_)(o.isEditMode?"Edit Data Asal-Usul Tanah":"Tambah Data Asal-Usul Tanah"),1),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",wia,[(0,n.Lk)("form",{onSubmit:e[2]||(e[2]=(0,l.D$)((...a)=>o.submitForm&&o.submitForm(...a),["prevent"]))},[(0,n.Lk)("div",Fia,[e[7]||(e[7]=(0,n.Lk)("label",{for:"namaasalusultanah",class:"form-label"},"Nama Asal-Usul Tanah",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"namaAsalUsulTanah",placeholder:"Masukkan nama asal-usul tanah","onUpdate:modelValue":e[1]||(e[1]=a=>i.formData.namaasalusultanah=a),required:""},null,512),[[l.Jo,i.formData.namaasalusultanah]])]),i.errorMessage?((0,n.uX)(),(0,n.CE)("div",Xia,(0,k.v_)(i.errorMessage),1)):(0,n.Q3)("",!0)],32)]),(0,n.Lk)("div",xia,[(0,n.Lk)("button",{type:"button",class:"btn btn-danger",onClick:e[3]||(e[3]=(...a)=>o.closeModal&&o.closeModal(...a))},"Batal"),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[4]||(e[4]=(...a)=>o.submitForm&&o.submitForm(...a)),disabled:i.isLoading},[i.isLoading?((0,n.uX)(),(0,n.CE)("span",Sia)):((0,n.uX)(),(0,n.CE)("span",Bia,"Simpan"))],8,Tia)])])])}var _ia={name:"editLandOriginModal",props:{landOriginToEdit:{type:Object,default:null}},created(){this.toast=(0,ln.dj)()},data(){return{formData:{namaasalusultanah:""},isLoading:!1,errorMessage:null}},computed:{isEditMode(){return!!this.landOriginToEdit}},watch:{landOriginToEdit:{handler(a){this.formData=a?{...a}:{namaasalusultanah:""},this.errorMessage=null},immediate:!0}},methods:{closeModal(){this.$emit("close")},handleOverlayClick(a){a.target===a.currentTarget&&this.closeModal()},async submitForm(){this.errorMessage=null;const{namaasalusultanah:a}=this.formData;if(a){this.isLoading=!0;try{this.isEditMode?(await Pia(this.landOriginToEdit.idasalusultanah,this.formData),this.toast.success("Data asal-usul tanah berhasil diperbarui",{icon:"fa fa-check"})):(await Cia(this.formData),this.toast.success("Data asal-usul tanah berhasil ditambah",{icon:"fa fa-check"})),this.$emit("save-successful"),this.closeModal()}catch(e){console.error("Error occurred:",e),this.errorMessage=e.response?.data?.message||"Gagal menyimpan data.",this.toast.error("Gagal menyimpan data asal-usul tanah",{icon:"fa fa-times"})}finally{this.isLoading=!1}}else this.errorMessage="Semua field wajib diisi."}}};const jia=(0,r.A)(_ia,[["render",Aia],["__scopeId","data-v-4261b419"]]);var Via=jia,Iia={components:{AddEditLandOriginModal:Via},data(){return{landOrigins:[],sortColumn:"",sortDirection:"asc",isModalVisible:!1,currentPage:1,perPage:20,totalItems:0,landOriginBeingEdited:null,jumpPage:1,isFilterVisible:!1,filters:{landOrigin_name:""}}},computed:{paginatedLandOrigins(){return this.landOrigins},totalPages(){return this.perPage<=0?1:Math.ceil(this.totalItems/this.perPage)},pageNumbers(){const a=[],e=5;let t=Math.max(1,this.currentPage-Math.floor(e/2)),s=t+e-1;s>this.totalPages&&(s=this.totalPages,t=Math.max(1,s-e+1));for(let i=t;i<=s;i++)a.push(i);return a}},watch:{currentPage(){this.fetchLandOrigins(),this.jumpPage=this.currentPage},perPage(){this.currentPage=1,this.fetchLandOrigins()}},async mounted(){this.toast=(0,ln.dj)(),await this.fetchLandOrigins()},methods:{openAddModal(){this.landOriginBeingEdited=null,this.isModalVisible=!0},openEditModal(a){this.landOriginBeingEdited={...a},this.isModalVisible=!0},closeModal(){this.isModalVisible=!1,this.landOriginBeingEdited=null},handleSaveSuccessful(){this.closeModal(),this.fetchLandOrigins()},async fetchLandOrigins(){try{const a={act:"asal-usul-tanah",page:this.currentPage,limit:this.perPage,order:this.sortColumn?`${this.sortColumn} ${this.sortDirection}`:"",group:""},e=Object.entries(this.filters).filter(([a,e])=>""!==e).map(([a,e])=>`${a}=${e}`);e.length>0?a.filter=e.join(","):a.filter="";const t=await via(a),s=t.data?.data||t.data?.[0]?.data||[],i=t.data?.[0]?.meta?.pagination||{};this.landOrigins=s,this.totalItems=i.total||s.length}catch(a){console.error("Error fetching asal-usul tanah:",a),this.$swal({icon:"error",title:"Oops...",text:"Gagal memuat data asal-usul tanah. Silakan coba lagi nanti."})}},advancedDeleteAlert(a){this.$swal({title:"Hapus Data Asal-Usul Tanah",text:"Apakah Anda yakin ingin menghapus data ini?",icon:"warning",showCancelButton:!0,confirmButtonText:'<i class="fa fa-check me-2"></i> Hapus!',confirmButtonColor:"#d33",cancelButtonText:'<i class="fa fa-times me-2"></i> Batal',cancelButtonColor:"#efefef",reverseButtons:!0}).then(async e=>{if(e.isConfirmed)try{await Eia(a),1===this.landOrigins.length&&this.currentPage>1?this.currentPage--:this.fetchLandOrigins(),this.toast.success("Data asal-usul tanah berhasil dihapus",{icon:"fa fa-check"})}catch(t){this.toast.error("Gagal menghapus data asal-usul tanah",{icon:"fa fa-times"})}})},sortBy(a){this.sortColumn===a?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=a,this.sortDirection="asc"),this.fetchLandOrigins()},changePage(a){a>=1&&a<=this.totalPages&&(this.currentPage=a)},toggleFilterVisibility(){this.isFilterVisible=!this.isFilterVisible},applyFilters(){this.currentPage=1,this.fetchLandOrigins()},resetFilters(){this.filters.namaasalusultanah="",this.sortColumn="",this.sortDirection="asc",this.currentPage=1,this.fetchLandOrigins()}}};const Nia=(0,r.A)(Iia,[["render",yia],["__scopeId","data-v-d18a642c"]]);var Uia=Nia,Ria={components:{LandOriginsTable:Uia}};const Qia=(0,r.A)(Ria,[["render",Qsa]]);var Wia=Qia;const Kia={class:"container-fluid"},Oia={class:"row widget-grid"};function $ia(a,e,t,s,i,l){const o=(0,n.g2)("Breadcrumbs"),r=(0,n.g2)("AcquisitionProceduresTable");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(o,{main:"Aset",title:a.$route.meta.title},null,8,["title"]),(0,n.Lk)("div",Kia,[(0,n.Lk)("div",Oia,[(0,n.bF)(r)])])])}const Gia={class:"col-sm-12"},Jia={class:"card"},qia={class:"card-body"},Hia={class:"d-flex justify-content-end align-items-start mb-3"},Yia={class:"d-flex gap-2"},zia={key:0,class:"fa fa-angle-up me-2"},Zia={key:1,class:"fa fa-angle-down me-2"},ala={key:0,class:"border p-3 mb-3 rounded filter-section"},ela={class:"row g-2"},tla={class:"col-md-4"},sla={class:"d-flex justify-content-end gap-2 mt-3"},ila={class:"table-responsive signal-table"},lla={class:"table table-hover"},nla={key:0,class:"fa fa-sort-asc"},ola={key:1,class:"fa fa-sort-desc"},rla={key:2,class:"fa fa-sort"},cla={scope:"row"},dla={class:"btn-group"},ula=["onClick"],mla=["onClick"],kla={key:0},hla={class:"d-flex flex-column flex-md-row justify-content-md-between align-items-center mt-3 px-3 pb-3"},gla={class:"mt-2"},pla={key:0,class:"text-muted"},bla={key:0,class:"d-flex align-items-center flex-wrap gap-2 mt-2"},fla={class:"pagination mb-0"},Lla={key:0,class:"page-item"},yla={key:1,class:"page-item disabled"},vla=["onClick"],Cla={key:2,class:"page-item disabled"},Pla={key:3,class:"page-item"};function Ela(a,e,t,s,i,o){const r=(0,n.g2)("add-edit-acquisitionProcedure-modal");return(0,n.uX)(),(0,n.CE)("div",Gia,[i.isModalVisible?((0,n.uX)(),(0,n.Wv)(r,{key:0,"acquisitionProcedure-to-edit":i.acquisitionProcedureBeingEdited,onClose:o.closeModal,onSaveSuccessful:o.handleSaveSuccessful},null,8,["acquisitionProcedure-to-edit","onClose","onSaveSuccessful"])):(0,n.Q3)("",!0),(0,n.Lk)("div",Jia,[e[26]||(e[26]=(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("h3",null,"Daftar Nama Prosedur Penguasaan")],-1)),(0,n.Lk)("div",qia,[(0,n.Lk)("div",Hia,[(0,n.Lk)("div",Yia,[(0,n.Lk)("button",{class:"btn btn-outline-light txt-dark",onClick:e[0]||(e[0]=(...a)=>o.toggleFilterVisibility&&o.toggleFilterVisibility(...a))},[i.isFilterVisible?((0,n.uX)(),(0,n.CE)("i",zia)):((0,n.uX)(),(0,n.CE)("i",Zia)),(0,n.Lk)("span",null,(0,k.v_)(i.isFilterVisible?"Sembunyikan":"Tampilkan")+" Filter",1)]),(0,n.Lk)("button",{class:"btn btn-success",onClick:e[1]||(e[1]=(...a)=>o.openAddModal&&o.openAddModal(...a))},e[10]||(e[10]=[(0,n.Lk)("i",{class:"fa fa-plus me-2"},null,-1),(0,n.Lk)("span",null," Tambah Data",-1)]))])]),i.isFilterVisible?((0,n.uX)(),(0,n.CE)("div",ala,[(0,n.Lk)("div",ela,[(0,n.Lk)("div",tla,[e[11]||(e[11]=(0,n.Lk)("label",{for:"filterName",class:"form-label"},"Nama Prosedur Penguasaan",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterName",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.filters.namaprosedurpenguasaan=a),placeholder:"Filter berdasarkan nama prosedur penguasaan"},null,512),[[l.Jo,i.filters.namaprosedurpenguasaan]])])]),(0,n.Lk)("div",sla,[(0,n.Lk)("button",{class:"btn btn-secondary",onClick:e[3]||(e[3]=(...a)=>o.resetFilters&&o.resetFilters(...a))},e[12]||(e[12]=[(0,n.Lk)("i",{class:"fa fa-refresh me-2"},null,-1),(0,n.Lk)("span",null,"Reset Filter",-1)])),(0,n.Lk)("button",{class:"btn btn-primary",onClick:e[4]||(e[4]=(...a)=>o.applyFilters&&o.applyFilters(...a))},e[13]||(e[13]=[(0,n.Lk)("i",{class:"fa fa-search me-2"},null,-1),(0,n.Lk)("span",null,"Terapkan Filter",-1)]))])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",ila,[(0,n.Lk)("table",lla,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[e[15]||(e[15]=(0,n.Lk)("th",{scope:"col"},"No",-1)),(0,n.Lk)("th",{scope:"col",onClick:e[5]||(e[5]=a=>o.sortBy("namaprosedurpenguasaan"))},[e[14]||(e[14]=(0,n.eW)(" Nama Prosedur Penguasaan ")),"namaprosedurpenguasaan"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",nla)):"namaprosedurpenguasaan"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",ola)):((0,n.uX)(),(0,n.CE)("i",rla))]),e[16]||(e[16]=(0,n.Lk)("th",{scope:"col"},"Aksi",-1))])]),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.paginatedAcquisitionProcedures,(a,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:a.idprosedurpenguasaan},[(0,n.Lk)("th",cla,(0,k.v_)((i.currentPage-1)*i.perPage+t+1),1),(0,n.Lk)("td",null,(0,k.v_)(a.namaprosedurpenguasaan),1),(0,n.Lk)("td",null,[(0,n.Lk)("div",dla,[(0,n.Lk)("button",{class:"btn btn-primary btn-sm",onClick:e=>o.openEditModal(a)},e[17]||(e[17]=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)]),8,ula),(0,n.Lk)("button",{class:"btn btn-danger sweet-11 btn-sm",type:"button",onClick:e=>o.advancedDeleteAlert(a.idprosedurpenguasaan)},e[18]||(e[18]=[(0,n.Lk)("i",{class:"fa fa-trash"},null,-1)]),8,mla)])])]))),128)),0===o.paginatedAcquisitionProcedures.length?((0,n.uX)(),(0,n.CE)("tr",kla,e[19]||(e[19]=[(0,n.Lk)("td",{colspan:"5",class:"text-center"},"Tidak ada data yang cocok atau tersedia.",-1)]))):(0,n.Q3)("",!0)])]),(0,n.Lk)("div",hla,[(0,n.Lk)("div",gla,[i.totalItems>0?((0,n.uX)(),(0,n.CE)("span",pla,[e[20]||(e[20]=(0,n.eW)(" Menampilkan ")),(0,n.Lk)("strong",null,(0,k.v_)((i.currentPage-1)*i.perPage+1),1),e[21]||(e[21]=(0,n.eW)(" - ")),(0,n.Lk)("strong",null,(0,k.v_)(Math.min(i.currentPage*i.perPage,i.totalItems)),1),e[22]||(e[22]=(0,n.eW)(" dari ")),(0,n.Lk)("strong",null,(0,k.v_)(i.totalItems),1),e[23]||(e[23]=(0,n.eW)(" data "))])):(0,n.Q3)("",!0)]),-1!==i.perPage&&o.totalPages>1?((0,n.uX)(),(0,n.CE)("nav",bla,[(0,n.Lk)("ul",fla,[(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[6]||(e[6]=a=>o.changePage(i.currentPage-1))},"Prev")],2),o.pageNumbers[0]>1?((0,n.uX)(),(0,n.CE)("li",Lla,[(0,n.Lk)("button",{class:"page-link",onClick:e[7]||(e[7]=a=>o.changePage(1))},"1")])):(0,n.Q3)("",!0),o.pageNumbers[0]>2?((0,n.uX)(),(0,n.CE)("li",yla,e[24]||(e[24]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.pageNumbers,a=>((0,n.uX)(),(0,n.CE)("li",{key:a,class:(0,k.C4)(["page-item",{active:i.currentPage===a}])},[(0,n.Lk)("button",{class:"page-link",onClick:e=>o.changePage(a)},(0,k.v_)(a),9,vla)],2))),128)),o.pageNumbers.slice(-1)[0]<o.totalPages-1?((0,n.uX)(),(0,n.CE)("li",Cla,e[25]||(e[25]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),o.pageNumbers.slice(-1)[0]<o.totalPages?((0,n.uX)(),(0,n.CE)("li",Pla,[(0,n.Lk)("button",{class:"page-link",onClick:e[8]||(e[8]=a=>o.changePage(o.totalPages))},(0,k.v_)(o.totalPages),1)])):(0,n.Q3)("",!0),(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:i.currentPage===o.totalPages}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[9]||(e[9]=a=>o.changePage(i.currentPage+1))},"Next")],2)])])):(0,n.Q3)("",!0)])])])])}const Dla=(a={})=>Na.get("",{params:{act:"prosedur-penguasaan",...a}}),Mla=a=>Na.post("",{act:"prosedur-penguasaan",record:a}),wla=(a,e)=>a?Na.put("",{act:"prosedur-penguasaan",key:a,record:e}):Promise.reject(new Error("ID prosedur penguasaan tidak tersedia.")),Fla=a=>a?Na.delete("",{data:{act:"prosedur-penguasaan",key:a}}):Promise.reject(new Error("ID prosedur penguasaan tidak tersedia.")),Xla={class:"modal-header"},xla={class:"modal-title"},Tla={class:"modal-body"},Sla={class:"mb-3"},Bla={key:0,class:"alert alert-danger mt-3"},Ala={class:"modal-footer"},_la=["disabled"],jla={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},Vla={key:1};function Ila(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",{class:"modal-overlay",onClick:e[6]||(e[6]=(...a)=>o.handleOverlayClick&&o.handleOverlayClick(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[5]||(e[5]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",Xla,[(0,n.Lk)("h5",xla,(0,k.v_)(o.isEditMode?"Edit Data Prosedur Penguasaan":"Tambah Data Prosedur Penguasaan"),1),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",Tla,[(0,n.Lk)("form",{onSubmit:e[2]||(e[2]=(0,l.D$)((...a)=>o.submitForm&&o.submitForm(...a),["prevent"]))},[(0,n.Lk)("div",Sla,[e[7]||(e[7]=(0,n.Lk)("label",{for:"namaprosedurpenguasaan",class:"form-label"},"Nama Prosedur Penguasaan",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"namaProsedurPenguasaan",placeholder:"Masukkan nama prosedur penguasaan","onUpdate:modelValue":e[1]||(e[1]=a=>i.formData.namaprosedurpenguasaan=a),required:""},null,512),[[l.Jo,i.formData.namaprosedurpenguasaan]])]),i.errorMessage?((0,n.uX)(),(0,n.CE)("div",Bla,(0,k.v_)(i.errorMessage),1)):(0,n.Q3)("",!0)],32)]),(0,n.Lk)("div",Ala,[(0,n.Lk)("button",{type:"button",class:"btn btn-danger",onClick:e[3]||(e[3]=(...a)=>o.closeModal&&o.closeModal(...a))},"Batal"),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[4]||(e[4]=(...a)=>o.submitForm&&o.submitForm(...a)),disabled:i.isLoading},[i.isLoading?((0,n.uX)(),(0,n.CE)("span",jla)):((0,n.uX)(),(0,n.CE)("span",Vla,"Simpan"))],8,_la)])])])}var Nla={name:"editAcquisitionProcedureModal",props:{acquisitionProcedureToEdit:{type:Object,default:null}},created(){this.toast=(0,ln.dj)()},data(){return{formData:{namaprosedurpenguasaan:""},isLoading:!1,errorMessage:null}},computed:{isEditMode(){return!!this.acquisitionProcedureToEdit}},watch:{acquisitionProcedureToEdit:{handler(a){this.formData=a?{...a}:{namaprosedurpenguasaan:""},this.errorMessage=null},immediate:!0}},methods:{closeModal(){this.$emit("close")},handleOverlayClick(a){a.target===a.currentTarget&&this.closeModal()},async submitForm(){this.errorMessage=null;const{namaprosedurpenguasaan:a}=this.formData;if(a){this.isLoading=!0;try{this.isEditMode?(await wla(this.acquisitionProcedureToEdit.idprosedurpenguasaan,this.formData),this.toast.success("Data prosedur penguasaan berhasil diperbarui",{icon:"fa fa-check"})):(await Mla(this.formData),this.toast.success("Data prosedur penguasaan berhasil ditambah",{icon:"fa fa-check"})),this.$emit("save-successful"),this.closeModal()}catch(e){console.error("Error occurred:",e),this.errorMessage=e.response?.data?.message||"Gagal menyimpan data.",this.toast.error("Gagal menyimpan data prosedur penguasaan",{icon:"fa fa-times"})}finally{this.isLoading=!1}}else this.errorMessage="Semua field wajib diisi."}}};const Ula=(0,r.A)(Nla,[["render",Ila],["__scopeId","data-v-0f299ec4"]]);var Rla=Ula,Qla={components:{AddEditAcquisitionProcedureModal:Rla},data(){return{acquisitionProcedures:[],sortColumn:"",sortDirection:"asc",isModalVisible:!1,currentPage:1,perPage:20,totalItems:0,acquisitionProcedureBeingEdited:null,jumpPage:1,isFilterVisible:!1,filters:{acquisitionProcedure_name:""}}},computed:{paginatedAcquisitionProcedures(){return this.acquisitionProcedures},totalPages(){return this.perPage<=0?1:Math.ceil(this.totalItems/this.perPage)},pageNumbers(){const a=[],e=5;let t=Math.max(1,this.currentPage-Math.floor(e/2)),s=t+e-1;s>this.totalPages&&(s=this.totalPages,t=Math.max(1,s-e+1));for(let i=t;i<=s;i++)a.push(i);return a}},watch:{currentPage(){this.fetchAcquisitionProcedures(),this.jumpPage=this.currentPage},perPage(){this.currentPage=1,this.fetchAcquisitionProcedures()}},async mounted(){this.toast=(0,ln.dj)(),await this.fetchAcquisitionProcedures()},methods:{openAddModal(){this.acquisitionProcedureBeingEdited=null,this.isModalVisible=!0},openEditModal(a){this.acquisitionProcedureBeingEdited={...a},this.isModalVisible=!0},closeModal(){this.isModalVisible=!1,this.acquisitionProcedureBeingEdited=null},handleSaveSuccessful(){this.closeModal(),this.fetchAcquisitionProcedures()},async fetchAcquisitionProcedures(){try{const a={act:"prosedur-penguasaan",page:this.currentPage,limit:this.perPage,order:this.sortColumn?`${this.sortColumn} ${this.sortDirection}`:"",group:""},e=Object.entries(this.filters).filter(([a,e])=>""!==e).map(([a,e])=>`${a}=${e}`);e.length>0?a.filter=e.join(","):a.filter="";const t=await Dla(a),s=t.data?.data||t.data?.[0]?.data||[],i=t.data?.[0]?.meta?.pagination||{};this.acquisitionProcedures=s,this.totalItems=i.total||s.length}catch(a){console.error("Error fetching prosedur penguasaan:",a),this.$swal({icon:"error",title:"Oops...",text:"Gagal memuat data prosedur penguasaan. Silakan coba lagi nanti."})}},advancedDeleteAlert(a){this.$swal({title:"Hapus Data Prosedur Penguasaan",text:"Apakah Anda yakin ingin menghapus data ini?",icon:"warning",showCancelButton:!0,confirmButtonText:'<i class="fa fa-check me-2"></i> Hapus!',confirmButtonColor:"#d33",cancelButtonText:'<i class="fa fa-times me-2"></i> Batal',cancelButtonColor:"#efefef",reverseButtons:!0}).then(async e=>{if(e.isConfirmed)try{await Fla(a),1===this.acquisitionProcedures.length&&this.currentPage>1?this.currentPage--:this.fetchAcquisitionProcedures(),this.toast.success("Data prosedur penguasaan berhasil dihapus",{icon:"fa fa-check"})}catch(t){this.toast.error("Gagal menghapus data prosedur penguasaan",{icon:"fa fa-times"})}})},sortBy(a){this.sortColumn===a?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=a,this.sortDirection="asc"),this.fetchAcquisitionProcedures()},changePage(a){a>=1&&a<=this.totalPages&&(this.currentPage=a)},toggleFilterVisibility(){this.isFilterVisible=!this.isFilterVisible},applyFilters(){this.currentPage=1,this.fetchAcquisitionProcedures()},resetFilters(){this.filters.namaprosedurpenguasaan="",this.sortColumn="",this.sortDirection="asc",this.currentPage=1,this.fetchAcquisitionProcedures()}}};const Wla=(0,r.A)(Qla,[["render",Ela],["__scopeId","data-v-b834934c"]]);var Kla=Wla,Ola={components:{AcquisitionProceduresTable:Kla}};const $la=(0,r.A)(Ola,[["render",$ia]]);var Gla=$la;const Jla={class:"container-fluid"},qla={class:"row widget-grid"};function Hla(a,e,t,s,i,l){const o=(0,n.g2)("Breadcrumbs"),r=(0,n.g2)("AcquisitionsTable");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(o,{main:"Aset",title:a.$route.meta.title},null,8,["title"]),(0,n.Lk)("div",Jla,[(0,n.Lk)("div",qla,[(0,n.bF)(r)])])])}const Yla={class:"col-sm-12"},zla={class:"card"},Zla={class:"card-body"},ana={class:"d-flex justify-content-end align-items-start mb-3"},ena={class:"d-flex gap-2"},tna={key:0,class:"fa fa-angle-up me-2"},sna={key:1,class:"fa fa-angle-down me-2"},ina={key:0,class:"border p-3 mb-3 rounded filter-section"},lna={class:"row g-2"},nna={class:"col-md-4"},ona={class:"d-flex justify-content-end gap-2 mt-3"},rna={class:"table-responsive signal-table"},cna={class:"table table-hover"},dna={key:0,class:"fa fa-sort-asc"},una={key:1,class:"fa fa-sort-desc"},mna={key:2,class:"fa fa-sort"},kna={scope:"row"},hna={class:"btn-group"},gna=["onClick"],pna=["onClick"],bna={key:0},fna={class:"d-flex flex-column flex-md-row justify-content-md-between align-items-center mt-3 px-3 pb-3"},Lna={class:"mt-2"},yna={key:0,class:"text-muted"},vna={key:0,class:"d-flex align-items-center flex-wrap gap-2 mt-2"},Cna={class:"pagination mb-0"},Pna={key:0,class:"page-item"},Ena={key:1,class:"page-item disabled"},Dna=["onClick"],Mna={key:2,class:"page-item disabled"},wna={key:3,class:"page-item"};function Fna(a,e,t,s,i,o){const r=(0,n.g2)("add-edit-acquisition-modal");return(0,n.uX)(),(0,n.CE)("div",Yla,[i.isModalVisible?((0,n.uX)(),(0,n.Wv)(r,{key:0,"acquisition-to-edit":i.acquisitionBeingEdited,onClose:o.closeModal,onSaveSuccessful:o.handleSaveSuccessful},null,8,["acquisition-to-edit","onClose","onSaveSuccessful"])):(0,n.Q3)("",!0),(0,n.Lk)("div",zla,[e[26]||(e[26]=(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("h3",null,"Daftar Nama Perolehan")],-1)),(0,n.Lk)("div",Zla,[(0,n.Lk)("div",ana,[(0,n.Lk)("div",ena,[(0,n.Lk)("button",{class:"btn btn-outline-light txt-dark",onClick:e[0]||(e[0]=(...a)=>o.toggleFilterVisibility&&o.toggleFilterVisibility(...a))},[i.isFilterVisible?((0,n.uX)(),(0,n.CE)("i",tna)):((0,n.uX)(),(0,n.CE)("i",sna)),(0,n.Lk)("span",null,(0,k.v_)(i.isFilterVisible?"Sembunyikan":"Tampilkan")+" Filter",1)]),(0,n.Lk)("button",{class:"btn btn-success",onClick:e[1]||(e[1]=(...a)=>o.openAddModal&&o.openAddModal(...a))},e[10]||(e[10]=[(0,n.Lk)("i",{class:"fa fa-plus me-2"},null,-1),(0,n.Lk)("span",null," Tambah Data",-1)]))])]),i.isFilterVisible?((0,n.uX)(),(0,n.CE)("div",ina,[(0,n.Lk)("div",lna,[(0,n.Lk)("div",nna,[e[11]||(e[11]=(0,n.Lk)("label",{for:"filterName",class:"form-label"},"Nama Perolehan",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterName",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.filters.namaperolehan=a),placeholder:"Filter berdasarkan nam perolehan"},null,512),[[l.Jo,i.filters.namaperolehan]])])]),(0,n.Lk)("div",ona,[(0,n.Lk)("button",{class:"btn btn-secondary",onClick:e[3]||(e[3]=(...a)=>o.resetFilters&&o.resetFilters(...a))},e[12]||(e[12]=[(0,n.Lk)("i",{class:"fa fa-refresh me-2"},null,-1),(0,n.Lk)("span",null,"Reset Filter",-1)])),(0,n.Lk)("button",{class:"btn btn-primary",onClick:e[4]||(e[4]=(...a)=>o.applyFilters&&o.applyFilters(...a))},e[13]||(e[13]=[(0,n.Lk)("i",{class:"fa fa-search me-2"},null,-1),(0,n.Lk)("span",null,"Terapkan Filter",-1)]))])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",rna,[(0,n.Lk)("table",cna,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[e[15]||(e[15]=(0,n.Lk)("th",{scope:"col"},"No",-1)),(0,n.Lk)("th",{scope:"col",onClick:e[5]||(e[5]=a=>o.sortBy("namaperolehan"))},[e[14]||(e[14]=(0,n.eW)(" Nama Perolehan ")),"namaperolehan"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",dna)):"namaperolehan"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",una)):((0,n.uX)(),(0,n.CE)("i",mna))]),e[16]||(e[16]=(0,n.Lk)("th",{scope:"col"},"Aksi",-1))])]),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.paginatedAcquisitions,(a,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:a.idperolehan},[(0,n.Lk)("th",kna,(0,k.v_)((i.currentPage-1)*i.perPage+t+1),1),(0,n.Lk)("td",null,(0,k.v_)(a.namaperolehan),1),(0,n.Lk)("td",null,[(0,n.Lk)("div",hna,[(0,n.Lk)("button",{class:"btn btn-primary btn-sm",onClick:e=>o.openEditModal(a)},e[17]||(e[17]=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)]),8,gna),(0,n.Lk)("button",{class:"btn btn-danger sweet-11 btn-sm",type:"button",onClick:e=>o.advancedDeleteAlert(a.idperolehan)},e[18]||(e[18]=[(0,n.Lk)("i",{class:"fa fa-trash"},null,-1)]),8,pna)])])]))),128)),0===o.paginatedAcquisitions.length?((0,n.uX)(),(0,n.CE)("tr",bna,e[19]||(e[19]=[(0,n.Lk)("td",{colspan:"5",class:"text-center"},"Tidak ada data yang cocok atau tersedia.",-1)]))):(0,n.Q3)("",!0)])]),(0,n.Lk)("div",fna,[(0,n.Lk)("div",Lna,[i.totalItems>0?((0,n.uX)(),(0,n.CE)("span",yna,[e[20]||(e[20]=(0,n.eW)(" Menampilkan ")),(0,n.Lk)("strong",null,(0,k.v_)((i.currentPage-1)*i.perPage+1),1),e[21]||(e[21]=(0,n.eW)(" - ")),(0,n.Lk)("strong",null,(0,k.v_)(Math.min(i.currentPage*i.perPage,i.totalItems)),1),e[22]||(e[22]=(0,n.eW)(" dari ")),(0,n.Lk)("strong",null,(0,k.v_)(i.totalItems),1),e[23]||(e[23]=(0,n.eW)(" data "))])):(0,n.Q3)("",!0)]),-1!==i.perPage&&o.totalPages>1?((0,n.uX)(),(0,n.CE)("nav",vna,[(0,n.Lk)("ul",Cna,[(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[6]||(e[6]=a=>o.changePage(i.currentPage-1))},"Prev")],2),o.pageNumbers[0]>1?((0,n.uX)(),(0,n.CE)("li",Pna,[(0,n.Lk)("button",{class:"page-link",onClick:e[7]||(e[7]=a=>o.changePage(1))},"1")])):(0,n.Q3)("",!0),o.pageNumbers[0]>2?((0,n.uX)(),(0,n.CE)("li",Ena,e[24]||(e[24]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.pageNumbers,a=>((0,n.uX)(),(0,n.CE)("li",{key:a,class:(0,k.C4)(["page-item",{active:i.currentPage===a}])},[(0,n.Lk)("button",{class:"page-link",onClick:e=>o.changePage(a)},(0,k.v_)(a),9,Dna)],2))),128)),o.pageNumbers.slice(-1)[0]<o.totalPages-1?((0,n.uX)(),(0,n.CE)("li",Mna,e[25]||(e[25]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),o.pageNumbers.slice(-1)[0]<o.totalPages?((0,n.uX)(),(0,n.CE)("li",wna,[(0,n.Lk)("button",{class:"page-link",onClick:e[8]||(e[8]=a=>o.changePage(o.totalPages))},(0,k.v_)(o.totalPages),1)])):(0,n.Q3)("",!0),(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:i.currentPage===o.totalPages}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[9]||(e[9]=a=>o.changePage(i.currentPage+1))},"Next")],2)])])):(0,n.Q3)("",!0)])])])])}const Xna={class:"modal-header"},xna={class:"modal-title"},Tna={class:"modal-body"},Sna={class:"mb-3"},Bna={key:0,class:"alert alert-danger mt-3"},Ana={class:"modal-footer"},_na=["disabled"],jna={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},Vna={key:1};function Ina(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",{class:"modal-overlay",onClick:e[6]||(e[6]=(...a)=>o.handleOverlayClick&&o.handleOverlayClick(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[5]||(e[5]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",Xna,[(0,n.Lk)("h5",xna,(0,k.v_)(o.isEditMode?"Edit Data Perolehan":"Tambah Data Perolehan"),1),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",Tna,[(0,n.Lk)("form",{onSubmit:e[2]||(e[2]=(0,l.D$)((...a)=>o.submitForm&&o.submitForm(...a),["prevent"]))},[(0,n.Lk)("div",Sna,[e[7]||(e[7]=(0,n.Lk)("label",{for:"namaperolehan",class:"form-label"},"Nama Perolehan",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"namaPerolehan",placeholder:"Masukkan nama perolehan","onUpdate:modelValue":e[1]||(e[1]=a=>i.formData.namaperolehan=a),required:""},null,512),[[l.Jo,i.formData.namaperolehan]])]),i.errorMessage?((0,n.uX)(),(0,n.CE)("div",Bna,(0,k.v_)(i.errorMessage),1)):(0,n.Q3)("",!0)],32)]),(0,n.Lk)("div",Ana,[(0,n.Lk)("button",{type:"button",class:"btn btn-danger",onClick:e[3]||(e[3]=(...a)=>o.closeModal&&o.closeModal(...a))},"Batal"),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[4]||(e[4]=(...a)=>o.submitForm&&o.submitForm(...a)),disabled:i.isLoading},[i.isLoading?((0,n.uX)(),(0,n.CE)("span",jna)):((0,n.uX)(),(0,n.CE)("span",Vna,"Simpan"))],8,_na)])])])}var Nna={name:"editAcquisitionModal",props:{acquisitionToEdit:{type:Object,default:null}},created(){this.toast=(0,ln.dj)()},data(){return{formData:{namaperolehan:""},isLoading:!1,errorMessage:null}},computed:{isEditMode(){return!!this.acquisitionToEdit}},watch:{acquisitionToEdit:{handler(a){this.formData=a?{...a}:{namaperolehan:""},this.errorMessage=null},immediate:!0}},methods:{closeModal(){this.$emit("close")},handleOverlayClick(a){a.target===a.currentTarget&&this.closeModal()},async submitForm(){this.errorMessage=null;const{namaperolehan:a}=this.formData;if(a){this.isLoading=!0;try{this.isEditMode?(await UC(this.acquisitionToEdit.idperolehan,this.formData),this.toast.success("Data perolehan berhasil diperbarui",{icon:"fa fa-check"})):(await NC(this.formData),this.toast.success("Data perolehan berhasil ditambah",{icon:"fa fa-check"})),this.$emit("save-successful"),this.closeModal()}catch(e){console.error("Error occurred:",e),this.errorMessage=e.response?.data?.message||"Gagal menyimpan data.",this.toast.error("Gagal menyimpan data perolehan",{icon:"fa fa-times"})}finally{this.isLoading=!1}}else this.errorMessage="Semua field wajib diisi."}}};const Una=(0,r.A)(Nna,[["render",Ina],["__scopeId","data-v-bdf612a6"]]);var Rna=Una,Qna={components:{AddEditAcquisitionModal:Rna},data(){return{acquisitions:[],sortColumn:"",sortDirection:"asc",isModalVisible:!1,currentPage:1,perPage:20,totalItems:0,acquisitionBeingEdited:null,jumpPage:1,isFilterVisible:!1,filters:{acquisition_name:""}}},computed:{paginatedAcquisitions(){return this.acquisitions},totalPages(){return this.perPage<=0?1:Math.ceil(this.totalItems/this.perPage)},pageNumbers(){const a=[],e=5;let t=Math.max(1,this.currentPage-Math.floor(e/2)),s=t+e-1;s>this.totalPages&&(s=this.totalPages,t=Math.max(1,s-e+1));for(let i=t;i<=s;i++)a.push(i);return a}},watch:{currentPage(){this.fetchAcquisitions(),this.jumpPage=this.currentPage},perPage(){this.currentPage=1,this.fetchAcquisitions()}},async mounted(){this.toast=(0,ln.dj)(),await this.fetchAcquisitions()},methods:{openAddModal(){this.acquisitionBeingEdited=null,this.isModalVisible=!0},openEditModal(a){this.acquisitionBeingEdited={...a},this.isModalVisible=!0},closeModal(){this.isModalVisible=!1,this.acquisitionBeingEdited=null},handleSaveSuccessful(){this.closeModal(),this.fetchAcquisitions()},async fetchAcquisitions(){try{const a={act:"perolehan",page:this.currentPage,limit:this.perPage,order:this.sortColumn?`${this.sortColumn} ${this.sortDirection}`:"",group:""},e=Object.entries(this.filters).filter(([a,e])=>""!==e).map(([a,e])=>`${a}=${e}`);e.length>0?a.filter=e.join(","):a.filter="";const t=await IC(a),s=t.data?.data||t.data?.[0]?.data||[],i=t.data?.[0]?.meta?.pagination||{};this.acquisitions=s,this.totalItems=i.total||s.length}catch(a){console.error("Error fetching perolehan:",a),this.$swal({icon:"error",title:"Oops...",text:"Gagal memuat data perolehan. Silakan coba lagi nanti."})}},advancedDeleteAlert(a){this.$swal({title:"Hapus Data Perolehan",text:"Apakah Anda yakin ingin menghapus data ini?",icon:"warning",showCancelButton:!0,confirmButtonText:'<i class="fa fa-check me-2"></i> Hapus!',confirmButtonColor:"#d33",cancelButtonText:'<i class="fa fa-times me-2"></i> Batal',cancelButtonColor:"#efefef",reverseButtons:!0}).then(async e=>{if(e.isConfirmed)try{await RC(a),1===this.acquisitions.length&&this.currentPage>1?this.currentPage--:this.fetchAcquisitions(),this.toast.success("Data perolehan berhasil dihapus",{icon:"fa fa-check"})}catch(t){this.toast.error("Gagal menghapus data perolehan",{icon:"fa fa-times"})}})},sortBy(a){this.sortColumn===a?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=a,this.sortDirection="asc"),this.fetchAcquisitions()},changePage(a){a>=1&&a<=this.totalPages&&(this.currentPage=a)},toggleFilterVisibility(){this.isFilterVisible=!this.isFilterVisible},applyFilters(){this.currentPage=1,this.fetchAcquisitions()},resetFilters(){this.filters.namaperolehan="",this.sortColumn="",this.sortDirection="asc",this.currentPage=1,this.fetchAcquisitions()}}};const Wna=(0,r.A)(Qna,[["render",Fna],["__scopeId","data-v-30116011"]]);var Kna=Wna,Ona={components:{AcquisitionsTable:Kna}};const $na=(0,r.A)(Ona,[["render",Hla]]);var Gna=$na;const Jna={class:"container-fluid"},qna={class:"row widget-grid"};function Hna(a,e,t,s,i,l){const o=(0,n.g2)("Breadcrumbs"),r=(0,n.g2)("ConditionsTable");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(o,{main:"Aset",title:a.$route.meta.title},null,8,["title"]),(0,n.Lk)("div",Jna,[(0,n.Lk)("div",qna,[(0,n.bF)(r)])])])}const Yna={class:"col-sm-12"},zna={class:"card"},Zna={class:"card-body"},aoa={class:"d-flex justify-content-end align-items-start mb-3"},eoa={class:"d-flex gap-2"},toa={key:0,class:"fa fa-angle-up me-2"},soa={key:1,class:"fa fa-angle-down me-2"},ioa={key:0,class:"border p-3 mb-3 rounded filter-section"},loa={class:"row g-2"},noa={class:"col-md-4"},ooa={class:"d-flex justify-content-end gap-2 mt-3"},roa={class:"table-responsive signal-table"},coa={class:"table table-hover"},doa={key:0,class:"fa fa-sort-asc"},uoa={key:1,class:"fa fa-sort-desc"},moa={key:2,class:"fa fa-sort"},koa={scope:"row"},hoa={class:"btn-group"},goa=["onClick"],poa=["onClick"],boa={key:0},foa={class:"d-flex flex-column flex-md-row justify-content-md-between align-items-center mt-3 px-3 pb-3"},Loa={class:"mt-2"},yoa={key:0,class:"text-muted"},voa={key:0,class:"d-flex align-items-center flex-wrap gap-2 mt-2"},Coa={class:"pagination mb-0"},Poa={key:0,class:"page-item"},Eoa={key:1,class:"page-item disabled"},Doa=["onClick"],Moa={key:2,class:"page-item disabled"},woa={key:3,class:"page-item"};function Foa(a,e,t,s,i,o){const r=(0,n.g2)("add-edit-condition-modal");return(0,n.uX)(),(0,n.CE)("div",Yna,[i.isModalVisible?((0,n.uX)(),(0,n.Wv)(r,{key:0,"condition-to-edit":i.conditionBeingEdited,onClose:o.closeModal,onSaveSuccessful:o.handleSaveSuccessful},null,8,["condition-to-edit","onClose","onSaveSuccessful"])):(0,n.Q3)("",!0),(0,n.Lk)("div",zna,[e[26]||(e[26]=(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("h3",null,"Daftar Nama Kondisi")],-1)),(0,n.Lk)("div",Zna,[(0,n.Lk)("div",aoa,[(0,n.Lk)("div",eoa,[(0,n.Lk)("button",{class:"btn btn-outline-light txt-dark",onClick:e[0]||(e[0]=(...a)=>o.toggleFilterVisibility&&o.toggleFilterVisibility(...a))},[i.isFilterVisible?((0,n.uX)(),(0,n.CE)("i",toa)):((0,n.uX)(),(0,n.CE)("i",soa)),(0,n.Lk)("span",null,(0,k.v_)(i.isFilterVisible?"Sembunyikan":"Tampilkan")+" Filter",1)]),(0,n.Lk)("button",{class:"btn btn-success",onClick:e[1]||(e[1]=(...a)=>o.openAddModal&&o.openAddModal(...a))},e[10]||(e[10]=[(0,n.Lk)("i",{class:"fa fa-plus me-2"},null,-1),(0,n.Lk)("span",null," Tambah Data",-1)]))])]),i.isFilterVisible?((0,n.uX)(),(0,n.CE)("div",ioa,[(0,n.Lk)("div",loa,[(0,n.Lk)("div",noa,[e[11]||(e[11]=(0,n.Lk)("label",{for:"filterName",class:"form-label"},"Nama Kondisi",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterName",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.filters.namakondisi=a),placeholder:"Filter berdasarkan nama kondisi"},null,512),[[l.Jo,i.filters.namakondisi]])])]),(0,n.Lk)("div",ooa,[(0,n.Lk)("button",{class:"btn btn-secondary",onClick:e[3]||(e[3]=(...a)=>o.resetFilters&&o.resetFilters(...a))},e[12]||(e[12]=[(0,n.Lk)("i",{class:"fa fa-refresh me-2"},null,-1),(0,n.Lk)("span",null,"Reset Filter",-1)])),(0,n.Lk)("button",{class:"btn btn-primary",onClick:e[4]||(e[4]=(...a)=>o.applyFilters&&o.applyFilters(...a))},e[13]||(e[13]=[(0,n.Lk)("i",{class:"fa fa-search me-2"},null,-1),(0,n.Lk)("span",null,"Terapkan Filter",-1)]))])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",roa,[(0,n.Lk)("table",coa,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[e[15]||(e[15]=(0,n.Lk)("th",{scope:"col"},"No",-1)),(0,n.Lk)("th",{scope:"col",onClick:e[5]||(e[5]=a=>o.sortBy("namakondisi"))},[e[14]||(e[14]=(0,n.eW)(" Nama Kondisi ")),"namakondisi"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",doa)):"namakondisi"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",uoa)):((0,n.uX)(),(0,n.CE)("i",moa))]),e[16]||(e[16]=(0,n.Lk)("th",{scope:"col"},"Aksi",-1))])]),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.paginatedConditions,(a,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:a.idkondisi},[(0,n.Lk)("th",koa,(0,k.v_)((i.currentPage-1)*i.perPage+t+1),1),(0,n.Lk)("td",null,(0,k.v_)(a.namakondisi),1),(0,n.Lk)("td",null,[(0,n.Lk)("div",hoa,[(0,n.Lk)("button",{class:"btn btn-primary btn-sm",onClick:e=>o.openEditModal(a)},e[17]||(e[17]=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)]),8,goa),(0,n.Lk)("button",{class:"btn btn-danger sweet-11 btn-sm",type:"button",onClick:e=>o.advancedDeleteAlert(a.idkondisi)},e[18]||(e[18]=[(0,n.Lk)("i",{class:"fa fa-trash"},null,-1)]),8,poa)])])]))),128)),0===o.paginatedConditions.length?((0,n.uX)(),(0,n.CE)("tr",boa,e[19]||(e[19]=[(0,n.Lk)("td",{colspan:"5",class:"text-center"},"Tidak ada data yang cocok atau tersedia.",-1)]))):(0,n.Q3)("",!0)])]),(0,n.Lk)("div",foa,[(0,n.Lk)("div",Loa,[i.totalItems>0?((0,n.uX)(),(0,n.CE)("span",yoa,[e[20]||(e[20]=(0,n.eW)(" Menampilkan ")),(0,n.Lk)("strong",null,(0,k.v_)((i.currentPage-1)*i.perPage+1),1),e[21]||(e[21]=(0,n.eW)(" - ")),(0,n.Lk)("strong",null,(0,k.v_)(Math.min(i.currentPage*i.perPage,i.totalItems)),1),e[22]||(e[22]=(0,n.eW)(" dari ")),(0,n.Lk)("strong",null,(0,k.v_)(i.totalItems),1),e[23]||(e[23]=(0,n.eW)(" data "))])):(0,n.Q3)("",!0)]),-1!==i.perPage&&o.totalPages>1?((0,n.uX)(),(0,n.CE)("nav",voa,[(0,n.Lk)("ul",Coa,[(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[6]||(e[6]=a=>o.changePage(i.currentPage-1))},"Prev")],2),o.pageNumbers[0]>1?((0,n.uX)(),(0,n.CE)("li",Poa,[(0,n.Lk)("button",{class:"page-link",onClick:e[7]||(e[7]=a=>o.changePage(1))},"1")])):(0,n.Q3)("",!0),o.pageNumbers[0]>2?((0,n.uX)(),(0,n.CE)("li",Eoa,e[24]||(e[24]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.pageNumbers,a=>((0,n.uX)(),(0,n.CE)("li",{key:a,class:(0,k.C4)(["page-item",{active:i.currentPage===a}])},[(0,n.Lk)("button",{class:"page-link",onClick:e=>o.changePage(a)},(0,k.v_)(a),9,Doa)],2))),128)),o.pageNumbers.slice(-1)[0]<o.totalPages-1?((0,n.uX)(),(0,n.CE)("li",Moa,e[25]||(e[25]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),o.pageNumbers.slice(-1)[0]<o.totalPages?((0,n.uX)(),(0,n.CE)("li",woa,[(0,n.Lk)("button",{class:"page-link",onClick:e[8]||(e[8]=a=>o.changePage(o.totalPages))},(0,k.v_)(o.totalPages),1)])):(0,n.Q3)("",!0),(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:i.currentPage===o.totalPages}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[9]||(e[9]=a=>o.changePage(i.currentPage+1))},"Next")],2)])])):(0,n.Q3)("",!0)])])])])}const Xoa={class:"modal-header"},xoa={class:"modal-title"},Toa={class:"modal-body"},Soa={class:"mb-3"},Boa={key:0,class:"alert alert-danger mt-3"},Aoa={class:"modal-footer"},_oa=["disabled"],joa={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},Voa={key:1};function Ioa(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",{class:"modal-overlay",onClick:e[6]||(e[6]=(...a)=>o.handleOverlayClick&&o.handleOverlayClick(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[5]||(e[5]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",Xoa,[(0,n.Lk)("h5",xoa,(0,k.v_)(o.isEditMode?"Edit Data Kondisi":"Tambah Data Kondisi"),1),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",Toa,[(0,n.Lk)("form",{onSubmit:e[2]||(e[2]=(0,l.D$)((...a)=>o.submitForm&&o.submitForm(...a),["prevent"]))},[(0,n.Lk)("div",Soa,[e[7]||(e[7]=(0,n.Lk)("label",{for:"namakondisi",class:"form-label"},"Nama Kondisi",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"namaKondisi",placeholder:"Masukkan nama kondisi","onUpdate:modelValue":e[1]||(e[1]=a=>i.formData.namakondisi=a),required:""},null,512),[[l.Jo,i.formData.namakondisi]])]),i.errorMessage?((0,n.uX)(),(0,n.CE)("div",Boa,(0,k.v_)(i.errorMessage),1)):(0,n.Q3)("",!0)],32)]),(0,n.Lk)("div",Aoa,[(0,n.Lk)("button",{type:"button",class:"btn btn-danger",onClick:e[3]||(e[3]=(...a)=>o.closeModal&&o.closeModal(...a))},"Batal"),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[4]||(e[4]=(...a)=>o.submitForm&&o.submitForm(...a)),disabled:i.isLoading},[i.isLoading?((0,n.uX)(),(0,n.CE)("span",joa)):((0,n.uX)(),(0,n.CE)("span",Voa,"Simpan"))],8,_oa)])])])}var Noa={name:"editConditionModal",props:{conditionToEdit:{type:Object,default:null}},created(){this.toast=(0,ln.dj)()},data(){return{formData:{namakondisi:""},isLoading:!1,errorMessage:null}},computed:{isEditMode(){return!!this.conditionToEdit}},watch:{conditionToEdit:{handler(a){this.formData=a?{...a}:{namakondisi:""},this.errorMessage=null},immediate:!0}},methods:{closeModal(){this.$emit("close")},handleOverlayClick(a){a.target===a.currentTarget&&this.closeModal()},async submitForm(){this.errorMessage=null;const{namakondisi:a}=this.formData;if(a){this.isLoading=!0;try{this.isEditMode?(await Wv(this.conditionToEdit.idkondisi,this.formData),this.toast.success("Data kondisi berhasil diperbarui",{icon:"fa fa-check"})):(await Qv(this.formData),this.toast.success("Data kondisi berhasil ditambah",{icon:"fa fa-check"})),this.$emit("save-successful"),this.closeModal()}catch(e){console.error("Error occurred:",e),this.errorMessage=e.response?.data?.message||"Gagal menyimpan data.",this.toast.error("Gagal menyimpan data kondisi",{icon:"fa fa-times"})}finally{this.isLoading=!1}}else this.errorMessage="Semua field wajib diisi."}}};const Uoa=(0,r.A)(Noa,[["render",Ioa],["__scopeId","data-v-0bf84cd7"]]);var Roa=Uoa,Qoa={components:{AddEditConditionModal:Roa},data(){return{conditions:[],sortColumn:"",sortDirection:"asc",isModalVisible:!1,currentPage:1,perPage:20,totalItems:0,conditionBeingEdited:null,jumpPage:1,isFilterVisible:!1,filters:{condition_name:""}}},computed:{paginatedConditions(){return this.conditions},totalPages(){return this.perPage<=0?1:Math.ceil(this.totalItems/this.perPage)},pageNumbers(){const a=[],e=5;let t=Math.max(1,this.currentPage-Math.floor(e/2)),s=t+e-1;s>this.totalPages&&(s=this.totalPages,t=Math.max(1,s-e+1));for(let i=t;i<=s;i++)a.push(i);return a}},watch:{currentPage(){this.fetchConditions(),this.jumpPage=this.currentPage},perPage(){this.currentPage=1,this.fetchConditions()}},async mounted(){this.toast=(0,ln.dj)(),await this.fetchConditions()},methods:{openAddModal(){this.conditionBeingEdited=null,this.isModalVisible=!0},openEditModal(a){this.conditionBeingEdited={...a},this.isModalVisible=!0},closeModal(){this.isModalVisible=!1,this.conditionBeingEdited=null},handleSaveSuccessful(){this.closeModal(),this.fetchConditions()},async fetchConditions(){try{const a={act:"kondisi",page:this.currentPage,limit:this.perPage,order:this.sortColumn?`${this.sortColumn} ${this.sortDirection}`:"",group:""},e=Object.entries(this.filters).filter(([a,e])=>""!==e).map(([a,e])=>`${a}=${e}`);e.length>0?a.filter=e.join(","):a.filter="";const t=await Rv(a),s=t.data?.data||t.data?.[0]?.data||[],i=t.data?.[0]?.meta?.pagination||{};this.conditions=s,this.totalItems=i.total||s.length}catch(a){console.error("Error fetching kondisi:",a),this.$swal({icon:"error",title:"Oops...",text:"Gagal memuat data kondisi. Silakan coba lagi nanti."})}},advancedDeleteAlert(a){this.$swal({title:"Hapus Data Kondisi",text:"Apakah Anda yakin ingin menghapus data ini?",icon:"warning",showCancelButton:!0,confirmButtonText:'<i class="fa fa-check me-2"></i> Hapus!',confirmButtonColor:"#d33",cancelButtonText:'<i class="fa fa-times me-2"></i> Batal',cancelButtonColor:"#efefef",reverseButtons:!0}).then(async e=>{if(e.isConfirmed)try{await Kv(a),1===this.conditions.length&&this.currentPage>1?this.currentPage--:this.fetchConditions(),this.toast.success("Data kondisi berhasil dihapus",{icon:"fa fa-check"})}catch(t){this.toast.error("Gagal menghapus data kondisi",{icon:"fa fa-times"})}})},sortBy(a){this.sortColumn===a?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=a,this.sortDirection="asc"),this.fetchConditions()},changePage(a){a>=1&&a<=this.totalPages&&(this.currentPage=a)},toggleFilterVisibility(){this.isFilterVisible=!this.isFilterVisible},applyFilters(){this.currentPage=1,this.fetchConditions()},resetFilters(){this.filters.namakondisi="",this.sortColumn="",this.sortDirection="asc",this.currentPage=1,this.fetchConditions()}}};const Woa=(0,r.A)(Qoa,[["render",Foa],["__scopeId","data-v-2e7b1a18"]]);var Koa=Woa,Ooa={components:{ConditionsTable:Koa}};const $oa=(0,r.A)(Ooa,[["render",Hna]]);var Goa=$oa;const Joa={class:"container-fluid"},qoa={class:"row widget-grid"};function Hoa(a,e,t,s,i,l){const o=(0,n.g2)("Breadcrumbs"),r=(0,n.g2)("MultiStoryConstructionTable");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(o,{main:"Aset",title:a.$route.meta.title},null,8,["title"]),(0,n.Lk)("div",Joa,[(0,n.Lk)("div",qoa,[(0,n.bF)(r)])])])}const Yoa={class:"col-sm-12"},zoa={class:"card"},Zoa={class:"card-body"},ara={class:"d-flex justify-content-end align-items-start mb-3"},era={class:"d-flex gap-2"},tra={key:0,class:"fa fa-angle-up me-2"},sra={key:1,class:"fa fa-angle-down me-2"},ira={key:0,class:"border p-3 mb-3 rounded filter-section"},lra={class:"row g-2"},nra={class:"col-md-4"},ora={class:"d-flex justify-content-end gap-2 mt-3"},rra={class:"table-responsive signal-table"},cra={class:"table table-hover"},dra={key:0,class:"fa fa-sort-asc"},ura={key:1,class:"fa fa-sort-desc"},mra={key:2,class:"fa fa-sort"},kra={scope:"row"},hra={class:"btn-group"},gra=["onClick"],pra=["onClick"],bra={key:0},fra={class:"d-flex flex-column flex-md-row justify-content-md-between align-items-center mt-3 px-3 pb-3"},Lra={class:"mt-2"},yra={key:0,class:"text-muted"},vra={key:0,class:"d-flex align-items-center flex-wrap gap-2 mt-2"},Cra={class:"pagination mb-0"},Pra={key:0,class:"page-item"},Era={key:1,class:"page-item disabled"},Dra=["onClick"],Mra={key:2,class:"page-item disabled"},wra={key:3,class:"page-item"};function Fra(a,e,t,s,i,o){const r=(0,n.g2)("add-edit-multiStoryConstruction-modal");return(0,n.uX)(),(0,n.CE)("div",Yoa,[i.isModalVisible?((0,n.uX)(),(0,n.Wv)(r,{key:0,"multiStoryConstruction-to-edit":i.multiStoryConstructionBeingEdited,onClose:o.closeModal,onSaveSuccessful:o.handleSaveSuccessful},null,8,["multiStoryConstruction-to-edit","onClose","onSaveSuccessful"])):(0,n.Q3)("",!0),(0,n.Lk)("div",zoa,[e[26]||(e[26]=(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("h3",null,"Daftar Nama Kontruksi Bertingkat")],-1)),(0,n.Lk)("div",Zoa,[(0,n.Lk)("div",ara,[(0,n.Lk)("div",era,[(0,n.Lk)("button",{class:"btn btn-outline-light txt-dark",onClick:e[0]||(e[0]=(...a)=>o.toggleFilterVisibility&&o.toggleFilterVisibility(...a))},[i.isFilterVisible?((0,n.uX)(),(0,n.CE)("i",tra)):((0,n.uX)(),(0,n.CE)("i",sra)),(0,n.Lk)("span",null,(0,k.v_)(i.isFilterVisible?"Sembunyikan":"Tampilkan")+" Filter",1)]),(0,n.Lk)("button",{class:"btn btn-success",onClick:e[1]||(e[1]=(...a)=>o.openAddModal&&o.openAddModal(...a))},e[10]||(e[10]=[(0,n.Lk)("i",{class:"fa fa-plus me-2"},null,-1),(0,n.Lk)("span",null," Tambah Data",-1)]))])]),i.isFilterVisible?((0,n.uX)(),(0,n.CE)("div",ira,[(0,n.Lk)("div",lra,[(0,n.Lk)("div",nra,[e[11]||(e[11]=(0,n.Lk)("label",{for:"filterName",class:"form-label"},"Nama Kontruksi Bertingkat",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterName",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.filters.namakonstruksibertingkat=a),placeholder:"Filter berdasarkan nama kontruksi bertingkat"},null,512),[[l.Jo,i.filters.namakonstruksibertingkat]])])]),(0,n.Lk)("div",ora,[(0,n.Lk)("button",{class:"btn btn-secondary",onClick:e[3]||(e[3]=(...a)=>o.resetFilters&&o.resetFilters(...a))},e[12]||(e[12]=[(0,n.Lk)("i",{class:"fa fa-refresh me-2"},null,-1),(0,n.Lk)("span",null,"Reset Filter",-1)])),(0,n.Lk)("button",{class:"btn btn-primary",onClick:e[4]||(e[4]=(...a)=>o.applyFilters&&o.applyFilters(...a))},e[13]||(e[13]=[(0,n.Lk)("i",{class:"fa fa-search me-2"},null,-1),(0,n.Lk)("span",null,"Terapkan Filter",-1)]))])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",rra,[(0,n.Lk)("table",cra,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[e[15]||(e[15]=(0,n.Lk)("th",{scope:"col"},"No",-1)),(0,n.Lk)("th",{scope:"col",onClick:e[5]||(e[5]=a=>o.sortBy("namakonstruksibertingkat"))},[e[14]||(e[14]=(0,n.eW)(" Nama Kontruksi Bertingkat ")),"namakonstruksibertingkat"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",dra)):"namakonstruksibertingkat"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",ura)):((0,n.uX)(),(0,n.CE)("i",mra))]),e[16]||(e[16]=(0,n.Lk)("th",{scope:"col"},"Aksi",-1))])]),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.paginatedMultiStoryConstructions,(a,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:a.idkonstruksibertingkat},[(0,n.Lk)("th",kra,(0,k.v_)((i.currentPage-1)*i.perPage+t+1),1),(0,n.Lk)("td",null,(0,k.v_)(a.namakonstruksibertingkat),1),(0,n.Lk)("td",null,[(0,n.Lk)("div",hra,[(0,n.Lk)("button",{class:"btn btn-primary btn-sm",onClick:e=>o.openEditModal(a)},e[17]||(e[17]=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)]),8,gra),(0,n.Lk)("button",{class:"btn btn-danger sweet-11 btn-sm",type:"button",onClick:e=>o.advancedDeleteAlert(a.idkonstruksibertingkat)},e[18]||(e[18]=[(0,n.Lk)("i",{class:"fa fa-trash"},null,-1)]),8,pra)])])]))),128)),0===o.paginatedMultiStoryConstructions.length?((0,n.uX)(),(0,n.CE)("tr",bra,e[19]||(e[19]=[(0,n.Lk)("td",{colspan:"5",class:"text-center"},"Tidak ada data yang cocok atau tersedia.",-1)]))):(0,n.Q3)("",!0)])]),(0,n.Lk)("div",fra,[(0,n.Lk)("div",Lra,[i.totalItems>0?((0,n.uX)(),(0,n.CE)("span",yra,[e[20]||(e[20]=(0,n.eW)(" Menampilkan ")),(0,n.Lk)("strong",null,(0,k.v_)((i.currentPage-1)*i.perPage+1),1),e[21]||(e[21]=(0,n.eW)(" - ")),(0,n.Lk)("strong",null,(0,k.v_)(Math.min(i.currentPage*i.perPage,i.totalItems)),1),e[22]||(e[22]=(0,n.eW)(" dari ")),(0,n.Lk)("strong",null,(0,k.v_)(i.totalItems),1),e[23]||(e[23]=(0,n.eW)(" data "))])):(0,n.Q3)("",!0)]),-1!==i.perPage&&o.totalPages>1?((0,n.uX)(),(0,n.CE)("nav",vra,[(0,n.Lk)("ul",Cra,[(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[6]||(e[6]=a=>o.changePage(i.currentPage-1))},"Prev")],2),o.pageNumbers[0]>1?((0,n.uX)(),(0,n.CE)("li",Pra,[(0,n.Lk)("button",{class:"page-link",onClick:e[7]||(e[7]=a=>o.changePage(1))},"1")])):(0,n.Q3)("",!0),o.pageNumbers[0]>2?((0,n.uX)(),(0,n.CE)("li",Era,e[24]||(e[24]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.pageNumbers,a=>((0,n.uX)(),(0,n.CE)("li",{key:a,class:(0,k.C4)(["page-item",{active:i.currentPage===a}])},[(0,n.Lk)("button",{class:"page-link",onClick:e=>o.changePage(a)},(0,k.v_)(a),9,Dra)],2))),128)),o.pageNumbers.slice(-1)[0]<o.totalPages-1?((0,n.uX)(),(0,n.CE)("li",Mra,e[25]||(e[25]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),o.pageNumbers.slice(-1)[0]<o.totalPages?((0,n.uX)(),(0,n.CE)("li",wra,[(0,n.Lk)("button",{class:"page-link",onClick:e[8]||(e[8]=a=>o.changePage(o.totalPages))},(0,k.v_)(o.totalPages),1)])):(0,n.Q3)("",!0),(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:i.currentPage===o.totalPages}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[9]||(e[9]=a=>o.changePage(i.currentPage+1))},"Next")],2)])])):(0,n.Q3)("",!0)])])])])}const Xra=(a={})=>Na.get("",{params:{act:"konstruksi-bertingkat",...a}}),xra=a=>Na.post("",{act:"konstruksi-bertingkat",record:a}),Tra=(a,e)=>a?Na.put("",{act:"konstruksi-bertingkat",key:a,record:e}):Promise.reject(new Error("ID kontruksi bertingkat tidak tersedia.")),Sra=a=>a?Na.delete("",{data:{act:"konstruksi-bertingkat",key:a}}):Promise.reject(new Error("ID kontruksi bertingkat tidak tersedia.")),Bra={class:"modal-header"},Ara={class:"modal-title"},_ra={class:"modal-body"},jra={class:"mb-3"},Vra={key:0,class:"alert alert-danger mt-3"},Ira={class:"modal-footer"},Nra=["disabled"],Ura={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},Rra={key:1};function Qra(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",{class:"modal-overlay",onClick:e[6]||(e[6]=(...a)=>o.handleOverlayClick&&o.handleOverlayClick(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[5]||(e[5]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",Bra,[(0,n.Lk)("h5",Ara,(0,k.v_)(o.isEditMode?"Edit Data Kontruksi Bertingkat":"Tambah Data Kontruksi Bertingkat"),1),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",_ra,[(0,n.Lk)("form",{onSubmit:e[2]||(e[2]=(0,l.D$)((...a)=>o.submitForm&&o.submitForm(...a),["prevent"]))},[(0,n.Lk)("div",jra,[e[7]||(e[7]=(0,n.Lk)("label",{for:"namakonstruksibertingkat",class:"form-label"},"Nama Kontruksi Bertingkat",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"namaKontruksiBertingkat",placeholder:"Masukkan nama kontruksi bertingkat","onUpdate:modelValue":e[1]||(e[1]=a=>i.formData.namakonstruksibertingkat=a),required:""},null,512),[[l.Jo,i.formData.namakonstruksibertingkat]])]),i.errorMessage?((0,n.uX)(),(0,n.CE)("div",Vra,(0,k.v_)(i.errorMessage),1)):(0,n.Q3)("",!0)],32)]),(0,n.Lk)("div",Ira,[(0,n.Lk)("button",{type:"button",class:"btn btn-danger",onClick:e[3]||(e[3]=(...a)=>o.closeModal&&o.closeModal(...a))},"Batal"),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[4]||(e[4]=(...a)=>o.submitForm&&o.submitForm(...a)),disabled:i.isLoading},[i.isLoading?((0,n.uX)(),(0,n.CE)("span",Ura)):((0,n.uX)(),(0,n.CE)("span",Rra,"Simpan"))],8,Nra)])])])}var Wra={name:"editMultiStoryConstructionModal",props:{multiStoryConstructionToEdit:{type:Object,default:null}},created(){this.toast=(0,ln.dj)()},data(){return{formData:{namakonstruksibertingkat:""},isLoading:!1,errorMessage:null}},computed:{isEditMode(){return!!this.multiStoryConstructionToEdit}},watch:{multiStoryConstructionToEdit:{handler(a){this.formData=a?{...a}:{namakonstruksibertingkat:""},this.errorMessage=null},immediate:!0}},methods:{closeModal(){this.$emit("close")},handleOverlayClick(a){a.target===a.currentTarget&&this.closeModal()},async submitForm(){this.errorMessage=null;const{namakonstruksibertingkat:a}=this.formData;if(a){this.isLoading=!0;try{this.isEditMode?(await Tra(this.multiStoryConstructionToEdit.idkonstruksibertingkat,this.formData),this.toast.success("Data konstruksi bertingkat berhasil diperbarui",{icon:"fa fa-check"})):(await xra(this.formData),this.toast.success("Data konstruksi bertingkat berhasil ditambah",{icon:"fa fa-check"})),this.$emit("save-successful"),this.closeModal()}catch(e){console.error("Error occurred:",e),this.errorMessage=e.response?.data?.message||"Gagal menyimpan data.",this.toast.error("Gagal menyimpan data konstruksi bertingkat",{icon:"fa fa-times"})}finally{this.isLoading=!1}}else this.errorMessage="Semua field wajib diisi."}}};const Kra=(0,r.A)(Wra,[["render",Qra],["__scopeId","data-v-07e0411f"]]);var Ora=Kra,$ra={components:{AddEditMultiStoryConstructionModal:Ora},data(){return{multiStoryConstructions:[],sortColumn:"",sortDirection:"asc",isModalVisible:!1,currentPage:1,perPage:20,totalItems:0,multiStoryConstructionBeingEdited:null,jumpPage:1,isFilterVisible:!1,filters:{multiStoryConstruction_name:""}}},computed:{paginatedMultiStoryConstructions(){return this.multiStoryConstructions},totalPages(){return this.perPage<=0?1:Math.ceil(this.totalItems/this.perPage)},pageNumbers(){const a=[],e=5;let t=Math.max(1,this.currentPage-Math.floor(e/2)),s=t+e-1;s>this.totalPages&&(s=this.totalPages,t=Math.max(1,s-e+1));for(let i=t;i<=s;i++)a.push(i);return a}},watch:{currentPage(){this.fetchMultiStoryConstructions(),this.jumpPage=this.currentPage},perPage(){this.currentPage=1,this.fetchMultiStoryConstructions()}},async mounted(){this.toast=(0,ln.dj)(),await this.fetchMultiStoryConstructions()},methods:{openAddModal(){this.multiStoryConstructionBeingEdited=null,this.isModalVisible=!0},openEditModal(a){this.multiStoryConstructionBeingEdited={...a},this.isModalVisible=!0},closeModal(){this.isModalVisible=!1,this.multiStoryConstructionBeingEdited=null},handleSaveSuccessful(){this.closeModal(),this.fetchMultiStoryConstructions()},async fetchMultiStoryConstructions(){try{const a={act:"konstruksi-bertingkat",page:this.currentPage,limit:this.perPage,order:this.sortColumn?`${this.sortColumn} ${this.sortDirection}`:"",group:""},e=Object.entries(this.filters).filter(([a,e])=>""!==e).map(([a,e])=>`${a}=${e}`);e.length>0?a.filter=e.join(","):a.filter="";const t=await Xra(a),s=t.data?.data||t.data?.[0]?.data||[],i=t.data?.[0]?.meta?.pagination||{};this.multiStoryConstructions=s,this.totalItems=i.total||s.length}catch(a){console.error("Error fetching konstruksi bertingkat:",a),this.$swal({icon:"error",title:"Oops...",text:"Gagal memuat data konstruksi bertingkat. Silakan coba lagi nanti."})}},advancedDeleteAlert(a){this.$swal({title:"Hapus Data Kontruksi Bertingkat",text:"Apakah Anda yakin ingin menghapus data ini?",icon:"warning",showCancelButton:!0,confirmButtonText:'<i class="fa fa-check me-2"></i> Hapus!',confirmButtonColor:"#d33",cancelButtonText:'<i class="fa fa-times me-2"></i> Batal',cancelButtonColor:"#efefef",reverseButtons:!0}).then(async e=>{if(e.isConfirmed)try{await Sra(a),1===this.multiStoryConstructions.length&&this.currentPage>1?this.currentPage--:this.fetchMultiStoryConstructions(),this.toast.success("Data konstruksi bertingkat berhasil dihapus",{icon:"fa fa-check"})}catch(t){this.toast.error("Gagal menghapus data konstruksi bertingkat",{icon:"fa fa-times"})}})},sortBy(a){this.sortColumn===a?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=a,this.sortDirection="asc"),this.fetchMultiStoryConstructions()},changePage(a){a>=1&&a<=this.totalPages&&(this.currentPage=a)},toggleFilterVisibility(){this.isFilterVisible=!this.isFilterVisible},applyFilters(){this.currentPage=1,this.fetchMultiStoryConstructions()},resetFilters(){this.filters.namakonstruksibertingkat="",this.sortColumn="",this.sortDirection="asc",this.currentPage=1,this.fetchMultiStoryConstructions()}}};const Gra=(0,r.A)($ra,[["render",Fra],["__scopeId","data-v-759a1535"]]);var Jra=Gra,qra={components:{MultiStoryConstructionTable:Jra}};const Hra=(0,r.A)(qra,[["render",Hoa]]);var Yra=Hra;const zra={class:"container-fluid"},Zra={class:"row widget-grid"};function aca(a,e,t,s,i,l){const o=(0,n.g2)("Breadcrumbs"),r=(0,n.g2)("ConcreteConstructionTable");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(o,{main:"Aset",title:a.$route.meta.title},null,8,["title"]),(0,n.Lk)("div",zra,[(0,n.Lk)("div",Zra,[(0,n.bF)(r)])])])}const eca={class:"col-sm-12"},tca={class:"card"},sca={class:"card-body"},ica={class:"d-flex justify-content-end align-items-start mb-3"},lca={class:"d-flex gap-2"},nca={key:0,class:"fa fa-angle-up me-2"},oca={key:1,class:"fa fa-angle-down me-2"},rca={key:0,class:"border p-3 mb-3 rounded filter-section"},cca={class:"row g-2"},dca={class:"col-md-4"},uca={class:"d-flex justify-content-end gap-2 mt-3"},mca={class:"table-responsive signal-table"},kca={class:"table table-hover"},hca={key:0,class:"fa fa-sort-asc"},gca={key:1,class:"fa fa-sort-desc"},pca={key:2,class:"fa fa-sort"},bca={scope:"row"},fca={class:"btn-group"},Lca=["onClick"],yca=["onClick"],vca={key:0},Cca={class:"d-flex flex-column flex-md-row justify-content-md-between align-items-center mt-3 px-3 pb-3"},Pca={class:"mt-2"},Eca={key:0,class:"text-muted"},Dca={key:0,class:"d-flex align-items-center flex-wrap gap-2 mt-2"},Mca={class:"pagination mb-0"},wca={key:0,class:"page-item"},Fca={key:1,class:"page-item disabled"},Xca=["onClick"],xca={key:2,class:"page-item disabled"},Tca={key:3,class:"page-item"};function Sca(a,e,t,s,i,o){const r=(0,n.g2)("add-edit-concreteConstruction-modal");return(0,n.uX)(),(0,n.CE)("div",eca,[i.isModalVisible?((0,n.uX)(),(0,n.Wv)(r,{key:0,"concreteConstruction-to-edit":i.concreteConstructionBeingEdited,onClose:o.closeModal,onSaveSuccessful:o.handleSaveSuccessful},null,8,["concreteConstruction-to-edit","onClose","onSaveSuccessful"])):(0,n.Q3)("",!0),(0,n.Lk)("div",tca,[e[26]||(e[26]=(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("h3",null,"Daftar Nama Kontruksi Beton")],-1)),(0,n.Lk)("div",sca,[(0,n.Lk)("div",ica,[(0,n.Lk)("div",lca,[(0,n.Lk)("button",{class:"btn btn-outline-light txt-dark",onClick:e[0]||(e[0]=(...a)=>o.toggleFilterVisibility&&o.toggleFilterVisibility(...a))},[i.isFilterVisible?((0,n.uX)(),(0,n.CE)("i",nca)):((0,n.uX)(),(0,n.CE)("i",oca)),(0,n.Lk)("span",null,(0,k.v_)(i.isFilterVisible?"Sembunyikan":"Tampilkan")+" Filter",1)]),(0,n.Lk)("button",{class:"btn btn-success",onClick:e[1]||(e[1]=(...a)=>o.openAddModal&&o.openAddModal(...a))},e[10]||(e[10]=[(0,n.Lk)("i",{class:"fa fa-plus me-2"},null,-1),(0,n.Lk)("span",null," Tambah Data",-1)]))])]),i.isFilterVisible?((0,n.uX)(),(0,n.CE)("div",rca,[(0,n.Lk)("div",cca,[(0,n.Lk)("div",dca,[e[11]||(e[11]=(0,n.Lk)("label",{for:"filterName",class:"form-label"},"Nama Kontruksi Beton",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterName",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.filters.namakonstruksibeton=a),placeholder:"Filter berdasarkan nama kontruksi beton"},null,512),[[l.Jo,i.filters.namakonstruksibeton]])])]),(0,n.Lk)("div",uca,[(0,n.Lk)("button",{class:"btn btn-secondary",onClick:e[3]||(e[3]=(...a)=>o.resetFilters&&o.resetFilters(...a))},e[12]||(e[12]=[(0,n.Lk)("i",{class:"fa fa-refresh me-2"},null,-1),(0,n.Lk)("span",null,"Reset Filter",-1)])),(0,n.Lk)("button",{class:"btn btn-primary",onClick:e[4]||(e[4]=(...a)=>o.applyFilters&&o.applyFilters(...a))},e[13]||(e[13]=[(0,n.Lk)("i",{class:"fa fa-search me-2"},null,-1),(0,n.Lk)("span",null,"Terapkan Filter",-1)]))])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",mca,[(0,n.Lk)("table",kca,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[e[15]||(e[15]=(0,n.Lk)("th",{scope:"col"},"No",-1)),(0,n.Lk)("th",{scope:"col",onClick:e[5]||(e[5]=a=>o.sortBy("namakonstruksibeton"))},[e[14]||(e[14]=(0,n.eW)(" Nama Kontruksi Beton ")),"namakonstruksibeton"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",hca)):"namakonstruksibeton"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",gca)):((0,n.uX)(),(0,n.CE)("i",pca))]),e[16]||(e[16]=(0,n.Lk)("th",{scope:"col"},"Aksi",-1))])]),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.paginatedConcreteConstructions,(a,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:a.idkonstruksibeton},[(0,n.Lk)("th",bca,(0,k.v_)((i.currentPage-1)*i.perPage+t+1),1),(0,n.Lk)("td",null,(0,k.v_)(a.namakonstruksibeton),1),(0,n.Lk)("td",null,[(0,n.Lk)("div",fca,[(0,n.Lk)("button",{class:"btn btn-primary btn-sm",onClick:e=>o.openEditModal(a)},e[17]||(e[17]=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)]),8,Lca),(0,n.Lk)("button",{class:"btn btn-danger sweet-11 btn-sm",type:"button",onClick:e=>o.advancedDeleteAlert(a.idkonstruksibeton)},e[18]||(e[18]=[(0,n.Lk)("i",{class:"fa fa-trash"},null,-1)]),8,yca)])])]))),128)),0===o.paginatedConcreteConstructions.length?((0,n.uX)(),(0,n.CE)("tr",vca,e[19]||(e[19]=[(0,n.Lk)("td",{colspan:"5",class:"text-center"},"Tidak ada data yang cocok atau tersedia.",-1)]))):(0,n.Q3)("",!0)])]),(0,n.Lk)("div",Cca,[(0,n.Lk)("div",Pca,[i.totalItems>0?((0,n.uX)(),(0,n.CE)("span",Eca,[e[20]||(e[20]=(0,n.eW)(" Menampilkan ")),(0,n.Lk)("strong",null,(0,k.v_)((i.currentPage-1)*i.perPage+1),1),e[21]||(e[21]=(0,n.eW)(" - ")),(0,n.Lk)("strong",null,(0,k.v_)(Math.min(i.currentPage*i.perPage,i.totalItems)),1),e[22]||(e[22]=(0,n.eW)(" dari ")),(0,n.Lk)("strong",null,(0,k.v_)(i.totalItems),1),e[23]||(e[23]=(0,n.eW)(" data "))])):(0,n.Q3)("",!0)]),-1!==i.perPage&&o.totalPages>1?((0,n.uX)(),(0,n.CE)("nav",Dca,[(0,n.Lk)("ul",Mca,[(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[6]||(e[6]=a=>o.changePage(i.currentPage-1))},"Prev")],2),o.pageNumbers[0]>1?((0,n.uX)(),(0,n.CE)("li",wca,[(0,n.Lk)("button",{class:"page-link",onClick:e[7]||(e[7]=a=>o.changePage(1))},"1")])):(0,n.Q3)("",!0),o.pageNumbers[0]>2?((0,n.uX)(),(0,n.CE)("li",Fca,e[24]||(e[24]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.pageNumbers,a=>((0,n.uX)(),(0,n.CE)("li",{key:a,class:(0,k.C4)(["page-item",{active:i.currentPage===a}])},[(0,n.Lk)("button",{class:"page-link",onClick:e=>o.changePage(a)},(0,k.v_)(a),9,Xca)],2))),128)),o.pageNumbers.slice(-1)[0]<o.totalPages-1?((0,n.uX)(),(0,n.CE)("li",xca,e[25]||(e[25]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),o.pageNumbers.slice(-1)[0]<o.totalPages?((0,n.uX)(),(0,n.CE)("li",Tca,[(0,n.Lk)("button",{class:"page-link",onClick:e[8]||(e[8]=a=>o.changePage(o.totalPages))},(0,k.v_)(o.totalPages),1)])):(0,n.Q3)("",!0),(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:i.currentPage===o.totalPages}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[9]||(e[9]=a=>o.changePage(i.currentPage+1))},"Next")],2)])])):(0,n.Q3)("",!0)])])])])}const Bca=(a={})=>Na.get("",{params:{act:"konstruksi-beton",...a}}),Aca=a=>Na.post("",{act:"konstruksi-beton",record:a}),_ca=(a,e)=>a?Na.put("",{act:"konstruksi-beton",key:a,record:e}):Promise.reject(new Error("ID konstruksi beton tidak tersedia.")),jca=a=>a?Na.delete("",{data:{act:"konstruksi-beton",key:a}}):Promise.reject(new Error("ID konstruksi beton tidak tersedia.")),Vca={class:"modal-header"},Ica={class:"modal-title"},Nca={class:"modal-body"},Uca={class:"mb-3"},Rca={key:0,class:"alert alert-danger mt-3"},Qca={class:"modal-footer"},Wca=["disabled"],Kca={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},Oca={key:1};function $ca(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",{class:"modal-overlay",onClick:e[6]||(e[6]=(...a)=>o.handleOverlayClick&&o.handleOverlayClick(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[5]||(e[5]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",Vca,[(0,n.Lk)("h5",Ica,(0,k.v_)(o.isEditMode?"Edit Data Kontruksi Beton":"Tambah Data Kontruksi Beton"),1),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",Nca,[(0,n.Lk)("form",{onSubmit:e[2]||(e[2]=(0,l.D$)((...a)=>o.submitForm&&o.submitForm(...a),["prevent"]))},[(0,n.Lk)("div",Uca,[e[7]||(e[7]=(0,n.Lk)("label",{for:"namakonstruksibeton",class:"form-label"},"Nama Kontruksi Beton",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"namaKontruksiBeton",placeholder:"Masukkan nama kontruksi beton","onUpdate:modelValue":e[1]||(e[1]=a=>i.formData.namakonstruksibeton=a),required:""},null,512),[[l.Jo,i.formData.namakonstruksibeton]])]),i.errorMessage?((0,n.uX)(),(0,n.CE)("div",Rca,(0,k.v_)(i.errorMessage),1)):(0,n.Q3)("",!0)],32)]),(0,n.Lk)("div",Qca,[(0,n.Lk)("button",{type:"button",class:"btn btn-danger",onClick:e[3]||(e[3]=(...a)=>o.closeModal&&o.closeModal(...a))},"Batal"),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[4]||(e[4]=(...a)=>o.submitForm&&o.submitForm(...a)),disabled:i.isLoading},[i.isLoading?((0,n.uX)(),(0,n.CE)("span",Kca)):((0,n.uX)(),(0,n.CE)("span",Oca,"Simpan"))],8,Wca)])])])}var Gca={name:"editConcreteConstructionModal",props:{concreteConstructionToEdit:{type:Object,default:null}},created(){this.toast=(0,ln.dj)()},data(){return{formData:{namakonstruksibeton:""},isLoading:!1,errorMessage:null}},computed:{isEditMode(){return!!this.concreteConstructionToEdit}},watch:{concreteConstructionToEdit:{handler(a){this.formData=a?{...a}:{namakonstruksibeton:""},this.errorMessage=null},immediate:!0}},methods:{closeModal(){this.$emit("close")},handleOverlayClick(a){a.target===a.currentTarget&&this.closeModal()},async submitForm(){this.errorMessage=null;const{namakonstruksibeton:a}=this.formData;if(a){this.isLoading=!0;try{this.isEditMode?(await _ca(this.concreteConstructionToEdit.idkonstruksibeton,this.formData),this.toast.success("Data konstruksi beton berhasil diperbarui",{icon:"fa fa-check"})):(await Aca(this.formData),this.toast.success("Data konstruksi beton berhasil ditambah",{icon:"fa fa-check"})),this.$emit("save-successful"),this.closeModal()}catch(e){console.error("Error occurred:",e),this.errorMessage=e.response?.data?.message||"Gagal menyimpan data.",this.toast.error("Gagal menyimpan data konstruksi beton",{icon:"fa fa-times"})}finally{this.isLoading=!1}}else this.errorMessage="Semua field wajib diisi."}}};const Jca=(0,r.A)(Gca,[["render",$ca],["__scopeId","data-v-6e694b20"]]);var qca=Jca,Hca={components:{AddEditConcreteConstructionModal:qca},data(){return{concreteConstructions:[],sortColumn:"",sortDirection:"asc",isModalVisible:!1,currentPage:1,perPage:20,totalItems:0,concreteConstructionBeingEdited:null,jumpPage:1,isFilterVisible:!1,filters:{concreteConstruction_name:""}}},computed:{paginatedConcreteConstructions(){return this.concreteConstructions},totalPages(){return this.perPage<=0?1:Math.ceil(this.totalItems/this.perPage)},pageNumbers(){const a=[],e=5;let t=Math.max(1,this.currentPage-Math.floor(e/2)),s=t+e-1;s>this.totalPages&&(s=this.totalPages,t=Math.max(1,s-e+1));for(let i=t;i<=s;i++)a.push(i);return a}},watch:{currentPage(){this.fetchConcreteConstructions(),this.jumpPage=this.currentPage},perPage(){this.currentPage=1,this.fetchConcreteConstructions()}},async mounted(){this.toast=(0,ln.dj)(),await this.fetchConcreteConstructions()},methods:{openAddModal(){this.concreteConstructionBeingEdited=null,this.isModalVisible=!0},openEditModal(a){this.concreteConstructionBeingEdited={...a},this.isModalVisible=!0},closeModal(){this.isModalVisible=!1,this.concreteConstructionBeingEdited=null},handleSaveSuccessful(){this.closeModal(),this.fetchConcreteConstructions()},async fetchConcreteConstructions(){try{const a={act:"konstruksi-beton",page:this.currentPage,limit:this.perPage,order:this.sortColumn?`${this.sortColumn} ${this.sortDirection}`:"",group:""},e=Object.entries(this.filters).filter(([a,e])=>""!==e).map(([a,e])=>`${a}=${e}`);e.length>0?a.filter=e.join(","):a.filter="";const t=await Bca(a),s=t.data?.data||t.data?.[0]?.data||[],i=t.data?.[0]?.meta?.pagination||{};this.concreteConstructions=s,this.totalItems=i.total||s.length}catch(a){console.error("Error fetching konstruksi beton:",a),this.$swal({icon:"error",title:"Oops...",text:"Gagal memuat data konstruksi beton. Silakan coba lagi nanti."})}},advancedDeleteAlert(a){this.$swal({title:"Hapus Data Kontruksi Beton",text:"Apakah Anda yakin ingin menghapus data ini?",icon:"warning",showCancelButton:!0,confirmButtonText:'<i class="fa fa-check me-2"></i> Hapus!',confirmButtonColor:"#d33",cancelButtonText:'<i class="fa fa-times me-2"></i> Batal',cancelButtonColor:"#efefef",reverseButtons:!0}).then(async e=>{if(e.isConfirmed)try{await jca(a),1===this.concreteConstructions.length&&this.currentPage>1?this.currentPage--:this.fetchConcreteConstructions(),this.toast.success("Data konstruksi beton berhasil dihapus",{icon:"fa fa-check"})}catch(t){this.toast.error("Gagal menghapus data konstruksi beton",{icon:"fa fa-times"})}})},sortBy(a){this.sortColumn===a?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=a,this.sortDirection="asc"),this.fetchConcreteConstructions()},changePage(a){a>=1&&a<=this.totalPages&&(this.currentPage=a)},toggleFilterVisibility(){this.isFilterVisible=!this.isFilterVisible},applyFilters(){this.currentPage=1,this.fetchConcreteConstructions()},resetFilters(){this.filters.namakonstruksibeton="",this.sortColumn="",this.sortDirection="asc",this.currentPage=1,this.fetchConcreteConstructions()}}};const Yca=(0,r.A)(Hca,[["render",Sca],["__scopeId","data-v-c548c648"]]);var zca=Yca,Zca={components:{ConcreteConstructionTable:zca}};const ada=(0,r.A)(Zca,[["render",aca]]);var eda=ada;const tda={class:"container-fluid"},sda={class:"row widget-grid"};function ida(a,e,t,s,i,l){const o=(0,n.g2)("Breadcrumbs"),r=(0,n.g2)("PhysicalStatusesTable");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(o,{main:"Aset",title:a.$route.meta.title},null,8,["title"]),(0,n.Lk)("div",tda,[(0,n.Lk)("div",sda,[(0,n.bF)(r)])])])}const lda={class:"col-sm-12"},nda={class:"card"},oda={class:"card-body"},rda={class:"d-flex justify-content-end align-items-start mb-3"},cda={class:"d-flex gap-2"},dda={key:0,class:"fa fa-angle-up me-2"},uda={key:1,class:"fa fa-angle-down me-2"},mda={key:0,class:"border p-3 mb-3 rounded filter-section"},kda={class:"row g-2"},hda={class:"col-md-4"},gda={class:"d-flex justify-content-end gap-2 mt-3"},pda={class:"table-responsive signal-table"},bda={class:"table table-hover"},fda={key:0,class:"fa fa-sort-asc"},Lda={key:1,class:"fa fa-sort-desc"},yda={key:2,class:"fa fa-sort"},vda={scope:"row"},Cda={class:"btn-group"},Pda=["onClick"],Eda=["onClick"],Dda={key:0},Mda={class:"d-flex flex-column flex-md-row justify-content-md-between align-items-center mt-3 px-3 pb-3"},wda={class:"mt-2"},Fda={key:0,class:"text-muted"},Xda={key:0,class:"d-flex align-items-center flex-wrap gap-2 mt-2"},xda={class:"pagination mb-0"},Tda={key:0,class:"page-item"},Sda={key:1,class:"page-item disabled"},Bda=["onClick"],Ada={key:2,class:"page-item disabled"},_da={key:3,class:"page-item"};function jda(a,e,t,s,i,o){const r=(0,n.g2)("add-edit-physicalStatus-modal");return(0,n.uX)(),(0,n.CE)("div",lda,[i.isModalVisible?((0,n.uX)(),(0,n.Wv)(r,{key:0,"physicalStatus-to-edit":i.physicalStatusBeingEdited,onClose:o.closeModal,onSaveSuccessful:o.handleSaveSuccessful},null,8,["physicalStatus-to-edit","onClose","onSaveSuccessful"])):(0,n.Q3)("",!0),(0,n.Lk)("div",nda,[e[26]||(e[26]=(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("h3",null,"Daftar Nama Keberadaan Fisik")],-1)),(0,n.Lk)("div",oda,[(0,n.Lk)("div",rda,[(0,n.Lk)("div",cda,[(0,n.Lk)("button",{class:"btn btn-outline-light txt-dark",onClick:e[0]||(e[0]=(...a)=>o.toggleFilterVisibility&&o.toggleFilterVisibility(...a))},[i.isFilterVisible?((0,n.uX)(),(0,n.CE)("i",dda)):((0,n.uX)(),(0,n.CE)("i",uda)),(0,n.Lk)("span",null,(0,k.v_)(i.isFilterVisible?"Sembunyikan":"Tampilkan")+" Filter",1)]),(0,n.Lk)("button",{class:"btn btn-success",onClick:e[1]||(e[1]=(...a)=>o.openAddModal&&o.openAddModal(...a))},e[10]||(e[10]=[(0,n.Lk)("i",{class:"fa fa-plus me-2"},null,-1),(0,n.Lk)("span",null," Tambah Data",-1)]))])]),i.isFilterVisible?((0,n.uX)(),(0,n.CE)("div",mda,[(0,n.Lk)("div",kda,[(0,n.Lk)("div",hda,[e[11]||(e[11]=(0,n.Lk)("label",{for:"filterName",class:"form-label"},"Nama Keberadaan Fisik",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterName",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.filters.namakeberadaanfisik=a),placeholder:"Filter berdasarkan nama keberadaan fisik"},null,512),[[l.Jo,i.filters.namakeberadaanfisik]])])]),(0,n.Lk)("div",gda,[(0,n.Lk)("button",{class:"btn btn-secondary",onClick:e[3]||(e[3]=(...a)=>o.resetFilters&&o.resetFilters(...a))},e[12]||(e[12]=[(0,n.Lk)("i",{class:"fa fa-refresh me-2"},null,-1),(0,n.Lk)("span",null,"Reset Filter",-1)])),(0,n.Lk)("button",{class:"btn btn-primary",onClick:e[4]||(e[4]=(...a)=>o.applyFilters&&o.applyFilters(...a))},e[13]||(e[13]=[(0,n.Lk)("i",{class:"fa fa-search me-2"},null,-1),(0,n.Lk)("span",null,"Terapkan Filter",-1)]))])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",pda,[(0,n.Lk)("table",bda,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[e[15]||(e[15]=(0,n.Lk)("th",{scope:"col"},"No",-1)),(0,n.Lk)("th",{scope:"col",onClick:e[5]||(e[5]=a=>o.sortBy("namakeberadaanfisik"))},[e[14]||(e[14]=(0,n.eW)(" Nama Keberadaan Fisik ")),"namakeberadaanfisik"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",fda)):"namakeberadaanfisik"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",Lda)):((0,n.uX)(),(0,n.CE)("i",yda))]),e[16]||(e[16]=(0,n.Lk)("th",{scope:"col"},"Aksi",-1))])]),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.paginatedPhysicalStatuses,(a,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:a.idkeberadaanfisik},[(0,n.Lk)("th",vda,(0,k.v_)((i.currentPage-1)*i.perPage+t+1),1),(0,n.Lk)("td",null,(0,k.v_)(a.namakeberadaanfisik),1),(0,n.Lk)("td",null,[(0,n.Lk)("div",Cda,[(0,n.Lk)("button",{class:"btn btn-primary btn-sm",onClick:e=>o.openEditModal(a)},e[17]||(e[17]=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)]),8,Pda),(0,n.Lk)("button",{class:"btn btn-danger sweet-11 btn-sm",type:"button",onClick:e=>o.advancedDeleteAlert(a.idkeberadaanfisik)},e[18]||(e[18]=[(0,n.Lk)("i",{class:"fa fa-trash"},null,-1)]),8,Eda)])])]))),128)),0===o.paginatedPhysicalStatuses.length?((0,n.uX)(),(0,n.CE)("tr",Dda,e[19]||(e[19]=[(0,n.Lk)("td",{colspan:"5",class:"text-center"},"Tidak ada data yang cocok atau tersedia.",-1)]))):(0,n.Q3)("",!0)])]),(0,n.Lk)("div",Mda,[(0,n.Lk)("div",wda,[i.totalItems>0?((0,n.uX)(),(0,n.CE)("span",Fda,[e[20]||(e[20]=(0,n.eW)(" Menampilkan ")),(0,n.Lk)("strong",null,(0,k.v_)((i.currentPage-1)*i.perPage+1),1),e[21]||(e[21]=(0,n.eW)(" - ")),(0,n.Lk)("strong",null,(0,k.v_)(Math.min(i.currentPage*i.perPage,i.totalItems)),1),e[22]||(e[22]=(0,n.eW)(" dari ")),(0,n.Lk)("strong",null,(0,k.v_)(i.totalItems),1),e[23]||(e[23]=(0,n.eW)(" data "))])):(0,n.Q3)("",!0)]),-1!==i.perPage&&o.totalPages>1?((0,n.uX)(),(0,n.CE)("nav",Xda,[(0,n.Lk)("ul",xda,[(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[6]||(e[6]=a=>o.changePage(i.currentPage-1))},"Prev")],2),o.pageNumbers[0]>1?((0,n.uX)(),(0,n.CE)("li",Tda,[(0,n.Lk)("button",{class:"page-link",onClick:e[7]||(e[7]=a=>o.changePage(1))},"1")])):(0,n.Q3)("",!0),o.pageNumbers[0]>2?((0,n.uX)(),(0,n.CE)("li",Sda,e[24]||(e[24]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.pageNumbers,a=>((0,n.uX)(),(0,n.CE)("li",{key:a,class:(0,k.C4)(["page-item",{active:i.currentPage===a}])},[(0,n.Lk)("button",{class:"page-link",onClick:e=>o.changePage(a)},(0,k.v_)(a),9,Bda)],2))),128)),o.pageNumbers.slice(-1)[0]<o.totalPages-1?((0,n.uX)(),(0,n.CE)("li",Ada,e[25]||(e[25]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),o.pageNumbers.slice(-1)[0]<o.totalPages?((0,n.uX)(),(0,n.CE)("li",_da,[(0,n.Lk)("button",{class:"page-link",onClick:e[8]||(e[8]=a=>o.changePage(o.totalPages))},(0,k.v_)(o.totalPages),1)])):(0,n.Q3)("",!0),(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:i.currentPage===o.totalPages}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[9]||(e[9]=a=>o.changePage(i.currentPage+1))},"Next")],2)])])):(0,n.Q3)("",!0)])])])])}const Vda={class:"modal-header"},Ida={class:"modal-title"},Nda={class:"modal-body"},Uda={class:"mb-3"},Rda={key:0,class:"alert alert-danger mt-3"},Qda={class:"modal-footer"},Wda=["disabled"],Kda={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},Oda={key:1};function $da(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",{class:"modal-overlay",onClick:e[6]||(e[6]=(...a)=>o.handleOverlayClick&&o.handleOverlayClick(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[5]||(e[5]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",Vda,[(0,n.Lk)("h5",Ida,(0,k.v_)(o.isEditMode?"Edit Data Keberadaan Fisik":"Tambah Data Keberadaan Fisik"),1),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",Nda,[(0,n.Lk)("form",{onSubmit:e[2]||(e[2]=(0,l.D$)((...a)=>o.submitForm&&o.submitForm(...a),["prevent"]))},[(0,n.Lk)("div",Uda,[e[7]||(e[7]=(0,n.Lk)("label",{for:"namakeberadaanfisik",class:"form-label"},"Nama Keberadaan Fisik",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"namaKeberadaanFisik",placeholder:"Masukkan nama keberadaan fisik","onUpdate:modelValue":e[1]||(e[1]=a=>i.formData.namakeberadaanfisik=a),required:""},null,512),[[l.Jo,i.formData.namakeberadaanfisik]])]),i.errorMessage?((0,n.uX)(),(0,n.CE)("div",Rda,(0,k.v_)(i.errorMessage),1)):(0,n.Q3)("",!0)],32)]),(0,n.Lk)("div",Qda,[(0,n.Lk)("button",{type:"button",class:"btn btn-danger",onClick:e[3]||(e[3]=(...a)=>o.closeModal&&o.closeModal(...a))},"Batal"),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[4]||(e[4]=(...a)=>o.submitForm&&o.submitForm(...a)),disabled:i.isLoading},[i.isLoading?((0,n.uX)(),(0,n.CE)("span",Kda)):((0,n.uX)(),(0,n.CE)("span",Oda,"Simpan"))],8,Wda)])])])}var Gda={name:"editPhysicalStatusModal",props:{physicalStatusToEdit:{type:Object,default:null}},created(){this.toast=(0,ln.dj)()},data(){return{formData:{namakeberadaanfisik:""},isLoading:!1,errorMessage:null}},computed:{isEditMode(){return!!this.physicalStatusToEdit}},watch:{physicalStatusToEdit:{handler(a){this.formData=a?{...a}:{namakeberadaanfisik:""},this.errorMessage=null},immediate:!0}},methods:{closeModal(){this.$emit("close")},handleOverlayClick(a){a.target===a.currentTarget&&this.closeModal()},async submitForm(){this.errorMessage=null;const{namakeberadaanfisik:a}=this.formData;if(a){this.isLoading=!0;try{this.isEditMode?(await JC(this.physicalStatusToEdit.idkeberadaanfisik,this.formData),this.toast.success("Data keberadaan fisik berhasil diperbarui",{icon:"fa fa-check"})):(await GC(this.formData),this.toast.success("Data keberadaan fisik berhasil ditambah",{icon:"fa fa-check"})),this.$emit("save-successful"),this.closeModal()}catch(e){console.error("Error occurred:",e),this.errorMessage=e.response?.data?.message||"Gagal menyimpan data.",this.toast.error("Gagal menyimpan data keberadaan fisik",{icon:"fa fa-times"})}finally{this.isLoading=!1}}else this.errorMessage="Semua field wajib diisi."}}};const Jda=(0,r.A)(Gda,[["render",$da],["__scopeId","data-v-038ed232"]]);var qda=Jda,Hda={components:{AddEditPhysicalStatusModal:qda},data(){return{physicalStatuses:[],sortColumn:"",sortDirection:"asc",isModalVisible:!1,currentPage:1,perPage:20,totalItems:0,physicalStatusBeingEdited:null,jumpPage:1,isFilterVisible:!1,filters:{physicalStatus_name:""}}},computed:{paginatedPhysicalStatuses(){return this.physicalStatuses},totalPages(){return this.perPage<=0?1:Math.ceil(this.totalItems/this.perPage)},pageNumbers(){const a=[],e=5;let t=Math.max(1,this.currentPage-Math.floor(e/2)),s=t+e-1;s>this.totalPages&&(s=this.totalPages,t=Math.max(1,s-e+1));for(let i=t;i<=s;i++)a.push(i);return a}},watch:{currentPage(){this.fetchPhysicalStatuses(),this.jumpPage=this.currentPage},perPage(){this.currentPage=1,this.fetchPhysicalStatuses()}},async mounted(){this.toast=(0,ln.dj)(),await this.fetchPhysicalStatuses()},methods:{openAddModal(){this.physicalStatusBeingEdited=null,this.isModalVisible=!0},openEditModal(a){this.physicalStatusBeingEdited={...a},this.isModalVisible=!0},closeModal(){this.isModalVisible=!1,this.physicalStatusBeingEdited=null},handleSaveSuccessful(){this.closeModal(),this.fetchPhysicalStatuses()},async fetchPhysicalStatuses(){try{const a={act:"keberadaan-fisik",page:this.currentPage,limit:this.perPage,order:this.sortColumn?`${this.sortColumn} ${this.sortDirection}`:"",group:""},e=Object.entries(this.filters).filter(([a,e])=>""!==e).map(([a,e])=>`${a}=${e}`);e.length>0?a.filter=e.join(","):a.filter="";const t=await $C(a),s=t.data?.data||t.data?.[0]?.data||[],i=t.data?.[0]?.meta?.pagination||{};this.physicalStatuses=s,this.totalItems=i.total||s.length}catch(a){console.error("Error fetching keberadaan fisik:",a),this.$swal({icon:"error",title:"Oops...",text:"Gagal memuat data keberadaan fisik. Silakan coba lagi nanti."})}},advancedDeleteAlert(a){this.$swal({title:"Hapus Data Keberadaan Fisik",text:"Apakah Anda yakin ingin menghapus data ini?",icon:"warning",showCancelButton:!0,confirmButtonText:'<i class="fa fa-check me-2"></i> Hapus!',confirmButtonColor:"#d33",cancelButtonText:'<i class="fa fa-times me-2"></i> Batal',cancelButtonColor:"#efefef",reverseButtons:!0}).then(async e=>{if(e.isConfirmed)try{await qC(a),1===this.physicalStatuses.length&&this.currentPage>1?this.currentPage--:this.fetchPhysicalStatuses(),this.toast.success("Data keberadaan fisik berhasil dihapus",{icon:"fa fa-check"})}catch(t){this.toast.error("Gagal menghapus data keberadaan fisik",{icon:"fa fa-times"})}})},sortBy(a){this.sortColumn===a?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=a,this.sortDirection="asc"),this.fetchPhysicalStatuses()},changePage(a){a>=1&&a<=this.totalPages&&(this.currentPage=a)},toggleFilterVisibility(){this.isFilterVisible=!this.isFilterVisible},applyFilters(){this.currentPage=1,this.fetchPhysicalStatuses()},resetFilters(){this.filters.namakeberadaanfisik="",this.sortColumn="",this.sortDirection="asc",this.currentPage=1,this.fetchPhysicalStatuses()}}};const Yda=(0,r.A)(Hda,[["render",jda],["__scopeId","data-v-a4c41fb4"]]);var zda=Yda,Zda={components:{PhysicalStatusesTable:zda}};const aua=(0,r.A)(Zda,[["render",ida]]);var eua=aua;const tua={class:"container-fluid"},sua={class:"row widget-grid"};function iua(a,e,t,s,i,l){const o=(0,n.g2)("Breadcrumbs"),r=(0,n.g2)("ItemCategoriesTable");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(o,{main:"Aset",title:a.$route.meta.title},null,8,["title"]),(0,n.Lk)("div",tua,[(0,n.Lk)("div",sua,[(0,n.bF)(r)])])])}const lua={class:"col-sm-12"},nua={class:"card"},oua={class:"card-body"},rua={class:"d-flex justify-content-end align-items-start mb-3"},cua={class:"d-flex gap-2"},dua={key:0,class:"fa fa-angle-up me-2"},uua={key:1,class:"fa fa-angle-down me-2"},mua={key:0,class:"border p-3 mb-3 rounded filter-section"},kua={class:"row g-2"},hua={class:"col-md-4"},gua={class:"d-flex justify-content-end gap-2 mt-3"},pua={class:"table-responsive signal-table"},bua={class:"table table-hover"},fua={key:0,class:"fa fa-sort-asc"},Lua={key:1,class:"fa fa-sort-desc"},yua={key:2,class:"fa fa-sort"},vua={scope:"row"},Cua={class:"btn-group"},Pua=["onClick"],Eua=["onClick"],Dua={key:0},Mua={class:"d-flex flex-column flex-md-row justify-content-md-between align-items-center mt-3 px-3 pb-3"},wua={class:"mt-2"},Fua={key:0,class:"text-muted"},Xua={key:0,class:"d-flex align-items-center flex-wrap gap-2 mt-2"},xua={class:"pagination mb-0"},Tua={key:0,class:"page-item"},Sua={key:1,class:"page-item disabled"},Bua=["onClick"],Aua={key:2,class:"page-item disabled"},_ua={key:3,class:"page-item"};function jua(a,e,t,s,i,o){const r=(0,n.g2)("add-edit-itemCategory-modal");return(0,n.uX)(),(0,n.CE)("div",lua,[i.isModalVisible?((0,n.uX)(),(0,n.Wv)(r,{key:0,"itemCategory-to-edit":i.itemCategoryBeingEdited,onClose:o.closeModal,onSaveSuccessful:o.handleSaveSuccessful},null,8,["itemCategory-to-edit","onClose","onSaveSuccessful"])):(0,n.Q3)("",!0),(0,n.Lk)("div",nua,[e[26]||(e[26]=(0,n.Lk)("div",{class:"card-header"},[(0,n.Lk)("h3",null,"Daftar Kategori Barang")],-1)),(0,n.Lk)("div",oua,[(0,n.Lk)("div",rua,[(0,n.Lk)("div",cua,[(0,n.Lk)("button",{class:"btn btn-outline-light txt-dark",onClick:e[0]||(e[0]=(...a)=>o.toggleFilterVisibility&&o.toggleFilterVisibility(...a))},[i.isFilterVisible?((0,n.uX)(),(0,n.CE)("i",dua)):((0,n.uX)(),(0,n.CE)("i",uua)),(0,n.Lk)("span",null,(0,k.v_)(i.isFilterVisible?"Sembunyikan":"Tampilkan")+" Filter",1)]),(0,n.Lk)("button",{class:"btn btn-success",onClick:e[1]||(e[1]=(...a)=>o.openAddModal&&o.openAddModal(...a))},e[10]||(e[10]=[(0,n.Lk)("i",{class:"fa fa-plus me-2"},null,-1),(0,n.Lk)("span",null," Tambah Data",-1)]))])]),i.isFilterVisible?((0,n.uX)(),(0,n.CE)("div",mua,[(0,n.Lk)("div",kua,[(0,n.Lk)("div",hua,[e[11]||(e[11]=(0,n.Lk)("label",{for:"filterName",class:"form-label"},"Kategori Barang",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"filterName",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.filters.namakategoribarang=a),placeholder:"Filter berdasarkan nama kategori barang"},null,512),[[l.Jo,i.filters.namakategoribarang]])])]),(0,n.Lk)("div",gua,[(0,n.Lk)("button",{class:"btn btn-secondary",onClick:e[3]||(e[3]=(...a)=>o.resetFilters&&o.resetFilters(...a))},e[12]||(e[12]=[(0,n.Lk)("i",{class:"fa fa-refresh me-2"},null,-1),(0,n.Lk)("span",null,"Reset Filter",-1)])),(0,n.Lk)("button",{class:"btn btn-primary",onClick:e[4]||(e[4]=(...a)=>o.applyFilters&&o.applyFilters(...a))},e[13]||(e[13]=[(0,n.Lk)("i",{class:"fa fa-search me-2"},null,-1),(0,n.Lk)("span",null,"Terapkan Filter",-1)]))])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",pua,[(0,n.Lk)("table",bua,[(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[e[15]||(e[15]=(0,n.Lk)("th",{scope:"col"},"No",-1)),(0,n.Lk)("th",{scope:"col",onClick:e[5]||(e[5]=a=>o.sortBy("namakategoribarang"))},[e[14]||(e[14]=(0,n.eW)(" Kategori Barang ")),"namakategoribarang"===i.sortColumn&&"asc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",fua)):"namakategoribarang"===i.sortColumn&&"desc"===i.sortDirection?((0,n.uX)(),(0,n.CE)("i",Lua)):((0,n.uX)(),(0,n.CE)("i",yua))]),e[16]||(e[16]=(0,n.Lk)("th",{scope:"col"},"Aksi",-1))])]),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.paginatedItemCategories,(a,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:a.idkategoribarang},[(0,n.Lk)("th",vua,(0,k.v_)((i.currentPage-1)*i.perPage+t+1),1),(0,n.Lk)("td",null,(0,k.v_)(a.namakategoribarang),1),(0,n.Lk)("td",null,[(0,n.Lk)("div",Cua,[(0,n.Lk)("button",{class:"btn btn-primary btn-sm",onClick:e=>o.openEditModal(a)},e[17]||(e[17]=[(0,n.Lk)("i",{class:"fa fa-pencil"},null,-1)]),8,Pua),(0,n.Lk)("button",{class:"btn btn-danger sweet-11 btn-sm",type:"button",onClick:e=>o.advancedDeleteAlert(a.idkategoribarang)},e[18]||(e[18]=[(0,n.Lk)("i",{class:"fa fa-trash"},null,-1)]),8,Eua)])])]))),128)),0===o.paginatedItemCategories.length?((0,n.uX)(),(0,n.CE)("tr",Dua,e[19]||(e[19]=[(0,n.Lk)("td",{colspan:"5",class:"text-center"},"Tidak ada data yang cocok atau tersedia.",-1)]))):(0,n.Q3)("",!0)])]),(0,n.Lk)("div",Mua,[(0,n.Lk)("div",wua,[i.totalItems>0?((0,n.uX)(),(0,n.CE)("span",Fua,[e[20]||(e[20]=(0,n.eW)(" Menampilkan ")),(0,n.Lk)("strong",null,(0,k.v_)((i.currentPage-1)*i.perPage+1),1),e[21]||(e[21]=(0,n.eW)(" - ")),(0,n.Lk)("strong",null,(0,k.v_)(Math.min(i.currentPage*i.perPage,i.totalItems)),1),e[22]||(e[22]=(0,n.eW)(" dari ")),(0,n.Lk)("strong",null,(0,k.v_)(i.totalItems),1),e[23]||(e[23]=(0,n.eW)(" data "))])):(0,n.Q3)("",!0)]),-1!==i.perPage&&o.totalPages>1?((0,n.uX)(),(0,n.CE)("nav",Xua,[(0,n.Lk)("ul",xua,[(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[6]||(e[6]=a=>o.changePage(i.currentPage-1))},"Prev")],2),o.pageNumbers[0]>1?((0,n.uX)(),(0,n.CE)("li",Tua,[(0,n.Lk)("button",{class:"page-link",onClick:e[7]||(e[7]=a=>o.changePage(1))},"1")])):(0,n.Q3)("",!0),o.pageNumbers[0]>2?((0,n.uX)(),(0,n.CE)("li",Sua,e[24]||(e[24]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.pageNumbers,a=>((0,n.uX)(),(0,n.CE)("li",{key:a,class:(0,k.C4)(["page-item",{active:i.currentPage===a}])},[(0,n.Lk)("button",{class:"page-link",onClick:e=>o.changePage(a)},(0,k.v_)(a),9,Bua)],2))),128)),o.pageNumbers.slice(-1)[0]<o.totalPages-1?((0,n.uX)(),(0,n.CE)("li",Aua,e[25]||(e[25]=[(0,n.Lk)("span",{class:"page-link"},"...",-1)]))):(0,n.Q3)("",!0),o.pageNumbers.slice(-1)[0]<o.totalPages?((0,n.uX)(),(0,n.CE)("li",_ua,[(0,n.Lk)("button",{class:"page-link",onClick:e[8]||(e[8]=a=>o.changePage(o.totalPages))},(0,k.v_)(o.totalPages),1)])):(0,n.Q3)("",!0),(0,n.Lk)("li",{class:(0,k.C4)(["page-item",{disabled:i.currentPage===o.totalPages}])},[(0,n.Lk)("button",{class:"page-link",onClick:e[9]||(e[9]=a=>o.changePage(i.currentPage+1))},"Next")],2)])])):(0,n.Q3)("",!0)])])])])}const Vua=(a={})=>Na.get("",{params:{act:"kategori-barang",...a}}),Iua=a=>Na.post("",{act:"kategori-barang",record:a}),Nua=(a,e)=>a?Na.put("",{act:"kategori-barang",key:a,record:e}):Promise.reject(new Error("ID kategori barang tidak tersedia.")),Uua=a=>a?Na.delete("",{data:{act:"kategori-barang",key:a}}):Promise.reject(new Error("ID kategori barang tidak tersedia.")),Rua={class:"modal-header"},Qua={class:"modal-title"},Wua={class:"modal-body"},Kua={class:"mb-3"},Oua={key:0,class:"alert alert-danger mt-3"},$ua={class:"modal-footer"},Gua=["disabled"],Jua={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},qua={key:1};function Hua(a,e,t,s,i,o){return(0,n.uX)(),(0,n.CE)("div",{class:"modal-overlay",onClick:e[6]||(e[6]=(...a)=>o.handleOverlayClick&&o.handleOverlayClick(...a))},[(0,n.Lk)("div",{class:"modal-content",onClick:e[5]||(e[5]=(0,l.D$)(()=>{},["stop"]))},[(0,n.Lk)("div",Rua,[(0,n.Lk)("h5",Qua,(0,k.v_)(o.isEditMode?"Edit Data Kategori Barang":"Tambah Data Kategori Barang"),1),(0,n.Lk)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...a)=>o.closeModal&&o.closeModal(...a)),"aria-label":"Close"})]),(0,n.Lk)("div",Wua,[(0,n.Lk)("form",{onSubmit:e[2]||(e[2]=(0,l.D$)((...a)=>o.submitForm&&o.submitForm(...a),["prevent"]))},[(0,n.Lk)("div",Kua,[e[7]||(e[7]=(0,n.Lk)("label",{for:"namakategoribarang",class:"form-label"},"Nama Kategori Barang",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",class:"form-control",id:"namaKategoriBarang",placeholder:"Masukkan nama kategori barang","onUpdate:modelValue":e[1]||(e[1]=a=>i.formData.namakategoribarang=a),required:""},null,512),[[l.Jo,i.formData.namakategoribarang]])]),i.errorMessage?((0,n.uX)(),(0,n.CE)("div",Oua,(0,k.v_)(i.errorMessage),1)):(0,n.Q3)("",!0)],32)]),(0,n.Lk)("div",$ua,[(0,n.Lk)("button",{type:"button",class:"btn btn-danger",onClick:e[3]||(e[3]=(...a)=>o.closeModal&&o.closeModal(...a))},"Batal"),(0,n.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[4]||(e[4]=(...a)=>o.submitForm&&o.submitForm(...a)),disabled:i.isLoading},[i.isLoading?((0,n.uX)(),(0,n.CE)("span",Jua)):((0,n.uX)(),(0,n.CE)("span",qua,"Simpan"))],8,Gua)])])])}var Yua={name:"editItemCategoryModal",props:{itemCategoryToEdit:{type:Object,default:null}},created(){this.toast=(0,ln.dj)()},data(){return{formData:{namakategoribarang:""},isLoading:!1,errorMessage:null}},computed:{isEditMode(){return!!this.itemCategoryToEdit}},watch:{itemCategoryToEdit:{handler(a){this.formData=a?{...a}:{namakategoribarang:""},this.errorMessage=null},immediate:!0}},methods:{closeModal(){this.$emit("close")},handleOverlayClick(a){a.target===a.currentTarget&&this.closeModal()},async submitForm(){this.errorMessage=null;const{namakategoribarang:a}=this.formData;if(a){this.isLoading=!0;try{this.isEditMode?(await Nua(this.itemCategoryToEdit.idkategoribarang,this.formData),this.toast.success("Data kategori barang berhasil diperbarui",{icon:"fa fa-check"})):(await Iua(this.formData),this.toast.success("Data kategori barang berhasil ditambah",{icon:"fa fa-check"})),this.$emit("save-successful"),this.closeModal()}catch(e){console.error("Error occurred:",e),this.errorMessage=e.response?.data?.message||"Gagal menyimpan data.",this.toast.error("Gagal menyimpan data kategori barang",{icon:"fa fa-times"})}finally{this.isLoading=!1}}else this.errorMessage="Semua field wajib diisi."}}};const zua=(0,r.A)(Yua,[["render",Hua],["__scopeId","data-v-061eee6b"]]);var Zua=zua,ama={components:{AddEditItemCategoryModal:Zua},data(){return{itemCategories:[],sortColumn:"",sortDirection:"asc",isModalVisible:!1,currentPage:1,perPage:20,totalItems:0,itemCategoryBeingEdited:null,jumpPage:1,isFilterVisible:!1,filters:{itemCategory_name:""}}},computed:{paginatedItemCategories(){return this.itemCategories},totalPages(){return this.perPage<=0?1:Math.ceil(this.totalItems/this.perPage)},pageNumbers(){const a=[],e=5;let t=Math.max(1,this.currentPage-Math.floor(e/2)),s=t+e-1;s>this.totalPages&&(s=this.totalPages,t=Math.max(1,s-e+1));for(let i=t;i<=s;i++)a.push(i);return a}},watch:{currentPage(){this.fetchItemCategories(),this.jumpPage=this.currentPage},perPage(){this.currentPage=1,this.fetchItemCategories()}},async mounted(){this.toast=(0,ln.dj)(),await this.fetchItemCategories()},methods:{openAddModal(){this.itemCategoryBeingEdited=null,this.isModalVisible=!0},openEditModal(a){this.itemCategoryBeingEdited={...a},this.isModalVisible=!0},closeModal(){this.isModalVisible=!1,this.itemCategoryBeingEdited=null},handleSaveSuccessful(){this.closeModal(),this.fetchItemCategories()},async fetchItemCategories(){try{const a={act:"kategori-barang",page:this.currentPage,limit:this.perPage,order:this.sortColumn?`${this.sortColumn} ${this.sortDirection}`:"",item:""},e=Object.entries(this.filters).filter(([a,e])=>""!==e).map(([a,e])=>`${a}=${e}`);e.length>0?a.filter=e.join(","):a.filter="";const t=await Vua(a),s=t.data?.data||t.data?.[0]?.data||[],i=t.data?.[0]?.meta?.pagination||{};this.itemCategories=s,this.totalItems=i.total||s.length}catch(a){console.error("Error fetching kategori barang:",a),this.$swal({icon:"error",title:"Oops...",text:"Gagal memuat data kategori barang. Silakan coba lagi nanti."})}},advancedDeleteAlert(a){this.$swal({title:"Hapus Data Kategori Barang",text:"Apakah Anda yakin ingin menghapus data ini?",icon:"warning",showCancelButton:!0,confirmButtonText:'<i class="fa fa-check me-2"></i> Hapus!',confirmButtonColor:"#d33",cancelButtonText:'<i class="fa fa-times me-2"></i> Batal',cancelButtonColor:"#efefef",reverseButtons:!0}).then(async e=>{if(e.isConfirmed)try{await Uua(a),1===this.itemCategories.length&&this.currentPage>1?this.currentPage--:this.fetchItemCategories(),this.toast.success("Data kategori barang berhasil dihapus",{icon:"fa fa-check"})}catch(t){this.toast.error("Gagal menghapus data kategori barang",{icon:"fa fa-times"})}})},sortBy(a){this.sortColumn===a?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=a,this.sortDirection="asc"),this.fetchItemCategories()},changePage(a){a>=1&&a<=this.totalPages&&(this.currentPage=a)},toggleFilterVisibility(){this.isFilterVisible=!this.isFilterVisible},applyFilters(){this.currentPage=1,this.fetchItemCategories()},resetFilters(){this.filters.namakategoribarang="",this.sortColumn="",this.sortDirection="asc",this.currentPage=1,this.fetchItemCategories()}}};const ema=(0,r.A)(ama,[["render",jua],["__scopeId","data-v-423a7379"]]);var tma=ema,sma={components:{ItemCategoriesTable:tma}};const ima=(0,r.A)(sma,[["render",iua]]);var lma=ima;const nma=[{path:"/auth",children:[{path:"",name:"Login",component:is,meta:{title:"Login"}}]},{path:"/",component:wt,children:[{path:"",name:"defaultRoot",component:Nt,meta:{title:"Dashboard",requiresAuth:!0}}]},{path:"/village-information",component:wt,meta:{requiresAuth:!0},children:[{path:"profile",name:"informasiDesa_profilDesa",component:Cr,meta:{title:"Profil Desa"}}]},{path:"/village-government",component:wt,meta:{requiresAuth:!0},children:[{path:"officials",name:"Pemerintahan_perangakatDesa",component:fd,meta:{title:"Perangkat Desa"}},{path:"tenure-periods",name:"Pemerintahan_periodeJabatan",component:Ku,meta:{title:"Periode Jabatan"}}]},{path:"/population",component:wt,meta:{requiresAuth:!0},children:[{path:"residents",name:"kependudukan_penduduk",component:Fg,meta:{title:"Penduduk"}},{path:"families",name:"kependudukan_keluarga",component:m$,meta:{title:"Wilayah Administrasi"}},{path:"households",name:"kependudukan_rumahTangga",component:m$,meta:{title:"Rumah Tangga"}},{path:"groups",name:"kependudukan_kelompok",component:pb,meta:{title:"Kelompok"}}]},{path:"/documents",component:wt,meta:{requiresAuth:!0},children:[{path:"incoming-letters",name:"dokumen_suratMasuk",component:m$,meta:{title:"Surat Masuk"}},{path:"outgoing-letters",name:"dokumen_suratKeluar",component:m$,meta:{title:"Surat Keluar"}},{path:"regulations",name:"dokumen_peraturanRegulasi",component:m$,meta:{title:"Peraturan/Regulasi"}},{path:"decrees",name:"dokumen_keptusanKepalaDesa",component:m$,meta:{title:"Keputusan Kepala Desa"}}]},{path:"/activities",component:wt,meta:{requiresAuth:!0},children:[{path:"programs",name:"kegiatan_program",component:FL,meta:{title:"Program Kegiatan"}},{path:"categories",name:"kegiatan_kategori",component:Iy,meta:{title:"Kategori Kegiatan"}}]},{path:"/cash-flow",component:wt,meta:{requiresAuth:!0},children:[{path:"income",name:"keuangan_pemasukan",component:m$,meta:{title:"Pemasukan"}},{path:"expenses",name:"keuangan_pengeluaran",component:m$,meta:{title:"Pengeluaran"}}]},{path:"/assets",component:wt,meta:{requiresAuth:!0},children:[{path:"land",name:"aset_tanah",component:m$,meta:{title:"Tanah"}},{path:"buildings",name:"aset_bangunan",component:m$,meta:{title:"Bangunan"}},{path:"rooms",name:"aset_ruangan",component:m$,meta:{title:"Ruangan"}},{path:"vehicles",name:"aset_kendaraan",component:VP,meta:{title:"Kendaraan"}},{path:"equipment",name:"aset_peralatanMesin",component:m$,meta:{title:"Peralatan dan Mesin"}},{path:"items",name:"aset_barang",component:hM,meta:{title:"Barang"}}]},{path:"/land-affairs",component:wt,meta:{requiresAuth:!0},children:[{path:"parcels",name:"pertanahan_percil",component:m$,meta:{title:"Data Percil"}},{path:"c-ledger",name:"pertanahan_cDesa",component:m$,meta:{title:"C Desa"}}]},{path:"/enterprise",component:wt,meta:{requiresAuth:!0},children:[{path:"profile",name:"badanusaha_profil",component:EF,meta:{title:"Profil Usaha"}},{path:"management",name:"badanusaha_pengurus",component:OX,meta:{title:"Pengurus/Pengelola"}},{path:"reports",name:"badanUsaha_laporan",component:XT,meta:{title:"Laporan Usaha"}}]},{path:"/website",component:wt,meta:{requiresAuth:!0},children:[{path:"articles/list",name:"websiteArtikel_artikel",component:xB,meta:{title:"Artikel"}},{path:"articles/categories",name:"websiteArtikel_kategori",component:KA,meta:{title:"Kategori Artikel"}},{path:"download/documents",name:"websiteDownload_dokumen",component:Ej,meta:{title:"Dokumen"}},{path:"download/document-types",name:"websiteDownload_jenisDokumen",component:MV,meta:{title:"Jenis Dokumen"}}]},{path:"/",component:wt,meta:{requiresAuth:!0},children:[{path:"banner",name:"banner",component:zI,meta:{title:"Banner"}}]},{path:"/",component:wt,meta:{requiresAuth:!0},children:[{path:"services",name:"layanan",component:_U,meta:{title:"Layanan"}}]},{path:"/",component:wt,meta:{requiresAuth:!0},children:[{path:"notices",name:"pengumuman",component:wQ,meta:{title:"Pengumuman"}}]},{path:"/",component:wt,meta:{requiresAuth:!0},children:[{path:"related-links",name:"linkTerkait",component:HW,meta:{title:"Link Terkait"}}]},{path:"/general",component:wt,meta:{requiresAuth:!0},children:[{path:"user",name:"general_pengguna",component:m$,meta:{title:"Pengguna"}},{path:"roles",name:"general_kedudukan",component:PJ,meta:{title:"Role"}},{path:"regions",name:"general_wilayah",component:CG,meta:{title:"Data Wilayah"}}]},{path:"/demographics",component:wt,meta:{requiresAuth:!0},children:[{path:"religions",name:"demographics_agama",component:Pq,meta:{title:"Data Agama"}},{path:"blood-types",name:"demographics_golonganDarah",component:PH,meta:{title:"Data Golongan Darah"}},{path:"family-relationships",name:"demographics_hubunganKeluarga",component:PY,meta:{title:"Data Hubungan Keluarga"}},{path:"genders",name:"demographics_jenisKelamin",component:Pz,meta:{title:"Data Jenis Kelamin"}},{path:"occupations",name:"demographics_pekerjaan",component:PZ,meta:{title:"Data Pekerjaan"}},{path:"education-levels",name:"demographics_pendidikan",component:P0,meta:{title:"Data Pendidikan"}},{path:"birth-attendants",name:"demographics_penolongKelahiran",component:P1,meta:{title:"Data Penolong Kelahiran"}},{path:"birth-places",name:"demographics_tempatDilahirkan",component:P2,meta:{title:"Data Tempat Dilahirkan"}},{path:"martial-statuses",name:"demographics_statusPerkawinan",component:P3,meta:{title:"Data Status Perkawinan"}},{path:"group-categories",name:"demographics_kategoriKelompok",component:P5,meta:{title:"Data Kategori Kelompok"}}]},{path:"/finance",component:wt,meta:{requiresAuth:!0},children:[{path:"budget-sources",name:"keuangan_sumberAnggaran",component:P4,meta:{title:"Sumber Anggaran"}},{path:"account-codes",name:"keuangan_kodeRekening",component:P4,meta:{title:"Kode Rekening"}}]},{path:"/government",component:wt,meta:{requiresAuth:!0},children:[{path:"positions",name:"pemerintahan_jabatan",component:P8,meta:{title:"Jabatan"}},{path:"official-status",name:"pemerintahan_statusPerangkat",component:P6,meta:{title:"Status Perangkat"}}]},{path:"/bumdes",component:wt,meta:{requiresAuth:!0},children:[{path:"business-fields",name:"bumdes_bidangUsaha",component:P7,meta:{title:"Bidang Usaha"}},{path:"report-periods",name:"bumdes_periodeLaporan",component:P9,meta:{title:"Periode Laporan Usaha"}}]},{path:"/archives",component:wt,meta:{requiresAuth:!0},children:[{path:"incoming-letter-types",name:"dokumen_jenisSuratMasuk",component:waa,meta:{title:"Jenis Surat Masuk"}},{path:"outgoing-letter-types",name:"dokumen_jenisSuratKeluar",component:Tea,meta:{title:"Jenis Surat Keluar| Desa Online"}},{path:"regulation-types",name:"dokumen_jenisPeraturan",component:_ta,meta:{title:"Jenis Peraturan/Regulasi"}}]},{path:"/inventory",component:wt,meta:{requiresAuth:!0},children:[{path:"legal-status",name:"aset_statusHak",component:Nsa,meta:{title:"Status Hak"}},{path:"land-origins",name:"aset_asalUsulTanah",component:Wia,meta:{title:"Asal Usul Tanah"}},{path:"acquisition-procedures",name:"aset_prosedurPenguasaan",component:Gla,meta:{title:"Prosedur Penguasaan"}},{path:"acquisitions",name:"aset_perolehan",component:Gna,meta:{title:"Perolehan"}},{path:"conditions",name:"aset_kondisi",component:Goa,meta:{title:"Kondisi"}},{path:"multi-story-construction",name:"aset_kontuksiBertingkat",component:Yra,meta:{title:"Kontruksi Bertingkat"}},{path:"concrete-construction",name:"aset_kontruksiBeton",component:eda,meta:{title:"Kontruksi Beton"}},{path:"physical-status",name:"aset_keberadaanFisik",component:eua,meta:{title:"Keberadaan Fisik"}},{path:"item-categories",name:"aset_kategoriBarang",component:lma,meta:{title:"Kategori Barang"}}]}],oma=(0,m.aE)({history:(0,m.Bt)(),routes:nma});oma.beforeEach((a,e,t)=>{if(a.meta.title&&(document.title=a.meta.title),a.matched.some(a=>a.meta.requiresAuth)&&!localStorage.getItem("User"))return t("/auth");t()});var rma=oma,cma=JSON.parse('{"settings":{"layout_type":"ltr","layout":"Barcelona","sidebar_setting":"stroke-svg"},"color":{"layout_version":"light","primary_color":"#7366ff","secondary_color":"#f73164"}}');const dma={layout:cma,sidebarType:localStorage.getItem("SidebarType")||"default",boxlayout:!0,footer:"",svg:"stroke-svg",sidebar:"compact-sidebar1"},uma={footer:a=>a.footer,sidebar:a=>a.sidebar},mma={setFooter:(a,e)=>{a.footer=e.class},set:a=>{document.body.className=a.layout.color.mix_layout,document.body.setAttribute("main-theme-layout","compact-wrapper"),document.getElementsByTagName("html")[0].setAttribute("dir",a.layout.settings.layout_type);var e=localStorage.getItem("primary_color")||a.layout.color.primary_color,t=localStorage.getItem("secondary_color")||a.layout.color.secondary_color,s=localStorage.getItem("layoutVersion")||a.layout.color.layout_version;(e||t)&&(hma(e,t),s&&(document.body.className=s))},setLayoutType:(a,e)=>{document.body.classList.remove("rtl"),document.body.classList.remove("ltr"),document.body.classList.remove("boxed"),document.documentElement.removeAttribute("dir"),e.class&&document.body.setAttribute("class",e.class),console.log("payload is :>",e.class),e.class&&document.documentElement.setAttribute("dir",e.class),a.layout.settings.layout_type=e},setLayout:(a,e)=>{"box-layout"==document.body.className?document.body.className="box-layout "+e.class:document.body.className=e.class},setColorScheme:(a,e)=>{gma(a,e),a.primaryColor=e.primary,a.secondaryColor=e.secondary,a.layout.color.layout_version="light",localStorage.setItem("layoutVersion",a.layout.color.layout_version)},setColorDarkScheme:(a,e)=>{gma(a,e),a.layout.color.layout_version="dark-only",localStorage.setItem("layoutVersion",a.layout.color.layout_version)},setCustomizeSidebarType:(a,e)=>{localStorage.setItem("SidebarType",e)},setSvg(a,e){a.svg=e}},kma={set:a=>{a.commit("set")},setLayoutType:(a,e)=>{a.commit("setLayoutType",e)},setLayout:(a,e)=>{a.commit("setLayout",e)},setColorScheme:(a,e)=>{a.commit("setColorScheme",e)},setColorDarkScheme:(a,e)=>{a.commit("setColorDarkScheme",e)},setCustomizeSidebarType:(a,e)=>{a.commit("setCustomizeSidebarType",e)},setSvg(a,e){a.commit("setSvg",e)}};function hma(a,e){document.documentElement.style.setProperty("--theme-deafult",a),document.documentElement.style.setProperty("--theme-secondary",e)}function gma(a,e){hma(e.primary,e.secondary),localStorage.setItem("primary_color",e.primary),localStorage.setItem("secondary_color",e.secondary)}var pma={namespaced:!0,state:dma,getters:uma,actions:kma,mutations:mma},bma=JSON.parse('{"p":[{"title":"Error Page","design":"icon","type":"sub","active":false,"children":[{"path":"/error-400","title":"Error 400","type":"extTabLink"},{"path":"/error-401","title":"Error 401","type":"extTabLink"},{"path":"/error-403","title":"Error 403","type":"extTabLink"},{"path":"/error-404","title":"Error 404","type":"extTabLink"},{"path":"/error-500","title":"Error 500","type":"extTabLink"},{"path":"/error-503","title":"Error 503","type":"extTabLink"}]},{"title":"Authentication","design":"doted","type":"sub","active":false,"children":[{"path":"/auth/login","title":"Login Simple","type":"extTabLink"},{"path":"/authentication/login/one","title":"Login with Image","type":"extTabLink"},{"path":"/authentication/login/two","title":"Login with Image 2","type":"extTabLink"},{"path":"/authentication/login/validate","title":"Login with validation","type":"extTabLink"},{"path":"/auth/register","title":"Register Simple","type":"extTabLink"},{"path":"/authentication/register/image","title":"Register with Image","type":"extTabLink"},{"path":"/authentication/register/image2","title":"Register with image 2","type":"extTabLink"}]},{"title":"Usefull Pages","design":"dashed-links","type":"sub","active":false,"children":[{"path":"/pages/search","title":"Search Website","type":"extTabLink"},{"path":"/authentication/unlockuser","title":"Unlock User","type":"extTabLink"},{"path":"/authentication/forgetpassword","title":"Forget Password","type":"extTabLink"},{"path":"/authentication/resetpassword","title":"Reset Password","type":"extTabLink"},{"path":"/maintenance","title":"Maintenance","type":"extTabLink"}]},{"title":"Coming Soon","type":"sub","active":false,"children":[{"path":"/comingsoon/comingsoon-simple","title":"Coming Soon","icon":"file","type":"extTabLink"},{"path":"/comingsoon/comingsoon-image","title":"Coming Image","icon":"file","type":"extTabLink"},{"path":"/comingsoon/comingsoon-video","title":"Coming Video","icon":"image","type":"extTabLink"}]}]}');const fma={data:bt.data,megamenu:bma.p,searchData:[],togglesidebar:!0,activeoverlay:!1,searchOpen:!1,customizer:"",hideRightArrowRTL:!1,hideLeftArrowRTL:!0,hideRightArrow:!0,hideLeftArrow:!0,width:0,height:0,margin:0,menuWidth:0},Lma={},yma={opensidebar:a=>{a.togglesidebar=!a.togglesidebar,window.innerWidth<991?a.activeoverlay=!0:a.activeoverlay=!1},resizetoggle:a=>{window.innerWidth<1007?a.togglesidebar=!1:a.togglesidebar=!0},searchTerm:(a,e)=>{let t=[];var s=e.toLowerCase();a.data.filter(e=>{if(e.title){if(e.title.toLowerCase().includes(s)&&"link"===e.type&&t.push(e),!e.children)return!1;e.children.filter(a=>{if(a.title.toLowerCase().includes(s)&&"link"===a.type&&(a.icon=e.icon,t.push(a)),!a.children)return!1;a.children.filter(a=>{a.title.toLowerCase().includes(s)&&(a.icon=e.icon,t.push(a))})}),a.searchData=t}})},setBonusNavActive:(a,e)=>{e.active||a.megamenu.forEach(t=>{if(a.megamenu.includes(e)&&(t.active=!1),!t.children)return!1;t.children.forEach(a=>{t.children.includes(e)&&(a.active=!1)})}),e.active=!e.active},setNavActive:(a,e)=>{e.active||a.data.forEach(t=>{if(a.data.includes(e)&&(t.active=!1),!t.children)return!1;t.children.forEach(a=>{t.children.includes(e)&&(a.active=!1)})}),e.active=!e.active},setActiveRoute:(a,e)=>{a.data.filter(a=>{a!==e&&(a.active=!1),a.children&&a.children.includes(e)&&(e.active=!0,a.active=!0),a.children&&a.children.filter(t=>{t.children&&t.children.includes(e)&&(e.active=!0,a.active=!0,t.active=!0)})})}},vma={opensidebar:(a,e)=>{a.commit("opensidebar",e)},resizetoggle:(a,e)=>{a.commit("resizetoggle",e)},setBonusNavActive:(a,e)=>{a.commit("setBonusNavActive",e)},searchTerm:(a,e)=>{a.commit("searchTerm",e)},setNavActive:(a,e)=>{a.commit("setNavActive",e)},setActiveRoute:(a,e)=>{a.commit("setActiveRoute",e)}};var Cma={namespaced:!0,state:fma,getters:Lma,actions:vma,mutations:yma},Pma=(0,y.y$)({state:{langIcon:"",langLangauge:"",isActive:!1},getters:{langIcon:a=>a.langIcon,langLangauge:a=>a.langLangauge},mutations:{changeLang(a,e){localStorage.setItem("currentLanguage",e.id),localStorage.setItem("currentLanguageIcon",e.icon),a.langIcon=e.icon||"flag-icon-us",a.langLangauge=e.id||"EN"},change(a){a.isActive=!a.isActive}},actions:{setLang({commit:a},e){a("changeLang",e)}},modules:{layout:pma,menu:Cma}}),Ema=(t(9953),t(9930)),Dma=t(5931),Mma=JSON.parse('{"Dashboard":"Dashboard","Default":"Default","E-Commerce":"E-Commerce","Project":"Project","Project List":"Project List","Create New":"Create New","File Manager":"File Manager","Bookmarks":"Bookmarks","Contact":"Contact","Tasks":"Tasks","Todo":"Todo","Todo FireBase":"Todo FireBase","Widgets":"Widgets","General":"General","Chart":"Chart","Ui-Kits":"Ui-Kits","Avatars":"Avatars","Breadcrumb":"Breadcrumb","Grid":"Grid","Helper-Classes":"Helper-Classes","List":"List","Ribbons":"Ribbons","Shadow":"Shadow","Spinner":"Spinner","State-color":"State-color","Steps":"Steps","Tag and Pills":"Tag and Pills","Typography":"Typography","Bonus UI":"Bonus UI","Base":"Base","Accordion":"Accordion","Alert":"Alert","Carousel":"Carousel","Collapse":"Collapse","Datepicker":"Datepicker","Dropdown":"Dropdown","Modal":"Modal","Pagination":"Pagination","Popover":"Popover","Progressbar":"Progressbar","Rating":"Rating","Tabset":"Tabset","Timepicker":"Timepicker","Tooltip":"Tooltip","Typeahead":"Typeahead","Advance":"Advance","Drag and Drop":"Drag and Drop","Dropzone":"Dropzone","Image Cropper":"Image Cropper","Ngx Toastr":"Ngx Toastr","Owl-Carousel":"Owl-Carousel","Range Slider":"Range Slider","Scrollable":"Scrollable","Sticky":"Sticky","SweetAlert":"SweetAlert","Tour":"Tour","Upload":"Upload","Icons":"Icons","Flag icon":"Flag icon","Fontawesome Icon":"Fontawesome Icon","Ico Icon":"Ico Icon","Themify Icon":"Themify Icon","Feather Icon":"Feather Icon","Wheather Icon":"Wheather Icon","Simple line Icon":"Simple line Icon","Material Design Icon":"Material Design Icon","pe7 icon":"pe7 icon","Typicons icon":"Typicons icon","Ionic icon":"Ionic icon","Buttons":"Buttons","Default Style":"Default Style","Flat Style":"Flat Style","Edge Style":"Edge Style","Raised Style":"Raised Style","Button Group":"Button Group","Forms":"Forms","Form Controls":"Form Controls","Form Validation":"Form Validation","Base Inputs":"Base Inputs","Checkbox & Radio":"Checkbox & Radio","Input Groups":"Input Groups","Mega Options":"Mega Options","Form Default":"Form Default","Ngx Wizard":"Ngx Wizard","Tables":"Tables","Bootstrap Tables":"Bootstrap Tables","Basic Table":"Basic Table","Sizing Table":"Sizing Table","Border Table":"Border Table","Styling Table":"Styling Table","Ngx-Datatables":"Ngx-Datatables","Editing Table":"Editing Table","Filter Table":"Filter Table","Fullscreen Table":"Fullscreen Table","Paging Table":"Paging Table","Selection":"Selection","Smart Table":"Smart Table","Cards":"Cards","Basic Card":"Basic Card","Creative Card":"Creative Card","Tabbed Card":"Tabbed Card","Draggable Card":"Draggable Card","Timeline":"Timeline","Timeline 1":"Timeline 1","Timeline 2":"Timeline 2","Charts":"Charts","Google Chart":"Google Chart","Chartjs":"Chartjs","Chartist":"Chartist","Ngx-Chart":"Ngx-Chart","Map":"Map","Google Map":"Google Map","Leaflet Map":"Leaflet Map","Editor":"Editor","Users":"Users","Users Profile":"Users Profile","Users Edit":"Users Edit","Users Cards":"Users Cards","Calender":"Calender","Blog":"Blog","Blog Details":"Blog Details","Blog Single":"Blog Single","Email":"Email","Chat":"Chat","Social App":"Social App","Job-Search":"Job-Search","Card View":"Card View","List View":"List View","Job Detail":"Job Detail","Apply":"Apply","Learning":"Learning","Learning List":"Learning List","Detail Course":"Detail Course","FAQ":"FAQ","Knowledgebase":"Knowledgebase","Support Ticket":"Support Ticket","To-Do":"To-Do","Ecommerce":"Ecommerce","Product":"Product","Product page":"Product page","Product list":"Product list","Payment Details":"Payment Details","Invoice":"Invoice","Order History":"Order History","Pricing":"Pricing","Sample page":"Sample page","Search Pages":"Search Pages","Error Page":"Error Page","Error 400":"Error 400","Error 401":"Error 401","Error 403":"Error 403","Error 404":"Error 404","Error 500":"Error 500","Error 503":"Error 503","Authentication":"Authentication","Login Simple":"Login Simple","Login with Bg Image":"Login with Bg Image","Login with Bg video":"Login with Bg video","Register Simple":"Register Simple","Register with Bg Image":"Register with Bg Image","Register with Bg video":"Register with Bg video","Unlock User":"Unlock User","Forget Password":"Forget Password","Reset Password":"Reset Password","Coming Soon":"Coming Soon","Coming Simple":"Coming Simple","Coming with Bg Image":"Coming with Bg Image","Coming with Bg video":"Coming with Bg video","Maintenance":"Maintenance","Dashboards & Widgets.":"Dashboards & Widgets.","Applications":"Applications","Ready To Use Apps.":"Ready To Use Apps.","Components":"Components","UI Components & Elements.":"UI Components & Elements.","Forms & Table":"Forms & Table","Ready To Use Froms & Tables.":"Ready To Use Froms & Tables.","Miscellaneous":"Miscellaneous","Bouns Pages & Apps.":"Bouns Pages & Apps.","Gallery":"Gallery"}'),wma=JSON.parse('{"Dashboard":"painel de controle","Default":"Padrão","E-Commerce":"Comércio Eletrônico","Project":"Projeto","Widgets":"Widgets","General":"Geral","Chart":"gráfico","Project List":"Lista de Projetos","Create New":"Crie um novo","File Manager":"Gerenciador de arquivos","Bookmarks":"Favoritas","Contact":"Contato","Tasks":"Tarefas","Todo":"Façam","Todo FireBase":"Façam FireBase","Ui-kits":"Ui-kits","Avatars":"Avatares","Breadcrumb":"Breadcrumb","Grid":"Grade","Helper-Classes":"Classes Auxiliares","List":"Lista","Ribbons":"Fitas","Shadow":"Sombra","Spinner":"Girador","State-color":"Estado-cor","Steps":"Passos","Tag and Pills":"Tag e comprimidos","Typography":"Tipografia","Base":"Base","Accordion":"Acordeão","Alert":"Alerta","Carousel":"Carrossel","Collapse":"Colapso","Datepicker":"Datepicker","Dropdown":"Suspenso","Modal":"Modal","Pagination":"Paginação","Popover":"Popover","Progressbar":"Barra de progresso","Rating":"Avaliação","Tabset":"Tabset","Timepicker":"Timepicker","Tooltip":"Tooltip","Typeahead":"Typeahead","Advance":"Avançar","Drag and Drop":"Arraste e solte","Dropzone":"Ponto de largada","Image Cropper":"Cropper de imagem","Ngx Toastr":"Ngx Toastr","Owl-Carousel":"Carrossel da Coruja","Range Slider":"Faixa Deslizante","Scrollable":"Rolável","Sticky":"Pegajoso","SweetAlert":"SweetAlert","Tour":"Tour","Upload":"Envio","Icons":"Ícones","Flag icon":"Bandeira, ícone","Fontawesome Icon":"Ícone do Fontawesome","Ico Icon":"Ícone Ico","Themify Icon":"Themify Icon","Feather Icon":"Ícone de penas","Wheather Icon":"Se ícone","Simple line Icon":"Ícone de linha simples","Material Design Icon":"Ícone do Material Design","pe7 icon":"ícone pe7","Typicons icon":"Ícone de tipicons","Ionic icon":"Ícone iônico","Buttons":"Botões","Default Style":"Estilo Padrão","Flat Style":"Flat Style","Edge Style":"Estilo de borda","Raised Style":"Estilo levantado","Button Group":"Grupo de botões","Forms":"Formulários","Form Controls":"Controles de Formulário","Form Validation":"Validação de Formulário","Base Inputs":"Entradas Base","Checkbox & Radio":"Caixa de seleção e rádio","Input Groups":"Grupos de entrada","Mega Options":"Mega Opções","Form Default":"Padrão de formulário","Ngx Wizard":"Ngx Wizard","Tables":"Tabelas","Bootstrap Tables":"Tabelas de Bootstrap","Sizing Table":"Tabela de dimensionamento","Border Table":"Tabela de fronteira","Styling Table":"Tabela de denominação","Ngx-Datatables":"Ngx-Datatables","Basic Table":"Mesa Básica","Editing Table":"Tabela de Edição","Filter Table":"Tabela de filtro","Fullscreen Table":"Tabela de tela cheia","Paging Table":"Tabela de Paginação","Selection":"Seleção","Smart Table":"Mesa Inteligente","Cards":"Postais","Basic Card":"Cartão Básico","Creative Card":"Cartão Criativo","Tabbed Card":"Cartão com abas","Draggable Card":"Cartão Draggable","Timeline":"Timeline","Timeline 1":"Linha do tempo 1","Timeline 2":"Linha do tempo 2","Charts":"Gráficos","Google Chart":"Google Chart","Chartjs":"Chartjs","Chartist":"Cartista","ApexChart":"ApexChart","Ngx-Chart":"Gráfico Ngx","Map":"Mapa","Google Map":"Google Map","Leaflet Map":"Mapa do folheto","Editor":"editor","Users":"Comercial","Users Profile":"Perfil dos Usuários","Users Edit":"Usuários Editar","Users Cards":"Cartões de Usuários","Calender":"Calendário","Blog":"Blog","Blog Details":"Detalhes do Blog","Blog Single":"Único Blog","Email":"O email","Chat":"Bate-papo","Social App":"App Social","Job-Search":"Procura de emprego","Card View":"Visualizar cartão","List View":"Exibição de lista","Job Detail":"Detalhe do trabalho","Apply":"Aplique","Learning":"Aprendendo","Learning List":"Lista de aprendizado","Detail Course":"Curso Detalhado","FAQ":"Perguntas frequentes","Knowledgebase":"Base de Conhecimento","Support Ticket":"Bilhete de Suporte","To-Do":"Façam","Ecommerce":"Comércio eletrônico","Product":"produtos","Product page":"Página do produto","Product list":"Lista de produtos","Payment Details":"Detalhes do pagamento","Invoice":"Fatura","Order History":"Histórico de pedidos","Pricing":"Preços","Sample page":"Página de exemplo","Search Pages":"Páginas de pesquisa","Error Page":"Página de erro","Error 400":"Erro 400","Error 401":"Erro 401","Error 403":"Erro 403","Error 404":"Erro 404","Error 500":"Erro 500","Error 503":"Erro 503","Authentication":"Autenticação","Login Simple":"Login simples","Login with Bg Image":"Faça o login com a imagem Bg","Login with Bg video":"Entrar com vídeo Bg","Register Simple":"Cadastre-se simples","Register with Bg Image":"Registre-se com a imagem Bg","Register with Bg video":"Registre-se com vídeo Bg","Unlock User":"Desbloquear usuário","Forget Password":"Esqueceu a senha","Reset Password":"Redefinir Senha","Coming Soon":"Em breve","Coming Simple":"Chegando Simples","Coming with Bg Image":"Vindo com imagem Bg","Coming with Bg video":"Vindo com vídeo Bg","Maintenance":"Manutenção","Dashboards & Widgets.":"Painéis e widgets.","Applications":"Formulários","Ready To Use Apps.":"Aplicativos prontos para usar.","Components":"Componentes","UI Components & Elements.":"Componentes e elementos da interface do usuário.","Forms & Table":"Formulários e mesa","Ready To Use Froms & Tables.":"Pronto para usar des e tabelas.","Miscellaneous":"Diversas","Bouns Pages & Apps.":"Páginas e aplicativos de bouns.","Gallery":"Galeria","Bonus UI":"UI bônus"}'),Fma=JSON.parse('{"Dashboard":"Tableau de bord","Default":"Défaut","E-Commerce":"E-Commerce","Project":"Projet","Project List":"Liste des projets","Create New":"Créer un nouveau","File Manager":"Gestionnaire de fichiers","Bookmarks":"Favoris","Contact":"Contact","Tasks":"Tâches","Todo":"Faire","Todo FireBase":"Faire FireBase","Widgets":"Widgets","General":"général","Chart":"graphique","Ui-Kits":"Eléments d\'interface utilisateur","Avatars":"Avatars","Breadcrumb":"Miette de pain","Grid":"la grille","Helper-Classes":"Classes d\'assistants","List":"liste","Ribbons":"Rubans","Shadow":"Ombre","Spinner":"Fileur","State-color":"Couleur d\'état","Steps":"Pas","Tag and Pills":"Tag et pilules","Typography":"Typographie","Base":"Base","Accordion":"Accordéon","Alert":"Alerte","Carousel":"Carrousel","Collapse":"Effondrer","Datepicker":"Sélecteur de date","Dropdown":"Menu déroulant","Modal":"Modal","Pagination":"Pagination","Popover":"Popover","Progressbar":"Barre de progression","Rating":"Évaluation","Tabset":"Tabset","Timepicker":"Timepicker","Tooltip":"Info-bulle","Typeahead":"Tête de caractères","Advance":"Avance","Drag and Drop":"Glisser déposer","Dropzone":"Zone de largage","Image Cropper":"Cropper Image","Ngx Toastr":"Ngx Toastr","Owl-Carousel":"Hibou-carrousel","Range Slider":"Range Slider","Scrollable":"Scrollable","Sticky":"Gluant","SweetAlert":"SweetAlert","Tour":"Tour","Upload":"Télécharger","Icons":"Les icônes","Flag icon":"Icône de drapeau","Fontawesome Icon":"Icône Fontawesome","Ico Icon":"Ico Icon","Themify Icon":"Icône Themify","Feather Icon":"Icône de la plume","Wheather Icon":"Si icône","Simple line Icon":"Icône de ligne simple","Material Design Icon":"Icône de conception matérielle","pe7 icon":"icône pe7","Typicons icon":"Icône de typicons","Ionic icon":"Icône ionique","Buttons":"Boutons","Default Style":"Style par défaut","Flat Style":"Style plat","Edge Style":"Style de bord","Raised Style":"Style Surélevé","Button Group":"Groupe de boutons","Forms":"Formes","Form Controls":"Contrôles de formulaire","Form Validation":"Validation du formulaire","Base Inputs":"Entrées de base","Checkbox & Radio":"Case à cocher et radio","Input Groups":"Groupes d\'entrées","Mega Options":"Mega Options","Form Default":"Formulaire par défaut","Ngx Wizard":"Assistant Ngx","Tables":"les tables","Bootstrap Tables":"Tables Bootstrap","Sizing Table":"Tableau de dimensionnement","Border Table":"Table de frontière","Styling Table":"Table de coiffure","Ngx-Datatables":"Ngx-Datatables","Basic Table":"Table de base","Editing Table":"Tableau d\'édition","Filter Table":"Table de filtrage","Fullscreen Table":"Tableau plein écran","Paging Table":"Table de pagination","Selection":"Sélection","Smart Table":"Smart Table","Cards":"Cartes","Basic Card":"Carte de base","Creative Card":"Carte créative","Tabbed Card":"Carte à onglets","Draggable Card":"Carte glissable","Timeline":"Chronologie","Timeline 1":"Chronologie 1","Timeline 2":"Chronologie 2","Charts":"Graphiques","Google Chart":"Google Chart","Chartjs":"Chartjs","Chartist":"Chartiste","Ngx-Chart":"Ngx-Chart","Map":"Carte","Google Map":"Google Map","Leaflet Map":"Carte du dépliant","Editor":"Éditeur","Users":"Utilisateurs","Users Profile":"Profil des utilisateurs","Users Edit":"Utilisateurs Modifier","Users Cards":"Cartes Utilisateurs","Calender":"Calandre","Blog":"Blog","Blog Details":"Détails du blog","Blog Single":"Blog Single","Email":"Email","Chat":"Bavarder","Social App":"App sociale","Job-Search":"Recherche d\'emploi","Card View":"Vue carte","List View":"Voir la liste","Job Detail":"Détail du travail","Apply":"Appliquer","Learning":"Apprentissage","Learning List":"Liste d\'apprentissage","Detail Course":"Cours de détail","FAQ":"FAQ","Knowledgebase":"Base de connaissances","Support Ticket":"Ticket de support","To-Do":"Faire","Ecommerce":"Commerce électronique","Product":"Produit","Product page":"Page produit","Product list":"Liste de produits","Payment Details":"Détails de paiement","Invoice":"Facture d\'achat","Order History":"Historique des commandes","Pricing":"Prix","Sample page":"Page d\'exemple","Search Pages":"Pages de recherche","Error Page":"Page d\'erreur","Error 400":"Erreur 400","Error 401":"Erreur 401","Error 403":"Erreur 403","Error 404":"Erreur 404","Error 500":"Erreur 500","Error 503":"Erreur 503","Authentication":"Authentification","Login Simple":"Login Simple","Login with Bg Image":"Connexion avec Bg Image","Login with Bg video":"Connexion avec Bg video","Register Simple":"Inscrivez-vous simple","Register with Bg Image":"S\'inscrire avec Bg Image","Register with Bg video":"S\'inscrire avec Bg video","Unlock User":"Déverrouiller l\'utilisateur","Forget Password":"Mot de passe oublié","Reset Password":"réinitialiser le mot de passe","Coming Soon":"Arrive bientôt","Coming Simple":"Venir simple","Coming with Bg Image":"Venir avec Bg Image","Coming with Bg video":"Venir avec Bg video","Maintenance":"Entretien","Dashboards & Widgets.":"Tableaux de bord et widgets.","Applications":"Applications","Ready To Use Apps.":"Applications prêtes à l\'emploi.","Components":"Composantes","UI Components & Elements.":"Composants et éléments de l\'interface utilisateur.","Forms & Table":"Formulaires et tableau","Ready To Use Froms & Tables.":"À partir de et tableaux prêts à l\'emploi.","Miscellaneous":"Divers","Bouns Pages & Apps.":"Bouns Pages & Apps.","Gallery":"Galerie","Bonus UI":"Bonus UI"}'),Xma=JSON.parse('{"Dashboard":"Tablero","Default":"Defecto","E-Commerce":"Comercio electronico","Project":"Proyecto","Project List":"Lista de proyectos","Create New":"Crear nueva","File Manager":"Administradora de archivos","Bookmarks":"Marcadores","Contact":"Contacto","Tasks":"Tareas","Todo":"Que hacer","Todo FireBase":"Que hacer FireBase","Widgets":"Widgets","General":"general","Chart":"gráfico","Ui-Kits":"Ui-Kits","Avatars":"Avatares","Breadcrumb":"Migaja de pan","Grid":"Cuadrícula","Helper-Classes":"Clases de ayuda","List":"Lista","Ribbons":"Cintas","Shadow":"Sombra","Spinner":"Hilandero","State-color":"Color del estado","Steps":"Pasos","Tag and Pills":"Etiqueta y pastillas","Typography":"Tipografía","Base":"Base","Accordion":"Acordeón","Alert":"Alerta","Buttons":"Botones","Carousel":"Carrusel","Collapse":"Colapso","Datepicker":"Selector de fechas","Dropdown":"Desplegable","Modal":"Modal","Pagination":"Paginación","Popover":"Popover","Progressbar":"Barra de progreso","Rating":"Clasificación","Tabset":"Pastillas","Timepicker":"Timepicker","Tooltip":"Información sobre herramientas","Typeahead":"Typeahead","Advance":"Avanzar","Drag and Drop":"Arrastrar y soltar","Dropzone":"Zona de descenso","Image Cropper":"Recortadora de imagen","Ngx Toastr":"Ngx Toastr","Owl-Carousel":"Búho-carrusel","Range Slider":"Control deslizante de rango","Scrollable":"Desplazable","Sticky":"Pegajoso","SweetAlert":"SweetAlert","Tour":"Excursión","Upload":"Subir","Icons":"Iconos","Flag icon":"Icono de bandera","Fontawesome Icon":"Icono de Fontawesome","Ico Icon":"Icono de Ico","Themify Icon":"Icono de Themify","Feather Icon":"Icono de pluma","Wheather Icon":"Si icono","Simple line Icon":"Icono de línea simple","Material Design Icon":"Icono de diseño de materiales","pe7 icon":"icono de pe7","Typicons icon":"Icono de Typicons","Ionic icon":"Icono iónico","Default Style":"Estilo por Defecto","Flat Style":"Estilo plano","Edge Style":"Estilo de borde","Raised Style":"Estilo elevado","Button Group":"Grupo de botones","Forms":"Formas","Form Controls":"Controles de formulario","Form Validation":"Validación de formularios","Base Inputs":"Entradas base","Checkbox & Radio":"Casilla de verificación y radio","Input Groups":"Grupos de entrada","Mega Options":"Mega Opciones","Form Default":"Forma predeterminada","Ngx Wizard":"Ngx Wizard","Tables":"Mesas","Bootstrap Tables":"Mesas de Bootstrap","Sizing Table":"Tabla de tallas","Border Table":"Tabla de borde","Styling Table":"Mesa de peluquería","Ngx-Datatables":"Ngx-Datatable","Basic Table":"Tabla basica","Editing Table":"Mesa de edición","Filter Table":"Tabla de filtro","Fullscreen Table":"Tabla de pantalla completa","Paging Table":"Mesa de paginación","Selection":"Selección","Smart Table":"Mesa inteligente","Cards":"Tarjetas","Basic Card":"Tarjeta basica","Creative Card":"Tarjeta creativa","Tabbed Card":"Tarjeta con pestañas","Draggable Card":"Tarjeta Arrastrable","Timeline":"Línea de tiempo","Timeline 1":"Línea de tiempo 1","Timeline 2":"Línea de tiempo 2","Charts":"Cartas","Google Chart":"Google Chart","Chartjs":"Chartjs","Chartist":"Chartista","Ngx-Chart":"Ngx-gráfico","Map":"Mapa","Google Map":"Mapa de Google","Leaflet Map":"Mapa del folleto","Editor":"Editor","Users":"Usuarios","Users Profile":"Perfil de usuario","Users Edit":"Editar usuarios","Users Cards":"Tarjetas de usuario","Calender":"Calandrar","Blog":"Blog","Blog Details":"Detalles del blog","Blog Single":"Blog Single","Email":"Email","Chat":"Charla","Social App":"Aplicación social","Job-Search":"Búsqueda de trabajo","Card View":"Vista de tarjeta","List View":"Vista de la lista","Job Detail":"Detalles del trabajo","Apply":"Aplicar","Learning":"Aprendizaje","Learning List":"Lista de aprendizaje","Detail Course":"Curso de detalle","FAQ":"Preguntas más frecuentes","Knowledgebase":"Base de conocimientos","Support Ticket":"Boleto de soporte","To-Do":"Que hacer","Ecommerce":"Comercio electrónico","Product":"Producto","Product page":"Página del producto","Product list":"Lista de productos","Payment Details":"Detalles del pago","Invoice":"Factura","Order History":"Historial de pedidos","Pricing":"Precios","Sample page":"Página de Ejemplo","Search Pages":"Páginas de búsqueda","Error Page":"Página de error","Error 400":"Error 400","Error 401":"Error 401","Error 403":"Error 403","Error 404":"Error 404","Error 500":"Error 500","Error 503":"Error 503","Authentication":"Autenticación","Login Simple":"Inicio de sesión simple","Login with Bg Image":"Iniciar sesión con Bg Image","Login with Bg video":"Iniciar sesión con Bg video","Register Simple":"Registrarse Simple","Register with Bg Image":"Registrarse con Bg Image","Register with Bg video":"Registrarse en Bg video","Unlock User":"Desbloquear usuario","Forget Password":"Contraseña olvidada","Reset Password":"Restablecer la contraseña","Coming Soon":"Próximamente","Coming Simple":"Coming Simple","Coming with Bg Image":"Viniendo con Bg Image","Coming with Bg video":"Viniendo con Bg video","Maintenance":"Mantenimiento","Dashboards & Widgets.":"Cuadros de mando y widgets.","Applications":"Aplicaciones","Ready To Use Apps.":"Aplicaciones listas para usar.","Components":"Componentes","UI Components & Elements.":"Componentes y elementos de la interfaz de usuario.","Forms & Table":"Formularios y tabla","Ready To Use Froms & Tables.":"Listo para usar desde y tablas.","Miscellaneous":"Diversa","Bouns Pages & Apps.":"Bouns páginas y aplicaciones.","Gallery":"Galería","Bonus UI":"IU adicional"}');const xma="en",Tma=[{id:"en",name:"English",icon:"flag-icon-us",short:"(US)"},{id:"de",name:"Deutsch",icon:"flag-icon-de"},{id:"es",name:"Español",icon:"flag-icon-es"},{id:"fr",name:"Français",icon:"flag-icon-fr"},{id:"pt",name:"Português",icon:"flag-icon-pt",short:"(BR)"},{id:"cn",name:"简体中文",icon:"flag-icon-cn"},{id:"ae",name:"لعربية",icon:"flag-icon-ae",short:"(AE)"}],Sma={class:"page-title"},Bma={class:"row"},Ama={class:"col-6"},_ma={key:0},jma={class:"col-6"},Vma={class:"breadcrumb"},Ima={key:0,class:"breadcrumb-item"},Nma={class:"breadcrumb-item active"};function Uma(a,e,t,s,i,l){return(0,n.uX)(),(0,n.CE)("div",Sma,[(0,n.Lk)("div",Bma,[(0,n.Lk)("div",Ama,[t.main?((0,n.uX)(),(0,n.CE)("h3",_ma,(0,k.v_)(t.main),1)):(0,n.Q3)("",!0)]),(0,n.Lk)("div",jma,[(0,n.Lk)("ol",Vma,[e[0]||(e[0]=(0,n.Lk)("li",{class:"breadcrumb-item"},[(0,n.Lk)("a",{href:"/api/api"},[(0,n.Lk)("i",{class:"fa fa-home"})])],-1)),t.main?((0,n.uX)(),(0,n.CE)("li",Ima,(0,k.v_)(t.main),1)):(0,n.Q3)("",!0),(0,n.Lk)("li",Nma,(0,k.v_)(t.title),1)])])])])}var Rma={props:{title:{type:String,default:""},main:{type:String,default:""}}};const Qma=(0,r.A)(Rma,[["render",Uma]]);var Wma=Qma,Kma=t(5329),Oma=t(4084);t(7917);const $ma=localStorage.getItem("currentLanguage")&&Tma.filter(a=>a.id===localStorage.getItem("currentLanguage")).length>0?localStorage.getItem("currentLanguage"):xma,Gma=(0,Dma.hU)({locale:$ma,messages:{English:Mma,"Español":Xma,"Français":Fma,"Português":wma}});(0,l.Ef)(u).use(rma).use(Pma).use(Gma).use(Kma.A).use(Oma.Ay).use(ln.Ay).component(Ema.A.name,Ema.A).component("Breadcrumbs",Wma).mount("#app")}},e={};function t(s){var i=e[s];if(void 0!==i)return i.exports;var l=e[s]={exports:{}};return a[s].call(l.exports,l,l.exports,t),l.exports}t.m=a,function(){var a=[];t.O=function(e,s,i,l){if(!s){var n=1/0;for(d=0;d<a.length;d++){s=a[d][0],i=a[d][1],l=a[d][2];for(var o=!0,r=0;r<s.length;r++)(!1&l||n>=l)&&Object.keys(t.O).every(function(a){return t.O[a](s[r])})?s.splice(r--,1):(o=!1,l<n&&(n=l));if(o){a.splice(d--,1);var c=i();void 0!==c&&(e=c)}}return e}l=l||0;for(var d=a.length;d>0&&a[d-1][2]>l;d--)a[d]=a[d-1];a[d]=[s,i,l]}}(),function(){t.n=function(a){var e=a&&a.__esModule?function(){return a["default"]}:function(){return a};return t.d(e,{a:e}),e}}(),function(){t.d=function(a,e){for(var s in e)t.o(e,s)&&!t.o(a,s)&&Object.defineProperty(a,s,{enumerable:!0,get:e[s]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(a){if("object"===typeof window)return window}}()}(),function(){t.o=function(a,e){return Object.prototype.hasOwnProperty.call(a,e)}}(),function(){t.r=function(a){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})}}(),function(){t.p=""}(),function(){var a={524:0};t.O.j=function(e){return 0===a[e]};var e=function(e,s){var i,l,n=s[0],o=s[1],r=s[2],c=0;if(n.some(function(e){return 0!==a[e]})){for(i in o)t.o(o,i)&&(t.m[i]=o[i]);if(r)var d=r(t)}for(e&&e(s);c<n.length;c++)l=n[c],t.o(a,l)&&a[l]&&a[l][0](),a[l]=0;return t.O(d)},s=self["webpackChunkstarter_kit"]=self["webpackChunkstarter_kit"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=t.O(void 0,[504],function(){return t(7162)});s=t.O(s)})();
//# sourceMappingURL=app.2dbc7d7a.js.map